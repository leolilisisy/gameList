window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ABTools:[function(e,t,n){"use strict";cc._RF.push(t,"5b27fRQHdFE+5oKkBxHlYhG","ABTools");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKTools"),a=o("DataMgr"),s=o("SDKEnums"),c=o("OnlineMgr"),u=o("Enum");function l(){}l.prototype.init=function(){this.isSupported=this.isSupportWxAB(),this.isSupported,this.abData={}},Object.defineProperty(l.prototype,"isGroupA",{get:function(){return a.DataMgr.UserBase.ID%2==1},enumerable:!0,configurable:!0}),Object.defineProperty(l,"IsStarCost",{get:function(){return!l.isFuncABTest(s.OnlineKeys.star_cost_abtest,0)},enumerable:!0,configurable:!0}),Object.defineProperty(l,"IsStory",{get:function(){return!l.isFuncABTest(s.OnlineKeys.story_abtest,0)},enumerable:!0,configurable:!0}),l.isFuncABTest=function(e,t){return void 0===t&&(t=0),!(0===(t=c.OnlineMgr.getInt(e,t))||2!==t&&a.DataMgr.UserBase.ID%2)},l.prototype.isSupportWxAB=function(){return"object"==typeof wx&&PCSDK.wxApi.canIUse("2.14.4")},l.prototype.getWxTestBoolean=function(e,t,n){return this.isSupported?void 0===(e=this.abData[e])?t.call(n):"0"!=e&&("2"==e||t.call(n)):t.call(n)},l.prototype.getWxTestArray=function(e,t,n){if(!this.isSupported)return t.call(n);var o=this.abData[e];return e=(o||"").split("_"),void 0===o||"0"!=e[0]&&"2"!=e[0]?t.call(n):+e[1]},l.prototype.getWxTestArrays=function(e,t,n){if(!this.isSupported)return t.call(n);var o=this.abData[e];return e=(o||"").split("_"),void 0===o?t.call(n):"0"==e[0]?e.slice(1).map(function(e){return+e}):"2"==e[0]?e.slice(1).map(function(e){return+e}):t.call(n)},Object.defineProperty(l.prototype,"wxDailyTaskGoal",{get:function(){return this.getWxTestArrays("dt_goal_abtest",this.qzzDailyTaskGoal,this)},enumerable:!0,configurable:!0}),l.prototype.qzzDailyTaskGoal=function(){var e=r.default.getParamsObj(s.OnlineKeys.dt_goal_abtest,[0,[100,200,300],[80,240,360]]);return 0==e[0]||1==e[0]&&this.isGroupA?e[1]:e[2]},Object.defineProperty(l.prototype,"wxInitHp",{get:function(){return this.getWxTestArray("energy_newer_abtest",this.qzzInitHp,this)},enumerable:!0,configurable:!0}),l.prototype.qzzInitHp=function(){var e=r.default.getParamsObj(s.OnlineKeys.ExchangeOpen,[0,30,20]);return 0==e[0]||1==e[0]&&this.isGroupA?e[1]:e[2]},Object.defineProperty(l.prototype,"wxDaliyTask",{get:function(){return this.getWxTestBoolean("dt_open_abtest",this.qzzDaliyTask,this)},enumerable:!0,configurable:!0}),l.prototype.qzzDaliyTask=function(){return l.isFuncABTest(s.OnlineKeys.dt_open_abtest,2)},Object.defineProperty(l.prototype,"wxTwoDragonOpen",{get:function(){return this.getWxTestBoolean("two_dragon_open",this.qzzTwoDragonOpen,this)},enumerable:!0,configurable:!0}),l.prototype.qzzTwoDragonOpen=function(){return l.isFuncABTest(s.OnlineKeys.two_dragon_open,0)},Object.defineProperty(l.prototype,"wxOpenChestLv",{get:function(){return this.getWxTestArray("dt_start_abtest",this.qzzOpenChestLv,this)},enumerable:!0,configurable:!0}),l.prototype.qzzOpenChestLv=function(){var e=r.default.getParamsObj(s.OnlineKeys.dt_start_abtest,[0,12,5]);return 0==e[0]||1==e[0]&&this.isGroupA?e[1]:e[2]},Object.defineProperty(l.prototype,"wxDailyTaskReward",{get:function(){return!this.getWxTestBoolean("dt_reward_abtest",this.qzzDailyTaskReward,this)},enumerable:!0,configurable:!0}),l.prototype.qzzDailyTaskReward=function(){return l.isFuncABTest(s.OnlineKeys.dt_reward_abtest,1)},Object.defineProperty(l.prototype,"wxCoolAudoAB",{get:function(){return this.getWxTestBoolean("voice_pop_abtest",this.qzzCoolAudoAB,this)},enumerable:!0,configurable:!0}),l.prototype.qzzCoolAudoAB=function(){return l.isFuncABTest(s.OnlineKeys.voice_of_good_pop_abtest,0)},Object.defineProperty(l.prototype,"wxFailAB",{get:function(){return this.getWxTestBoolean("fail2_add_ABtest",this.qzzFailAB,this)},enumerable:!0,configurable:!0}),l.prototype.qzzFailAB=function(){return l.isFuncABTest(s.OnlineKeys.fail2_add_bubble_ABtest,0)},Object.defineProperty(l.prototype,"wxQuitGamePopup",{get:function(){return this.getWxTestBoolean("dt_quit_abtest",this.qzzQuitGamePopup,this)},enumerable:!0,configurable:!0}),l.prototype.qzzQuitGamePopup=function(){return l.isFuncABTest(s.OnlineKeys.dt_quit_abtest,2)},Object.defineProperty(l.prototype,"wxRedPacketPopup",{get:function(){return this.getWxTestBoolean("rd1_banner_abtest",this.RedPacketPopup,this)},enumerable:!0,configurable:!0}),l.prototype.RedPacketPopup=function(){return l.isFuncABTest(s.OnlineKeys.redpacketbanner,0)},Object.defineProperty(l.prototype,"wxGiveUpPopup",{get:function(){return this.getWxTestBoolean("dt_give_up_abtest",this.qzzGiveUpPopup,this)},enumerable:!0,configurable:!0}),l.prototype.qzzGiveUpPopup=function(){return l.isFuncABTest(s.OnlineKeys.dt_give_up_abtest,2)},Object.defineProperty(l.prototype,"wxABlv",{get:function(){return this.qzzABlv()},enumerable:!0,configurable:!0}),l.prototype.qzzABlv=function(){var e=c.OnlineMgr.getInt(s.OnlineKeys.level_abtest,0);return 0===e?u.LvGroup.A:2===e?u.LvGroup.B:3===e?u.LvGroup.C:(e=a.DataMgr.UserBase.ID)%3==0?u.LvGroup.A:e%3==1?u.LvGroup.B:u.LvGroup.C},Object.defineProperty(l.prototype,"wxSeedAB",{get:function(){return this.getWxTestBoolean("seed_abtest1",this.seedAB,this)},enumerable:!0,configurable:!0}),l.prototype.seedAB=function(){return l.isFuncABTest(s.OnlineKeys.seed_abtest0,2)},Object.defineProperty(l,"I",{get:function(){return this._instance||(this._instance=new l)},enumerable:!0,configurable:!0}),l._instance=null,o=l,i.default=o,cc._RF.pop()},{}],ADCell2:[function(e,t,n){"use strict";cc._RF.push(t,"b258el9KelDNJM/Fr3skUZi","ADCell2");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l=o("ADMgr"),d=o("SDKAnalytics"),p=o("AudioMgr");function h(){var e=u.call(this)||this;return e.imgIcon=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(h,u=cc.Component),h.prototype.init=function(e,t){this.data=t,this.location=e,d.default.addExposures(this.location,t),this.node.getChildByName("name").getComponent(cc.Label).string=t.banner_name,l.ADMgr.renderAnimAd(this.imgIcon,t)},h.prototype.onGame=function(){var e=this.data;e&&(p.AudioMgr.button(),d.default.reqBannerClick(this.location,s({},e)))},c([i(cc.Sprite)],h.prototype,"imgIcon",void 0),o=c([o],h),r.default=o,cc._RF.pop()},{}],ADCell:[function(e,t,n){"use strict";cc._RF.push(t,"30e9c8dyfFI9YoUY3syIKji","ADCell");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l=o("ADMgr"),d=o("SDKAnalytics"),p=o("AudioMgr");function h(){var e=u.call(this)||this;return e.imgIcon=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(h,u=cc.Component),h.prototype.init=function(e,t){this.data=t,this.location=e,d.default.addExposures(this.location,t),l.ADMgr.renderAnimAd(this.imgIcon,t)},h.prototype.onGame=function(){var e=this.data;e&&(p.AudioMgr.button(),d.default.reqBannerClick(this.location,s({},e)))},c([i(cc.Sprite)],h.prototype,"imgIcon",void 0),o=c([o],h),r.default=o,cc._RF.pop()},{}],ADCrossItem:[function(e,t,n){"use strict";cc._RF.push(t,"51852AncCJN2pFD8PT4jBoJ","ADCrossItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADMgr"),h=o("SDKTools"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("PlatformUtils"),_=o("SDKEnums");function y(){var e=d.call(this)||this;return e.imgIcon=null,e.ratio=1,e.count=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(y,d=cc.Component),y.prototype.onLoad=function(){},y.prototype.init=function(e,t){return this.location=e,this.ratio=t,this},y.prototype.play=function(e){this.isOpen&&(e&&(this.count=0),this.node.active=!0,this.doRunAction())},y.prototype.stop=function(){this.isOpen&&this.node.stopAllActions()},y.prototype.refresh=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?(e=e.pop(),this.data=e,this.setData(e)):this.retList().then(function(e){return e&&t.refresh()}))},Object.defineProperty(y.prototype,"isOpen",{get:function(){return g.default.isTecent&&h.default.IsCross},enumerable:!0,configurable:!0}),y.prototype.doRunAction=function(){this.node.stopAllActions(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.6*this.ratio).easing(cc.easeBackIn()),cc.scaleTo(.5,+this.ratio).easing(cc.easeElasticOut(3)),cc.rotateTo(1/60,5.2),cc.rotateTo(.25,30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,-30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.delayTime(28),cc.callFunc(this.doRefresh,this))))},y.prototype.doRefresh=function(){0!==this.count&&this.refresh(),this.count++},y.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){p.ADMgr.getList(_.SDKBannerType.TYPE_CROSS).then(function(n){e.dataList=n||[],n&&0!==n.length?t(1):(e.node.active=!1,t(0))})})]})})},y.prototype.setData=function(e){m.default.addExposures(this.location,e),p.ADMgr.renderAnimAd(this.imgIcon,e)},y.prototype.onGame=function(){f.AudioMgr.button(),this.node.stopAllActions(),this.node.rotation=0,this.node.scale=.6*this.ratio,this.node.runAction(cc.sequence(cc.scaleTo(.5,+this.ratio).easing(cc.easeElasticOut(3)),cc.rotateTo(.25,30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,-30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.delayTime(28),cc.callFunc(this.doRunAction,this))),m.default.reqBannerClick(this.location,s({},this.data)),this.refresh()},c([i(cc.Sprite)],y.prototype,"imgIcon",void 0),o=c([o],y),r.default=o,cc._RF.pop()},{}],ADData:[function(e,t,n){"use strict";cc._RF.push(t,"ef8774p/dFAh4/66FdroliC","ADData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],ADGrid:[function(e,t,n){"use strict";cc._RF.push(t,"37614W0TC1CU6gnCi4U5rbY","ADGrid");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADMgr"),h=o("SDKTools"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("PlatformUtils"),_=o("SDKEnums"),y=o("OnlineMgr");function v(){var e=d.call(this)||this;return e.imgIcons=[],e.imgIcon=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(v,d=cc.Component),v.prototype.init=function(e,t){return void 0===t&&(t=1),this.location=e,this.style=t,this},v.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.imgIcons.forEach(function(e){return e.node.active=!1})):(this.refreshAdLike(),this.imgIcons.forEach(function(e){return e.node.active=!0})),this.addEvent())},v.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},v.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},v.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},v.prototype.refreshAdLike=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderAdLikeList():this.retList().then(function(e){return e&&t.renderAdLikeList()}))},v.prototype.renderAdLikeList=function(){var e=this;this.node.active=!0,this.dataList.forEach(function(t,n){return e.setData(t,e.imgIcons[n])})},v.prototype.refreshAdBanner=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?(e=e.pop(),this.data=e,this.setData(e,this.imgIcon)):this.retList().then(function(e){return e&&t.refreshAdBanner()}))},Object.defineProperty(v.prototype,"isOpen",{get:function(){return g.default.isWx&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),v.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){p.ADMgr.reqList(_.SDKBannerType.TYPE_GRID).then(function(n){n=n.banner_list||[],(e.dataList=n)&&0!==n.length?t(1):(e.node.active=!1,t(0))})})]})})},v.prototype.setData=function(e,t){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,e),p.ADMgr.renderAnimAd(t,e)},v.prototype.onGame=function(e,t){(t=this.dataList[+t])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)))},v.prototype.onBannerGame=function(){var e=this.data;e&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)),this.refreshAdBanner())},v.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([i(cc.Sprite)],v.prototype,"imgIcons",void 0),c([i(cc.Sprite)],v.prototype,"imgIcon",void 0),o=c([o],v),r.default=o,cc._RF.pop()},{}],ADLike2:[function(e,t,n){"use strict";cc._RF.push(t,"f4b47J98QdEtYErRQmuoDuk","ADLike2");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADMgr"),h=o("SDKTools"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("PlatformUtils"),_=o("SDKEnums"),y=o("OnlineMgr"),v=o("ADCell");function b(){var e=d.call(this)||this;return e.imgIcon=null,e.scrollview=null,e.scrollitem=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(b,d=cc.Component),b.prototype.init=function(e,t){return void 0===t&&(t=1),this.location=e,this.style=t,this},b.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),cc.error("show ad22222"),this.scrollview.node.active=!0),this.addEvent())},b.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},b.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},b.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},b.prototype.refreshAdLike=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderAdLikeList():this.retList().then(function(e){return e&&t.renderAdLikeList()}))},b.prototype.renderAdLikeList=function(){var e=this;this.node.active=!0,this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(t){var n=cc.instantiate(e.scrollitem);n.getComponent(v.default).init(e.location,t),n.parent=e.scrollview.content})},b.prototype.refreshAdBanner=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?(e=e.pop(),this.data=e,this.setData(e,this.imgIcon)):this.retList().then(function(e){return e&&t.refreshAdBanner()}))},Object.defineProperty(b.prototype,"isOpen",{get:function(){return g.default.isWx&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),b.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){p.ADMgr.reqList(_.SDKBannerType.TYPE_CROSS).then(function(n){n=n.banner_list||[],(e.dataList=n)&&0!==n.length?t(1):(e.node.active=!1,t(0))})})]})})},b.prototype.setData=function(e,t){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,e),p.ADMgr.renderAnimAd(t,e)},b.prototype.onGame=function(e,t){(t=this.dataList[+t])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)))},b.prototype.onBannerGame=function(){var e=this.data;e&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)),this.refreshAdBanner())},b.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([i(cc.Sprite)],b.prototype,"imgIcon",void 0),c([i(cc.ScrollView)],b.prototype,"scrollview",void 0),c([i(cc.Prefab)],b.prototype,"scrollitem",void 0),o=c([o],b),r.default=o,cc._RF.pop()},{}],ADLikeGrid:[function(e,t,n){"use strict";cc._RF.push(t,"6bed24DfWhLuKrL78CxEglQ","ADLikeGrid");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADMgr"),h=o("SDKTools"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("PlatformUtils"),_=o("SDKEnums"),y=o("OnlineMgr"),v=o("ADCell2");function b(){var e=d.call(this)||this;return e.imgIcon=null,e.scrollview=null,e.scrollitem=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(b,d=cc.Component),b.prototype.init=function(e,t){return void 0===t&&(t=1),this.location=e,this.style=t,this},b.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),cc.error("show ad3333"),this.scrollview.node.active=!0),this.addEvent())},b.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},b.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},b.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},b.prototype.refreshAdLike=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderAdLikeList():this.retList().then(function(e){return e&&t.renderAdLikeList()}))},b.prototype.renderAdLikeList=function(){var e=this;this.node.active=!0,this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(t){var n=cc.instantiate(e.scrollitem);n.getComponent(v.default).init(e.location,t),n.parent=e.scrollview.content})},b.prototype.refreshAdBanner=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?(e=e.pop(),this.data=e,this.setData(e,this.imgIcon)):this.retList().then(function(e){return e&&t.refreshAdBanner()}))},Object.defineProperty(b.prototype,"isOpen",{get:function(){return g.default.isWx&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),b.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){p.ADMgr.reqList(_.SDKBannerType.TYPE_LIST).then(function(n){n=n.banner_list||[],(e.dataList=n)&&0!==n.length?t(1):(e.node.active=!1,t(0))})})]})})},b.prototype.setData=function(e,t){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,e),p.ADMgr.renderAnimAd(t,e)},b.prototype.onGame=function(e,t){(t=this.dataList[+t])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)))},b.prototype.onBannerGame=function(){var e=this.data;e&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)),this.refreshAdBanner())},b.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([i(cc.Sprite)],b.prototype,"imgIcon",void 0),c([i(cc.ScrollView)],b.prototype,"scrollview",void 0),c([i(cc.Prefab)],b.prototype,"scrollitem",void 0),o=c([o],b),r.default=o,cc._RF.pop()},{}],ADLike:[function(e,t,n){"use strict";cc._RF.push(t,"91648LEJ39O547NKdnugYZh","ADLike");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADCell"),h=o("ADMgr"),f=o("SDKTools"),m=o("Enum"),g=o("AudioMgr"),_=o("SDKAnalytics"),y=o("OnlineMgr"),v=o("PlatformUtils"),b=o("SDKEnums");function S(){var e=d.call(this)||this;return e.imgIcon=null,e.scrollview=null,e.scrollitem=null,e.adtype=b.SDKBannerType.TYPE_LIKE,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,d=cc.Component),S.prototype.init=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=b.SDKBannerType.TYPE_LIKE),this.location=e,this.style=t,this.adtype=n,this},S.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),this.scrollview.node.active=!0),this.addEvent())},S.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1,this.scrollview.node.active=!1)},S.prototype.setOffset=function(e){this.node.y=e-250,this.offsetY=e},S.prototype.animWith=function(e){var t,n,o=this;switch(e){case m.ComAction.Init:return t=this.offsetY-250,this.node.y=t,Promise.resolve();case m.ComAction.Enter:return new Promise(function(e){t=o.offsetY-250,n=o.offsetY,o.node.y=t,cc.tween(o.node).stop(),cc.tween(o.node).to(20/60,{y:n}).call(function(){return e()}).start()});case m.ComAction.Out:return new Promise(function(e){t=o.offsetY,n=o.offsetY-250,o.node.y=t,cc.tween(o.node).stop(),cc.tween(o.node).to(20/60,{y:n}).call(function(){return e()}).start()})}},S.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},S.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},S.prototype.refreshAdLike=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderAdLikeList():this.retList().then(function(e){return e&&t.renderAdLikeList()}))},S.prototype.renderAdLikeList=function(){var e=this;this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(t){var n=cc.instantiate(e.scrollitem);n.getComponent(p.default).init(e.location,t),n.parent=e.scrollview.content})},S.prototype.refreshAdBanner=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?(e=e.pop(),this.data=e,this.setData(e,this.imgIcon)):this.retList().then(function(e){return e&&t.refreshAdBanner()}))},Object.defineProperty(S.prototype,"isOpen",{get:function(){return v.default.isWx&&f.default.IsGuessLike},enumerable:!0,configurable:!0}),S.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){h.ADMgr.reqList(e.adtype).then(function(n){n=n.banner_list||[],(e.dataList=n)&&0!==n.length?t(1):(e.node.active=!1,t(0))})})]})})},S.prototype.setData=function(e,t){this.isLoaded=!0,this.node.active=!0,_.default.addExposures(this.location,e),h.ADMgr.renderAnimAd(t,e)},S.prototype.onGame=function(e,t){(t=this.dataList[+t])&&(g.AudioMgr.button(),_.default.reqBannerClick(this.location,s({},t)))},S.prototype.onBannerGame=function(){var e=this.data;e&&(g.AudioMgr.button(),_.default.reqBannerClick(this.location,s({},e)),this.refreshAdBanner())},S.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([i(cc.Sprite)],S.prototype,"imgIcon",void 0),c([i(cc.ScrollView)],S.prototype,"scrollview",void 0),c([i(cc.Prefab)],S.prototype,"scrollitem",void 0),o=c([o],S),r.default=o,cc._RF.pop()},{}],ADMgr:[function(e,t,n){"use strict";cc._RF.push(t,"efc74R2/tBFmbHWEKUUJsT2","ADMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("ArrayUtils"),a=o("EventMgr"),s=o("SDKAnalytics"),c=o("EventEnum"),u=o("SDKEnums"),l=o("Action"),d=o("LoadPlist");function p(){this.adShowList=[],this.adLessList=[],this.animFrames={}}p.prototype.getList=function(e){var t=this;return void 0===e&&(e=u.SDKBannerType.TYPE_LIKE),new Promise(function(n){t.adShowList.length?n(t.adShowList.slice()):t.reqList(e).then(function(e){e=e.banner_list||[],e=r.default.shuffle(e),t.adShowList=e.slice(0),t.adLessList=e.slice(4),n(t.adShowList.slice())})})},p.prototype.update=function(e){var t;"number"!=typeof e||(t=this.adLessList.shift())&&(this.adShowList[e]=t,a.EventMgr.emit(c.EventEnum.SDKADUpdate,{index:e,data:this.adShowList.slice()}))},p.prototype.renderAnimAd=function(e,t){var n=this,o=t.banner_icon,i=t.banner_bone,r=t.banner_bone_info;return new Promise(function(t){var a,s,c,u,l,p;i+""=="1"&&r?(a=r.banner_bone_img,s=r.banner_bone_sk,(c=n.animFrames[s])&&c.length?n.playAnimFrames(e,c,t):(u=s.substring(0,s.lastIndexOf("/")),l=s.substring(s.lastIndexOf("/")+1),p=a.substring(a.lastIndexOf("/")+1),d.default.I.load(u,l,p,function(o,i){!o&&i&&(c=i.getSpriteFrames(),n.animFrames[s]=c,n.playAnimFrames(e,c,t))}))):(p=o.indexOf(".jpg")||o.indexOf(".jpeg")?"jpg":"png",cc.loader.load({url:o,type:p},function(t,n){!t&&cc.isValid(e)&&(e.spriteFrame=new cc.SpriteFrame(n))}),t(null))})},p.prototype.playAnimFrames=function(e,t,n){if(!cc.isValid(e))return n(null);var o=(o=e.getComponent(cc.Animation))||e.addComponent(cc.Animation);l.default.stopAnim(e.node,"anim_001"),e=t[t.length-1],t=t.concat([e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]),(t=cc.AnimationClip.createWithSpriteFrames(t,t.length)).name="anim_001",t.speed=.3,t.sample=30,t.wrapMode=cc.WrapMode.Loop,o.addClip(t),o.play("anim_001"),n(o)},p.prototype.reqList=function(e){return s.default.reqBannerList(e)},Object.defineProperty(p,"I",{get:function(){return this._instance||(this._instance=new p)},enumerable:!0,configurable:!0}),p._instance=null,o=p,i.default=o,i.ADMgr=o.I,cc._RF.pop()},{}],ADSide:[function(e,t,n){"use strict";cc._RF.push(t,"63d32GlVGhPxa4bQAtY5oB4","ADSide");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("ADMgr"),p=o("SDKTools"),h=o("PlatformUtils"),f=o("SDKEnums"),m=o("PoolMgr"),g=o("ADCell");function _(){var e=l.call(this)||this;return e.nodeLeft=null,e.nodeRight=null,e.adPrefab=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(_,l=cc.Component),_.prototype.init=function(e,t){return void 0===t&&(t=2),this.showNum=t,this.location=e,this},_.prototype.show=function(){this.isOpen&&(this.refresh(),this.addEvent())},_.prototype.hide=function(){this.isOpen&&this.removeEvent()},_.prototype.addEvent=function(){},_.prototype.removeEvent=function(){},_.prototype.refresh=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderList():this.retList().then(function(e){return e&&t.renderList()}))},_.prototype.renderList=function(){var e=this;this.dataList.slice(0,this.showNum).forEach(function(t,n){return e.setData(t,n)})},Object.defineProperty(_.prototype,"isOpen",{get:function(){return h.default.isTecent&&p.default.IsGuessLike},enumerable:!0,configurable:!0}),_.prototype.retList=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return[2,new Promise(function(t){d.ADMgr.reqList(f.SDKBannerType.TYPE_LIKE).then(function(n){n=n.banner_list||[],e.dataList=n,t(n&&0!==n.length?1:0)})})]})})},_.prototype.setData=function(e,t){this.isLoaded=!0,t=t%2==0?this.nodeRight:this.nodeLeft,m.PoolMgr.getPrefab(this.adPrefab,t).getComponent(g.default).init(this.location,e)},s([i(cc.Node)],_.prototype,"nodeLeft",void 0),s([i(cc.Node)],_.prototype,"nodeRight",void 0),s([i(cc.Prefab)],_.prototype,"adPrefab",void 0),o=s([o],_),r.default=o,cc._RF.pop()},{}],ADSmallLike:[function(e,t,n){"use strict";cc._RF.push(t,"babef2yBkhPWLnEjUBnkPP0","ADSmallLike");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADMgr"),h=o("SDKTools"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("PlatformUtils"),_=o("SDKEnums");function y(){var e=d.call(this)||this;return e.imgIcons=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(y,d=cc.Component),y.prototype.init=function(e){return this.location=e,this},y.prototype.show=function(){this.isOpen&&(this.node.active=!0,this.refresh(),this.addEvent())},y.prototype.hide=function(){this.isOpen&&this.removeEvent()},y.prototype.addEvent=function(){},y.prototype.removeEvent=function(){},y.prototype.refresh=function(){var e,t=this;this.isOpen&&((e=this.dataList)&&e.length?this.renderList():this.retList().then(function(e){return e&&t.renderList()}))},y.prototype.renderList=function(){var e=this;this.dataList.forEach(function(t,n){return e.setData(t,n)})},Object.defineProperty(y.prototype,"isOpen",{get:function(){return g.default.isTecent&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),y.prototype.retList=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,new Promise(function(t){p.ADMgr.reqList(_.SDKBannerType.TYPE_LIKE).then(function(n){n=n.banner_list||[],e.dataList=n,t(n&&0!==n.length?1:0)})})]})})},y.prototype.setData=function(e,t){this.isLoaded=!0,m.default.addExposures(this.location,e),p.ADMgr.renderAnimAd(this.imgIcons[t],e)},y.prototype.onGame=function(e,t){(t=this.dataList[+t])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)))},c([i(cc.Sprite)],y.prototype,"imgIcons",void 0),o=c([o],y),r.default=o,cc._RF.pop()},{}],Action:[function(e,t,n){"use strict";cc._RF.push(t,"1e7f7mRoHBLWK/umEgxmUr9","Action");var o=e,i=n,r=__AWAITER__,a=__GENERATOR__;Object.defineProperty(i,"__esModule",{value:!0});var s=o("Water"),c=o("StringUtils");function u(){}u.stopAnim=function(e,t){return new Promise(function(n){if(!cc.isValid(e))return n(null);var o=e.getComponent(cc.Animation);if(!o)return n(null);var i=o.play(t,0);return o.sample(t),o.stop(),n(i)})},u.playAnim=function(e,t,n){return void 0===n&&(n=0),this.playWithNode(e,t,!1,n)},u.playAddAnim=function(e,t,n){return void 0===n&&(n=0),this.playWithNode(e,t,!0,n)},u.playWithNode=function(e,t,n,o){return void 0===o&&(o=0),new Promise(function(i){if(!cc.isValid(e))return i(null);var r=e.getComponent(cc.Animation);if(!r)return i(null);var a=n?r.playAdditive(t,0):r.play(t,0);r.once(cc.Animation.EventType.FINISHED,function(){1==o?e.active=!1:2==o&&cc.isValid(e,!0)&&e.destroy(),i(a)})})},u.asyncAction=function(e,t){return new Promise(function(n){e.runAction(cc.sequence(t,cc.callFunc(n)))})},u.asyncRepeatAction=function(e,t,n){return void 0===n&&(n=3),new Promise(function(o){e.runAction(cc.repeat(cc.sequence(t,cc.callFunc(function(){return o()})),n))})},u.bezier=function(e,t,n,o,i,s,c){return void 0===t&&(t=1),void 0===s&&(s=.2),r(this,void 0,void 0,function(){var r;return a(this,function(a){switch(a.label){case 0:r=0,a.label=1;case 1:return r<t?[4,this.asyncAction(e,c?this.bezierTo(s,n,o,i).easing(c):this.bezierTo(s,n,o,i))]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},u.blink=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=.2),r(this,void 0,void 0,function(){var o;return a(this,function(i){switch(i.label){case 0:o=0,i.label=1;case 1:return o<t?[4,this.asyncAction(e,cc.sequence(cc.fadeTo(n,125),cc.fadeTo(n,255)))]:[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},u.swing=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=.2),r(this,void 0,void 0,function(){var o;return a(this,function(i){switch(i.label){case 0:o=0,i.label=1;case 1:return o<t?[4,this.asyncAction(e,cc.sequence(cc.rotateTo(n,15),cc.rotateTo(n,-15)))]:[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},u.clash=function(e,t,n,o,i){return void 0===o&&(o=1),void 0===i&&(i=.2),r(this,void 0,void 0,function(){var r;return a(this,function(a){switch(a.label){case 0:r=0,a.label=1;case 1:return r<o?[4,this.asyncAction(e,cc.sequence(cc.moveTo(i,t),cc.moveTo(i,n)))]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},u.scale=function(e,t,n,o){return void 0===n&&(n=1),void 0===o&&(o=.2),r(this,void 0,void 0,function(){var i;return a(this,function(r){switch(r.label){case 0:i=0,r.label=1;case 1:return i<n?[4,this.asyncAction(e,cc.sequence(cc.scaleTo(o,t),cc.scaleTo(o,1)))]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},u.color=function(e,t,n,o){return void 0===t&&(t=1),void 0===o&&(o=.2),r(this,void 0,void 0,function(){var i,r;return a(this,function(a){switch(a.label){case 0:i=e.color,r=0,a.label=1;case 1:return r<t?[4,this.asyncAction(e,cc.sequence(cc.tintTo(o,n.getR(),n.getG(),n.getB()),cc.tintTo(o,i.getR(),i.getG(),i.getB())))]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},u.fade=function(e,t,n,o){return void 0===t&&(t=1),void 0===o&&(o=.2),r(this,void 0,void 0,function(){var i;return a(this,function(r){switch(r.label){case 0:i=0,r.label=1;case 1:return i<t?[4,this.asyncAction(e,cc.sequence(cc.fadeTo(o,255*n),cc.fadeTo(o,255)))]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},u.intercut=function(e,t,n){return void 0===n&&(n=.5),r(this,void 0,void 0,function(){return a(this,function(){return e.string=t,e.node.active=!0,e.node.x=-720,e.node.runAction(cc.sequence(cc.moveTo(n,0,e.node.position.y),cc.delayTime(2*n),cc.moveTo(n,720,e.node.position.y),cc.callFunc(function(){e.node.active=!1}))),[2]})})},u.labelNumber=function(e,t,n,o,i,u,l){return void 0===l&&(l=0),r(this,void 0,void 0,function(){var r,d,p;return a(this,function(a){switch(a.label){case 0:return r=n,e.string=c.default.stringFormat(t,n),p=o-n,d=Math.ceil(p/(i/u)),p=o<n?function(){return r<=o}:function(){return o<=r},0<l?[4,s.default.wait(l)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[4,s.default.wait(u)];case 3:return a.sent(),r+=d,e.isValid?p()?(r=o,e.string=c.default.stringFormat(t,n),[3,4]):(e.string=c.default.stringFormat(t,n),[3,2]):[3,4];case 4:return[2]}})})},u.moveTo=function(e,t,n){return void 0===t&&(t=1),e=cc.moveTo(t,e),null!=n&&e.easing(n),e},u.moveBy=function(e,t,n){return void 0===t&&(t=1),e=cc.moveBy(t,e),null!=n&&e.easing(n),e},u.scaleTo=function(e,t,n,o){return t=null!=n?cc.scaleTo(e,t,n):cc.scaleTo(e,t),null!=o&&t.easing(o),t},u.scaleBy=function(e,t,n,o){return t=null!=n?cc.scaleBy(e,t,n):cc.scaleBy(e,t),null!=o&&t.easing(o),t},u.rotateTo=function(e,t){return cc.rotateTo(e,t)},u.fadeIn=function(e){return void 0===e&&(e=1),cc.fadeIn(e)},u.fadeOut=function(e){return void 0===e&&(e=1),cc.fadeOut(e)},u.place=function(e){return cc.place(e)},u.bezierTo=function(e,t,n,o){return o=[t,n,o],cc.bezierTo(e,o)},u.bezierwitheasing=function(e,t,n,o,i,s){return void 0===t&&(t=1),void 0===s&&(s=.2),r(this,void 0,void 0,function(){var r;return a(this,function(a){switch(a.label){case 0:r=0,a.label=1;case 1:return r<t?[4,this.asyncAction(e,this.bezierTo(s,n,o,i).easing(cc.easeQuadraticActionOut()))]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},u.sequence=function(e){return cc.sequence(e)},u.repeat=function(e,t){return cc.repeat(e,t)},u.repeatForever=function(e){return cc.repeatForever(e)},u.spawn=function(e){return cc.spawn(e)},u.shakeEffect=function(e,t){e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.02,cc.v2(5,7)),cc.moveTo(.02,cc.v2(-6,7)),cc.moveTo(.02,cc.v2(-13,3)),cc.moveTo(.02,cc.v2(3,-6)),cc.moveTo(.02,cc.v2(-5,5)),cc.moveTo(.02,cc.v2(2,-8)),cc.moveTo(.02,cc.v2(-8,-10)),cc.moveTo(.02,cc.v2(3,10)),cc.moveTo(.02,cc.v2(0,0))))),setTimeout(function(){e.stopAllActions(),e.setPosition(0,0)},1e3*t)},u.creatCallFunc=function(e,t,n){return cc.callFunc(e,t,n)},o=u,i.default=o,cc._RF.pop()},{}],AddBubblePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"c8f84QVI3JLJIk1iKOp8l7q","AddBubblePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("BasePopwin"),d=o("OnlineMgr"),p=o("ShareVideo"),h=o("SDKEnums"),f=o("SDKTools"),m=o("BubbleMgr"),g=o("Enum"),_=o("ViewMgr"),y=o("AudioMgr"),v=o("FailPopwin"),b=o("Display"),S=o("WXApi"),w=o("ABTools"),A=o("ChestOverPopwin"),M=o("DataMgr");function T(){var e=null!==c&&c.apply(this,arguments)||this;return e.SelfAdd=null,e.FailAdd=null,e.shareVideo=null,e.isfail=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(T,c=l.default),u=T,Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return d.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"ShareKey",{get:function(){return this.isfail?h.ShareKeys.FailAddBubble:h.ShareKeys.AddBubble},enumerable:!0,configurable:!0}),T.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e);var t=e.data.isfail;this.isfail=t,this.callback=e.data.callback,this.context=e.data.context,this.SelfAdd.active=!t,this.FailAdd.active=t,this.initRewardUI(),S.default.I.showgrideadBottom()},T.prototype.onClose=function(){c.prototype.onClose.call(this),S.default.I.hidegrideadBottom()},T.prototype.onClosed=function(){c.prototype.onClosed.call(this)},T.prototype.onBannerSuccess=function(e){c.prototype.onBannerSuccess.call(this,e)},T.prototype.initRewardUI=function(){this.shareVideo.updateWith(this.ShareKey)},T.prototype.onBack=function(){var e=this;y.AudioMgr.button(),this.isfail?0<M.DataMgr.Task.CollectTempNum&&w.default.I.wxGiveUpPopup?_.ViewMgr.openPopwin(A.default,{data:{type:1}}):_.ViewMgr.openPopwin(v.default):b.default.s_isClosedAddBubble=!0,this.doClose(u,!1).then(function(){e.isfail||e.callback&&e.callback.call(e.context)})},T.prototype.onGet=function(){y.AudioMgr.button(),javaCall.ShowReward(this,function(e){console.log("callback===============>AddBubblePopWin.js"),f.default.dispatch(e.ShareKey,{success:e.handlesucc,context:e})})},T.prototype.handlesucc=function(){this.isfail?(m.default.I.addBubble(5),m.default.I.isgameover=!1,m.default.I.setTimeProps(g.PropsType.Light,1),m.default.I.nextballAni()):m.default.I.addBubble(10),this.doClose(u,!1)},T.prefabPath="prefab/popwin/popwin_popup",s([i(cc.Node)],T.prototype,"SelfAdd",void 0),s([i(cc.Node)],T.prototype,"FailAdd",void 0),s([i(p.default)],T.prototype,"shareVideo",void 0),o=u=s([o],T),r.default=o,cc._RF.pop()},{}],AddDeskPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"9d8e5Hl0ERPwqDZQ3buiwum","AddDeskPopwin");var o=e,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("BasePopwin"),l=o("AudioMgr"),d=o("CommonMgr"),p=o("OnlineMgr");function h(){return null!==s&&s.apply(this,arguments)||this}o=cc._decorator.ccclass,r(h,s=u.default),(c=h).prototype.onOpen=function(e){s.prototype.onOpen.call(this,e)},Object.defineProperty(h.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(c.prefabPath)},enumerable:!0,configurable:!0}),h.prototype.onBack=function(){l.AudioMgr.button(),this.doClose(c,!1),d.default.I.sdkEventWithStr("close_ADT_tutorials_close")},h.prefabPath="prefab/popwin/popwin_add_desk",o=c=a([o],h),i.default=o,cc._RF.pop()},{}],AldTools:[function(e,t,n){"use strict";cc._RF.push(t,"4b83fQKdNNHGYk2k/eO80Ia","AldTools");var o=t,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(r,"isSupported",{get:function(){return"object"==typeof wx&&"object"==typeof wx.aldStage},enumerable:!0,configurable:!0}),r.checkNormal=function(e,t){return this.isSupported?e():t},r.checkPromise=function(e,t){return void 0===t&&(t=Promise.resolve()),this.checkNormal(e,t)},r.onStart=function(e,t,n){this.checkNormal(function(){return wx.aldStage.onStart({stageId:e,stageName:t,userId:n})})},r.onRunning=function(e,t,n,o,i){this.checkNormal(function(){return wx.aldStage.onRunning({stageId:e,stageName:t,userId:n,event:o.toString(),params:i})})},r.onEnd=function(e,t,n,o){this.checkNormal(function(){return wx.aldStage.onEnd({stageId:e,stageName:t,userId:n,event:o.toString()})})},o=r,i.default=o,(o=i.AldRuningEvent||(i.AldRuningEvent={})).PayStart="payStart",o.PaySuccess="paySuccess",o.PayFail="payFail",o.Tools="tools",o.Revive="revive",o.Award="award",(i=i.AldEndEvent||(i.AldEndEvent={})).Complete="complete",i.Fail="fail",cc._RF.pop()},{}],Api:[function(e,t,n){"use strict";cc._RF.push(t,"90f85hSjjNCCYEQPDSweWFa","Api");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r,a=o("Http"),s=o("SDKTools"),c=o("DataMgr"),u=o("Display");function l(){}l.reqAddWxADShowTimes=function(){return l.addWxAdShowTimes({}).then(function(e){u.default.s_isShowWxAd=e.wxyx_data.is_show}).catch(function(){u.default.s_isShowWxAd=0})},l.reqgetMissionReward=function(e){return l.getMissionReward({id:e})},l.reqExchangeGold=function(e,t){return l.exchangeGold({id:e,is_double:t})},l.reqGetBubbleReward=function(e,t){return l.getBubbleReward({id:e,is_double:t})},l.reqSaveData=function(e,t){return l.saveData({field:e,value:t})},l.env=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.default.post(s.default.GameApi+"/"+r.Env,e)},l.saveData=function(e){return a.default.post(s.default.GameApi+"/"+r.SaveData,e)},l.saveScore=function(e){return a.default.post(s.default.GameApi+"/"+r.SaveScore,e)},l.signList=function(e){return a.default.post(s.default.GameApi+"/"+r.SignList,e)},l.signReceived=function(e){return a.default.post(s.default.GameApi+"/"+r.SginReceived,e)},l.worldRank=function(e){return a.default.post(s.default.GameApi+"/"+r.WorldRank,e)},l.exchangeData=function(e){return a.default.post(s.default.GameApi+"/"+r.ExchangeData,e)},l.getBubbleReward=function(e){return a.default.post(s.default.GameApi+"/"+r.GetBubbleReward,e)},l.getMission=function(e){return a.default.post(s.default.GameApi+"/"+r.GetMission,e)},l.exchangeGold=function(e){return a.default.post(s.default.GameApi+"/"+r.ExchangeGold,e)},l.getMissionReward=function(e){return a.default.post(s.default.GameApi+"/"+r.GetMissionReward,e)},l.getKfResources=function(e){return a.default.post(s.default.GameApi+"/"+r.GetKFResouces,e)},l.getListByInvite=function(e){return a.default.post(s.default.GameApi+"/"+r.GetListByInvite,e)},l.setInviteFriend=function(e){return a.default.post(s.default.GameApi+"/"+r.SetInviteFriend,e)},l.receivedByInvite=function(e){return a.default.post(s.default.GameApi+"/"+r.ReceivedByInvite,e)},l.addWxAdShowTimes=function(e){return a.default.post(s.default.GameApi+"/"+r.AddWxAdShowTimes,e)},l.getlighttipdata=function(e){return a.default.post(s.default.GameApi+"/"+r.GetTipData,e)},l.testDelUser=function(e){return a.default.post(s.default.GameApi+"/test/delUser",e)},l.testAllUser=function(){"object"==typeof wx&&a.default.get("https://pre-bubble.quzzgames.com/v1.0/test/batchDel?sign=WFVQmhkFJvWG14dl8VKbFZ6lhJaktIUnZh")},l.testSelfUser=function(){"object"==typeof wx&&a.default.get("https://pre-bubble.quzzgames.com/v1.0/test/db?sign=WFVQmhkFJvWG14dl8VKbFZ6lhJaktIUnZh&openid="+c.DataMgr.UserBase.UserOpenId)},o=l,i.default=o,(o=r=r||{}).Env="env/index",o.GetData="data/getData",o.SaveData="data/saveData",o.SignList="userSign/index",o.SaveScore="data/saveScore",o.WorldRank="user/worldRank",o.SginReceived="userSign/received",o.ExchangeData="net/index",o.GetBubbleReward="net/receivedByBubble",o.GetMission="net/getTaskList",o.ExchangeGold="net/exchangeByScore",o.GetMissionReward="net/receivedByTask",o.GetListByInvite="invite/getListByInvite",o.SetInviteFriend="invite/setInviteFriend",o.ReceivedByInvite="invite/receivedByInvite",o.GetKFResouces="user/getKfResources",o.GetTipData="user/radio",o.AddWxAdShowTimes="limit/addWxYouxIconShow",o.GetisShowWxAd="limit/checkWxYouxIconShow",cc._RF.pop()},{}],AppDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ed433mei6xPwbywCWXzAHf8","AppDataMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("ArrayUtils"),a=o("StringUtils");function s(){this.data={},this.lockArr=[]}s.prototype.lock=function(e){this.lockArr.push(e)},s.prototype.unlock=function(e){r.default.removeFromArr(this.lockArr,e)},s.prototype.set=function(e,t){0<=this.lockArr.indexOf(e)||(this.data[e]=t)},s.prototype.get=function(e,t){return a.default.isEmpty(this.data[e])?1<arguments.length?t:null:this.data[e]},Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s._instance=null,o=s,i.default=o,i.AppDataMgr=o.I,cc._RF.pop()},{}],ArrayUtils:[function(e,t,n){"use strict";cc._RF.push(t,"048833IzgVO74XY3l2fG2n9","ArrayUtils");var o,i=n,r=__AWAITER__,a=__GENERATOR__;function s(){}Object.defineProperty(i,"__esModule",{value:!0}),s.getA=function(e,t,n){return t=CryptoJS.enc.Utf8.parse(t),n=CryptoJS.enc.Utf8.parse(n),CryptoJS.AES.encrypt(e,t,{iv:n,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString()},s.getD=function(e,t,n){return t=CryptoJS.enc.Utf8.parse(t),n=CryptoJS.enc.Utf8.parse(n),CryptoJS.AES.decrypt(e,t,{iv:n,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)},s.removeFromArr=function(e,t){t=e.indexOf(t),e.splice(t,1)},s.shuffle=function(e){return e.sort(function(){return Math.random()-.5})},s.indexOf=function(e,t,n){for(var o=0;o<e.length;o++)if(t.call(n,e[o],o))return o;return-1},s.each=function(e,t,n){if("function"!=typeof t)throw new TypeError;for(var o=0,i=e.length;o<i&&!t.call(n,e[o],o,e);o++);},s.queue=function(e){return r(this,void 0,void 0,function(){var t,n,o;return a(this,function(i){switch(i.label){case 0:t=null,n=0,o=e,i.label=1;case 1:return n<o.length?[4,(0,o[n])(t)]:[3,4];case 2:t=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[4,t];case 5:return[2,i.sent()]}})})},s.getRandomArray=function(e,t){for(var n,o,i=e.slice(0),r=e.length,a=r-t;r-- >a;)n=i[o=Math.floor((r+1)*Math.random())],i[o]=i[r],i[r]=n;return i.slice(a)},s.isContained=function(e,t){if(!(e instanceof Array&&t instanceof Array))return!1;if(e.length<t.length)return!1;for(var n=0,o=t.length;n<o;n++)if(-1===e.indexOf(t[n]))return!1;return!0},o=s,i.default=o,cc._RF.pop()},{}],AudioEnum:[function(e,t,n){"use strict";cc._RF.push(t,"dd6f0iAvo5EIa7vZrb+yd4u","AudioEnum");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),(o=o.AudioEnum||(o.AudioEnum={}))[o.ku=0]="ku",o[o.bgm=1]="bgm",o[o.over=2]="over",o[o.down=3]="down",o[o.click=4]="click",o[o.timer=5]="timer",o[o.olink=6]="olink",o[o.henhao=7]="henhao",o[o.wanmei=8]="wanmei",o[o.select=9]="select",o[o.reward=10]="reward",o[o.popstar=11]="popstar",o[o.chaoshen=12]="chaoshen",o[o.taixiule=13]="taixiule",o[o.fireworks01=14]="fireworks01",o[o.fireworks02=15]="fireworks02",o[o.fireworks03=16]="fireworks03",o[o.passchapter=17]="passchapter",o[o.startchapter=18]="startchapter",o[o.level_up=19]="level_up",o[o.bgm1=20]="bgm1",o[o.bgm2=21]="bgm2",o[o.bgm3=22]="bgm3",o[o.AD_show=23]="AD_show",o[o.Pop_1=24]="Pop_1",o[o.Pop_2=25]="Pop_2",o[o.Pop_3=26]="Pop_3",o[o.Pop_4=27]="Pop_4",o[o.Pop_5=28]="Pop_5",o[o.Ball_Drop=29]="Ball_Drop",o[o.Ball_Bounce=30]="Ball_Bounce",o[o.music2=31]="music2",o[o.music3=32]="music3",o[o.bubble_ice=33]="bubble_ice",o[o.bubble_lightning=34]="bubble_lightning",o[o.pp_laser=35]="pp_laser",o[o.pp_rainbow=36]="pp_rainbow",o[o.bubble_shoot=37]="bubble_shoot",o[o.collision=38]="collision",o[o.clear_highscore=39]="clear_highscore",o[o.play_clear=40]="play_clear",o[o.clear_star1=41]="clear_star1",o[o.clear_star2=42]="clear_star2",o[o.clear_star3=43]="clear_star3",o[o.good=44]="good",o[o.excellent=45]="excellent",o[o.wow=46]="wow",o[o.play_ready=47]="play_ready",o[o.bubble_bgm1=48]="bubble_bgm1",o[o.coins_get=49]="coins_get",o[o.explosion=50]="explosion",o[o.target_done=51]="target_done",o[o.warning=52]="warning",o[o.star_game_1=53]="star_game_1",o[o.star_game_2=54]="star_game_2",o[o.star_game_3=55]="star_game_3",o[o.piggy_show=56]="piggy_show",o[o.piggy_open=57]="piggy_open",o[o.bubble_fall=58]="bubble_fall",o[o.home_star_fly_start=59]="home_star_fly_start",o[o.home_star_get=60]="home_star_get",cc._RF.pop()},{}],AudioMgr:[function(e,t,n){"use strict";cc._RF.push(t,"f1937PqV19L87MVVyKLqwts","AudioMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("WxAudio"),a=o("CCAudio"),s=o("AudioEnum"),c=o("DataMgr");function u(){"object"==typeof wx?this.audioCtrl=new r.default:this.audioCtrl=new a.default}u.prototype.playBgm=function(e){this.isMusicOpen()?this.IsPlayMusic?this.resumeMusic():this.playMusic(e,!0):this.stopMusic()},Object.defineProperty(u.prototype,"musicMuted",{set:function(e){this.audioCtrl.muted=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"soundMuted",{set:function(e){this.audioCtrl.muted=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"IsPlayMusic",{get:function(){return this.isPlayMusic},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"MusicVolum",{set:function(e){cc.audioEngine.setMusicVolume(e)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"SoundVolum",{set:function(e){cc.audioEngine.setEffectsVolume(e)},enumerable:!0,configurable:!0}),u.prototype.playMusic=function(e,t){void 0===t&&(t=!0),this.isMusicOpen()?(this.MusicVolum=.5,this.isPlayMusic=!0,this.audioCtrl.playMusic(s.AudioEnum[e],t)):this.stopMusic()},u.prototype.stopMusic=function(){this.isPlayMusic=!1,this.audioCtrl.stopMusic()},u.prototype.pauseMusic=function(){this.audioCtrl.pauseMusic()},u.prototype.resumeMusic=function(){this.isPlayMusic=!0,this.audioCtrl.resumeMusic()},u.prototype.button=function(){this.playSound(s.AudioEnum.click)},u.prototype.playSound=function(e,t){void 0===t&&(t=!1),this.isSoundOpen()&&this.audioCtrl.playSound(s.AudioEnum[e],t)},u.prototype.playSoundbyStr=function(e,t){void 0===t&&(t=!1),this.isSoundOpen()&&this.audioCtrl.playSound(e,t)},u.prototype.isMusicOpen=function(){return!c.DataMgr.User.Data.mute},u.prototype.isSoundOpen=function(){return!c.DataMgr.User.Data.mute},Object.defineProperty(u,"I",{get:function(){return this._instance||(this._instance=new u)},enumerable:!0,configurable:!0}),o=u,i.default=o,i.AudioMgr=o.I,cc._RF.pop()},{}],AutoScroll:[function(e,t,n){"use strict";cc._RF.push(t,"2c8edG9jYFBt4Vz1iqKgsH+","AutoScroll");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Water");function p(){var e=null!==l&&l.apply(this,arguments)||this;return e.content=null,e.step=.5,e.scrollDir=0,e.isAuto=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(p,l=cc.Component),p.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(t){switch(t.label){case 0:return this.scrollView=this.node.getComponent(cc.ScrollView),[4,d.default.wait(1e3)];case 1:return t.sent(),cc.isValid(this.scrollView)&&(this.maxScrollOffset=this.scrollView.getMaxScrollOffset(),this.content.on(cc.Node.EventType.TOUCH_START,this.stopAuto,this),this.content.children.forEach(function(t){t.on(cc.Node.EventType.TOUCH_START,e.stopAuto,e)}),this.isAuto=!0),[2]}})})},p.prototype.stopAuto=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return this.isAuto=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){e.isAuto=!0},3),[2]})})},p.prototype.update=function(){if(this.isAuto)if(0==this.scrollDir){if(0==this.maxScrollOffset.x)return this.isAuto=!1,void this.node.removeComponent(this);this.content.x-=this.step,Math.abs(this.scrollView.getScrollOffset().x)>=this.maxScrollOffset.x&&this.scrollView.scrollToLeft(2)}else{if(0==this.maxScrollOffset.y)return this.isAuto=!1,void this.node.removeComponent(this);this.content.y+=this.step,Math.abs(this.scrollView.getScrollOffset().y)>=this.maxScrollOffset.y&&this.scrollView.scrollToTop(2)}},s([i({tooltip:"\u5185\u5bb9\u56fe\u5c42",type:cc.Node})],p.prototype,"content",void 0),s([i({tooltip:"\u6eda\u52a8\u901f\u5ea6"})],p.prototype,"step",void 0),s([i({tooltip:"\u81ea\u52a8\u6eda\u52a8\u65b9\u5411",type:cc.Enum({horizeontal:0,verticall:1})})],p.prototype,"scrollDir",void 0),o=s([o],p),r.default=o,cc._RF.pop()},{}],Axios:[function(e,t,n){"use strict";cc._RF.push(t,"8184avLqUlH5JZXSLJtO+SE","Axios");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("dispatchRequest"),a=o("interceptorManager"),s=o("mergeConfig");function c(e){this.defaults=e,this.interceptors={request:new a.default,response:new a.default}}c.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e,t=s.default(this.defaults,t);var n=[{resolved:r.default,rejected:void 0}];this.interceptors.request.forEach(function(e){n.unshift(e)}),this.interceptors.response.forEach(function(e){n.push(e)});for(var o=Promise.resolve(t);n.length;){var i=(a=n.shift()).resolved,a=a.rejected;o=o.then(i,a)}return o},c.prototype.get=function(e,t){return this._requestMethodWithoutData("get",e,t)},c.prototype.delete=function(e,t){return this._requestMethodWithoutData("delete",e,t)},c.prototype.head=function(e,t){return this._requestMethodWithoutData("head",e,t)},c.prototype.options=function(e,t){return this._requestMethodWithoutData("options",e,t)},c.prototype.post=function(e,t,n){return this._requestMethodWithData("post",e,t,n)},c.prototype.put=function(e,t,n){return this._requestMethodWithData("put",e,t,n)},c.prototype.patch=function(e,t,n){return this._requestMethodWithData("patch",e,t,n)},c.prototype.getUri=function(e){return e=s.default(this.defaults,e),r.transformURL(e)},c.prototype._requestMethodWithoutData=function(e,t,n){return this.request(Object.assign(n||{},{url:t,method:e,config:n}))},c.prototype._requestMethodWithData=function(e,t,n,o){return this.request(Object.assign(o||{},{url:t,method:e,config:o,data:n}))},o=c,i.default=o,cc._RF.pop()},{}],BaseAnimPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"96140GlwppGtrlnQ43lpMyY","BaseAnimPopwin");var o=e,i=n,r=__EXTENDS__(),a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)},s=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var c,u=o("BasePopwin"),l=o("Action");function d(){return null!==c&&c.apply(this,arguments)||this}o=cc._decorator.ccclass,r(d,c=u.default),d.prototype.onOpen=function(e){c.prototype.onOpen.call(this,a({},e,{anim:!0}))},d.prototype.onPause=function(){c.prototype.onPause.call(this),this.hide()},d.prototype.onResume=function(){c.prototype.onResume.call(this),this.show(),this.openAnim()},d.prototype.getClips=function(){var e=this.node.getComponent(cc.Animation);return e?(this.clips||(this.clips=e.getClips()||[]),this.clips):[]},Object.defineProperty(d.prototype,"isOpenAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isCloseAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),d.prototype.openAnim=function(){var e=this.getClips();return 0===e.length?c.prototype.baseOpenAnim.call(this):e[0]?l.default.playAddAnim(this.node,e[0].name):Promise.resolve()},d.prototype.closeAnim=function(){var e=this.getClips();return 0===e.length?c.prototype.baseCloseAnim.call(this):e[1]?l.default.playAddAnim(this.node,e[1].name):Promise.resolve()},o=s([o],d),i.default=o,cc._RF.pop()},{}],BaseAudio:[function(e,t,n){"use strict";cc._RF.push(t,"5a4abHUjk9GkpviM8U26pcx","BaseAudio");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.getPath=function(e){return r.BasePath+e},r.BasePath="audio/",o=r,i.default=o,cc._RF.pop()},{}],BaseModel:[function(e,t,n){"use strict";cc._RF.push(t,"5197eEp1FRCibFCsCpQDAs3","BaseModel");var o,i=e,r=t,a=n;function s(){var e=o.call(this)||this;return e.loadDataFromLocalStorage(),e}r=__EXTENDS__(),Object.defineProperty(a,"__esModule",{value:!0}),r(s,o=i("EventMgr").default),s.prototype.loadDataFromLocalStorage=function(){},r=s,a.default=r,cc._RF.pop()},{}],BasePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"f8510CQA7RPiYhtQbp5FIEf","BasePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("BaseView"),d=o("ADLike"),p=o("LayerMgr"),h=o("ViewMgr"),f=o("SDKTools"),m=o("Display"),g=o("EventMgr"),_=o("EventEnum"),y=o("OnlineMgr"),v=o("SDKEnums");function b(){var e=null!==c&&c.apply(this,arguments)||this;return e.comAdLike=null,e.nodeAdAnchor=null,e.comAdScroll=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(b,c=l.default),(u=b).getBannerOffset=function(){var e=m.default.getViewRatio();return m.default.getIphoneBottomOffset()*e+(u.BannerHeight?u.BannerHeight*e:110*e)+y.OnlineMgr.BottomSkipOffset},b.prototype.onOpen=function(){this.preload(),this.initAd(),this.initAdLike(),this.isOpenedBannner&&this.loadBanner()},b.prototype.onOpend=function(e){c.prototype.onOpend.call(this,e),this.initAdScroll()},b.prototype.onClose=function(){this.hideBanner(),this.hideAdLike(),this.hideAdScroll(),c.prototype.onClose.call(this)},b.prototype.onPause=function(){c.prototype.onPause.call(this),this.hideBanner()},b.prototype.onResume=function(){c.prototype.onResume.call(this),this.showBanner()},b.prototype.getLayer=function(){return p.Layer.Popwin},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"BannerUid",{get:function(){return this.BannerOpen?y.OnlineMgr.getAdByType(y.AdType.BannerCommon):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"BannerParams",{get:function(){return{width:750*(cc.winSize.height,.8)}},enumerable:!0,configurable:!0}),b.prototype.preload=function(){},b.prototype.doClose=function(e,t){return void 0===t&&(t=!0),h.ViewMgr.closePopwin(e,{anim:t})},b.prototype.addBannerEvent=function(){g.EventMgr.on(_.EventEnum.BannerSuccess,this.onBannerSuccess,this),g.EventMgr.on(_.EventEnum.BannerFailure,this.onBannerFailure,this)},b.prototype.removeBannerEvent=function(){g.EventMgr.off(_.EventEnum.BannerSuccess,this.onBannerSuccess,this),g.EventMgr.off(_.EventEnum.BannerFailure,this.onBannerFailure,this)},b.prototype.loadBanner=function(){var e=this.BannerUid;e&&!m.default.PersistNode.IsShowBlack&&(this.addBannerEvent(),f.default.show(e,this.BannerParams.width))},b.prototype.showBanner=function(){var e=this.BannerUid;e&&!m.default.PersistNode.IsShowBlack&&(this.addBannerEvent(),f.default.show(e,this.BannerParams.width))},b.prototype.hideBanner=function(){var e=this.BannerUid;e&&(this.removeBannerEvent(),f.default.hide(e))},b.prototype.onBannerSuccess=function(e){e&&e.detail&&e.detail.height&&(u.BannerHeight=e.detail.height),this.hideAdLike(),this.renderAdScroll()},b.prototype.onBannerFailure=function(){this.showAdLike()},b.prototype.initAd=function(){this.offsetAdLike=-(cc.winSize.height-u.AdLikeHeight)/2,this.isOpenAdLike=!!this.comAdLike&&f.default.IsGuessLike,this.isOpenAdScroll=!!this.comAdScroll,this.isOpenAdLike&&this.comAdLike.init(v.SDKBannerLocation.LOCATION_PAGE_RESULT,1,v.SDKBannerType.TYPE_HEADER),this.isOpenAdScroll&&this.comAdScroll.init(v.SDKBannerLocation.LOCATION_PAGE_RESULT,1,v.SDKBannerType.TYPE_LIKE),this.comAdScroll&&this.comAdScroll.hide()},b.prototype.initAdLike=function(){this.BannerOpen?this.hideAdLike():this.showAdLike(),this.renderAdLike()},b.prototype.showAdLike=function(){this.isOpenAdLike&&this.comAdLike.show()},b.prototype.hideAdLike=function(){this.isOpenAdLike&&this.comAdLike.hide()},b.prototype.renderAdLike=function(){this.isOpenAdLike&&(this.comAdLike.node.y=this.offsetAdLike)},b.prototype.initAdScroll=function(){this.showAdScroll()},b.prototype.showAdScroll=function(){this.isOpenAdScroll&&(this.comAdScroll.show(),this.renderAdScroll())},b.prototype.hideAdScroll=function(){this.isOpenAdScroll&&this.comAdScroll.hide()},b.prototype.renderAdScroll=function(){var e,t;this.isOpenAdScroll&&(e=-602-m.default.getViewOffset()+u.getBannerOffset(),(t=this.comAdScroll.node).active&&t.y===e||(t.y=e,t.active=!0))},b.AdLikeHeight=208,b.BannerHeight=0,s([i(d.default)],b.prototype,"comAdLike",void 0),s([i(cc.Node)],b.prototype,"nodeAdAnchor",void 0),s([i(d.default)],b.prototype,"comAdScroll",void 0),o=u=s([o],b),r.default=o,(r=r.WxBannerType||(r.WxBannerType={}))[r.Banner=0]="Banner",r[r.GameBanner=1]="GameBanner",cc._RF.pop()},{}],BaseRank:[function(e,t,n){"use strict";cc._RF.push(t,"001eaT0mzhKvpPgyY/PIkfh","BaseRank");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("OpenContext"),l=o("DataMgr"),d=o("RankEnum");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.sprite=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(p,c=cc.Component),p.prototype.onLoad=function(){this.texture=new cc.Texture2D,this.sprite.spriteFrame=new cc.SpriteFrame(this.texture)},p.prototype.dissmiss=function(){this.unscheduleAllCallbacks(),this.enabled=!1},p.prototype.showRank=function(){},p.prototype.showRank2=function(){},p.prototype.Potential=function(){var e=d.RankEvent.Potential,t=(l.DataMgr.UserBase.UserOpenId,n=this.sprite.node).width,n=n.height;u.default.I.setSize(t,n),u.default.I.post(e,{}),this.weakRender()},p.prototype.Inivte=function(e){var t=d.RankEvent.Invite,n=(l.DataMgr.UserBase.UserOpenId,this.sprite.node);n.width,n.height,u.default.I.post(t,{index:e})},p.prototype.dissmissRank=function(){},p.prototype.weakRender=function(){this.unscheduleAllCallbacks(),this.schedule(this.render,.1,20)},p.prototype.render=function(){this.texture.initWithElement(u.default.I.ShareCanvas),this.texture.packable=!1,this.sprite.spriteFrame=new cc.SpriteFrame(this.texture)},s([i(cc.Sprite)],p.prototype,"sprite",void 0),o=s([o],p),r.default=o,cc._RF.pop()},{}],BaseScene:[function(e,t,n){"use strict";cc._RF.push(t,"3be65kCGlVPboxiRGGJvCNF","BaseScene");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ADLike"),d=o("SDKTools"),p=o("EventMgr"),h=o("AudioMgr"),f=o("EventEnum"),m=o("AudioEnum"),g=o("PlatformUtils"),_=o("SDKEnums"),y=o("OnlineMgr"),v=o("Display");function b(){var e=c.call(this)||this;return e.comAdLike=null,u.I=e,u.ADLikeOffsetY=-(cc.winSize.height-208)/2,e}o=(i=cc._decorator).ccclass,i=i.property,a(b,c=cc.Component),(u=b).prototype.onSceneShow=function(){},b.prototype.onSceneHide=function(){},b.prototype.onScreenShow=function(){},b.prototype.onScreenHide=function(){},b.prototype.onBannerSuccess=function(){},b.prototype.onBannerFailure=function(){},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"BannerUid",{get:function(){return this.BannerOpen?y.OnlineMgr.getAdByType(y.AdType.BannerGame):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"BannerParams",{get:function(){return{width:750*(cc.winSize.height,.8)}},enumerable:!0,configurable:!0}),b.prototype.start=function(){this.addEvent(),this.initAdLike(),this.isOpenedBannner&&this.loadBanner(),this.onOpen()},b.prototype.onDestroy=function(){this.hideBanner(),this.removeEvent(),this.removeBannerEvent()},b.prototype.addEvent=function(){p.EventMgr.on(f.EventEnum.SceneToShow,this.handleSceneShow,this),p.EventMgr.on(f.EventEnum.SceneToHide,this.handleSceneHide,this)},b.prototype.removeEvent=function(){p.EventMgr.off(f.EventEnum.SceneToShow,this.handleSceneShow,this),p.EventMgr.off(f.EventEnum.SceneToHide,this.handleSceneHide,this)},b.prototype.addBannerEvent=function(){p.EventMgr.on(f.EventEnum.BannerSuccess,this.handleBannerSuccess,this),p.EventMgr.on(f.EventEnum.BannerFailure,this.handleBannerFailure,this),g.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleScreenShow),wx.onHide(this.handleScreenHide)):(cc.game.on(cc.game.EVENT_SHOW,this.handleScreenShow,this),cc.game.on(cc.game.EVENT_HIDE,this.handleScreenHide,this))},b.prototype.removeBannerEvent=function(){p.EventMgr.off(f.EventEnum.BannerSuccess,this.handleBannerSuccess,this),p.EventMgr.off(f.EventEnum.BannerFailure,this.handleBannerFailure,this),g.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleScreenShow),wx.offHide(this.handleScreenHide)):(cc.game.off(cc.game.EVENT_SHOW,this.handleScreenShow,this),cc.game.off(cc.game.EVENT_HIDE,this.handleScreenHide,this))},b.prototype.handleSceneShow=function(e){this.onSceneShow(e),this.isInitialBanner&&this.showBanner()},b.prototype.handleSceneHide=function(e){this.onSceneHide(e),this.isInitialBanner&&this.hideBanner()},b.prototype.handleScreenShow=function(){u.I.onScreenShow(),h.AudioMgr.playBgm(m.AudioEnum.bgm)},b.prototype.handleScreenHide=function(){u.I.onScreenHide(),h.AudioMgr.isMusicOpen()&&h.AudioMgr.pauseMusic()},b.prototype.handleBannerSuccess=function(e){this.onBannerSuccess(e),this.hideAdLike()},b.prototype.handleBannerFailure=function(e){this.onBannerFailure(e),this.showAdLike()},Object.defineProperty(b.prototype,"isOpenAdLike",{get:function(){return!!this.comAdLike&&d.default.IsGuessLike},enumerable:!0,configurable:!0}),b.prototype.loadBanner=function(){var e;this.isInitialBanner||(this.isInitialBanner=!0,(e=this.BannerUid)&&!v.default.PersistNode.IsShowBlack?(this.addBannerEvent(),d.default.show(e,this.BannerParams.width)):this.showAdLike())},b.prototype.showBanner=function(){var e=this.BannerUid;e&&!v.default.PersistNode.IsShowBlack&&(this.addBannerEvent(),d.default.show(e,this.BannerParams.width))},b.prototype.hideBanner=function(){var e=this.BannerUid;e&&(this.removeBannerEvent(),d.default.hide(e))},b.prototype.initAdLike=function(){this.isOpenAdLike&&(this.comAdLike.getComponent(l.default).init(_.SDKBannerLocation.LOCATION_PAGE_GAME,1),this.comAdLike.getComponent(l.default).setOffset(u.ADLikeOffsetY))},b.prototype.showAdLike=function(){this.isOpenAdLike&&this.comAdLike.getComponent(l.default).show()},b.prototype.hideAdLike=function(){this.isOpenAdLike&&this.comAdLike.getComponent(l.default).hide()},b.ADLikeOffsetY=0,s([i(cc.Node)],b.prototype,"comAdLike",void 0),o=u=s([o],b),r.default=o,cc._RF.pop()},{}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"7e09edPBBtG3IXizEv0XjB8","BaseView");var o=e,i=t,r=n,a=__EXTENDS__();i=__DECORATE__,Object.defineProperty(r,"__esModule",{value:!0});var s,c=o("LayerMgr"),u=o("PoolMgr");function l(){var e=null!==s&&s.apply(this,arguments)||this;return e._isHide=!1,e._isPaused=!1,e._isClosed=!1,e}o=cc._decorator.ccclass,a(l,s=cc.Component),Object.defineProperty(l.prototype,"isFullScreen",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isMaskShow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isMaskTransparent",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isMaskAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isHide",{get:function(){return this._isHide},set:function(e){this._isHide=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isPaused",{get:function(){return this._isPaused},set:function(e){this._isPaused=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isClosed",{get:function(){return this._isClosed},set:function(e){this._isClosed=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isOpenAnim",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isCloseAnim",{get:function(){return!1},enumerable:!0,configurable:!0}),l.prototype.onOpend=function(){this.openCallback&&this.openCallback(this)},l.prototype.onRefresh=function(){},l.prototype.onClose=function(){this.removeEvent()},l.prototype.onClosed=function(){this.removeView(),this.closeCallback&&this.closeCallback(this)},l.prototype.onHide=function(){},l.prototype.onShow=function(){},l.prototype.onPause=function(){},l.prototype.onResume=function(){},l.prototype.onRelease=function(){},l.prototype.onMessage=function(){},l.prototype.addEvent=function(){},l.prototype.removeEvent=function(){},l.prototype.open=function(e){var t=this;return new Promise(function(n){t.addView(),t.addEvent(),t.isClosed=!1,t.openCallback=n,(e&&e.hasOwnProperty("anim")?e.anim:t.isOpenAnim)?(t.onOpen(e),t.openAnim().then(function(){return!t.isClosed&&t.onOpend(e)})):(t.onOpen(e),t.onOpend(e))})},l.prototype.close=function(){var e=this;return this.onClose(),new Promise(function(t){e.isClosed=!0,e.closeCallback=t,e.onClosed()})},l.prototype.hide=function(){cc.isValid(this.node)&&(this.node.active=!1),this.isHide=!0,this.onHide()},l.prototype.show=function(){cc.isValid(this.node)&&(this.node.active=!0),this.isHide=!1,this.onShow()},l.prototype.pause=function(){this.isPaused=!0,this.onPause()},l.prototype.resume=function(){this.isPaused=!1,this.onResume()},l.prototype.sendMessage=function(e){this.onMessage(e)},l.prototype.onTouchMask=function(){},l.prototype.addView=function(){this.node.active=!0,this.node.setPosition(cc.Vec2.ZERO),c.default.I.addTo(this.getLayer(),this.node)},l.prototype.removeView=function(){this.onRelease(),u.PoolMgr.putNode(this.node)},l.prototype.openAnim=function(){return this.baseOpenAnim()},l.prototype.baseOpenAnim=function(){var e=this;return new Promise(function(t){e.node.setScale(.01),e.node.runAction(cc.sequence(cc.scaleTo(.5,1,1).easing(cc.easeBackOut()),cc.callFunc(function(){return t()})))})},l.prototype.closeAnim=function(){return this.baseCloseAnim()},l.prototype.baseCloseAnim=function(){var e=this;return new Promise(function(t){e.node.runAction(cc.sequence(cc.scaleTo(.3,0,0).easing(cc.easeBackIn()),cc.callFunc(function(){return t()})))})},l.IGNORE_ANIM="ignore_anim",l.prefabPath="",o=i([o],l),r.default=o,cc._RF.pop()},{}],BgCtr:[function(e,t,n){"use strict";cc._RF.push(t,"dc5a5enEWFOwIxyyBQhQ4cn","BgCtr");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.bg1=null,e.bg2=null,e.m_move=0,e.movetime=0,e.oldy=0,e}r(u,s=cc.Component),u.prototype.start=function(){},u.prototype.move=function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=null),this.movetime=e,this.m_move=t,this.movetweem&&(this.movetweem.stop(),this.movetweem.removeSelf()),this.oldy=this.bg1.y,this.movetweem=cc.tween(this.bg1).to(e,{y:this.bg1.y-this.m_move},{easing:cc.easing.circOut}).call(function(){}).start()},u.prototype.update=function(e){0<this.movetime&&(this.movetime-=e),this.bg2.y<=0&&(this.m_move-=this.oldy-this.bg1.y,e=this.bg1,this.bg1=this.bg2,this.bg2=e,this.bg2.y=1624,this.movetweem&&0<this.m_move&&(this.movetweem.stop(),this.movetweem.removeSelf(),this.oldy=this.bg1.y,this.movetweem=cc.tween(this.bg1).to(this.movetime,{y:this.bg1.y-this.m_move},{easing:cc.easing.circOut}).call(function(){}).start()))},u.prototype.lateUpdate=function(){this.bg2.y=this.bg1.y+1624},a([c(cc.Node)],u.prototype,"bg1",void 0),a([c(cc.Node)],u.prototype,"bg2",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],BlockParams:[function(e,t,n){"use strict";cc._RF.push(t,"c37bf7PtlhAU4wsefG99ClR","BlockParams");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("CubeParams"),c=o("Enum");function u(){var e=a.call(this)||this;return e.colorType=c.ColorType.Red,e.blockType=c.BlockType.Normal,e}r(u,a=s.default),r=u,i.default=r,cc._RF.pop()},{}],BottomBar:[function(e,t,n){"use strict";cc._RF.push(t,"1e9ffRDyppGOq8UO8HwpemQ","BottomBar");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("BtnStart"),l=o("ViewMgr"),d=o("Action"),p=o("AudioMgr"),h=o("GameFitTask"),f=o("Enum");function m(){var e=null!==c&&c.apply(this,arguments)||this;return e.nAdItem=null,e.btnStart=null,e.wrapHand=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(m,c=cc.Component),m.prototype.init=function(){this.animWith(f.ComAction.Init)},m.prototype.initWithLevel=function(e){this.btnStart.initWith(e)},m.prototype.animWith=function(e){var t;switch(d.default.stopAnim(this.node),e){case f.ComAction.Init:t="init";break;case f.ComAction.Enter:t="in";break;case f.ComAction.Out:t="out"}return d.default.playAddAnim(this.node,"anim_bottom_"+t)},m.prototype.showGuide=function(){},m.prototype.hideGuide=function(){},m.prototype.actionOpenTask=function(){this.onFitUp(null)},m.prototype.onShop=function(){p.AudioMgr.button()},m.prototype.onFitUp=function(e){var t;p.AudioMgr.button(),t=this.isHasGuide?f.HomeUIState.ShowTopMenuOutBottom:e?f.HomeUIState.OutBottom:f.HomeUIState.OutBottomAuto,l.ViewMgr.openPopwin(h.default,{data:{uiHome:t,isAuto:!e}}),this.hideGuide()},m.prototype.onDrawer=function(){p.AudioMgr.button()},s([i(cc.Node)],m.prototype,"nAdItem",void 0),s([i(u.default)],m.prototype,"btnStart",void 0),s([i(cc.Node)],m.prototype,"wrapHand",void 0),o=s([o],m),r.default=o,cc._RF.pop()},{}],BtnLike:[function(e,t,n){"use strict";cc._RF.push(t,"9dec74ibVtBY4SwFnOxVA28","BtnLike");var o=e,i=t,r=n,a=__EXTENDS__();i=__DECORATE__,Object.defineProperty(r,"__esModule",{value:!0});var s,c=o("ViewMgr"),u=o("Action"),l=o("Enum"),d=o("GridPopwin"),p=o("AudioMgr");function h(){return null!==s&&s.apply(this,arguments)||this}o=cc._decorator.ccclass,a(h,s=cc.Component),h.prototype.init=function(){this.animWith(l.ComAction.Init)},h.prototype.animWith=function(e){var t;switch(u.default.stopAnim(this.node),e){case l.ComAction.Init:t="init";break;case l.ComAction.Enter:t="in";break;case l.ComAction.Out:t="out"}return u.default.playAddAnim(this.node,"anim_adlike_"+t)},h.prototype.onAdLike=function(){p.AudioMgr.button(),c.ViewMgr.openPopwin(d.default,{anim:!1})},o=i([o],h),r.default=o,cc._RF.pop()},{}],BtnStart:[function(e,t,n){"use strict";cc._RF.push(t,"6eb4cUrtFBKz7Hg5TCPe+Hg","BtnStart");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Display"),l=i("AudioMgr");function d(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(d,c=cc.Component),d.prototype.initWith=function(){},d.prototype.onGame=function(){l.AudioMgr.button(),this.node.opacity<255||u.default.PersistNode.loadToGame()},i=s([i],d),r.default=i,cc._RF.pop()},{}],BubbleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"b344duMlmBHUKuHl/knmv6E","BubbleMgr");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p,h=o("AudioEnum"),f=o("AudioMgr"),m=o("ABTools"),g=o("Action"),_=o("CheckTools"),y=o("Display"),v=o("Water"),b=o("Const"),S=o("Enum"),w=o("DataMgr"),A=o("HistoryData"),M=o("UserBaseModel"),T=o("UserModel"),P=o("EventEnum"),E=o("EventMgr"),D=o("LoaderMgr"),I=o("AppDataMgr"),C=o("CommonMgr"),B=o("LocalMgr"),k=o("OnlineMgr"),O=o("PoolMgr"),R=o("SDKAnalytics"),L=o("SDKEnums"),N=o("SDKTools"),x=o("bubbleUtil"),F=o("DateUtils"),G=o("PlatformUtils"),U=o("RandomUtils"),j=o("Vector3Utils"),V=o("WXApi"),K=o("ADCrossItem"),H=o("BasePopwin"),W=o("ImageLabelNew"),q=o("GameUIWraps"),X=o("AddBubblePopwin"),z=o("ChestOpenPopwin"),Y=o("GetRewardPopWin"),J=o("GiftPopwin2"),Z=o("GridPopwin"),Q=o("GuidePopwin"),$=o("InvitefirendPopwin"),ee=o("ItemTipPopwin"),te=o("OnlineGiftPopwin"),ne=o("PausePopwin"),oe=o("RankPopwin"),ie=o("RulePopwin"),re=o("ShopPopwin"),ae=o("SignPopwin"),se=o("UILevel"),ce=o("UIRevive"),ue=o("WinItemTipPopwin"),le=o("OpenContext"),de=o("ViewMgr"),pe=o("BgCtr"),he=o("Bubble"),fe=o("TouchMgr");function me(){var e=null!==d&&d.apply(this,arguments)||this;return e.comGameUIWraps=null,e.m_gamecamera=null,e.m_anicamera=null,e.m_UIcamera=null,e.m_skin=[],e.m_LineColor=[],e.m_bubblePrefab=null,e.m_bubbleobj=null,e.shooter=null,e.shooter2=null,e.m_Labbubblenum=null,e.m_LabScore=null,e.m_LabWinScore=null,e.m_Diamond=null,e.m_FireWorkeff=null,e.m_Slider=null,e.m_Top=null,e.m_AddBallBtn=null,e.m_stars=[],e.nodeOver=null,e.nodBubbleAd=null,e.nodeLeft10=null,e.nodeAdLike=null,e.nodeSingleAd=null,e.m_Singlead=null,e.adCross=null,e.nodeRoundArrow=null,e.m_failaddbubbletimes=0,e.m_addbubbletimes=0,e.m_props={0:0,1:0,2:0,3:0},e.m_bagprops={},e.m_mapdata=[],e.changeBall=-1,e.m_star=-1,e.m_curLv=-1,e.m_curScore=0,e.m_addbubbles=0,e.m_r=40,e.m_curBubbleindex=0,e.m_isready=!1,e.issmalladd=!1,e.isshoweditemtips=!1,e.m_bubblesArray=[],e.isShooting=!1,e.shootDir=null,e.ballindex=0,e.islock=!1,e.isautomove=!1,e.isadd=!1,e.m_Guide=null,e.m_GuideRebound=null,e.m_ReboundLine=null,e.m_GuideTxT=null,e.m_changeicon=null,e.m_adnode=null,e.m_backnode=null,e.m_BottomObj=null,e.m_BottomGameObj=null,e.txtRankStar=null,e.nodePigFull=null,e.m_labOnlineGifttime=null,e.m_RockObj=null,e.nodeDragon1=null,e.nodeDragon2=null,e.m_bgctr=null,e.standTime=0,e.m_MoveSpeed=400,e.m_StartMoveSpeed=1e3,e.m_isstartani=!1,e.m_isnewPlayer=!1,e.m_BaseScore=10,e.ishaveboom=!1,e.isgameing=!1,e.isstartrandomitem=!1,e.isfreechange=!1,e.isguiding=!1,e.isrestart=!1,e.backx=0,e.backy=0,e.m_tempintegrals=[],e.collectTempNum=0,e.m_eventseed=0,e.m_eventvideo=0,e.m_eventitemboom=0,e.m_eventitemRainbow=0,e.m_eventitemLaser=0,e.m_eventitemLight=0,e.m_eventcoin=0,e.m_eventrevive=0,e.m_IsPassing=!1,e.popwinlist=[],e.ishidetop=!1,e.oldballcolor=0,e.isfirstfreechange=!1,e.isgameover=!1,e.iswin=!1,e.ispasswin=!1,e.isplayingitemtip=!1,e.isopenonlinegift=!1,e.iscangetreward=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(me,d=H.default),(p=me).prototype.initEventData=function(){this.m_eventseed=0,this.m_eventvideo=0,this.m_eventitemboom=0,this.m_eventitemRainbow=0,this.m_eventitemLaser=0,this.m_eventitemLight=0,this.m_eventcoin=0,this.m_eventrevive=0},me.prototype.clearEventData=function(){this.m_eventvideo=0,this.m_eventitemboom=0,this.m_eventitemRainbow=0,this.m_eventitemLaser=0,this.m_eventitemLight=0,this.m_eventcoin=0},me.prototype.doGetChangeAni=function(){this.comGameUIWraps.showAddChange()},me.prototype.doAddOneItem=function(e){w.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],null,!0),this.comGameUIWraps.showAddItem(e[0],e[1])},me.prototype.doAddTwoItem=function(e,t){w.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],null,!0),w.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],null,!0),y.default.showProps([{type:e[0],num:e[1]},{type:t[0],num:t[1]}])},me.prototype.doAddThreeItem=function(e,t,n){w.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],null,!0),w.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],null,!0),w.DataMgr.User.reqProps(n[0],n[1]),this.doItemAnim(n[0],null,!0),y.default.showProps([{type:e[0],num:e[1]},{type:t[0],num:t[1]},{type:n[0],num:n[1]}])},me.prototype.doAddFourItem=function(e,t,n,o){w.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],null,!0),w.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],null,!0),w.DataMgr.User.reqProps(n[0],n[1]),this.doItemAnim(n[0],null,!0),w.DataMgr.User.reqProps(o[0],o[1]),this.doItemAnim(o[0],null,!0),y.default.showProps([{type:e[0],num:e[1]},{type:t[0],num:t[1]},{type:n[0],num:n[1]},{type:o[0],num:o[1]}])},me.prototype.doItemAnim=function(e,t,n){return void 0===n&&(n=!1),u(this,void 0,void 0,function(){return l(this,function(){return E.EventMgr.emit(P.EventEnum.UpdateProps),[2]})})},me.prototype.initQueuePop=function(){var e;this.comGameUIWraps.checkOpenFirstRedPacket(),this.m_isnewPlayer?_.default.IsOpenRule&&this.addPopwinList(ie.default,{}):0==(e=N.default.getParamsInt(L.OnlineKeys.invite_p2p_abtest,0))||1==e&&M.default.I.ID%2==1||T.default.I.CurLevel>=N.default.getParamsInt(L.OnlineKeys.invite_pop_minlv,4)&&0===I.AppDataMgr.get(S.AppDataKey.InviteFriendOpen,0)&&this.addPopwinList($.default,{})},me.prototype.addPopwinList=function(e,t,n){var o;void 0===n&&(n=!0),this.popwinlist&&(o={pop:e,p:t},this.popwinlist.length<=0?this.m_IsPassing?this.popwinlist.push(o):(this.popwinlist.push(o),de.ViewMgr.openPopwin(e,{anim:n,data:s({},t)})):this.popwinlist.unshift(o))},me.prototype.addPopwinListForceOpen=function(e,t,n){var o;void 0===n&&(n=!0),this.popwinlist&&(o={pop:e,p:t},this.popwinlist.length<=0&&this.m_IsPassing?this.popwinlist.push(o):(this.popwinlist.push(o),de.ViewMgr.openPopwin(e,{anim:n,data:s({},t)})))},me.prototype.addTopPopwinList=function(e,t){var n;this.popwinlist&&(n={pop:e,p:t},this.popwinlist.length<=0&&!this.m_IsPassing?(this.popwinlist.push(n),de.ViewMgr.openPopwin(e,{data:s({},t)})):this.popwinlist.push(n))},me.prototype.removePopwinList=function(e,t,n){var o;void 0===e&&(e=null),void 0===t&&(t={}),void 0===n&&(n=!0),this.popwinlist&&(0<this.popwinlist.length&&this.popwinlist.pop(),e&&(o={pop:e,p:t},this.popwinlist.push(o)),0<this.popwinlist.length&&(o=this.popwinlist[this.popwinlist.length-1],de.ViewMgr.openPopwin(o.pop,{anim:n,data:s({},o.p)})))},me.prototype.onLoad=function(){var e=this,t=m.default.I.wxTwoDragonOpen;this.nodeDragon1.active=t,(this.nodeDragon2.active=t)?g.default.playAnim(this.node.parent.parent,"state_game_2"):g.default.playAnim(this.node.parent.parent,"state_game_1"),this.m_BottomGameObj.getChildByName("ad_small").active=N.default.IsCross,this.onlinegiftpos=this.m_labOnlineGifttime.node.parent.parent.parent.parent.position,this.bottombtnpos=this.m_BottomObj.position,R.default.event(L.EventKeys.game_scene_enter,""),y.default.adjustIphoneX(this.node.parent.parent.getChildByName("topbar")),_.default.IsRedPacketOpen&&T.default.I.CurLevel<=0?(this.preload(),this.initAd(),this.initAdLike()):d.prototype.onOpen.call(this,{}),(p.I=this).comGameUIWraps.setGameGM(),this.m_GuideTxT.active=!1,this.hideUILevel(),this.m_r=this.m_bubbleobj.width/2,this.m_backnode.active=!1,p.isinit=!0,E.EventMgr.on(P.EventEnum.TOUCHEND_SHOOT,function(t){0==e.m_isready||e.isgameover||(e.ishaveboom?e.m_BaseScore+=10:e.m_BaseScore=10,e.backbubble=null,e.hideLv2Guide(),e.ishaveboom=!1,e.hidePropUI(!1),t=cc.misc.degreesToRadians(t.detail),e.shootDir=cc.v2(-Math.sin(t),Math.cos(t)),e.islock=!0,e.oldballcolor=e.shootBubble.color,11!=e.shootBubble.color?(fe.default.I.m_points.length<=0||!fe.default.I.ishaveend?(e.isShooting=!0,cc.error("auto")):e.doPointMove(fe.default.I.m_points),f.AudioMgr.playSound(h.AudioEnum.bubble_shoot),e.shootBubble.node.getChildByName("streak").active=!0):e._checkLight(),10<=e.shootBubble.color&&e.shootBubble.color<20&&!e.isstartrandomitem&&e.usePropWithType(e.shootBubble.color-10),fe.default.I.hideline(),p.I.clearAllpreview(),e.m_curBubbleindex>=N.default.getParamsInt(L.OnlineKeys.hide_ui_moves_num,3)&&e.hidebottomUI(),e.m_isready=!1,e.isstartrandomitem=!1)},this),this.m_GuideRebound.active=!1,this.m_ReboundLine.active=!1,this.scheduleOnce(this.initPreload,4),E.EventMgr.on(P.EventEnum.OpenMusic,this.handleOpenMusic,this),E.EventMgr.on(P.EventEnum.PauseMusic,this.handlePauseMusic,this),E.EventMgr.on(P.EventEnum.SceneToShow,this.handlePopwinToTop,this),E.EventMgr.on(P.EventEnum.UpdateProps,this.handleUpdateProps,this),E.EventMgr.on(P.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),E.EventMgr.on(P.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this),E.EventMgr.on(P.EventEnum.AddEventUseCoin,this._addeventusecoin,this),E.EventMgr.on(P.EventEnum.AddEventVideo,this._addeventvideo,this),N.default.bindEvent(P.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this),G.default.isWx?(N.default.bindEvent(P.EventEnum.AppShow,this.handleShow,this),N.default.bindEvent(P.EventEnum.AppHide,this.handleHide,this)):cc.game.on(cc.game.EVENT_HIDE,this.handleHistoryRecord,this),(!_.default.IsRedPacketOpen||m.default.I.wxRedPacketPopup||2<=T.default.I.CurLevel)&&(this.showBanner(),this.node.parent.parent.getChildByName("bannertxt").active=!1),this.initAdItem(),this.initRank(),f.AudioMgr.playMusic(h.AudioEnum.bubble_bgm1),R.default.event(L.EventKeys.game_scene_enter_end,"")},me.prototype.onDestroy=function(){this.hideBanner(),1!=y.default.s_isShowWxAd&&0!=N.default.getParamsInt(L.OnlineKeys.build_scene_module_ad,0)||V.default.I.hideSinglegridad(),E.EventMgr.off(P.EventEnum.SceneToShow,this.handlePopwinToTop,this),E.EventMgr.off(P.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),E.EventMgr.off(P.EventEnum.AddEventUseCoin,this._addeventusecoin,this),E.EventMgr.off(P.EventEnum.AddEventVideo,this._addeventvideo,this),G.default.isTecent&&"object"==typeof wx?(N.default.removeEvent(P.EventEnum.AppShow,this.handleShow,this),N.default.removeEvent(P.EventEnum.AppHide,this.handleHide,this)):cc.game.off(cc.game.EVENT_HIDE,this.handleHistoryRecord,this)},me.prototype.handleOpenMusic=function(){f.AudioMgr.playMusic(h.AudioEnum.bubble_bgm1),f.AudioMgr.isMusicOpen()&&f.AudioMgr.resumeMusic()},me.prototype.handlePauseMusic=function(){f.AudioMgr.isMusicOpen()&&f.AudioMgr.pauseMusic()},me.prototype._addeventvideo=function(){this.m_eventvideo++},me.prototype._addeventusecoin=function(e){e=e.detail,this.m_eventcoin+=e},me.prototype.doPointMove=function(e){return u(this,void 0,void 0,function(){var t,n,o,i;return l(this,function(r){switch(r.label){case 0:t=2400,n=0,r.label=1;case 1:return n<e.length?(o=e[n],i=j.default.Distance(cc.v3(o.x,o.y,0),cc.v3(this.shootBubble.node.x,this.shootBubble.node.y,0)),cc.tween(this.shootBubble.node).to(i/t,{position:o}).start(),[4,v.default.wait(i/t*1e3)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return this.shootBubble.node.getChildByName("streak").active=!1,this._setBubblePos(),[2]}})})},me.prototype.start=function(){var e=T.default.I.CurLevel;0==e?(this.m_isnewPlayer=!0,this.enterGame(1,!1,!0,!0)):this.enterGame(e+1,!1,!0,!0),this.comGameUIWraps.iniHomeInfo(),this.initQueuePop()},me.prototype.initAdItem=function(){this.adCross.getComponent(K.default).init(L.SDKBannerLocation.LOCATION_PAGE_GAME,1),this.adCross.getComponent(K.default).refresh(),this.adCross.getComponent(K.default).play(!0)},me.prototype.initRank=function(){var e=w.DataMgr.User.LevelStarNum;e&&le.default.I.save(e,0,!0)},me.prototype.initPreload=function(){["prefab/popwin/popwin_popup","prefab/popwin/popwin_task"].forEach(function(e){return D.LoaderMgr.loadPrefabWithUrl(e)})},me.prototype.handleHistoryRecord=function(){},me.prototype.handleShow=function(){f.AudioMgr.playMusic(h.AudioEnum.bubble_bgm1)},me.prototype.handleHide=function(){var e={first:0,ctime:0,score:p.I.m_curScore,rnum:p.I.m_eventrevive,seed:p.I.m_eventseed,opts:{iid1_num:p.I.m_eventitemboom,iid2_num:p.I.m_eventitemLight,iid3_num:p.I.m_eventitemRainbow,iid4_num:p.I.m_eventitemLaser,vnum:p.I.m_eventvideo,gold:p.I.m_eventcoin,mid:w.DataMgr.User.CurLevel}};R.default.logLevelHide(this.m_curLv,e),0==p.I.ballindex&&0==T.default.I.CurLevel&&R.default.event(L.EventKeys.unhide_before_first_tap,""),T.default.I.reqHidePlayer(),I.AppDataMgr.set(S.AppDataKey.OnHideHistory,!0)},me.prototype.HideTop=function(){this.ishidetop||(this.ishidetop=!0,cc.tween(this.m_Top).stop(),cc.tween(this.m_Top).to(.5,{opacity:100}).start())},me.prototype.ShowTop=function(){this.ishidetop&&(this.ishidetop=!1,cc.tween(this.m_Top).stop(),cc.tween(this.m_Top).to(.5,{opacity:255}).start())},me.prototype.InitDiamond=function(){this.m_Diamond.setValue(10*T.default.I.Diamond,"")},me.prototype.update=function(e){var t;this.isShooting&&(this._isCollided(),this._bubbleMove(e),this._isCollided()),this.standTime<5?this.standTime+=e:this.showGuid(),this.m_labOnlineGifttime&&(t=N.default.getParamsInt(L.OnlineKeys.online_gift_show_lv,b.default.baseMinOnlineGiftlv),y.default.isOnlineGift&&T.default.I.CurLevel>=t&&0<T.default.I.CurOnlinegiftNeedTime?(this.updategiftstate(),0<T.default.I.OnlineGiftNowTime?(this.m_labOnlineGifttime.node.active=!0,this.m_labOnlineGifttime.string=F.default.getFormatBySecond(Math.floor(T.default.I.OnlineGiftNowTime),3),T.default.I.onlinetime+=e):this.m_labOnlineGifttime.node.active=!1):this.m_labOnlineGifttime.node.parent.parent.parent.parent.active&&(this.m_labOnlineGifttime.node.parent.parent.parent.parent.active=!1))},me.prototype._isCollided=function(){for(var e=0;e<this.m_bubblesArray.length;e++)for(var t=0;t<this.m_bubblesArray[e].length;t++)if(this.m_bubblesArray[e][t]){var n=x.default.convertRowColToPos(e,t,this.m_r),o=j.default.Distance(cc.v3(n.x,n.y,0),cc.v3(this.shootBubble.node.position.x,this.shootBubble.node.position.y,0));if(o<=1.3*this.m_r){if(this.isShooting=!1,this.shootBubble.node.getChildByName("streak").active=!1,o<2*this.m_r)for(var i=2*this.m_r-o;this.shootBubble.node.position=this.shootBubble.node.position.sub(cc.v2(this.shootDir.x,this.shootDir.y)),!(j.default.Distance(cc.v3(n.x,n.y,0),cc.v3(this.shootBubble.node.position.x,this.shootBubble.node.position.y,0))>=2*this.m_r););return void this._setBubblePos()}}this.shootBubble.node.y>x.default.SCREEN_H-this.m_r&&(this.isShooting=!1,i=this.shootBubble.node.y-(x.default.SCREEN_H-this.m_r),this.shootBubble.node.position=this.shootBubble.node.position.sub(cc.v2(this.shootDir.x*i,this.shootDir.y*i)),this._setBubblePos())},me.prototype._setBubblePos=function(){var e=x.default.convertPosToRowCol(this.shootBubble.node.position.x,this.shootBubble.node.position.y,this.m_r);this.shootBubble.node.position=x.default.convertRowColToPos(e.x,e.y,this.m_r);var t=new A.bubbledata;t.node=this.shootBubble.node,t.color=this.shootBubble.color,t.isLinked=!1,t.isVisited=!1;var n=null;e.x<this.m_bubblesArray.length?this.getIsPointHaveGhostBall(e.x,e.y)&&(n=this.m_bubblesArray[e.x][e.y]):this.m_bubblesArray[e.x]=[],this.m_bubblesArray[e.x][e.y]=t,this.updatemapdata(),10==this.shootBubble.color?this._checkBoom(e,n):12==this.shootBubble.color?this._checkLaser(e,n):13==this.shootBubble.color?this._checkRainbowBall(e,n):this._mapColor(e,n)},me.prototype.updatemapdata=function(){if(null!=this.m_bubblesArray){this.m_mapdata=[];for(var e,t=0;t<this.m_bubblesArray.length;t++)for(var n=0;n<this.m_bubblesArray[t].length;n++)this.m_mapdata.length-1<t&&this.m_mapdata.push([]),this.m_bubblesArray[t][n]?(e=this.m_bubblesArray[t][n].color,this.m_mapdata[t][n]=e):this.m_mapdata[t][n]=0}},me.prototype._mapColor=function(e,t){var n=this;(function e(t,o,i,r){var a=r;if(n.m_bubblesArray[t]&&n.m_bubblesArray[t][o]){var s=n.m_bubblesArray[t][o];if(!s.isVisited){if(10001<=s.color&&s.color<=10006){if(s.color-1e4!==i)return}else if(100001<=s.color&&s.color<=100006){if(s.color-1e5!==i)return}else if(201<=s.color&&s.color<=206){if(s.color-200!==i||s.state==S.BubbleState.ghost)return}else if(s.color!==i)return;s.isVisited=!0,s.index=j.default.Distance(cc.v3(s.node.position.x,s.node.position.y,0),cc.v3(a.position.x,a.position.y,0)),a=t%2==0?o-1:o,e(t,o-1,i,r),e(t,o+1,i,r),e(t+1,a,i,r),e(t+1,a+1,i,r),e(t-1,a,i,r),e(t-1,a+1,i,r)}}})(e.x,e.y,this.m_bubblesArray[e.x][e.y].color,this.m_bubblesArray[e.x][e.y].node);for(var o=0,i=[],r=0;r<this.m_bubblesArray.length;r++)for(var a=0;a<this.m_bubblesArray[r].length;a++)this.m_bubblesArray[r][a]&&this.m_bubblesArray[r][a].isVisited&&(this.m_bubblesArray[r][a].isVisited=!1,o++,i.push(cc.v3(r,a,this.m_bubblesArray[r][a].index)));if(this.CheckOnlineGift(),3<=o){for(var s in i.sort(function(e,t){return e.z-t.z}),i)this._checkIce(i[s]);for(var s in i){var c=this.m_bubblesArray[i[s].x][i[s].y];i[s]=cc.v3(i[s].x,i[s].y,c.color)}this.delBubblesAni(i),t&&(this.m_bubblesArray[e.x][e.y]=t),this.bubbleinAni(e),this.ishaveboom=!0}else{this.m_BaseScore=10,this.backbubble=this.m_bubblesArray[e.x][e.y],this.backx=e.x,this.backy=e.y;var u=this.bubbleinAni(e);this._checkBlackHole(e)?t&&(this.m_bubblesArray[e.x][e.y]=t):t&&t.node.destroy(),u?this._testUnLinked():this._nextBubble()}},me.prototype.bubbleinAni=function(e){var t,n=e.x,o=e.y,i=o;return n%2==0&&(i=o-1),e=!1,0<=n-1&&this.m_bubblesArray[n-1][i]&&(t=this.m_bubblesArray[n-1][i].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n-1][i]=null):t.playtopL()),0<=n-1&&this.m_bubblesArray[n-1][i+1]&&(t=this.m_bubblesArray[n-1][i+1].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n-1][i+1]=null):t.playtopR()),this.m_bubblesArray[n][o-1]&&(t=this.m_bubblesArray[n][o-1].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n][o-1]=null):t.playL()),this.m_bubblesArray[n][o+1]&&(t=this.m_bubblesArray[n][o+1].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n][o+1]=null):t.playR()),n+1<this.m_bubblesArray.length&&this.m_bubblesArray[n+1][i]&&(t=this.m_bubblesArray[n+1][i].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n+1][i]=null):t.playbottomL()),n+1<this.m_bubblesArray.length&&this.m_bubblesArray[n+1][i+1]&&(t=this.m_bubblesArray[n+1][i+1].node.getComponent(he.default),this.checkcloud(t)?(e=!0,this.m_bubblesArray[n+1][i+1]=null):t.playbottomR()),e},me.prototype.checkcloud=function(e){return 1004==e.m_id&&(e.breakcloud(),!0)},me.prototype.isHavecloud=function(){for(var e=0;e<this.m_bubblesArray.length;e++)for(var t=0;t<this.m_bubblesArray[e].length;t++)if(this.m_bubblesArray[e][t]&&1004==this.m_bubblesArray[e][t].node.getComponent(he.default).m_id)return!0;return!1},me.prototype.getclouds=function(){for(var e,t=[],n=0;n<this.m_bubblesArray.length;n++)for(var o=0;o<this.m_bubblesArray[n].length;o++)this.m_bubblesArray[n][o]&&cc.isValid(this.m_bubblesArray[n][o].node)&&(e=this.m_bubblesArray[n][o].node.getComponent(he.default))&&1004==e.m_id&&this.checkcloudIsAct(cc.v3(n,o,0))&&t.push({row:n,col:o});return t},me.prototype.checkcloudIsAct=function(e){function t(e,t){return n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&(1004==(t=n.m_bubblesArray[e][t]).color?null:t.node)}var n=this,o=this.m_bubblesArray[e.x][e.y],i=e.x,r=e.y,a=(this.m_bubblesArray[i][r].color,r);return!(!t(i-1,a=i%2==0?r-1:a)&&!t(i-1,a+1)&&!t(i,r-1)&&!t(i,r+1)&&!t(i+1,a)&&!t(i+1,a+1)&&(o.node.getComponent(he.default).breakcloud(),this.m_bubblesArray[e.x][e.y]=null,1))},me.prototype.delBubblesAni=function(e){return u(this,void 0,void 0,function(){var t,n,o,i,r,a,s,c,u,d,p;return l(this,function(l){switch(l.label){case 0:for(u in t=[],n=[],e)d=this.m_bubblesArray[e[u].x][e[u].y],t.push(d.node),n.push(d.node),this.m_bubblesArray[e[u].x][e[u].y]=null;for(s in n.sort(function(e,t){return e.y-t.y}),p=this.node.parent.parent,r=t.length*this.m_BaseScore,c=y.default.getTargetPos(n[0],p),this.comGameUIWraps.showBigScore(r,c,p),o=0,i=w.DataMgr.Task.isChestFuncOpen,r=w.DataMgr.User.TaskDaily.collectColor,a=[],t)a.push(s);c=0,l.label=1;case 1:return c<a.length?(u=a[c],d=t[u],p=d.getComponent(he.default),i&&r===p.m_id&&o++,p.playDeathAnimation(e[u]),f.AudioMgr.playSound(h.AudioEnum.collision),T.default.I.Vibrate&&N.default.vibrateShort(),[4,v.default.wait(10)]):[3,4];case 2:l.sent(),l.label=3;case 3:return c++,[3,1];case 4:return o&&this.comGameUIWraps.showAddChest(o),this._testUnLinked(e.length),[2]}})})},me.prototype._updateAllRandomBubble=function(){for(var e,t,n=0;n<this.m_bubblesArray.length;n++)for(var o=0;o<this.m_bubblesArray[n].length;o++)this.m_bubblesArray[n][o]&&this.m_bubblesArray[n][o].node&&100001<=(t=(e=this.m_bubblesArray[n][o]).color)&&t<=100006&&(1==N.default.getParamsInt(L.OnlineKeys.bubble_random_range,1)?(t=this.getNowAllBubbleColors(),e.color=1e5+t[U.default.randomSeed(0,t.length-1)]):this.m_curLvData.randombubble&&0<this.m_curLvData.randombubble.length?e.color=1e5+this.m_curLvData.randombubble[U.default.randomSeed(0,this.m_curLvData.randombubble.length-1)]:e.color=U.default.randomSeed(100001,100006),e.node.getComponent(he.default).updateRandom(e.color))},me.prototype._updateAllghostBubble=function(){for(var e,t=0;t<this.m_bubblesArray.length;t++)for(var n=0;n<this.m_bubblesArray[t].length;n++)this.m_bubblesArray[t][n]&&cc.isValid(this.m_bubblesArray[t][n].node)&&((e=this.m_bubblesArray[t][n]).color,e.state!=S.BubbleState.none&&(e.state==S.BubbleState.normal?e.state=S.BubbleState.ghost:e.state=S.BubbleState.normal,e.node.getComponent(he.default).updateGhost(e.state)))},me.prototype._checkBlackHole=function(e){function t(e,t){return n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&1002==(t=n.m_bubblesArray[e][t]).color?t.node:null}var n=this,o=this.m_bubblesArray[e.x][e.y],i=e.x,r=e.y,a=(this.m_bubblesArray[i][r].color,r),s=null;return((s=t(i-1,a=i%2==0?r-1:a))||(s=t(i-1,a+1))||(s=t(i,r-1))||(s=t(i,r+1))||(s=t(i+1,a))||!!(s=t(i+1,a+1)))&&(o.node.getComponent(he.default).gotoBlackHole(e,s),!(this.m_bubblesArray[e.x][e.y]=void 0))},me.prototype._checkIce=function(e){function t(e,t,o){n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&1003==(t=n.m_bubblesArray[e][t]).color&&(100001<=o&&o<=100006&&(o-=1e5),t.color=o,t.isBreakIce=!0)}var n=this,o=e.x,i=e.y,r=this.m_bubblesArray[o][i].color;t(o-1,e=o%2==0?i-1:i,r),t(o-1,e+1,r),t(o,i-1,r),t(o,i+1,r),t(o+1,e,r),t(o+1,e+1,r);for(var a=[],s=0;s<this.m_bubblesArray.length;s++)for(var c=0;c<this.m_bubblesArray[s].length;c++)this.m_bubblesArray[s][c]&&this.m_bubblesArray[s][c].isBreakIce&&(this.m_bubblesArray[s][c].isBreakIce=!1,a.push(cc.v2(s,c)));for(var u=0;u<a.length;u++){var l=this.m_bubblesArray[a[u].x][a[u].y];l.node.getComponent(he.default).breakIce(l.color)}},me.prototype._checkBoom=function(e,t){var n=this;function o(e,t,o){n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((r=n.m_bubblesArray[e][t]).isVisited||(r.isVisited=!0));var r=e%2==0?t-1:t;i(e-1,r,o),i(e-1,r+1,o),i(e,t-1,o),i(e,t+1,o),i(e+1,r,o),i(e+1,r+1,o)}this.m_eventitemboom++;var i=function(e,t){n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((t=n.m_bubblesArray[e][t]).isVisited||(t.isVisited=!0))},r=e.x,a=e.y,s=this.m_bubblesArray[r][a].color;o(r-1,e=r%2==0?a-1:a,s),o(r-1,e+1,s),o(r,a-1,s),o(r,a+1,s),o(r+1,e,s),o(r+1,e+1,s);for(var c=[],u=0;u<this.m_bubblesArray.length;u++)for(var l=0;l<this.m_bubblesArray[u].length;l++)this.m_bubblesArray[u][l]&&this.m_bubblesArray[u][l].isVisited&&(this.m_bubblesArray[u][l].isVisited=!1,c.push(cc.v2(u,l)));for(var d=0;d<c.length;d++)this.m_bubblesArray[c[d].x][c[d].y].node.getComponent(he.default).boom(),this.m_bubblesArray[c[d].x][c[d].y]=null;t&&t.node.destroy(),f.AudioMgr.playSound(h.AudioEnum.explosion),this.ishaveboom=!0,this.scheduleOnce(this._testUnLinked,.2)},me.prototype._checkLight=function(){return u(this,void 0,void 0,function(){var e,t,n,o,i;return l(this,function(r){switch(r.label){case 0:for(this.m_eventitemLight++,this.ishaveboom=!0,(e=this.shootBubble.node.getChildByName("bubble_light01")).angle=fe.default.I.shooter.angle,e.active=!0,e.getComponent(cc.Animation).play("anim_bubble_light01"),t=[],n=0;n<this.m_bubblesArray.length;n++)for(o=0;o<this.m_bubblesArray[n].length;o++)this.m_bubblesArray[n][o]&&this.m_bubblesArray[n][o].node.getChildByName("light").active&&(this.m_bubblesArray[n][o].node.getChildByName("light").active=!1,t.push(cc.v3(n,o,this.m_bubblesArray[n][o].color)));for(i=0;i<t.length;i++)this.m_bubblesArray[t[i].x][t[i].y].node.getComponent(he.default).playDeathAnimation(t[i]),this.m_bubblesArray[t[i].x][t[i].y]=null;return f.AudioMgr.playSound(h.AudioEnum.pp_laser),[4,v.default.wait(1e3)];case 1:return r.sent(),O.PoolMgr.putNode(this.shootBubble.node),this.scheduleOnce(this._testUnLinked,.1),[2]}})})},me.prototype._checkRainbowBall=function(e,t){var n=this;function o(e,t){var o,r;n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((o=n.m_bubblesArray[e][t]).isVisited||(o.isVisited=!0),i(e-1,r=e%2==0?t-1:t,o.color,o.node),i(e-1,r+1,o.color,o.node),i(e,t-1,o.color,o.node),i(e,t+1,o.color,o.node),i(e+1,r,o.color,o.node),i(e+1,r+1,o.color,o.node))}this.m_eventitemRainbow++,this.ishaveboom=!0;var i=function e(t,o,i,r){var a=r;if(n.m_bubblesArray[t]&&n.m_bubblesArray[t][o]){var s=n.m_bubblesArray[t][o];if(!s.isVisited){if(10001<=s.color&&s.color<=10006){if(s.color-1e4!==i)return}else if(100001<=s.color&&s.color<=100006){if(s.color-1e5!==i)return}else if(s.color!==i)return;s.isVisited=!0,s.index=j.default.Distance(cc.v3(s.node.position.x,s.node.position.y,0),cc.v3(a.position.x,a.position.y,0)),a=t%2==0?o-1:o,e(t,o-1,i,r),e(t,o+1,i,r),e(t+1,a,i,r),e(t+1,a+1,i,r),e(t-1,a,i,r),e(t-1,a+1,i,r)}}},r=e.x,a=e.y;this.m_bubblesArray[r][a].color,this.m_bubblesArray[r][a].isVisited=!0,o(r-1,e=r%2==0?a-1:a),o(r-1,e+1),o(r,a-1),o(r,a+1),o(r+1,e),o(r+1,e+1);for(var s,c=[],u=0;u<this.m_bubblesArray.length;u++)for(var l=0;l<this.m_bubblesArray[u].length;l++)this.m_bubblesArray[u][l]&&this.m_bubblesArray[u][l].isVisited&&(this.m_bubblesArray[u][l].isVisited=!1,c.push(cc.v3(u,l,this.m_bubblesArray[u][l].index)));for(s in c.sort(function(e,t){return e.z-t.z}),c)this._checkIce(c[s]);for(s in c){var d=this.m_bubblesArray[c[s].x][c[s].y];c[s]=cc.v3(c[s].x,c[s].y,d.color)}for(f.AudioMgr.playSound(h.AudioEnum.pp_rainbow),t&&t.node.destroy(),s=0;s<c.length;s++)(d=this.m_bubblesArray[c[s].x][c[s].y]).node.getComponent(he.default).ranbow(),this.m_bubblesArray[c[s].x][c[s].y]=null;this.scheduleOnce(this._testUnLinked,.2)},me.prototype._checkLaser=function(e,t){this.m_eventitemLaser++,this.ishaveboom=!0;var n=e.x,o=e.y,i=e.y;if(n%2==0&&(i=o-1),0<=n-1&&this.getIsPointHaveBall(n-1,i)){this.m_bubblesArray[e.x][e.y].node.position=this.m_bubblesArray[n-1][i].node.position,this.m_bubblesArray[e.x][e.y].isVisited=!0;for(var r=this.m_bubblesArray[e.x-1],a=0;a<r.length;a++)(s=r[a])&&0==s.isVisited&&(s.isVisited=!0)}else if(0<=n-1&&this.getIsPointHaveBall(n-1,i+1))for(this.m_bubblesArray[e.x][e.y].node.position=this.m_bubblesArray[n-1][i+1].node.position,this.m_bubblesArray[e.x][e.y].isVisited=!0,r=this.m_bubblesArray[e.x-1],a=0;a<r.length;a++)(s=r[a])&&0==s.isVisited&&(s.isVisited=!0);else if(this.m_bubblesArray[e.x])for(r=this.m_bubblesArray[e.x],a=0;a<r.length;a++)(s=r[a])&&0==s.isVisited&&(s.isVisited=!0);for(var s,c=[],u=0;u<this.m_bubblesArray.length;u++)for(var l=0;l<this.m_bubblesArray[u].length;l++)this.m_bubblesArray[u][l]&&this.m_bubblesArray[u][l].isVisited&&(this.m_bubblesArray[u][l].isVisited=!1,c.push(cc.v2(u,l)));for(a=0;a<c.length;a++)(s=this.m_bubblesArray[c[a].x][c[a].y]).node.getComponent(he.default).Laser(),this.m_bubblesArray[c[a].x][c[a].y]=null;t&&t.node.destroy(),f.AudioMgr.playSound(h.AudioEnum.bubble_lightning),this.scheduleOnce(this._testUnLinked,.2)},me.prototype._testUnLinked=function(e){var t=this;void 0===e&&(e=0);for(var n=function e(n,o){var i;t.m_bubblesArray[n]&&t.m_bubblesArray[n][o]&&((i=t.m_bubblesArray[n][o]).isVisited||(i.isVisited=!0,i.isLinked=!0,e(n-1,i=n%2==0?o-1:o),e(n-1,i+1),e(n,o-1),e(n,o+1),e(n+1,i),e(n+1,i+1)))},o=0;o<this.m_bubblesArray[0].length;o++)this.m_bubblesArray[0][o]&&n(0,o);this.getclouds().forEach(function(e){n(e.row,e.col)});for(var i,r,a=0,s=0,c=w.DataMgr.Task.isChestFuncOpen,u=w.DataMgr.User.TaskDaily.collectColor,l=0;l<this.m_bubblesArray.length;l++)for(var d=0;d<this.m_bubblesArray[l].length;d++)this.m_bubblesArray[l][d]&&(this.m_bubblesArray[l][d].isLinked?(this.m_bubblesArray[l][d].isVisited=!1,this.m_bubblesArray[l][d].isLinked=!1):(r=this.m_bubblesArray[l][d].node,i=y.default.getTargetPos(r,this.node.parent),r.parent=this.node.parent,r.position=i,this.m_bubblesArray[l][d]=null,(r=r.getComponent(he.default)).playDownAnimation(cc.v2(l,d)),a++,c&&r.m_id===u&&s++));10<=a+e&&this.comGameUIWraps.showCombo(),this._nextBubble(),s&&this.comGameUIWraps.showAddChest(s)},me.prototype._nextBubble=function(){this.ballindex++,this.updatemapdata(),this._updateAllRandomBubble(),this._updateAllghostBubble(),this._createOneShooter(),this.checkMoveMap(),this.checkback()},me.prototype._bubbleMove=function(){var e=this.shootBubble.node;if(e.x<this.m_r){for(;e.position=e.position.sub(cc.v2(this.shootDir.x,this.shootDir.y)),!(e.position.x>=0+this.m_r&&e.position.x<=750-this.m_r););this.shootDir.x=Math.abs(this.shootDir.x)}if(e.x>x.default.SCREEN_W-this.m_r){for(;e.position=e.position.sub(cc.v2(this.shootDir.x,this.shootDir.y)),!(e.position.x>=0+this.m_r&&e.position.x<=750-this.m_r););this.shootDir.x=-Math.abs(this.shootDir.x)}e.position=e.position.add(cc.v2(2400*this.shootDir.x*(1/60),2400*this.shootDir.y*(1/60)))},me.prototype.initGame=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=-1),this.initEventData(),2===this.m_curLv&&R.default.active(),this.isfirstfreechange=_.default.FirstFreeChangeAB,this.m_changeicon.active=!this.isfirstfreechange,this.node.children[0].active=_.default.IsNewPassModel,this.node.children[0].getComponent(cc.Widget).bottom=x.default.SCREEN_H-15,3==this.m_curLv&&_.default.IsRedPacketOpen&&!m.default.I.wxRedPacketPopup&&(this.showBanner(),this.node.parent.parent.getChildByName("bannertxt").active=!1),this.m_tempintegrals=[],this.comGameUIWraps.setRedPacketInfo(),this.isguiding=!1,this.isrestart=!1,this.isshoweditemtips=!1,this.isstartrandomitem=!1,this.m_props={0:0,1:0,2:0,3:0},this.startTime=F.default.nowTime,this.m_GuideTxT.active=!1,this.isShowProp=!1,this.m_star=0,this.iswin=!1,this.ispasswin=!1,this.isfreechange=!1,this.m_backnode.active=!1,this.m_BottomGameObj.active=!1,w.DataMgr.Task.setCollectTempNum(0),_.default.IsNewPassModel?this.m_RockObj.active=!0:this.m_RockObj.active=!1,this.m_Top.getChildByName("game_lv").getChildByName("layout").getChildByName("lv_num").getComponent(W.default).setValue(this.m_curLv,"",!1),g.default.playAnim(this.m_RockObj,"anim_groud_boom_init"),this.nodeRoundArrow.getComponent(cc.Animation).play("anim_game_round_arrow"),this.m_changeicon.getComponent(cc.Animation).play("anim_video_icon"),this.node.parent.parent.getChildByName("topbar").getChildByName("btn_pause").active=2<this.m_curLv,this.m_BaseScore=10,this.InitDiamond(),this.ballindex=0,this.islock=!1,this.hideGuid(),this.node.position=cc.v2(0,0),this.m_AddBallBtn.active=!1,this.clearData(),this.m_curLvData=w.DataMgr.Level.getData(this.m_curLv),0<=n||(n=w.DataMgr.Config.getSeed(this.m_curLv)),U.default.setSeed(n),this.m_eventseed=n,this.fixlvdata();var o=this.m_curLvData.bubble_list;this.m_mapdata=o,R.default.addLogLevel({id:this.m_curLv,ptype:0});for(var i=0;i<o.length;i++){var r=o[i];this.m_bubblesArray[i]=[];for(var a=0;a<r.length;a++){var s,c,u=o[i][a];0!==u?(1e5==u?u=this.m_curLvData.randombubble&&0<this.m_curLvData.randombubble.length?1e5+this.m_curLvData.randombubble[U.default.randomSeed(0,this.m_curLvData.randombubble.length-1)]:U.default.randomSeed(100001,100006):200==u?u=this.m_curLvData.randombubble&&0<this.m_curLvData.randombubble.length?200+this.m_curLvData.randombubble[U.default.randomSeed(0,this.m_curLvData.randombubble.length-1)]:U.default.randomSeed(201,206):-200==u&&(u=-(this.m_curLvData.randombubble&&0<this.m_curLvData.randombubble.length?200+this.m_curLvData.randombubble[U.default.randomSeed(0,this.m_curLvData.randombubble.length-1)]:U.default.randomSeed(201,206))),s=O.PoolMgr.getPrefab(this.m_bubblePrefab),c=x.default.convertRowColToPos(i,a,this.m_r),s.getComponent(he.default).init(this,c,Math.abs(u)),(c=new A.bubbledata).node=s,c.color=s.getComponent(he.default).m_id,c.isLinked=!1,c.isVisited=!1,c.state=S.BubbleState.none,201<=u&&u<=206?c.state=S.BubbleState.normal:-206<=u&&u<=-201&&(c.state=S.BubbleState.ghost),s.getComponent(he.default).updateGhost(c.state),this.m_bubblesArray[i][a]=c):this.m_bubblesArray[i][a]=null}}this.setRandomBuff(),e&&(this.initStar(),this.setScore()),n=N.default.getParamsInt(L.OnlineKeys.early_props_abtest,2),e=N.default.getParamsInt(L.OnlineKeys.early_props_lvs,3),n=(0==n||1==n&&M.default.I.ID%2==1)&&T.default.I.CurLevel<e,t?(this._createOneShooter(),e=x.default.SCREEN_H-12*this.m_r,t=this.getBottomBubbleY(),t=Math.max(0,e-t),this.node.y=t,this.shootBubble.node.position=y.default.getTargetPos(this.shooter,this.node),this.shootBubble2.node.position=y.default.getTargetPos(this.shooter2,this.node),n||(this.comGameUIWraps.initItemsInfo(),this.comGameUIWraps.showAnimItems()),this.showStartTip(),this.m_Labbubblenum.node.parent.active=!0,this.node.parent.getComponent(cc.Animation).play(),fe.default.I.m_bottombally=this.getBottomBubbleY(),fe.default.I.m_bubblesArray=this.getBottomBubbleInView(),1<this.m_curLv?fe.default.I.hideline():fe.default.I.showline(!0)):(n||this.comGameUIWraps.hideItems(),this._createOneShooter(!_.default.IsNewPassModel),this.isgameing=!1,this.m_isstartani=!1,this.node.y=-2e3,this.shootBubble.node.position=y.default.getTargetPos(this.shooter,this.shootBubble.node.parent),this.shootBubble2.node.position=y.default.getTargetPos(this.shooter2,this.shootBubble2.node.parent),this.shootBubble.node.active=!1,this.shootBubble2.node.active=!1,_.default.IsNewPassModel||(this.m_changeicon.active=!1,this.m_Labbubblenum.node.parent.active=!1)),n?(this.m_BottomObj.getChildByName("right").active=!1,this.comGameUIWraps.playRedBottominani()):(this.m_BottomObj.getChildByName("right").active=!0,this.comGameUIWraps.playRedinani()),V.default.StartRecord(),1<=w.DataMgr.User.CurLevel&&_.default.IsInsertAdGameStart&&y.default.showFailInterstitial()},me.prototype.clearData=function(){this.node.children.forEach(function(e){"top_ground"!=e.name&&O.PoolMgr.putNode(e)}),this.shootBubble&&(this.shootBubble.node.isValid&&O.PoolMgr.putNode(this.shootBubble.node),this.shootBubble=null),this.shootBubble2&&(O.PoolMgr.putNode(this.shootBubble2.node),this.shootBubble2=null);for(var e=0;e<this.m_bubblesArray.length;e++)for(var t=0;t<this.m_bubblesArray[e].length;t++)this.m_bubblesArray[e][t]&&this.m_bubblesArray[e][t].node&&O.PoolMgr.putNode(this.m_bubblesArray[e][t].node);this.m_failaddbubbletimes=0,this.isgameover=!1,this.m_addbubbletimes=0,this.m_addbubbles=0,this.m_curBubbleindex=0,this.m_curScore=0,this.m_star=-1,this.m_bubblesArray=[],this.ishaveboom=!1,this.m_BaseScore=10},me.prototype.setHadBubbles=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.getHadBubbleNum();e&&(n=this.getHadBubbleNum()+1),this.m_Labbubblenum.setValue(n,"",t),this.playItemTipAni()},me.prototype.getcuglv=function(e){return e>b.default.LoopLvMax?(e-10)%(b.default.LoopLvMax-9)+10:e},me.prototype._createOneShooter=function(e){var t=this;(e=void 0===e||e)?this.setHadBubbles():(n=this.getHadBubbleNum(),this.m_Labbubblenum.setValue(n,"")),this.m_r=this.m_bubbleobj.width/2,this.getNowBubbleColors(),e=-1,this.shootBubble2?(this.shootBubble2.color==this.oldballcolor&&(e=this.oldballcolor),i=this.shootBubble2.color,(o=this.shootBubble2.node).getComponent(he.default).init(this,this.shooter2.position,i),o.active=!0,o.scale=.7):(i=this.getRandomBubble(),(o=O.PoolMgr.getPrefab(this.m_bubblePrefab)).getComponent(he.default).init(this,this.shooter.position,i),o.active=!0,o.scale=1);var n=new A.bubbledata;n.node=o,n.color=i,n.isLinked=!1,n.isVisited=!1;var o=O.PoolMgr.getPrefab(this.m_bubblePrefab);o.active=!0;var i=this.getRandomBubble2(e);o.getComponent(he.default).init(this,this.shooter2.position,i),o.scale=.7,(e=new A.bubbledata).node=o,e.color=i,e.isLinked=!1,e.isVisited=!1,this.shootBubble=n,this.shootBubble2=e,this.m_curBubbleindex++,this.m_isready=!0,this.getHadBubbleNum()<0&&(this.shootBubble2.node.active=!1,this.shootBubble.node.active=!1),this.m_curLv<=1&&fe.default.I.showline(!0),this.playItemTipAni(),this.m_addbubbletimes<2&&this.getHadBubbleNum()<10?!y.default.s_isClosedAddBubble&&0==this.m_AddBallBtn.active&&this.getBottomBubble()?de.ViewMgr.openPopwin(X.default,{data:{isfail:!1,callback:function(){t.m_AddBallBtn.active=!0,g.default.stopAnim(t.m_AddBallBtn),g.default.playAddAnim(t.m_AddBallBtn,"anim_game_moreballs_out").then(function(){return g.default.playAddAnim(t.m_AddBallBtn,"anim_game_moreballs")})},context:this}}):this.m_AddBallBtn.active||(this.m_AddBallBtn.active=!0,this.isgameover||(this.nodeLeft10.active=!0),f.AudioMgr.playSound(h.AudioEnum.warning),g.default.playAddAnim(this.nodeLeft10).then(function(){return t.nodeLeft10.active=!1}),g.default.stopAnim(this.m_AddBallBtn),g.default.playAddAnim(this.m_AddBallBtn,"anim_game_moreballs_out").then(function(){return g.default.playAddAnim(t.m_AddBallBtn,"anim_game_moreballs")})):(g.default.stopAnim(this.m_AddBallBtn),this.m_AddBallBtn.active=!1),this.checkitemtip()},me.prototype._BackOneShooter=function(){var e;this.clearAllpreview(),this.shootBubble&&(t=this.shootBubble.node,O.PoolMgr.putNode(t)),(e=O.PoolMgr.getPrefab(this.m_bubblePrefab)).scale=1,e.getComponent(he.default).init(this,this.shooter.position,this.oldshootbubble.color);var t=new A.bubbledata;t.node=e,t.color=this.oldshootbubble.color,t.isLinked=!1,t.isVisited=!1,this.shootBubble=t,this.shootBubble2.node.active=!0,this.nextballAni()},me.prototype.createItemBubble=function(e){var t;this.showPropUI();var n,o=e+10;this.shootBubble&&(n=this.shootBubble.node,cc.tween(n).to(20/60,{scale:0}).call(function(){O.PoolMgr.putNode(n)}).start()),(t=O.PoolMgr.getPrefab(this.m_bubblePrefab)).scale=1,t.getComponent(he.default).init(this,this.shooter.position,o),(e=new A.bubbledata).node=t,e.color=o,e.isLinked=!1,e.isVisited=!1,1<=this.shootBubble.color&&this.shootBubble.color<=6&&(this.oldshootbubble=this.shootBubble),this.shootBubble=e,this.itemballAni(),this.m_isready=!0,this.m_curLv<=1&&fe.default.I.showline(!0)},me.prototype.showPropUI=function(){this.isShowProp||(this.m_backnode.active=!1,this.isShowProp=!0,this.nodBubbleAd.active=!1,this.comGameUIWraps.showItemUse())},me.prototype.hidePropUI=function(e){this.isShowProp&&(e&&this._BackOneShooter(),this.isShowProp=!1,this.nodBubbleAd.active=!0,this.checkback(),this.comGameUIWraps.hideItemUse())},me.prototype.onChangeBall=function(){var e=function(e){if(e.m_isready&&!(6<e.shootBubble.color)){if(e.isfreechange||e.isfirstfreechange)return e.changeBubble(),void(e.isfirstfreechange&&(e.isfirstfreechange=!1));var t=N.default.getParamsInt(L.OnlineKeys.free_change_for_1_lv_abtest,0);0==t||1==t&&M.default.I.ID%2==1?N.default.dispatch(L.ShareKeys.ChangeBubble,{success:e.changeBubble,context:e}):N.default.dispatch(L.ShareKeys.ChangeBubble,{success:e.changeBubble,context:e,tips:"Unlimited use after video~"})}};-1==this.changeBall?(console.error("changeBall.................Bubblemgr.js 619"),javaCall.ShowReward(this,e),this.nodBubbleAd.getComponent(cc.Animation).play("anim_endless_icon"),this.changeBall=1):e(this)},me.prototype.changeBubble=function(){var e=this;this.setfreechange(),f.AudioMgr.playSound(h.AudioEnum.bubble_shoot);var t=this.shootBubble;this.shootBubble=this.shootBubble2,this.shootBubble2=t,cc.tween(this.shootBubble.node).to(.2,{position:this.shooter.position.sub(this.shootBubble.node.parent.position),scale:1}).call(function(){e.m_isready=!0,e.m_curLv<=1&&fe.default.I.showline(!0)}).start(),cc.tween(this.shootBubble2.node).to(.2,{position:this.shooter2.position.sub(this.shootBubble2.node.parent.position),scale:.7}).start(),this.shooter.position.sub(this.shootBubble.node.parent.position),this.shootBubble.node.scale=.7,this.m_isready=!1,fe.default.I.hideline()},me.prototype.initStar=function(){var e=this.m_curLvData.score1/this.m_curLvData.score3,t=this.m_curLvData.score2/this.m_curLvData.score3,n=this.m_curLvData.score3/this.m_curLvData.score3;this.m_stars[0].x=234*e-115,this.m_stars[1].x=234*t-115,this.m_stars[2].x=234*n-115},me.prototype.setScore=function(){if(0==this.m_star)for(var e=0;e<this.m_stars.length;e++)this.m_stars[e].getComponent(cc.Animation).play("state_game_star_off");this.m_LabScore.setValue(this.m_curScore,"");var t=this.m_curScore/this.m_curLvData.score3;if(1<=t&&(t=1),this.m_Slider.width=230*t,(t=this.getStarNum())!=this.m_star)if(this.m_star=t,0==this.m_star)for(e=0;e<this.m_stars.length;e++)this.m_stars[e].getComponent(cc.Animation).play("state_game_star_off");else 3==this.m_star?(f.AudioMgr.playSound(h.AudioEnum.star_game_3),this.m_stars[1].getComponent(cc.Animation).play("state_game_star_light"),this.m_stars[2].getComponent(cc.Animation).play("state_game_star_light")):this.playgetstarAni(this.m_star-1)},me.prototype.playgetstarAni=function(e){0==e?f.AudioMgr.playSound(h.AudioEnum.star_game_1):1==e?f.AudioMgr.playSound(h.AudioEnum.star_game_2):2==e&&f.AudioMgr.playSound(h.AudioEnum.star_game_3),this.m_stars[e].getComponent(cc.Animation).play("state_game_star_light")},me.prototype.addScore=function(e){this.m_curScore+=e,this.setScore()},me.prototype.getRandomBubble=function(){var e=this.getNowBubbleColors();if(this.m_curBubbleindex<this.m_curLvData.startbubble.length)for(var t=this.m_curBubbleindex;t<this.m_curLvData.startbubble.length;t++){var n=this.m_curLvData.startbubble[t];if(0<=e.indexOf(n))return n}return 0<e.length?e[U.default.randomSeed(0,e.length-1)]:1},me.prototype.getRandomBubble2=function(e){if(void 0===e&&(e=-1),this.m_curBubbleindex+1<this.m_curLvData.startbubble.length)return this.m_curLvData.startbubble[this.m_curBubbleindex+1];var t=this.getNowBubbleColors();return 1<t.length&&0<e&&0<=(e=t.indexOf(e))&&t.splice(e,1),0<t.length?t[U.default.randomSeed(0,t.length-1)]:1},me.prototype.getNowBubbleColors=function(){for(var e,t,n=[],o=0;o<this.m_bubblesArray.length;o++)for(var i=0;i<this.m_bubblesArray[o].length;i++)this.m_bubblesArray[o][i]&&(10001<=(e=t=this.m_bubblesArray[o][i].color)&&t<=10006?e=t-1e4:100001<=t&&t<=100006?e=t-1e5:201<=t&&t<=206?e=t-200:-206<=t&&t<=-201&&(e=-t-200),t=this.m_bubblesArray[o][i].node,6<e||y.default.getTargetPos(t,this.node.parent).y<x.default.SCREEN_H&&n.indexOf(e)<0&&n.push(e));return n},me.prototype.getNowAllBubbleColors=function(){for(var e,t,n=[],o=0;o<this.m_bubblesArray.length;o++)for(var i=0;i<this.m_bubblesArray[o].length;i++)this.m_bubblesArray[o][i]&&(10001<=(t=e=this.m_bubblesArray[o][i].color)&&e<=10006?t=e-1e4:100001<=e&&e<=100006?t=e-1e5:201<=e&&e<=206?t=e-200:-206<=e&&e<=-201&&(t=-e-200),this.m_bubblesArray[o][i].node,6<t||n.indexOf(t)<0&&n.push(t));return n},me.prototype.getSkinByID=function(e){return 0<e&&e<=6?this.m_skin[e-1]:1001==e?this.m_skin[6]:1002==e?this.m_skin[7]:1003==e?this.m_skin[8]:1004==e?this.m_skin[13]:10==e?this.m_skin[9]:11==e?this.m_skin[10]:12==e?this.m_skin[11]:13==e?this.m_skin[12]:10001<=e&&e<=10006?this.m_skin[e-1e4-1]:100001<=e&&e<=100006?this.m_skin[e-1e5-1]:201<=e&&e<=206?this.m_skin[e-200-1]:-206<=e&&e<=-201?this.m_skin[-e-200-1]:null},me.prototype.getLine=function(){var e=this.shootBubble.color;return 0<e&&e<=6?this.m_LineColor[e-1]:10==e?this.m_LineColor[6]:11==e?this.m_LineColor[7]:12==e?this.m_LineColor[8]:13==e?this.m_LineColor[9]:null},me.prototype.getBottomBubble=function(){for(var e=this.m_bubblesArray.length-1;0<=e;e--)for(var t=this.m_bubblesArray[e],n=0;n<t.length;n++){var o=t[n];if(o&&o.node&&(0<o.color&&o.color<=6||100001<=o.color&&o.color<=100006||201<=o.color&&o.color<=206||-206<=o.color&&o.color<=-201))return o.node}return null},me.prototype.getBubbleCountWithOutSpecial=function(){for(var e=0,t=this.m_bubblesArray.length-1;0<=t;t--)for(var n=this.m_bubblesArray[t],o=0;o<n.length;o++){var i=n[o];i&&i.node&&0<i.color&&i.color<=6&&e++}return e},me.prototype.getSpecialBubble=function(){for(var e=[],t=this.m_bubblesArray.length-1;0<=t;t--)for(var n=this.m_bubblesArray[t],o=0;o<n.length;o++){var i=n[o];i&&i.node&&(1001==i.color||1002==i.color||1003==i.color)&&e.push(i.node)}return e},me.prototype.getBottomAllBubble=function(){for(var e=this.m_bubblesArray.length-1;0<=e;e--)for(var t=this.m_bubblesArray[e],n=0;n<t.length;n++){var o=t[n];if(o&&o.node&&cc.isValid(o.node))return o.node}return null},me.prototype.getBottomBubbleInView=function(){if(null==this.m_bubblesArray)return[];for(var e=[],t=this.m_bubblesArray.length-1;0<=t;t--)for(var n=this.m_bubblesArray[t],o=0;o<n.length;o++){var i,r=n[o];r&&(i=y.default.getTargetPos(r.node,this.node.parent),r&&r.node&&i.y<1226+(cc.winSize.height-1334)/2&&!r.node.getComponent(he.default).m_isghost&&e.push(r))}return e},me.prototype.getBottomBubbleY=function(){var e=this.getBottomAllBubble();return e?e.position.y+e.parent.position.y:0},me.prototype.getHadBubbleNum=function(){return this.m_curLvData.bubble+this.m_addbubbles-this.m_curBubbleindex+this.getDiffABCTest()},me.prototype.getStarNum=function(){var e=0;return this.m_curScore>=this.m_curLvData.score1&&e++,this.m_curScore>=this.m_curLvData.score2&&e++,this.m_curScore>=this.m_curLvData.score3&&e++,e},me.prototype.startAni=function(){this.comGameUIWraps.hideItems(),this.isgameing=!1,this.m_isstartani=!0,this.m_changeicon.active=!1,this.node.y=-2e3,this.shootBubble.node.position=y.default.getTargetPos(this.shooter,this.shootBubble.node.parent),this.shootBubble2.node.position=y.default.getTargetPos(this.shooter2,this.shootBubble2.node.parent),this.shootBubble.node.active=!1,this.shootBubble2.node.active=!1,this.m_Labbubblenum.node.parent.active=!1,this.checkMoveMap(!0,!0,!1)},me.prototype.startAni2=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),u(this,void 0,void 0,function(){var o,i,r,a;return l(this,function(s){switch(s.label){case 0:return o=x.default.SCREEN_H,i=this.getBottomBubbleY(),r=o-i,this.isgameing=!1,this.m_isstartani=!0,this.m_changeicon.active=!this.isfirstfreechange,this.node.y=r,this.shootBubble.node.position=y.default.getTargetPos(this.shooter,this.shootBubble.node.parent),this.shootBubble2.node.position=y.default.getTargetPos(this.shooter2,this.shootBubble2.node.parent),this.shootBubble.node.active=!1,this.shootBubble2.node.active=!1,this.m_Labbubblenum.node.parent.active=!0,r=this.checkMoveMap(!0,!0,!1,!1),[4,v.default.wait(800*r)];case 1:return s.sent(),0<t&&this.comGameUIWraps.animHomeAddStar(t),0<e&&0<(a=this.getHadBubbleNum()-e)?(this.comGameUIWraps.showUpBubble(a),[4,v.default.wait(1e3)]):[3,3];case 2:s.sent(),this.setHadBubbles(!0,!0),s.label=3;case 3:return 2===n.length&&(r=n[0],a=n[1],this.addPopwinList(z.default,{index:r,target:a},!1)),[2]}})})},me.prototype.checkMoveMap=function(e,t,n,o){var i=this;if(void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===o&&(o=!0),(t=void 0!==t&&t)&&o&&_.default.IsNewPassModel&&(o=!1),this.getBottomBubble()){if(this.getHadBubbleNum()<0)return this.isgameover=!0,fe.default.I.hideline(),void this.Fail();var r=x.default.SCREEN_H-12*this.m_r,a=this.getBottomBubbleY(),s=0;if((a<r||r<a&&0<this.node.y)&&(s=r-a),a=t?this.m_StartMoveSpeed:this.m_MoveSpeed,n&&(a*=2,this.m_isstartani=!1),a=Math.abs(s)/a,0!=s)return this.m_isready=!1,fe.default.I.hideline(),this.shootBubble2.node.scale=0,this.node.y+s<=0&&(s=-this.node.y),this.m_MoveTween&&(this.m_MoveTween.stop(),this.m_MoveTween.removeSelf()),this.m_Shoot1Tween&&(this.m_Shoot1Tween.stop(),this.m_Shoot1Tween.removeSelf()),this.m_Shoot2Tween&&(this.m_Shoot2Tween.stop(),this.m_Shoot2Tween.removeSelf()),this.m_Shoot1Tween=cc.tween(this.shootBubble.node).to(a,{y:this.shootBubble.node.y-s},{easing:cc.easing.circOut}).call(function(){}).start(),this.m_Shoot2Tween=cc.tween(this.shootBubble2.node).to(a,{y:this.shootBubble2.node.y-s},{easing:cc.easing.circOut}).call(function(){}).start(),s<0&&this.m_bgctr.move(a,Math.abs(s),cc.easing.circOut),this.m_MoveTween=cc.tween(this.node).to(a,{y:this.node.y+s},{easing:cc.easing.circOut}).call(function(){var n=N.default.getParamsInt(L.OnlineKeys.early_props_abtest,0),r=N.default.getParamsInt(L.OnlineKeys.early_props_lvs,3);r=(0==n||1==n&&M.default.I.ID%2==1)&&T.default.I.CurLevel<r,i.m_isstartani=!1,i.shootBubble.node.active=!0,i.shootBubble2.node.active=!0,i.m_changeicon.active=!i.isfirstfreechange,i.m_isready=!0,i.m_curLv<=1&&fe.default.I.showline(!0),e&&i.nextballAni(),t&&(o?i.showStartTip():i.startGaming(),i.m_Labbubblenum.node.parent.active=!0,i.node.parent.getComponent(cc.Animation).play()),r?i.m_BottomObj.getChildByName("right").active=!1:(i.comGameUIWraps.initItems(),i.m_BottomObj.getChildByName("right").active=!0),fe.default.I.m_bottombally=i.getBottomBubbleY(),fe.default.I.m_bubblesArray=i.getBottomBubbleInView()}).start(),a;e&&this.nextballAni(),fe.default.I.m_bottombally=this.getBottomBubbleY(),fe.default.I.m_bubblesArray=this.getBottomBubbleInView()}else this.nodeLeft10.active=!1,fe.default.I.hideline(),R.default.event(L.EventKeys.goal_clear,""),0<(a=this.getSpecialBubble()).length?this.PlayWinAnim(a):this.PlayWinAnim()},me.prototype.showStartTip=function(){var e=this;f.AudioMgr.playSound(h.AudioEnum.play_ready),R.default.event(L.EventKeys.slide_tutorial_show,""),this.comGameUIWraps.showImgTxt(this.m_curLv).then(function(){var t=N.default.getParamsInt(L.OnlineKeys.insert_ad_lv_start_abtest,0);0==t||1==t&&M.default.I.ID%2==1||y.default.showFailInterstitial(),ae.default.canShow()&&!y.default.s_isShowedReward&&e.addPopwinList(ae.default,{});var n=z.default.canShow();n&&(t=n[0],n=n[1],e.addPopwinList(z.default,{index:t,target:n},!1)),e.startGaming(),e.isrestart&&e.checkBonus()}).catch(function(){e.startGaming(),e.isrestart&&e.checkBonus()})},me.prototype.startGaming=function(){this.isgameing=!0,this.isguiding=this.checkGuide(),this.comGameUIWraps.hideImgTxt()},me.prototype.checkBonus=function(){var e,t;_.default.IsGiftBonus&&(e=this.m_curLv>=k.OnlineMgr.getInt(L.OnlineKeys.start_bonus_min_lv,7),t=k.OnlineMgr.getObject(L.OnlineKeys.no_start_bonus_lv,[11,12,19,31,71]),e&&t.indexOf(this.m_curLv)<0&&(_.default.IsGiftBonusHide&&1===I.AppDataMgr.get(S.AppDataKey.GiftHelpSkip,0)||de.ViewMgr.isHadPopwin(se.default)||de.ViewMgr.openPopwin(J.default)))},me.prototype.nextballAni=function(){var e=this;this.shootBubble.node.active=!0,this.shootBubble2.node.active=!0;var t=this.getNowBubbleColors(),n=this.shootBubble.color;t.indexOf(n)<0&&(n=this.getRandomBubble(),this.shootBubble.node.getComponent(he.default).init(this,this.shooter.position,n),this.shootBubble.color=n),n=this.shootBubble2.color,t.indexOf(n)<0&&(n=this.getRandomBubble(),this.shootBubble2.node.getComponent(he.default).init(this,this.shooter2.position,n),this.shootBubble2.color=n),this.shooter.position.sub(this.shootBubble.node.parent.position),this.shootBubble.node.position=this.shootBubble2.node.position,this.shootBubble.node.scale=.7,this.m_isready=!1,fe.default.I.hideline(),this.shootBubble.node.runAction(cc.sequence(cc.spawn(cc.bezierBy(20/60,[cc.v2(-20,72),cc.v2(-30,72),cc.v2(-45,72)]),cc.scaleTo(20/60,1)),cc.moveTo(5/60,this.shooter.position.sub(this.shootBubble.node.parent.position)),cc.callFunc(function(){e.m_isready=!0,e.m_curLv<=1&&fe.default.I.showline(!0),e.islock=!1},this))),this.shootBubble2.node.scale=0,cc.tween(this.shootBubble2.node).to(20/60,{scale:.7}).start()},me.prototype.itemballAni=function(){var e=this;cc.tween(this.shootBubble2.node).to(20/60,{scale:0}).call(function(){e.shootBubble2.node.active=!1,e.shootBubble2.node.scale=.7}).start(),this.shootBubble.node.scale=0,cc.tween(this.shootBubble.node).to(17/60,{scale:1.2}).to(.05,{scale:1}).start()},me.prototype.Win=function(){return u(this,void 0,void 0,function(){var e,t,n,o,i,r,a,s=this;return l(this,function(c){switch(c.label){case 0:return this.changeBall=-1,console.error("callback===============>BubbleMgr,win?\u80dc\u5229\u4e86\uff0c\u63d2\u5c4f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),javaCall.ShowInterstitial(this,null),javaCall.LEVELEND(1,1),w.DataMgr.Task.reqChestAddNum(this.collectTempNum),p.I.addPopwinList(ue.default,{id:U.default.random(0,4)}),e=this.getHadBubbleNum(),1==this.m_curLv?R.default.event(L.EventKeys.left_ball_ani_fin,""):2==this.m_curLv&&R.default.event(L.EventKeys.left_ball_ani_fin2,""),t=this.getStarNum(),a=w.DataMgr.User.getLeveldataByLv(this.m_curLv),n=w.DataMgr.User.LevelStarNum,r=F.default.nowTime-this.startTime,T.default.I.reqAddRedPacket(this.m_tempintegrals).then(function(){s.m_tempintegrals=[],s.comGameUIWraps.setRedPacketInfo()}),T.default.I.reqBubbleLevel(this.m_curLv,t,this.m_curScore,!0),T.default.I.reqResetSeeds(),r={first:a?0:1,ctime:r,score:this.m_curScore,rnum:this.m_eventrevive,seed:this.m_eventseed,opts:{iid1_num:this.m_eventitemboom,iid2_num:this.m_eventitemLight,iid3_num:this.m_eventitemRainbow,iid4_num:this.m_eventitemLaser,vnum:this.m_eventvideo,gold:this.m_eventcoin,mid:w.DataMgr.User.CurLevel}},R.default.logLevelWin(this.m_curLv,r),(r=w.DataMgr.User.LevelStarNum)>n&&le.default.I.save(r,0,!0),o=t-(a?a.star:0),r=this.m_curLv,i=w.DataMgr.Task.checkChestReward(),N.default.getParamsInt(L.OnlineKeys.skip_win_panel_abtest,0),a=r+1,r=N.default.getParamsInt(L.OnlineKeys.skip_win_panel_max_lv_abtest,0),N.default.getParamsInt(L.OnlineKeys.skip_win_panel_max_lv,2),(2==r||1==r&&M.default.I.ID%2==0)&&N.default.getParamsInt(L.OnlineKeys.skip_win_panel_max_lv_b,2),_.default.IsNewPassModel?[3,2]:(this.m_LabWinScore.setValue(this.m_curScore,""),cc.tween(this.node.parent).to(.3,{opacity:255}).start(),g.default.playAnim(this.m_Top,"anim_game_win_out").then(function(){w.DataMgr.User.reqStar(o),s.flyStar(o,t),cc.tween(s.m_Slider).to(1,{}).call(function(){var e,t;g.default.playAnim(s.m_Top,"anim_game_win_in").then(function(){s.initStar(),s.setScore(),g.default.playAnim(s.m_Top,"anim_game_win_in01")}),s.startAni(),2===i.length&&(e=i[0],t=i[1],s.addPopwinList(z.default,{index:e,target:t},!1))}).start()}),[4,v.default.wait(500)]);case 1:return c.sent(),this.enterGame(a,!1,!1),0==(r=N.default.getParamsInt(L.OnlineKeys.insert_ad_target_done_abtest,0))||1==r&&M.default.I.ID%2==1||y.default.showFailInterstitial(),[3,6];case 2:return this.m_RockObj.active=!0,this.showbottomUI(),g.default.playAnim(this.m_RockObj,"anim_groud_boom").then(function(){}),g.default.playAnim(this.m_Top,"anim_game_topbar_out"),[4,v.default.wait(4/6*1e3)];case 3:return c.sent(),g.default.shakeEffect(this.m_gamecamera,.4),g.default.shakeEffect(this.m_UIcamera,.4),this.m_RockObj.getChildByName("boom0").children[0].getComponent(cc.ParticleSystem).resetSystem(),this.m_RockObj.getChildByName("boom0").children[1].getComponent(cc.ParticleSystem).resetSystem(),[4,v.default.wait(1e3)];case 4:return c.sent(),this.enterGame(a,!1,!0,!1,!1),0==(a=N.default.getParamsInt(L.OnlineKeys.insert_ad_target_done_abtest,0))||1==a&&M.default.I.ID%2==1||y.default.showFailInterstitial(),[4,v.default.wait(100)];case 5:c.sent(),0<o?(w.DataMgr.User.reqStar(o),ae.default.canShow()&&!y.default.s_isShowedReward&&this.addPopwinList(ae.default,{}),g.default.playAnim(this.m_Top,"anim_game_topbar_init"),this.startAni2(e,o,i)):(ae.default.canShow()&&!y.default.s_isShowedReward&&this.addPopwinList(ae.default,{}),g.default.playAnim(this.m_Top,"anim_game_topbar_init"),this.startAni2(e,0,i)),c.label=6;case 6:case 7:return[2]}})})},me.prototype.flyStar=function(e,t){return u(this,void 0,void 0,function(){var n,o,i,r;return l(this,function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<e?(o=n,i=this.m_stars[t-1-n],(r=cc.instantiate(i)).parent=this.node.parent.parent,r.position=y.default.getTargetPos(i,this.node.parent.parent),r.scale=1.8,0==n&&f.AudioMgr.playSound(h.AudioEnum.home_star_fly_start),this.comGameUIWraps.animHomeBezierStar(e,r,this.node.parent.parent,o),i.getComponent(cc.Animation).play("state_game_star_off"),[4,v.default.wait(300)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},me.prototype.Fail=function(){this.changeBall=-1,console.error("callback===============>BubbleMgr,fail?\u5931\u8d25\uff0c\u63d2\u5c4f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),javaCall.LEVELEND(1,0);var e=N.default.getParamsInt(L.OnlineKeys.revive_type_abtest,0);0==e||1==e&&M.default.I.ID%2==1?de.ViewMgr.openPopwin(X.default,{data:{isfail:!0}}):ce.default.OpenUIRevive()},me.prototype.PlayWinAnim=function(e){return void 0===e&&(e=[]),u(this,void 0,void 0,function(){var t,n,o,i,r=this;return l(this,function(a){switch(a.label){case 0:return this.isgameover?[2]:(fe.default.I.hideline(),0<e.length?(e.forEach(function(e){e.getComponent(he.default).playDownAnimation(null)}),[4,v.default.wait(1e3)]):[3,2]);case 1:a.sent(),a.label=2;case 2:if(this.isgameover=!0,t=this.getHadBubbleNum(),f.AudioMgr.playSound(h.AudioEnum.target_done),_.default.IsNewPassModel?this.nodeOver.active=!1:(this.nodeOver.active=!0,g.default.playAddAnim(this.nodeOver).then(function(){r.nodeOver.active=!1,r.iswin=!0})),_.default.IsNewPassModel)return this.addScore(500*this.getHadBubbleNum()),this.Win(),[2];n=function(e){var t,n,i;return l(this,function(a){switch(a.label){case 0:return t=O.PoolMgr.getPrefab(o.m_bubblePrefab),n=U.default.random(1,7),i=U.default.random(0,2),t.getComponent(he.default).init(o,o.shooter.position,n),cc.tween(t).to(.5,{x:t.position.x+U.default.random(-300,300),y:t.position.y+U.default.random(300,700)},{easing:cc.easing.sineOut}).call(function(){t.getComponent(he.default).playWinDeathAnimation(n),0==i&&r.createFireWorkEff(t.position)}).start(),o.m_curBubbleindex++,o.setHadBubbles(),[4,v.default.wait(o.getDelayTime(e))];case 1:return a.sent(),[2]}})},o=this,i=0,a.label=3;case 3:return i<t?[5,n(i)]:[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return[4,v.default.wait(500)];case 7:return a.sent(),this.Win(),[2]}})})},me.prototype.dopasswin=function(){this.addScore(500*this.getHadBubbleNum()),this.ispasswin=!0,this.Win()},me.prototype.getDelayTime=function(e){var t=k.OnlineMgr.getObject(L.OnlineKeys.BubblePopParams,[200,20,5]),n=t[0],o=t[1];return e+1<=t[2]?n:Math.max(n-e*o,o)},me.prototype.createFireWorkEff=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(n){switch(n.label){case 0:return(t=cc.instantiate(this.m_FireWorkeff)).parent=this.node.parent,t.position=e,t.active=!0,t.getComponent(cc.Animation).play(),[4,v.default.wait(1e3)];case 1:return n.sent(),t.destroy(),[2]}})})},me.prototype.enterGame=function(e,t,n,o,i,r){this.changeBall=-1,this.nodBubbleAd.getComponent(cc.Animation).play("anim_video_icon"),console.error("callback===============>BubbleMgr=======\u65b0\u5f00\u4e00\u5c40\uff01"+this.m_curLv),javaCall.LEVELBEGIN(1),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===i&&(i=!0),void 0===r&&(r=-1),this.m_curLv=e,this.initGame(n,o,r),t&&this.startAni(),i&&this.showbottomUI()},me.prototype.reStart=function(){var e={first:0,ctime:0,score:p.I.m_curScore,rnum:this.m_eventrevive,seed:this.m_eventseed,opts:{iid1_num:this.m_eventitemboom,iid2_num:this.m_eventitemLight,iid3_num:this.m_eventitemRainbow,iid4_num:this.m_eventitemLaser,vnum:this.m_eventvideo,gold:this.m_eventcoin,mid:w.DataMgr.User.CurLevel}};R.default.logLevelFail(this.m_curLv,e),this.initGame(),this.isrestart=!0,this.startAni(),this.hidebottomUI(!0)},me.prototype.checkLightPreview=function(e){for(var t,n=0;n<this.m_bubblesArray.length;n++)for(var o=0;o<this.m_bubblesArray[n].length;o++)!this.m_bubblesArray[n][o]||(t=this.m_bubblesArray[n][o].node)&&j.default.Distance(cc.v3(t.x,t.y+t.parent.y,0),cc.v3(e.x,e.y,0))<=2*this.m_r&&(t.getChildByName("light").active=!0)},me.prototype.checkBoomPreview=function(e){function t(e,t,i){n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((r=n.m_bubblesArray[e][t]).isVisited||(r.isVisited=!0));var r=e%2==0?t-1:t;o(e-1,r,i),o(e-1,r+1,i),o(e,t-1,i),o(e,t+1,i),o(e+1,r,i),o(e+1,r+1,i)}var n=this,o=function(e,t){n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((t=n.m_bubblesArray[e][t]).isVisited||(t.isVisited=!0))},i=e.x,r=e.y;t(i-1,e=i%2==0?r-1:r,10),t(i-1,e+1,10),t(i,r-1,10),t(i,r+1,10),t(i+1,e,10),t(i+1,e+1,10);for(var a=[],s=0;s<this.m_bubblesArray.length;s++)for(var c=0;c<this.m_bubblesArray[s].length;c++)this.m_bubblesArray[s][c]&&this.m_bubblesArray[s][c].isVisited&&(this.m_bubblesArray[s][c].isVisited=!1,a.push(cc.v2(s,c)));for(var u=0;u<a.length;u++)this.m_bubblesArray[a[u].x][a[u].y].node.getChildByName("light").active=!0},me.prototype.checkLaserPreview=function(e){var t=e.x,n=e.y,o=e.y;if(t%2==0&&(o=n-1),0<=t-1&&this.getIsPointHaveBall(t-1,o))for(var i=this.m_bubblesArray[e.x-1],r=0;r<i.length;r++)(a=i[r])&&0==a.isVisited&&(a.isVisited=!0);else if(0<=t-1&&this.getIsPointHaveBall(t-1,o+1))for(i=this.m_bubblesArray[e.x-1],r=0;r<i.length;r++)(a=i[r])&&0==a.isVisited&&(a.isVisited=!0);else if(this.m_bubblesArray[e.x])for(i=this.m_bubblesArray[e.x],r=0;r<i.length;r++)(a=i[r])&&0==a.isVisited&&(a.isVisited=!0);for(var a,s=[],c=0;c<this.m_bubblesArray.length;c++)for(var u=0;u<this.m_bubblesArray[c].length;u++)this.m_bubblesArray[c][u]&&this.m_bubblesArray[c][u].isVisited&&(this.m_bubblesArray[c][u].isVisited=!1,s.push(cc.v2(c,u)));for(r=0;r<s.length;r++)(a=this.m_bubblesArray[s[r].x][s[r].y]).node.getChildByName("light").active=!0},me.prototype.checkRainbowBallPreview=function(e){function t(e,t){var i,r;n.m_bubblesArray[e]&&n.m_bubblesArray[e][t]&&((i=n.m_bubblesArray[e][t]).isVisited||(i.isVisited=!0),o(e-1,r=e%2==0?t-1:t,i.color,i.node),o(e-1,r+1,i.color,i.node),o(e,t-1,i.color,i.node),o(e,t+1,i.color,i.node),o(e+1,r,i.color,i.node),o(e+1,r+1,i.color,i.node))}var n=this,o=function e(t,o,i,r){var a=r;if(n.m_bubblesArray[t]&&n.m_bubblesArray[t][o]){var s=n.m_bubblesArray[t][o];if(!s.isVisited){if(10001<=s.color&&s.color<=10006){if(s.color-1e4!==i)return}else if(100001<=s.color&&s.color<=100006){if(s.color-1e5!==i)return}else if(s.color!==i)return;s.isVisited=!0,s.index=j.default.Distance(cc.v3(s.node.position.x,s.node.position.y,0),cc.v3(a.position.x,a.position.y,0)),a=t%2==0?o-1:o,e(t,o-1,i,r),e(t,o+1,i,r),e(t+1,a,i,r),e(t+1,a+1,i,r),e(t-1,a,i,r),e(t-1,a+1,i,r)}}},i=e.x,r=e.y;t(i-1,e=i%2==0?r-1:r),t(i-1,e+1),t(i,r-1),t(i,r+1),t(i+1,e),t(i+1,e+1);for(var a,s=[],c=0;c<this.m_bubblesArray.length;c++)for(var u=0;u<this.m_bubblesArray[c].length;u++)this.m_bubblesArray[c][u]&&this.m_bubblesArray[c][u].isVisited&&(this.m_bubblesArray[c][u].isVisited=!1,s.push(cc.v3(c,u,this.m_bubblesArray[c][u].index)));for(a in s)this.m_bubblesArray[s[a].x][s[a].y].node.getChildByName("light").active=!0},me.prototype.clearAllpreview=function(){if(null!=this.m_bubblesArray)for(var e=0;e<this.m_bubblesArray.length;e++)for(var t=0;t<this.m_bubblesArray[e].length;t++)this.m_bubblesArray[e][t]&&(this.m_bubblesArray[e][t].node.getChildByName("light").active=!1)},me.prototype.handleUpdateProps=function(){this.comGameUIWraps.initItemsInfo()},me.prototype.addItem=function(e,t){w.DataMgr.User.reqProps(e,t,!0),this.comGameUIWraps.initItemsInfo()},me.prototype.reqaddGetItemTimes=function(){w.DataMgr.User.reqAddDayReward(S.DayKeys.BlockRewardNum,1)},me.prototype.getTimePropNum=function(e){return this.m_props[e]},me.prototype.setTimeProps=function(e,t){this.m_props[e]+=t,this.comGameUIWraps.initItemsInfo()},me.prototype.itemevent=function(e){switch(e){case S.PropsType.Boom:R.default.event(L.EventKeys.bomb_use,"");break;case S.PropsType.Light:R.default.event(L.EventKeys.shoot_use,"");break;case S.PropsType.Laser:R.default.event(L.EventKeys.lightening_use,"");break;case S.PropsType.RainbowBall:R.default.event(L.EventKeys.color_ball_use,"")}},me.prototype.usePropWithType=function(e){return 0<this.getTimePropNum(e)?(this.setTimeProps(e,-1),this.itemevent(e),E.EventMgr.emit(P.EventEnum.UpdateProps,{type:e,from:0,val:-1}),!0):0<w.DataMgr.User.getPropNum(e)?(this.itemevent(e),w.DataMgr.User.reqProps(e,-1),this.comGameUIWraps.initItemsInfo(),!0):10<=T.default.I.Diamond?(this.itemevent(e),w.DataMgr.User.reqDiamond(-10,110,{isUpdate:!0}),this.comGameUIWraps.initItemsInfo(),!0):(de.ViewMgr.openPopwin(re.default),y.default.showTip("Insufficient gold coins!"),!1)},me.prototype.onOpenShop=function(){f.AudioMgr.button(),de.ViewMgr.openPopwin(re.default),C.default.I.sdkEventWithStr("gold_shop_open_click")},me.prototype.onOpenAddBubble=function(){f.AudioMgr.button(),2<=this.m_addbubbletimes?y.default.showTip("You can use 2 extra balls at most in a single game"):de.ViewMgr.openPopwin(X.default,{data:{isfail:!1}})},me.prototype.handleTacticUpdate=function(){this.comGameUIWraps.initItemsInfo()},me.prototype.addBubble=function(e){10==e?(this.m_addbubbletimes++,this.m_AddBallBtn.active=!1,this.m_addbubbles+=e):5==e&&(this.m_failaddbubbletimes++,this.m_addbubbles+=e,this.m_eventrevive++),this.comGameUIWraps.showAddBubble(e)},me.prototype.showGuid=function(){this.isgameover||!this.m_isready||de.ViewMgr.isHadPopwin(se.default)||1<this.m_curLv||this.m_Guide.active||(this.m_Guide.active=!0,this.m_Guide.opacity=0,cc.tween(this.m_Guide).to(.3,{opacity:255}).start())},me.prototype.hideGuid=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t=this;return l(this,function(n){switch(n.label){case 0:return e?[4,v.default.wait(5e3)]:[3,2];case 1:return n.sent(),this.m_Guide?(this.m_Guide.active&&cc.tween(this.m_Guide).to(.3,{opacity:0}).call(function(){t.m_Guide.active=!1}).start(),this.standTime=0,[3,3]):[2];case 2:this.m_Guide.active&&(this.m_Guide.active=!1),n.label=3;case 3:return[2]}})})},me.prototype.handlePopwinFromFirst=function(){(!_.default.IsRedPacketOpen||0<T.default.I.CurLevel)&&this.hideBanner(),V.default.I.hidegrideadLevel(),V.default.I.hideSinglegridad()},me.prototype.handlePopwinToTop=function(){(!_.default.IsRedPacketOpen||0<T.default.I.CurLevel)&&(this.showBanner(),this.node.parent.parent.getChildByName("bannertxt").active=!1)},Object.defineProperty(me.prototype,"IsAdLikeOffset",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"BannerOpen",{get:function(){return k.OnlineMgr.getBanner("game")},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"BannerUid",{get:function(){return this.BannerOpen?k.OnlineMgr.getAdByType(k.AdType.BannerGame):null},enumerable:!0,configurable:!0}),me.prototype.onShowPause=function(){this.isgameing&&(f.AudioMgr.button(),de.ViewMgr.openPopwin(ne.default))},me.prototype.handleUpdateDimamond=function(e){var t=this;e.detail?this.actionPlayDiamondAnim().then(function(){return t.InitDiamond()}):this.InitDiamond()},me.prototype.showUILevel=function(){this.clearData(),this.CoinUILayer2UI(),this.m_isnewPlayer=!1,this.isgameing=!1,w.DataMgr.Task.setCollectTempNum(0),V.default.I.hideSinglegridad(),de.ViewMgr.openPopwin(se.default,{anim:!1,mask:!1})},me.prototype.hideUILevel=function(){V.default.I.hidegrideadLevel(),de.ViewMgr.closePopwin(se.default)},me.prototype.CoinUILayer2Top=function(){this.m_Top.getChildByName("bg_game_gem").group="curtain"},me.prototype.CoinUILayer2UI=function(){this.m_Top.getChildByName("bg_game_gem").group="UI",this.issmalladd=!1},me.prototype.actionPlayDiamondAnim=function(){var e=this;return de.ViewMgr.isHadPopwin(se.default)?Promise.resolve():(f.AudioMgr.playSound(h.AudioEnum.coins_get),new Promise(function(t){e.CoinUILayer2Top(),D.LoaderMgr.loadPrefabWithUrl("prefab/common/diamond_fly").then(function(n){var o=O.PoolMgr.getPrefab(n);o.active=!0,o.y=-564,o.parent=e.m_Top,o.group="curtain",g.default.playAnim(o,e.issmalladd?"anim_diamond_fly03":"anim_diamond_fly").then(function(){O.PoolMgr.putNode(o),e.CoinUILayer2UI(),t(0)}).catch(function(){return e.CoinUILayer2UI()})}).catch(function(){return e.CoinUILayer2UI()})}))},me.prototype.getIsPointHaveBall=function(e,t){return!(e>this.m_bubblesArray.length-1||!this.m_bubblesArray[e]||t>this.m_bubblesArray[e].length-1)&&this.m_bubblesArray[e][t]&&this.m_bubblesArray[e][t].node&&!this.m_bubblesArray[e][t].node.getComponent(he.default).m_isghost},me.prototype.getIsPointHaveGhostBall=function(e,t){return!(e>this.m_bubblesArray.length-1||!this.m_bubblesArray[e]||t>this.m_bubblesArray[e].length-1)&&this.m_bubblesArray[e][t]&&this.m_bubblesArray[e][t].node&&this.m_bubblesArray[e][t].node.getComponent(he.default).m_isghost},me.prototype.showLv2Guide=function(){this.m_GuideRebound.active=!0,this.m_ReboundLine.active=!0,this.m_ReboundLine.opacity=0,cc.tween(this.m_ReboundLine).to(.3,{opacity:255}).start(),this.m_GuideRebound.opacity=0,cc.tween(this.m_GuideRebound).to(.3,{opacity:255}).start()},me.prototype.hideLv2Guide=function(){this.m_GuideRebound.active&&(this.m_GuideRebound.active=!1),this.m_ReboundLine.active&&(this.m_ReboundLine.active=!1)},me.prototype.getGuides=function(){return m.default.I.wxABlv==S.LvGroup.A?N.default.getParamsObj(L.OnlineKeys.tutorial_show_levels_a,[2,3,11,12,19,31,71]):N.default.getParamsObj(L.OnlineKeys.tutorial_show_levels_b,[2,3,11,12,19,31,71])},me.prototype.checkGuide=function(){var e=this;if(!this.isgameing)return!1;var t=this.getGuides();if(this.m_curLv==t[0])return this.showLv2Guide(),!1;if(this.m_curLv==t[1]){var n=N.default.getParamsInt(L.OnlineKeys.free_change_tutorial_abtest,2);if(0!=n&&(1!=n||M.default.I.ID%2!=1))return this.setfreechange(!0),this.comGameUIWraps.showGuideBlack1(y.default.getTargetPos(this.m_Labbubblenum.node,this.node.parent.parent),!0),this.m_GuideTxT.active=!0,this.m_GuideTxT.children[0].children[0].getComponent(cc.Label).string="Click here to exchange bubbles~ (This level can be used indefinitely)",g.default.playAnim(this.m_GuideTxT,"anim_guidetxt_in"),R.default.event(L.EventKeys.ball_exchange_show,""),!0}else{if(this.m_curLv==t[2])return R.default.event(L.EventKeys.metal_ball_show,""),this.addPopwinList(Q.default,{type:S.GuideType.StoneBubble}),!0;if(this.m_curLv==t[3]&&T.default.I.CurLevel<t[3])return R.default.event(L.EventKeys.colorful_ball_show,""),this.comGameUIWraps.getNodeItem(S.PropsType.RainbowBall).then(function(t){e.comGameUIWraps.showGuideBlack1(y.default.getTargetPos(t,e.node.parent.parent),!1),e.m_GuideTxT.active=!0,e.m_GuideTxT.children[0].children[0].getComponent(cc.Label).string='Remember to use the new prop "Rainbow Ball"',g.default.playAnim(e.m_GuideTxT,"anim_guidetxt_in"),p.I.setTimeProps(S.PropsType.RainbowBall,1)}),!0;if(this.m_curLv==t[4]&&T.default.I.CurLevel<t[4])return this.comGameUIWraps.getNodeItem(S.PropsType.Laser).then(function(t){e.comGameUIWraps.showGuideBlack1(y.default.getTargetPos(t,e.node.parent.parent),!1),e.m_GuideTxT.active=!0,e.m_GuideTxT.children[0].children[0].getComponent(cc.Label).string='Remember to use the new prop "lightning ball""',g.default.playAnim(e.m_GuideTxT,"anim_guidetxt_in"),p.I.setTimeProps(S.PropsType.Laser,1)}),!0;if(this.m_curLv==t[5])return this.addPopwinList(Q.default,{type:S.GuideType.IceBubble}),!0;if(this.m_curLv==t[6])return this.addPopwinList(Q.default,{type:S.GuideType.BlackHole}),!0}if(!B.LocalMgr.get(S.LocalDataKey.GuideGhost)){for(var o=!1,i=0;i<this.m_mapdata.length;i++)for(var r=this.m_mapdata[i],a=0;a<r.length;a++){if(201<=(s=r[a])&&s<=206){o=!0;break}if(-206<=s&&s<=-201){o=!0;break}}if(o)return B.LocalMgr.set(S.LocalDataKey.GuideGhost,1),this.addPopwinList(Q.default,{type:S.GuideType.Ghost}),!0}if(!B.LocalMgr.get(S.LocalDataKey.GuideCloud)){var s,c=!1;for(i=0;i<this.m_mapdata.length;i++)for(r=this.m_mapdata[i],a=0;a<r.length;a++)if(1004==(s=r[a])){c=!0;break}if(c)return B.LocalMgr.set(S.LocalDataKey.GuideCloud,1),this.addPopwinList(Q.default,{type:S.GuideType.Cloud}),!0}return!1},me.prototype.hideGuide=function(){2==this.m_curLv&&this.hideLv2Guide()},me.prototype.onclickGuidebg=function(){var e=this,t=this.getGuides();this.m_curLv==t[3]?(R.default.event(L.EventKeys.colorful_ball_done,""),this.comGameUIWraps.showGuideBlack2().then(function(){e.addPopwinList(Q.default,{type:S.GuideType.RanbowBubble}),g.default.playAnim(e.m_GuideTxT,"anim_guidetxt_out").then(function(){e.m_GuideTxT.active=!1})}),p.I.comGameUIWraps.actionItemUse(S.PropsType.RainbowBall),this.isguiding=!1):this.m_curLv==t[1]?this.comGameUIWraps.showGuideBlack2().then(function(){e.changeBubble(),R.default.event(L.EventKeys.ball_exchange_done,""),g.default.playAnim(e.m_GuideTxT,"anim_guidetxt_out").then(function(){e.m_GuideTxT.active=!1}),e.isguiding=!1}):this.m_curLv==t[4]&&(this.comGameUIWraps.showGuideBlack2().then(function(){e.addPopwinList(Q.default,{type:S.GuideType.LaserBubble}),g.default.playAnim(e.m_GuideTxT,"anim_guidetxt_out").then(function(){e.m_GuideTxT.active=!1})}),this.comGameUIWraps.actionItemUse(S.PropsType.Laser),this.isguiding=!1)},me.prototype.playItemTipAni=function(){var e=N.default.getParamsInt(L.OnlineKeys.early_props_abtest,0),t=N.default.getParamsInt(L.OnlineKeys.early_props_lvs,3);if(t=(0==e||1==e&&M.default.I.ID%2==1)&&T.default.I.CurLevel<t,4<this.getHadBubbleNum()||this.isgameover)return this.isplayingitemtip=!1,void(t||this.comGameUIWraps.stopItemTip());this.isplayingitemtip||(this.isplayingitemtip=!0,t||this.comGameUIWraps.showItemTip())},me.prototype.getstartitem=function(){this.isstartrandomitem=!0;var e=U.default.random(0,4);this.comGameUIWraps.actionItemUse(e)},me.prototype.onclickback=function(){f.AudioMgr.button(),null!=this.backbubble&&N.default.dispatch(L.ShareKeys.backbubble,{success:this.doBack,context:this})},me.prototype.doBack=function(){null!=this.backbubble&&(this.backbubble.node&&this.backbubble.node.isValid&&O.PoolMgr.putNode(this.backbubble.node),this.m_bubblesArray[this.backx][this.backy]=null,this.shootBubble.color=this.backbubble.color,this.shootBubble.node.getComponent(he.default).init(this,this.shooter.position,this.backbubble.color),this.checkMoveMap(),this.hideback(),this.backbubble=null)},me.prototype.setfreechange=function(e){if(e=void 0!==e&&e)return this.isfreechange=!0,this.m_changeicon.active=!0,this.m_changeicon.getComponent(cc.Animation).play("anim_endless_icon"),void this.nodeRoundArrow.getComponent(cc.Animation).play("anim_game_round_endless");0==(e=N.default.getParamsInt(L.OnlineKeys.free_change_for_1_lv_abtest,2))||1==e&&M.default.I.ID%2==1?this.isfreechange=!1:this.isfirstfreechange||(this.isfreechange=!0,this.m_changeicon.getComponent(cc.Animation).play("anim_endless_icon"),this.nodeRoundArrow.getComponent(cc.Animation).play("anim_game_round_endless")),this.m_changeicon.active=!0},me.prototype.getBuff=function(){var e=N.default.getParamsInt(L.OnlineKeys.lucky_pop_abtest,0);if(0==e||1==e&&M.default.I.ID%2==1)return-1;for(var t=N.default.getParamsObj(L.OnlineKeys.lucky_pop_min_lv,[11,12,19,31,71]),n=0;n<t.length;n++){var o=t[n];if(this.m_curLv==o)return 0}return e=N.default.getParamsInt(L.OnlineKeys.gift_bubble_quiet_num,3),y.default.isblockquietopen()&&y.default.s_closerewardtimes>=e?-1:((e=k.OnlineMgr.BlockRewards)[0],e[1],e[2],w.DataMgr.User.getDayDataWithKey(S.DayKeys.BlockRewardNum,0),Math.random(),e=N.default.getParamsInt(L.OnlineKeys.lucky_pop_min_lv,5),T.default.I.CurLevel>=e?1:0)},me.prototype.getredbuff=function(){return this.m_curLv<=T.default.I.CurLevel?-1:2},me.prototype.setRandomBuff=function(){if(this.m_bubblesArray&&!(this.m_bubblesArray.length<0)){if(_.default.IsRedPacketOpen){var e=[];this.m_bubblesArray.forEach(function(t,n){e.push(n)}),e=U.default.sortArray(e);for(var t=this,n=0;n<2;n++)!function(){var n=e[U.default.random(0,e.length)],o=[];t.m_bubblesArray[n].forEach(function(e){o.push(e)}),o=U.default.sortArray(o);for(var i=0;i<o.length;i++){var r=o[i];if(r&&r.node&&1<=r.color&&r.color<=6&&r.node.getComponent(he.default).m_buff<=0){var a=t.getredbuff();if(0<a){r.buff=a,r.node.getComponent(he.default).setBuff(a);break}}}}()}if(!(this.m_bubblesArray.length<15))for(var o=[this.m_bubblesArray.length-10-1,this.m_bubblesArray.length-10,this.m_bubblesArray.length-9,this.m_bubblesArray.length-8,this.m_bubblesArray.length-7],i=(o=U.default.sortArray(o),this),r=0;r<5;r++){var a=function(e){e=o[e];var t=[];i.m_bubblesArray[e].forEach(function(e){t.push(e)}),t=U.default.sortArray(t);for(var n=0;n<t.length;n++){var r=t[n];if(r&&r.node&&1<=r.color&&r.color<=6&&r.node.getComponent(he.default).m_buff<=0){var a=i.getBuff();return 0<a&&(r.buff=a,r.node.getComponent(he.default).setBuff(a)),{value:void 0}}}}(r);if("object"==typeof a)return a.value}}},me.prototype.onopengridad=function(){f.AudioMgr.button(),T.default.I.reqAddDayReward(S.DayKeys.ClickAd,1),this.m_adnode.getChildByName("btn").children[0].active=!1,Z.default.isshow=!0,this.addPopwinListForceOpen(Z.default,{},!1)},me.prototype.checkback=function(){var e=N.default.getParamsInt(L.OnlineKeys.back_step_abtest,0);0==e||1==e&&M.default.I.ID%2==1?this.m_backnode.active=!1:this.backbubble?this.showback():this.m_backnode.active&&this.hideback()},me.prototype.showback=function(){this.m_backnode.active||(this.m_backnode.active=!0,this.m_backnode.getComponent(cc.Animation).play("anim_backbtn_in"))},me.prototype.hideback=function(){var e=this;g.default.playAnim(this.m_backnode,"anim_backbtn_out").then(function(){e.m_backnode.active=!1})},me.prototype.ongohome=function(){var e=T.default.I.getRuningTasks()[0].id;1==e&&(e=2),e=w.DataMgr.Milestone.getTaskCostStar(e),!T.default.I.IsFinishHomeGuid&&T.default.I.Star<e?y.default.showTip("Collect the stars to unlock the small home"):(this.handleHistoryRecord(),this.unschedule(this.initPreload),y.default.PersistNode.loadToHome(),R.default.event(L.EventKeys.button_tap,""))},me.prototype.doAddStar=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return w.DataMgr.User.reqStar(e),[4,this.DoAddStarAni(e)];case 1:return t.sent(),[2]}})})},me.prototype.DoAddStarAni=function(e){return u(this,void 0,void 0,function(){var t,n,o;return l(this,function(i){switch(i.label){case 0:t=0,i.label=1;case 1:return t<e?(0==(n=t)&&f.AudioMgr.playSound(h.AudioEnum.home_star_fly_start),o=this.m_RockObj.getChildByName("top_ground").getChildByName("star_ground"),this.comGameUIWraps.animHomeFlyStar(e,o,n),[4,v.default.wait(300)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[4,v.default.wait(300)];case 5:return i.sent(),[2]}})})},me.prototype.showbottomUI=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=!1),u(this,void 0,void 0,function(){var n,o,i,r=this;return l(this,function(a){switch(a.label){case 0:return this.m_BottomObj.active=!0,i=this.m_curLv+1,o=N.default.getParamsInt(L.OnlineKeys.online_gift_show_lv,b.default.baseMinOnlineGiftlv),y.default.isOnlineGift&&T.default.I.CurLevel>=o&&0<T.default.I.CurOnlinegiftNeedTime&&this.m_labOnlineGifttime.node.parent.parent.parent.parent.active&&g.default.playAnim(this.m_labOnlineGifttime.node.parent.parent.parent.parent,"anim_onlinegift_ui_out").then(function(){r.m_labOnlineGifttime&&(r.m_labOnlineGifttime.node.parent.parent.parent.parent.active=!1)}),t?(this.m_BottomGameObj.active=!1,this.enterGame(i,!1),this.hideUILevel(),[4,v.default.wait(300)]):[3,2];case 1:return a.sent(),0<e&&t?this.doAddStar(e).then(function(){ae.default.canShow()&&!y.default.s_isShowedReward&&r.addPopwinList(ae.default,{}),r.startAni()}):t&&(ae.default.canShow()&&!y.default.s_isShowedReward&&this.addPopwinList(ae.default,{}),this.startAni()),[3,3];case 2:V.default.I.hideSinglegridad(),n="anim_game_btns_in",o=N.default.getParamsInt(L.OnlineKeys.early_props_abtest,0),i=N.default.getParamsInt(L.OnlineKeys.early_props_lvs,3),"anim_game_btns_in"===(n=(0==o||1==o&&M.default.I.ID%2==1)&&T.default.I.CurLevel<i?"anim_game_btns_in_bottom":n)&&(this.m_AddBallBtn.active=!1),g.default.playAnim(this.m_BottomObj,n).then(function(){0<e&&t?r.doAddStar(e).then(function(){ae.default.canShow()&&!y.default.s_isShowedReward&&r.addPopwinList(ae.default,{}),r.startAni()}):t&&(ae.default.canShow()&&!y.default.s_isShowedReward&&r.addPopwinList(ae.default,{}),r.startAni())}),this.m_BottomGameObj.active&&g.default.playAnim(this.m_BottomGameObj,"anim_bottom_out").then(function(){}),a.label=3;case 3:return[2]}})})},me.prototype.hidebottomUI=function(e){var t=this;((e=void 0!==e&&e)||this.m_BottomObj.active)&&(this.comGameUIWraps.hideHomeTip(),g.default.playAnim(this.m_BottomObj,"anim_game_btns_out").then(function(){t.m_BottomObj.active=!1}),this.m_BottomGameObj.active=!0,this.m_BottomGameObj.getComponent(cc.Animation).play("anim_bottom_in"),e=N.default.getParamsInt(L.OnlineKeys.online_gift_show_lv,b.default.baseMinOnlineGiftlv),y.default.isOnlineGift&&T.default.I.CurLevel>=e&&0<T.default.I.CurOnlinegiftNeedTime&&(this.m_labOnlineGifttime.node.parent.parent.parent.parent.active=!0,this.m_labOnlineGifttime.node.parent.parent.parent.parent.getComponent(cc.Animation).play("anim_onlinegift_ui_in")),V.default.I.showSinglegridad(this.nodeSingleAd))},me.prototype.onRank=function(){f.AudioMgr.button(),de.ViewMgr.openPopwin(oe.default)},me.prototype.checkitemtip=function(){var e=N.default.getParamsInt(L.OnlineKeys.pop_prop_tips_rule_abtest,0),t=0==e||1==e&&M.default.I.ID%2==1?N.default.getParamsObj(L.OnlineKeys.pop_prop_tips_rule_a,[3,10]):N.default.getParamsObj(L.OnlineKeys.pop_prop_tips_rule_b,[3,1]);this.getHadBubbleNum()+1==t[0]&&this.getBubbleCountWithOutSpecial()>t[1]&&this.openworningTip()},me.prototype.openworningTip=function(){T.default.I.CurLevel<N.default.getParamsInt(L.OnlineKeys.pop_prop_tips_minlv,5)||y.default.IsCanShowItemTips()&&(ee.default.isopen||this.isshoweditemtips||(ee.default.openTip(0),this.isshoweditemtips=!0))},me.prototype.getDiffABCTest=function(){var e=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_abctest,2),t=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_b,0);return 0==e?t=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_a,5):1==e?M.default.I.ID%3==1?t=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_a,5):M.default.I.ID%3==2||(t=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_c,-5)):3==e&&(t=N.default.getParamsInt(L.OnlineKeys.all_levels_bubbles_add_c,-5)),t},me.prototype.showAdLike=function(){d.prototype.showAdLike.call(this),T.default.I.CurLevel<=0&&_.default.IsRedPacketOpen&&this.hideAdLike()},me.prototype.fixlvdata=function(){},me.prototype.onOnlinegiftReward=function(){f.AudioMgr.button(),0<T.default.I.OnlineGiftNowTime?y.default.showTip("Play a little more, online time is not enough"):N.default.dispatch(L.ShareKeys.onlinegift,{success:this.handlegetgiftreward,fail:function(){},context:this})},me.prototype.CheckOnlineGift=function(){var e=N.default.getParamsInt(L.OnlineKeys.online_gift_show_lv,b.default.baseMinOnlineGiftlv);y.default.isOnlineGift&&T.default.I.CurLevel>=e&&0<T.default.I.CurOnlinegiftNeedTime&&T.default.I.OnlineGiftNowTime<=0&&(0!=T.default.I.getDayDataWithKey(S.DayKeys.OnlineGiftShow,0)||this.isopenonlinegift||this.m_BottomObj.active||(this.isopenonlinegift=!0,this.addPopwinList(te.default,{})))},me.prototype.updategiftstate=function(){return u(this,void 0,void 0,function(){var e;return l(this,function(){return e=!(0<T.default.I.OnlineGiftNowTime),this.iscangetreward!=e&&((this.iscangetreward=e)?this.m_labOnlineGifttime.node.parent.parent.parent.getComponent(cc.Animation).play("anim_onlinegift_get"):this.m_labOnlineGifttime.node.parent.parent.parent.getComponent(cc.Animation).play("anim_onlinegift_normal")),[2]})})},me.prototype.handlegetgiftreward=function(){var e=0,t=_.default.OnlineDoubleRewardAB,n=[U.default.random(0,4),t?2:1];e=U.default.random(2,11),t&&(e*=2),de.ViewMgr.openPopwin(Y.default,{data:{diamond:e,props:n}}),T.default.I.reqOnlineReward()},me.prototype.getAllTempintegrals=function(){var e=0;return p.I.m_tempintegrals.forEach(function(t){e+=t.v}),e},me.prototype.setbubblebottomUI=function(){var e=w.DataMgr.User.LevelStarNum;this.txtRankStar.string=e+""},me.isinit=!1,c([i(q.default)],me.prototype,"comGameUIWraps",void 0),c([i(cc.Node)],me.prototype,"m_gamecamera",void 0),c([i(cc.Node)],me.prototype,"m_anicamera",void 0),c([i(cc.Node)],me.prototype,"m_UIcamera",void 0),c([i([cc.SpriteFrame])],me.prototype,"m_skin",void 0),c([i([cc.SpriteFrame])],me.prototype,"m_LineColor",void 0),c([i(cc.Prefab)],me.prototype,"m_bubblePrefab",void 0),c([i(cc.Node)],me.prototype,"m_bubbleobj",void 0),c([i(cc.Node)],me.prototype,"shooter",void 0),c([i(cc.Node)],me.prototype,"shooter2",void 0),c([i(W.default)],me.prototype,"m_Labbubblenum",void 0),c([i(W.default)],me.prototype,"m_LabScore",void 0),c([i(W.default)],me.prototype,"m_LabWinScore",void 0),c([i(W.default)],me.prototype,"m_Diamond",void 0),c([i(cc.Node)],me.prototype,"m_FireWorkeff",void 0),c([i(cc.Node)],me.prototype,"m_Slider",void 0),c([i(cc.Node)],me.prototype,"m_Top",void 0),c([i(cc.Node)],me.prototype,"m_AddBallBtn",void 0),c([i([cc.Node])],me.prototype,"m_stars",void 0),c([i(cc.Node)],me.prototype,"nodeOver",void 0),c([i(cc.Node)],me.prototype,"nodBubbleAd",void 0),c([i(cc.Node)],me.prototype,"nodeLeft10",void 0),c([i(cc.Node)],me.prototype,"nodeAdLike",void 0),c([i(cc.Node)],me.prototype,"nodeSingleAd",void 0),c([i(cc.Node)],me.prototype,"m_Singlead",void 0),c([i(cc.Node)],me.prototype,"adCross",void 0),c([i(cc.Node)],me.prototype,"nodeRoundArrow",void 0),c([i(cc.Node)],me.prototype,"m_Guide",void 0),c([i(cc.Node)],me.prototype,"m_GuideRebound",void 0),c([i(cc.Node)],me.prototype,"m_ReboundLine",void 0),c([i(cc.Node)],me.prototype,"m_GuideTxT",void 0),c([i(cc.Node)],me.prototype,"m_changeicon",void 0),c([i(cc.Node)],me.prototype,"m_adnode",void 0),c([i(cc.Node)],me.prototype,"m_backnode",void 0),c([i(cc.Node)],me.prototype,"m_BottomObj",void 0),c([i(cc.Node)],me.prototype,"m_BottomGameObj",void 0),c([i(cc.Label)],me.prototype,"txtRankStar",void 0),c([i(cc.Node)],me.prototype,"nodePigFull",void 0),c([i(cc.Label)],me.prototype,"m_labOnlineGifttime",void 0),c([i(cc.Node)],me.prototype,"m_RockObj",void 0),c([i(cc.Node)],me.prototype,"nodeDragon1",void 0),c([i(cc.Node)],me.prototype,"nodeDragon2",void 0),c([i(pe.default)],me.prototype,"m_bgctr",void 0),o=p=c([o],me),r.default=o,cc._RF.pop()},{}],Bubble:[function(e,t,n){"use strict";cc._RF.push(t,"713a2Vs1mJA549tCZrUPfZv","Bubble");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("BubbleMgr"),p=o("RandomUtils"),h=o("ImageLabelNew"),f=o("Display"),m=o("Action"),g=o("AudioMgr"),_=o("AudioEnum"),y=o("UIchooseItem"),v=o("CoinGiftPopwin"),b=o("PoolMgr"),S=o("Enum");function w(){var e=null!==l&&l.apply(this,arguments)||this;return e.m_lock=null,e.m_random=null,e.m_ghost=null,e.m_buff=-1,e.m_id=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(w,l=cc.Component),Object.defineProperty(w.prototype,"m_isghost",{get:function(){return this.m_state==S.BubbleState.ghost},enumerable:!0,configurable:!0}),w.prototype.init=function(e,t,n){this.m_state=S.BubbleState.none,201<=n&&n<=206?this.m_state=S.BubbleState.normal:-206<=n&&n<=-201&&(this.m_state=S.BubbleState.ghost),this.m_ghost.active=!1,this.node.active=!0,this.m_buff=-1,this.node.parent=e.node,this.node.scale=1,this.node.opacity=255,this.node.getChildByName("streak").active=!1,this.node.getChildByName("ball").opacity=255,this.node.getChildByName("buff").opacity=255,1004==n?this.node.getComponent(cc.Animation).play("anim_bubble_cloud_idle"):this.node.getComponent(cc.Animation).play("anim_bubble_0"),100==n&&(n=(u=d.default.I.m_curLvData.randombubble)&&0<u.length?u[p.default.randomSeed(0,u.length-1)]:1),this.m_id=n,this.parent=e,this.node.position=t.sub(e.node.position),this.node.getChildByName("buff").active=!1,this.node.getChildByName("img_redanim").active=!1,this.setSpriteFrame(d.default.I.getSkinByID(n)),10001<=n&&n<=10006?(this.m_lock.active=!0,this.m_random.active=!1):100001<=n&&n<=100006?(this.m_lock.active=!1,this.m_random.active=!0):(this.m_lock.active=!1,this.m_random.active=!1);var o=this.node.getChildByName("prop_bomb"),i=this.node.getChildByName("prop_light01"),r=this.node.getChildByName("prop_light02"),a=this.node.getChildByName("prop_colorball"),s=this.node.getChildByName("bubble_iceidle"),c=this.node.getChildByName("ice_boom"),u=this.node.getChildByName("black_light");t=this.node.getChildByName("bubble_color_bomb"),e=this.node.getChildByName("cloud_boom"),o.active=!1,i.active=!1,r.active=!1,a.active=!1,s.active=!1,c.active=!1,t.active=!1,e.active=!1,u.active=!1,10==n?o.active=!0:11==n?i.active=!0:12==n?r.active=!0:13==n?a.active=!0:1003==n?s.active=!0:1002==n&&(this.node.getComponent(cc.Animation).play("anim_bubble_black"),u.active=!0)},w.prototype.setSpriteFrame=function(e){this.node.getChildByName("ball").getComponent(cc.Sprite).spriteFrame=e},w.prototype.gotoBlackHole=function(e,t){var n=this;this.node.runAction(cc.sequence(cc.moveTo(.2,t.position),cc.scaleTo(.1,0),cc.callFunc(function(){},this),cc.callFunc(function(){b.PoolMgr.putNode(n.node)})))},w.prototype.updateRandom=function(e){this.m_id=e,this.setSpriteFrame(d.default.I.getSkinByID(e)),this.node.getComponent(cc.Animation).play("anim_bubble_random")},w.prototype.updateGhost=function(e){this.m_state=e,this.setghostui()},w.prototype.setghostui=function(){this.m_state!=S.BubbleState.none&&(this.m_ghost.active=!0,this.m_ghost.opacity=255,this.node.opacity=this.m_isghost?120:255)},w.prototype.boom=function(){return c(this,void 0,void 0,function(){var e,t=this;return u(this,function(){return this.node.getChildByName("score").getComponent(h.default).setValue(d.default.I.m_BaseScore,"",!1),d.default.I.addScore(d.default.I.m_BaseScore),e="anim_bubble_block"+this.m_id,this.node.getComponent(cc.Animation).play(e),(e=this.node.getChildByName("bubble_bomb")).active=!0,e.getComponent(cc.Animation).play("anim_game_bomb"),6<this.m_id?this.node.getComponent(cc.Animation).play("anim_bubble_block1"):this.node.getComponent(cc.Animation).play("anim_bubble_block"+this.m_id),this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getComponent(cc.Sprite).enabled=!1,1==t.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:t.getRandomItem()}):2==t.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(t.node,d.default.I.node.parent))},this),cc.moveBy(.5,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(t.node)}))),[2]})})},w.prototype.ranbow=function(){return c(this,void 0,void 0,function(){var e,t=this;return u(this,function(){return this.node.getChildByName("score").getComponent(h.default).setValue(d.default.I.m_BaseScore,"",!1),d.default.I.addScore(d.default.I.m_BaseScore),e="anim_bubble_block"+this.m_id,this.node.getComponent(cc.Animation).play(e),(e=this.node.getChildByName("bubble_color_bomb")).active=!0,e.getComponent(cc.Animation).play("anim_game_color_bomb"),6<this.m_id?this.node.getComponent(cc.Animation).play("anim_bubble_block1"):this.node.getComponent(cc.Animation).play("anim_bubble_block"+this.m_id),this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getComponent(cc.Sprite).enabled=!1,1==t.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:t.getRandomItem()}):2==t.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(t.node,d.default.I.node.parent))},this),cc.moveBy(.5,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(t.node)}))),[2]})})},w.prototype.Laser=function(){return c(this,void 0,void 0,function(){var e,t=this;return u(this,function(){return this.node.getChildByName("score").getComponent(h.default).setValue(d.default.I.m_BaseScore,"",!1),d.default.I.addScore(d.default.I.m_BaseScore),1==this.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:this.getRandomItem()}):2==this.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(this.node,d.default.I.node.parent)),e="anim_bubble_block"+this.m_id,this.node.getComponent(cc.Animation).play(e),(e=this.node.getChildByName("bubble_light02")).active=!0,e.getComponent(cc.Animation).play("anim_bubble_light02"),6<this.m_id?this.node.getComponent(cc.Animation).play("anim_bubble_block1"):this.node.getComponent(cc.Animation).play("anim_bubble_block"+this.m_id),this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getComponent(cc.Sprite).enabled=!1,1==t.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:t.getRandomItem()}):2==t.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(t.node,d.default.I.node.parent))},this),cc.moveBy(40/60,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(t.node)}))),[2]})})},w.prototype.breakIce=function(e){100001<=e&&e<=100006&&(e-=1e5),this.m_id=e,this.setSpriteFrame(d.default.I.getSkinByID(e)),this.node.getChildByName("bubble_iceidle").active=!1;var t=this.node.getChildByName("ice_boom");t.active=!0,m.default.playAnim(t,"anim_game_ice_boom").then(function(){t.active=!1}),g.AudioMgr.playSound(_.AudioEnum.bubble_ice)},w.prototype.breakcloud=function(){var e=this;this.node.getChildByName("ball").opacity=0;var t=this.node.getChildByName("cloud_boom");t.active=!0,m.default.playAnim(t).then(function(){b.PoolMgr.putNode(e.node)})},w.prototype.playDeathAnimation=function(e){var t=this,n=e.z;10001<=n&&n<=10006?n-=1e4:100001<=n&&n<=100006?n-=1e5:201<=n&&n<=206&&(n-=200);var o,i="anim_bubble_block"+n;(e=this.node).active=!0,13==n?e.getComponent(cc.Animation).play("anim_bubble_random"):1001==n||1002==n?e.getComponent(cc.Animation).play("anim_bubble_prop"):1003==n?((o=this.node.getChildByName("ice_boom")).active=!0,m.default.playAnim(o,"anim_game_ice_boom").then(function(){o.active=!1}),this.setSpriteFrame(null)):e.getComponent(cc.Animation).play(i),this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getComponent(cc.Sprite).enabled=!1,t.node.getChildByName("score").getComponent(h.default).setValue(d.default.I.m_BaseScore,"",!1),d.default.I.addScore(d.default.I.m_BaseScore),1==t.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:t.getRandomItem()}):2==t.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(t.node,d.default.I.node.parent))},this),cc.moveBy(40/60,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(t.node)})))},w.prototype.playWinDeathAnimation=function(e){var t=this,n=e;10001<=n&&n<=10006?n-=1e4:100001<=n&&n<=100006&&(n-=1e5),e="anim_bubble_block"+n,(n=this.node).active=!0,n.getComponent(cc.Animation).play(e),this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getComponent(cc.Sprite).enabled=!1,t.node.getChildByName("score").getComponent(h.default).setValue(500,"",!1),d.default.I.addScore(500)},this),cc.moveBy(.4,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(t.node)})))},w.prototype.playtopL=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(-10,10)),cc.moveBy(.1,cc.v2(10,-10)),cc.callFunc(function(){},this)))},w.prototype.playtopR=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(10,10)),cc.moveBy(.1,cc.v2(-10,-10)),cc.callFunc(function(){},this)))},w.prototype.playL=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(-10,0)),cc.moveBy(.1,cc.v2(10,0)),cc.callFunc(function(){},this)))},w.prototype.playR=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(10,0)),cc.moveBy(.1,cc.v2(-10,0)),cc.callFunc(function(){},this)))},w.prototype.playbottomL=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(-10,-10)),cc.moveBy(.1,cc.v2(10,10)),cc.callFunc(function(){},this)))},w.prototype.playbottomR=function(){this.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(10,-10)),cc.moveBy(.1,cc.v2(-10,10)),cc.callFunc(function(){},this)))},w.prototype.playDownAnimation=function(){var e=this,t=.5<Math.random()?1:-1,n=p.default.randomF(10,200)*t;700<=n+this.node.x?n=700-this.node.x:n+this.node.x<=35&&(n=35-this.node.x),700<=(t=p.default.randomF(10,200)*t)+this.node.x?t=700-this.node.x:t+this.node.x<=35&&(t=35-this.node.x),this.node.runAction(cc.sequence(cc.spawn(cc.bezierBy(p.default.randomF(.5,.7),[cc.v2(n,200),cc.v2(t,-200),cc.v2(t,-500)]),cc.moveTo(p.default.randomF(.4,.5),cc.v2(this.node.x,900)).easing(cc.easeSineIn())),cc.callFunc(function(){var t="anim_bubble_block"+e.m_id,n=e.node;n.active=!0,1001==e.m_id||1002==e.m_id||1003==e.m_id?n.getComponent(cc.Animation).play("anim_bubble_block7"):0<e.m_id&&e.m_id<10?n.getComponent(cc.Animation).play(t):100001<=e.m_id&&e.m_id<=100006?n.getComponent(cc.Animation).play("anim_bubble_block"+(e.m_id-1e5)):n.getComponent(cc.Animation).play("anim_bubble_block1"),e.node.getChildByName("score").getComponent(h.default).setValue(2*d.default.I.m_BaseScore,"",!1),d.default.I.addScore(2*d.default.I.m_BaseScore),1==e.m_buff?f.default.s_isshowcoingift?d.default.I.addPopwinList(v.default,{isforce:!0}):d.default.I.addPopwinList(y.default,{items:e.getRandomItem()}):2==e.m_buff&&d.default.I.comGameUIWraps.checkAddRedPacket(f.default.getTargetPos(e.node,d.default.I.node.parent))},this),cc.fadeOut(1),cc.moveBy(.4,cc.v2(0,0)),cc.callFunc(function(){b.PoolMgr.putNode(e.node)})))},w.prototype.getRandomItem=function(){var e=[0,1,2,3,4];return(e=d.default.I.isfreechange?[0,1,2,3]:e).sort(function(){return.5<Math.random()?-1:1}),e},w.prototype.setBuff=function(e){1==(this.m_buff=e)?(this.node.getChildByName("buff").active=!0,f.default.s_isshowcoingift?this.node.getChildByName("buff").getComponent(cc.Animation).play("anim_buff_idle_coin"):this.node.getChildByName("buff").getComponent(cc.Animation).play("anim_buff_idle")):2==e&&(this.node.getChildByName("img_redanim").active=!0)},s([i(cc.Node)],w.prototype,"m_lock",void 0),s([i(cc.Node)],w.prototype,"m_random",void 0),s([i(cc.Node)],w.prototype,"m_ghost",void 0),o=s([o],w),r.default=o,cc._RF.pop()},{}],BuildingItem:[function(e,t,n){"use strict";cc._RF.push(t,"5360c6mlqdEJo4T4DxS00mt","BuildingItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("ViewMgr"),p=o("Debug"),h=o("Action"),f=o("SDKTools"),m=o("DataMgr"),g=o("LoadHDImage"),_=o("EventMgr"),y=o("AudioMgr"),v=o("GameFitUp"),b=o("EventEnum"),S=o("LoaderMgr"),w=o("MapConfig"),A=o("GameFitTask"),M=o("PlatformUtils"),T=o("MilestoneModel"),P=o("Enum"),E=o("ColorListener");function D(){var e=null!==l&&l.apply(this,arguments)||this;return e.nodeFurniture=null,e.spriteLight=null,e.partSmoke1=null,e.partSmoke2=null,e.dragonBone=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(D,l=cc.Component),Object.defineProperty(D.prototype,"nodeImg",{get:function(){return this.nodeFurniture.children[0]},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"isCanTouch",{get:function(){return 3==+this.data.skin_num},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"isTouchAnim",{get:function(){return 1==+this.data.touch_effect},enumerable:!0,configurable:!0}),D.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchNodeEnd,this)},D.prototype.initWith=function(e,t,n){return void 0===n&&(n={}),this.data=t,this.showSkin(e,t,n)},D.prototype.changeBone=function(e,t,n,o,i){var r=this;return this.data=n,new Promise(function(a){r.playBone(e,t,function(){return r.switchSkin(e,n,o,i)},r).then(function(){a(null),r.loadHD(),i===P.ActionTaskType.Bone3&&r.showSkin(e,n),i===P.ActionTaskType.Bone2&&r.showSkin(e,n)})})},D.prototype.actionDown=function(){return h.default.stopAnim(this.node,"anim_furniture_idle"),this.node.getComponent(E.default).add(E.AnimEventKey.NewDownSmoke,this.onEndDown,this),this.animDown()},D.prototype.actionFocus=function(e,t){return this.initWith(e,t,{isLight:!0}),this.animLight()},D.prototype.actionUnselect=function(e,t,n){h.default.stopAnim(this.node,"anim_furniture_idle"),n&&this.initWith(e,t,{isLight:!1})},D.prototype.actionPreview=function(e,t){return c(this,void 0,Promise,function(){return u(this,function(){switch(+t.switch_effect){case T.SwitchEffect.Light:return[2,this.actionFocus(e,t)];case T.SwitchEffect.DownAndLight:return this.initWith(e,t,{isLight:!1}),[2,this.actionFocus(e,t)]}return[2,Promise.resolve()]})})},D.prototype.actionChange=function(e,t){return c(this,void 0,Promise,function(){return u(this,function(){return h.default.stopAnim(this.node),this.initWith(e,t,{isLight:!1}),[2,Promise.resolve()]})})},D.prototype.actionClick=function(){var e,t;y.AudioMgr.button(),this.isCanTouch&&(d.ViewMgr.getPopwin(A.default)||d.ViewMgr.getPopwin(v.default)||3===this.data.skin_num&&(t=(e=m.DataMgr.User.getFurnitureSkinById(this.data.id))?e.select:1,this.showSkin(t,this.data,{isLight:!0}),this.animLight(),e=this.data.id,t=m.DataMgr.Milestone.getTaskByAddFurnitureId(e),_.EventMgr.emit(b.EventEnum.SwitchLoadHDState,1),d.ViewMgr.openPopwin(v.default,{data:{data:t,type:1,furnitures:[e],uiHome:P.HomeUIState.OutBottom}})))},D.prototype.actionTouchAnim=function(){this.isTouchAnim&&h.default.playAddAnim(this.node)},D.prototype.actionClean=function(){return c(this,void 0,void 0,function(){var e,t,n;return u(this,function(){return e=this.node,t=e.name,n=0<=t.indexOf("Dust")?"anim_furniture_dust":"anim_furniture_disappear",[2,h.default.playAddAnim(e,n).then(function(){return cc.isValid(e)&&e.destroy()})]})})},D.prototype.actionBackup=function(e,t,n){return c(this,void 0,void 0,function(){var o=this;return u(this,function(){return cc.isValid(this.node)?(this.node.name=t.id,n?[2,this.animDisappear().then(function(){return o.initWith(e,t,{isLight:!0})})]:(this.initWith(e,t,{isLight:n}),[2,Promise.resolve()])):[2,Promise.resolve()]})})},D.prototype.switchSkin=function(e,t,n,o){switch(h.default.stopAnim(this.node),o){case P.ActionTaskType.Bone1:this.showSkin(e,t);break;case P.ActionTaskType.Bone2:case P.ActionTaskType.Bone4:this.hideSkin();break;case P.ActionTaskType.Bone3:this.showSkin(e,n)}},D.prototype.animLight=function(){return h.default.playAddAnim(this.node,"anim_furniture_idle")},D.prototype.animDown=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return[2,h.default.playAddAnim(this.node,"anim_furniture_down").then(function(){return e.loadHD()})]})})},D.prototype.animShow=function(){return h.default.playAddAnim(this.node,"anim_furniture_show")},D.prototype.animDisappear=function(){return h.default.playAddAnim(this.node,"anim_furniture_disappear")},D.prototype.showSkin=function(e,t,n){var o=!!(n=void 0===n?{}:n).isLight,i=t.id,r=t.colliders,a=t.res_img_scale,s=t.res_img_rect,c=t.res_img_anchor,u=t.res_img_rotation,l=t.res_bone_offset,d=t.res_bone_scale,p=a[0],h=a[1],f=c[0],m=c[1],g=s[0];a=s[1],c=s[2],s=s[3],this.node.scaleX=p,this.node.scaleY=h,this.node.width=g,this.node.height=a,this.node.x=c,this.node.y=s,this.node.name=i,l.length&&(s=l[0],i=l[1],l=d[0],_=d[1],this.dragonBone.node.x=s||0,this.dragonBone.node.y=i||0,this.dragonBone.node.scaleX=l||1,this.dragonBone.node.scaleY=_||1);var _=this.partSmoke1.node;return _.active=!1,_.x=0===f?0:g/2,_.y=0===m?0:-a/2,(_=this.partSmoke2.node).active=!1,_.x=-g/2,_.y=a/2,(_=this.nodeImg).width=g,_.height=a,_.anchorX=f,_.anchorY=m,_.y=0,_.zIndex=1e3,_.angle=u||0,this.nodeFurniture.opacity=255,o&&((o=this.spriteLight.node).width=g,o.height=a,o.anchorX=f,o.anchorY=m,o.angle=u||0),(r=r||[]).length&&!this.nodeImg.getComponent(cc.PolygonCollider)&&((u=this.nodeImg.addComponent(cc.PolygonCollider)).offset=cc.Vec2.ZERO,u.points=r.map(function(e){return e=e.split("&"),cc.v2(+e[0],+e[1])})),this.loadSprite(e,t,n)},D.prototype.loadHD=function(){if(!cc.isValid(this.node)||!cc.isValid(this.nodeImg))return Promise.resolve(0);var e=this.nodeImg.getComponent(g.default);return e?e.loadHD():Promise.resolve(0)},D.prototype.loadSprite=function(e,t,n){var o=this;void 0===n&&(n={});var i=t.skin_type,r=t.res_img,a=t.skin_num;return r?new Promise(function(s){if(!cc.isValid(o.node)||!cc.isValid(o.nodeImg))return s(null);var c=w.MapConfig.PrefixRoom,u=w.MapConfig.RoomData[i].name,l=r.replace("_1","").replace("_2","").replace("_3",""),d=!!n.isLight,h=!!n.isInitial,f=3===a?l+"_"+e:""+r;(l=o.nodeImg.getComponent(g.default))&&(l.setSpriteName(f),l.setRelativePath("room-new/"+u)),l&&l.getHDTexture()?(p.default.error("==\u8bfb\u53d6\u7f13\u5b58:loadFunitureSprite",i,f),o.renderFurnitureImg(new cc.SpriteFrame(l.getHDTexture()),d),s(null)):(u=c+"/"+u,S.LoaderMgr.loadSpriteFrameWithUrl(u+"/"+f).then(function(e){h&&o.animShow(),o.renderFurnitureImg(e,d),cc.dynamicAtlasManager.insertSpriteFrame(e),s(null)},function(){return o.loadSprite(e,t,n)}).catch(function(){}))}):(cc.isValid(this.nodeImg)&&(this.nodeImg.active=!0,this.nodeImg.getComponent(cc.Sprite).spriteFrame=null),Promise.resolve())},D.prototype.renderFurnitureImg=function(e,t){var n=cc.isValid(this.node);n&&t&&cc.isValid(this.spriteLight)&&(this.spriteLight.spriteFrame=e,this.spriteLight.node.active=!0),n&&cc.isValid(this.nodeImg)&&(this.nodeImg.active=!0,this.nodeImg.getComponent(cc.Sprite).spriteFrame=e)},D.prototype.hideSkin=function(){cc.isValid(this.nodeFurniture)&&(this.nodeFurniture.opacity=0)},D.prototype.renderBoneUi=function(){var e=(r=this.data).res_bone_offset,t=r.res_bone_scale,n=r.res_bone,o=e[0],i=e[1],r=t[0];e=t[1],(t=this.dragonBone.node).active=!0,t.scaleX=r||1,t.scaleY=e||1,t.x=o||0,t.y=i||0,M.default.isH5&&(window["bone-"+n]=this.dragonBone)},D.prototype.playBone=function(e,t,n,o){var i=this,r=this.data,a=r.res_bone,s=r.skin_num;return a?new Promise(function(r){i.loadBone().then(function(){i.skinId=e,i.renderBoneUi(),0<=a.indexOf("floor")&&"floor-2"!==a||1===s?i.dragonBone.playAnimation("running",1):i.dragonBone.playAnimation("skin_"+e,1),n&&n.call(o||i),i.dragonBone.once(dragonBones.EventObject.COMPLETE,function(){t&&i.scheduleOnce(i.hideBone,2/60),r(null)},i)}).catch(function(){f.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u5bb6\u5c45\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\u3002\u9519\u8bef\u7801\uff1a-100",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){i.playBone(e,t,n,o)}})})}):(n&&n.call(o||this),Promise.resolve())},D.prototype.hideBone=function(){this.dragonBone&&cc.isValid(this.dragonBone.node)&&(this.dragonBone.node.active=!1)},D.prototype.loadBone=function(){var e=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(t){var n=e.data.res_bone;cc.loader.loadRes("texture/bones/"+n+"_ske",dragonBones.DragonBonesAsset,function(o,i){return o?e.loadBone():(e.dragonBone.dragonAsset=i,void cc.loader.loadRes("texture/bones/"+n+"_tex",dragonBones.DragonBonesAtlasAsset,e.onComplete.bind(e,t)))})})},D.prototype.onEndDown=function(){var e=this;this.partSmoke1.node.active=!0,this.partSmoke2.node.active=!0,this.partSmoke1.resetSystem(),this.partSmoke2.resetSystem(),this.node.getComponent(E.default).remove(E.AnimEventKey.NewDownSmoke,this.onEndDown,this),this.scheduleOnce(function(){cc.isValid(e.partSmoke1.node)&&(e.partSmoke1.node.active=!1),cc.isValid(e.partSmoke2.node)&&(e.partSmoke2.node.active=!1)},1.2)},D.prototype.onComplete=function(e,t,n){if(t)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",e()},D.prototype.onTouchStart=function(){},D.prototype.onTouchMove=function(){},D.prototype.onTouchEnd=function(){},D.prototype.onTouchNodeEnd=function(){},s([i(cc.Node)],D.prototype,"nodeFurniture",void 0),s([i(cc.Sprite)],D.prototype,"spriteLight",void 0),s([i(cc.ParticleSystem)],D.prototype,"partSmoke1",void 0),s([i(cc.ParticleSystem)],D.prototype,"partSmoke2",void 0),s([i(dragonBones.ArmatureDisplay)],D.prototype,"dragonBone",void 0),o=s([o],D),r.default=o,cc._RF.pop()},{}],CCAudio:[function(e,t,n){"use strict";cc._RF.push(t,"eaea91vyedDmqv/MixXl6HV","CCAudio");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseAudio"),c=o("LoaderMgr");function u(){var e=a.call(this)||this;return e._musicMuted=!1,e._soundMuted=!1,e.musicId=-1,e.soundIds=[],e}r(u,a=s.default),Object.defineProperty(u.prototype,"muted",{get:function(){return 0==cc.audioEngine.getVolume(1)},set:function(e){this.musicMuted=e,this.soundMuted=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"musicVolume",{get:function(){return cc.audioEngine.getMusicVolume()},set:function(e){cc.audioEngine.setMusicVolume(e)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"musicMuted",{get:function(){return this._musicMuted},set:function(e){this._musicMuted=e,this.musicId<0||(e?cc.audioEngine.pause(this.musicId):cc.audioEngine.resume(this.musicId))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"soundVolume",{get:function(){return cc.audioEngine.getEffectsVolume()},set:function(e){cc.audioEngine.setEffectsVolume(e)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"soundMuted",{get:function(){return this._soundMuted},set:function(e){this._soundMuted=e,this.soundIds.forEach(function(t){return e?cc.audioEngine.pause(t):cc.audioEngine.resume(t)})},enumerable:!0,configurable:!0}),u.prototype.playMusic=function(e,t){var n=this;void 0===t&&(t=!0),this.musicName!=e&&(this.musicName&&cc.audioEngine.stopMusic(),this.musicName=e,this.createAudio(e).then(function(e){n.musicId=cc.audioEngine.playMusic(e,t)}))},u.prototype.pauseMusic=function(){this.musicId<0||cc.audioEngine.pause(this.musicId)},u.prototype.stopMusic=function(){this.musicName=null,this.musicId<0||(cc.audioEngine.stop(this.musicId),this.musicId=-1)},u.prototype.resumeMusic=function(){var e;0<=this.musicId&&(e=this.musicName,this.musicName=null,this.playMusic(e))},u.prototype.playSound=function(e,t){var n=this;void 0===t&&(t=!1),this.soundMuted||this.createAudio(e).then(function(o){var i=cc.audioEngine.playEffect(o,t);n.soundIds.push(i),t||cc.audioEngine.setFinishCallback(i,function(){return n.onEnded(e,i)})})},u.prototype.stopSound=function(){},u.prototype.stopSounds=function(){this.soundIds.forEach(function(e){return cc.audioEngine.stopEffect(e)}),this.soundIds=[]},u.prototype.pause=function(){this.preMuted=this.muted,this.muted=!0},u.prototype.resume=function(){this.muted=this.preMuted},u.prototype.createAudio=function(e){return c.LoaderMgr.loadAudioWithUrl(this.getPath(e))},u.prototype.onEnded=function(e,t){-1!==(t=this.soundIds.indexOf(t))&&this.soundIds.splice(t,1)},r=u,i.default=r,cc._RF.pop()},{}],CashPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"2200c4JFeRA8ozYdlqGPpf8","CashPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("Display"),p=o("BasePopwin"),h=o("AudioMgr"),f=o("OnlineMgr"),m=o("SDKEnums"),g=o("SDKAnalytics"),_=o("BubbleMgr"),y=o("UserModel"),v=o("GetCashPopwin");function b(){var e=null!==c&&c.apply(this,arguments)||this;return e.moneytxt=null,e.cashtxt=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(b,c=p.default),(u=b).prototype.onLoad=function(){},b.prototype.addEvent=function(){c.prototype.addEvent.call(this)},b.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),b.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),g.default.event(m.EventKeys.red_packet_cash_panel_show,""),this.cashtxt.string="0.0",this.moneytxt.string=(y.default.I.RedPocketData.integral+_.default.I.getAllTempintegrals()).toString()},b.prototype.ongetcash=function(){h.AudioMgr.button(),l.ViewMgr.openPopwin(v.default)},b.prototype.onExchange=function(){h.AudioMgr.button(),d.default.showTip("\u5143\u5b9d\u4e0d\u8db3~")},b.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(u,!1).then(function(){})},b.prefabPath="prefab/popwin/popwin_cashout01",s([i(cc.Label)],b.prototype,"moneytxt",void 0),s([i(cc.Label)],b.prototype,"cashtxt",void 0),o=u=s([o],b),r.default=o,cc._RF.pop()},{}],CdManager:[function(e,t,n){"use strict";cc._RF.push(t,"91ba9xxPfRHA79w+uq5lhQ+","CdManager");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("DateUtils");function a(){this._coolDowns={}}Object.defineProperty(a,"I",{get:function(){return this._instance||(this._instance=new a)},enumerable:!0,configurable:!0}),a.prototype.addCoolDown=function(e,t){var n;this._coolDowns[e]?(n=this._coolDowns[e]).reset(t):(n=new s(e,t),this._coolDowns[e]=n)},a.prototype.removeCoolDown=function(e){delete this._coolDowns[e]},a.prototype.isCoolDown=function(e){return!this._coolDowns[e]||(e=this._coolDowns[e],r.default.nowTime>e.endTime)},a.prototype.getProgress=function(e){return this._coolDowns[e]?this._coolDowns[e].progress:1},o=a,i.default=o;var s=(c.prototype.reset=function(e){this.beginTime=r.default.nowTime,this.endTime=this.beginTime+e},Object.defineProperty(c.prototype,"progress",{get:function(){var e=r.default.nowTime;return this.beginTime,(e=this.endTime-e)<=0?1:e},enumerable:!0,configurable:!0}),c);function c(e,t){this.key=e,this.reset(t)}cc._RF.pop()},{}],ChapterCfg:[function(e,t,n){"use strict";cc._RF.push(t,"e3239pJOatEQ7bG5HckIeZ1","ChapterCfg");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],CheckTools:[function(e,t,n){"use strict";cc._RF.push(t,"2c0bcOU7iVPy5S7c8YwCZob","CheckTools");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKTools"),a=o("Enum"),s=o("DataMgr"),c=o("OnlineMgr"),u=o("SDKEnums"),l=o("ViewMgr"),d=o("GameNoStar");function p(){}p.checkStar=function(e,t){return!(e>((t=(t=void 0===t?{}:t)||{}).max||s.DataMgr.User.Star)&&(l.ViewMgr.openPopwin(d.default,{data:t}),1))},p._checkDayState=function(e,t){if((e=s.DataMgr.User.getDayDataWithKey(e,a.RewardState.Not))===a.RewardState.Received)return e;for(var n=!1,o=r.default.Scene,i=0;i<t.length;i++)if(o+""==t[i]+""){n=!0;break}return n?a.RewardState.Receive:a.RewardState.Not},Object.defineProperty(p,"LevelAB",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.level_abtest,0);return 0===e||2!==e&&!!(s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsGiftBonus",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.new_start_bonus_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsRedPacketOpen",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.red_packet_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsNewRedPacketUIOpen",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.red_packet_welcome_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsOpenRule",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.tutorial_panel_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsGiftBonusHide",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.StartBonusHideABTest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsInsertAdGameStart",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.InsertAdGameStartABTest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsLine",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.shoot_line_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"IsNewPassModel",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.nonstop_mode_abtest,2);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"ShowInterstialCustomAd",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.matrix_inter_abtest,2);return 0===e||2!==e&&!!(s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"SignDoubleRewardAB",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.sign_in_reward_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"OnlineDoubleRewardAB",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.online_time_reward_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(p,"FirstFreeChangeAB",{get:function(){var e=c.OnlineMgr.getInt(u.OnlineKeys.free_change_for_1_lv_firstfree_abtest,0);return!(0===e||2!==e&&s.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),o=p,i.default=o,cc._RF.pop()},{}],ChestCoinGiftPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"7041fcOonNDPaIfFD0HuFVs","ChestCoinGiftPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("WXApi"),p=o("SDKTools"),h=o("BasePopwin"),f=o("DataMgr"),m=o("SDKEnums"),g=o("BubbleMgr"),_=o("AudioMgr"),y=o("EventEnum"),v=o("OnlineMgr"),b=o("ImageLabelNew");function S(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtSignleCoin=null,e.txtMultipleNum1=null,e.txtMultipleNum2=null,e.txtMultipleCoin=null,e.mTimes=10,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,c=h.default),(u=S).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.data=e.data,this.txtMultipleNum1.string=this.mTimes.toString(),this.txtMultipleNum2.setValue(this.mTimes,"",!1),this.txtSignleCoin.string="+"+this.SingleCoinNum+"\u91d1\u5e01",this.txtMultipleCoin.setValue(this.MultipleCoinNum,"",!0),d.default.I.showsideAD()},Object.defineProperty(S.prototype,"SingleCoinNum",{get:function(){return this.data.diamond},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"MultipleCoinNum",{get:function(){return this.SingleCoinNum*this.mTimes},enumerable:!0,configurable:!0}),S.prototype.onClose=function(){g.default.I.removePopwinList(),c.prototype.onClose.call(this),d.default.I.hidesideAD()},S.prototype.addEvent=function(){c.prototype.addEvent.call(this),p.default.bindEvent(y.EventEnum.TacticUpdate.toString(),this.initReward,this)},S.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),p.default.removeEvent(y.EventEnum.TacticUpdate.toString(),this.initReward,this)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),S.prototype.initReward=function(){},S.prototype.onSingle=function(){_.AudioMgr.button(),this.handleSingle()},S.prototype.onVideo=function(){_.AudioMgr.button(),javaCall.ShowReward(this,function(e){p.default.dispatch(m.ShareKeys.block_gold,{success:e.handleMultiple,context:e})})},S.prototype.onBack=function(){_.AudioMgr.button(),this.handleClose()},S.prototype.handleSingle=function(){var e=parseInt(this.SingleCoinNum/10+"");f.DataMgr.User.reqDiamond(e,0,{isUpdate:!0}),this.handleClose()},S.prototype.handleMultiple=function(){var e=parseInt(this.MultipleCoinNum/10+"");f.DataMgr.User.reqDiamond(e),this.handleClose()},S.prototype.handleClose=function(){var e=this.data.index;f.DataMgr.Task.reqChestOpenReward(e),l.ViewMgr.closePopwin(u,{anim:!1})},S.prefabPath="prefab/popwin_chest/popwin_chest_coingift",s([i(cc.Label)],S.prototype,"txtSignleCoin",void 0),s([i(cc.Label)],S.prototype,"txtMultipleNum1",void 0),s([i(b.default)],S.prototype,"txtMultipleNum2",void 0),s([i(b.default)],S.prototype,"txtMultipleCoin",void 0),o=u=s([o],S),r.default=o,cc._RF.pop()},{}],ChestListPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"0a39465yhFMj4jLBfLbhR0W","ChestListPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("WXApi"),d=o("Const"),p=o("Action"),h=o("BasePopwin"),f=o("DataMgr"),m=o("BubbleMgr"),g=o("AudioMgr"),_=o("OnlineMgr"),y=o("ImageLabelNew");function v(){var e=null!==c&&c.apply(this,arguments)||this;return e.nodeChests=[],e.spriteColors=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(v,c=h.default),(u=v).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.initUI(),l.default.I.showsideAD()},v.prototype.onClose=function(){c.prototype.onClose.call(this),l.default.I.hidesideAD()},Object.defineProperty(v.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),v.prototype.initUI=function(){var e=this,t=f.DataMgr.User.TaskDaily,n=t.completes,o=t.collectNum;this.nodeChests.forEach(function(t,i){var r,a;0<=n.indexOf(i)?p.default.playAddAnim(t,"anim_chest_open"):f.DataMgr.Task.getChestIndex()===i?(r=f.DataMgr.Task.getTargetByIndex(i),p.default.playAddAnim(t,"anim_chest_not"),a=t.children[0].children[2],i=f.DataMgr.User.TaskDaily.collectColor,i=e.spriteColors[i-1],a.children[0].width=240*Math.min(1,o/r),a.children[1].getComponent(y.default).setText(o+"/"+r),a.children[2].getComponent(cc.Sprite).spriteFrame=i):p.default.playAddAnim(t,"anim_chest_on")}),n.length===this.nodeChests.length?p.default.playAddAnim(this.node.children[0],"anim_in_tomorrow"):p.default.playAddAnim(this.node.children[0],"anim_in_not")},v.prototype.onCollect=function(){g.AudioMgr.button();var e=Math.min(f.DataMgr.User.CurLevel+1,d.default.MaxLv);m.default.I.enterGame(e),m.default.I.hideUILevel(),this.handleClose(!0)},v.prototype.onBack=function(){g.AudioMgr.button(),this.handleClose(!0)},v.prototype.handleClose=function(e){void 0===e&&(e=!1),this.doClose(u,e)},v.prefabPath="prefab/popwin_chest/popwin_chest_list",s([i(cc.Node)],v.prototype,"nodeChests",void 0),s([i(cc.SpriteFrame)],v.prototype,"spriteColors",void 0),o=u=s([o],v),r.default=o,cc._RF.pop()},{}],ChestOpenPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"f4c749Mz6ZHpbfp4X9X0pqd","ChestOpenPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l,d=o("ViewMgr"),p=o("Action"),h=o("BasePopwin"),f=o("DataMgr"),m=o("BubbleMgr"),g=o("ChestRewardPopwin"),_=o("OnlineMgr"),y=o("ImageLabelNew"),v=o("WXApi"),b=o("ABTools"),S=o("ChestCoinGiftPopwin");function w(){var e=null!==u&&u.apply(this,arguments)||this;return e.imgColor=null,e.txtCollectNum=null,e.nodeContent=null,e.nodeCollectProgress=null,e.spriteColors=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(w,u=h.default),(l=w).canShow=function(){if(!f.DataMgr.Task.isChestFuncOpen)return null;var e=f.DataMgr.Task.checkChestReward();return 2===e.length?e:null},w.prototype.onOpen=function(e){u.prototype.onOpen.call(this,e),this.isLocked=!0,this.data=e.data,this.initUI(),v.default.I.showsideAD()},w.prototype.onClose=function(){u.prototype.onClose.call(this),v.default.I.hidesideAD()},Object.defineProperty(w.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(l.prefabPath)},enumerable:!0,configurable:!0}),w.prototype.initUI=function(){var e=this,t=(i=this.data).index,n=i.target,o=f.DataMgr.Task.CollectNum,i=Math.min(1,o/n);this.nodeCollectProgress.width=340*i,this.txtCollectNum.setText("+"+Math.min(n,o)+"/"+n),n=f.DataMgr.User.TaskDaily.collectColor,n=this.spriteColors[n-1],this.imgColor.spriteFrame=n,p.default.playAddAnim(this.nodeContent,"anim_chest_open_0"+(t+1)).then(function(){e.isLocked=!1;var n=f.DataMgr.Task.getRewardByIndex(t);b.default.I.wxDailyTaskReward?d.ViewMgr.openPopwin(g.default,{data:s({},n,{index:t}),anim:!1}):d.ViewMgr.openPopwin(S.default,{data:s({},n,{index:t})}),e.handleClose()})},w.prototype.handleClose=function(e){void 0===e&&(e=!1),this.doClose(l,e).then(function(){return m.default.I.removePopwinList()}).catch(function(){return m.default.I.removePopwinList()})},w.prefabPath="prefab/popwin_chest/popwin_chest_open",c([i(cc.Sprite)],w.prototype,"imgColor",void 0),c([i(y.default)],w.prototype,"txtCollectNum",void 0),c([i(cc.Node)],w.prototype,"nodeContent",void 0),c([i(cc.Node)],w.prototype,"nodeCollectProgress",void 0),c([i(cc.SpriteFrame)],w.prototype,"spriteColors",void 0),o=l=c([o],w),r.default=o,cc._RF.pop()},{}],ChestOverPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"ffb0b1hONRMkYkxhkpQspOr","ChestOverPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("FailPopwin"),p=o("Action"),h=o("SDKTools"),f=o("BasePopwin"),m=o("DataMgr"),g=o("Enum"),_=o("ShareVideo"),y=o("BubbleMgr"),v=o("AudioMgr"),b=o("OnlineMgr"),S=o("ImageLabelNew"),w=o("SDKEnums"),A=o("WXApi");function M(){var e=null!==c&&c.apply(this,arguments)||this;return e.shareVideo=null,e.txtAddNum=null,e.imgColor1=null,e.imgColor2=null,e.txtCollectNum=null,e.nodeCollectTemp=null,e.nodeCollectProgress=null,e.spriteColors=[],e.nodeTreasureSkin=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(M,c=f.default),(u=M).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.isLocked=!0,this.isBacking=!1,this.type=e.data.type,this.initUI(),this.initRewardUI(),A.default.I.showsideAD()},M.prototype.onOpend=function(e){c.prototype.onOpend.call(this,e),this.isLocked=!1},M.prototype.onClose=function(){c.prototype.onClose.call(this),A.default.I.hidesideAD()},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.initUI=function(){p.default.playAnim(this.nodeCollectTemp,"anim_bubble_in"),this.txtAddNum.string="x"+m.DataMgr.Task.CollectTempNum;var e=m.DataMgr.Task.getCollectSum(),t=m.DataMgr.Task.getChestTarget(),n=m.DataMgr.Task.getChestIndex(),o=Math.min(1,e/t);this.nodeCollectProgress.width=336*o,this.txtCollectNum.setText("+"+Math.min(t,e)+"/"+t),p.default.playAnim(this.nodeTreasureSkin,"anim_chest"+(n+1)),n=m.DataMgr.User.TaskDaily.collectColor,n=this.spriteColors[n-1],this.imgColor1.spriteFrame=n,this.imgColor2.spriteFrame=n},M.prototype.initRewardUI=function(){0===this.type?this.shareVideo.updateWithType(w.ShareVideoType.None):this.shareVideo.updateWith(w.ShareKeys.ContinueCollect)},M.prototype.actionBack=function(){var e=this;return new Promise(function(t){e.isBacking=!0;var n=m.DataMgr.Task.CollectNum,o=m.DataMgr.Task.getChestTarget(),i=Math.min(1,n/o);cc.tween(e.nodeCollectProgress).to(.25,{width:90*i}).call(function(){e.txtCollectNum.setText("+"+Math.min(o,n)+"/"+o),p.default.playAnim(e.nodeCollectTemp,"anim_bubble_none").then(function(){return t(1)},function(){return t(0)})}).start()})},M.prototype.onCollect=function(){v.AudioMgr.button(),this.isLocked||this.isBacking||(0===this.type?this.handleClose(!1):h.default.dispatch(w.ShareKeys.FailAddBubble,{success:this.handleAddBubble,context:this}))},M.prototype.onBack=function(){var e,t=this;v.AudioMgr.button(),this.isLocked||this.isBacking||(e=this.type,this.actionBack().then(function(){t.handleClose(!1),0===e?y.default.I.showUILevel():l.ViewMgr.openPopwin(d.default)}))},M.prototype.handleAddBubble=function(){this.handleClose(!1),y.default.I.addBubble(5),y.default.I.isgameover=!1,y.default.I.setTimeProps(g.PropsType.Light,1),y.default.I.nextballAni()},M.prototype.handleClose=function(e){void 0===e&&(e=!1),this.doClose(u,e)},M.prefabPath="prefab/popwin_chest/popwin_chest_over",s([i(_.default)],M.prototype,"shareVideo",void 0),s([i(cc.Label)],M.prototype,"txtAddNum",void 0),s([i(cc.Sprite)],M.prototype,"imgColor1",void 0),s([i(cc.Sprite)],M.prototype,"imgColor2",void 0),s([i(S.default)],M.prototype,"txtCollectNum",void 0),s([i(cc.Node)],M.prototype,"nodeCollectTemp",void 0),s([i(cc.Node)],M.prototype,"nodeCollectProgress",void 0),s([i(cc.SpriteFrame)],M.prototype,"spriteColors",void 0),s([i(cc.Node)],M.prototype,"nodeTreasureSkin",void 0),o=u=s([o],M),r.default=o,cc._RF.pop()},{}],ChestRewardPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"316c32VZOtE9q51iPHqynvd","ChestRewardPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l,d=o("WXApi"),p=o("Const"),h=o("Action"),f=o("SDKTools"),m=o("BasePopwin"),g=o("DataMgr"),_=o("ShareVideo"),y=o("SDKEnums"),v=o("BubbleMgr"),b=o("AudioMgr"),S=o("EventEnum"),w=o("SDKAnalytics"),A=o("OnlineMgr");function M(){var e=null!==u&&u.apply(this,arguments)||this;return e.shareVideo=null,e.txtCoin=null,e.nodeRewards=[],e.spriteItems=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(M,u=m.default),(l=M).prototype.onOpen=function(e){u.prototype.onOpen.call(this,e),this.isLocked=!0,this.data=e.data,this.initUI(),this.initRewardUI(),this.data.props.length<=2&&d.default.I.showsideAD()},M.prototype.onClose=function(){u.prototype.onClose.call(this),d.default.I.hidesideAD()},M.prototype.addEvent=function(){u.prototype.addEvent.call(this),f.default.bindEvent(S.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},M.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),f.default.removeEvent(S.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return A.OnlineMgr.getBanner(l.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.initUI=function(){var e=this,t=(o=this.data).diamond,n=o.props,o=n.length||1;this.txtCoin.string="+"+10*t,n.forEach(function(t,n){var o=t[0];t=t[1],(n=e.nodeRewards[n]).getChildByName("num").getComponent(cc.Label).string="+"+t,n.getChildByName("img_hammer").getComponent(cc.Sprite).spriteFrame=e.spriteItems[o]}),h.default.playAddAnim(this.node,"anim_double_"+o).then(function(){return e.isLocked=!1}).then(function(){return e.isLocked=!1})},M.prototype.initRewardUI=function(){var e=this.ShareKey;this.shareVideo.updateWith(e)},Object.defineProperty(M.prototype,"ShareKey",{get:function(){return y.ShareKeys.ChestDoubleReward},enumerable:!0,configurable:!0}),M.prototype.onDouble=function(){b.AudioMgr.button(),javaCall.ShowReward(this,function(e){e.isLocked||f.default.dispatch(e.ShareKey,{success:e.handleDoubleReward,context:e})})},M.prototype.onSingle=function(){b.AudioMgr.button(),this.isLocked||this.handleSingleReward()},M.prototype.handleDoubleReward=function(){this.handleReward(!0)},M.prototype.handleSingleReward=function(){this.handleReward(!1)},M.prototype.handleReward=function(e){var t,n,o,i,r,a,c=(d=this.data).diamond,u=d.props,l=e?2:1,d=c*l;g.DataMgr.User.reqDiamond(d,10),w.default.addLogRes([s({},p.default.LogRes.Diamond,{type:1,cnum:d,onum:g.DataMgr.User.Diamond,reason:"isdouble="+e,levelid:0})]),1===(c=u.length)?(e=(d=u[0])[0],d=d[1],v.default.I.doAddOneItem([e,d*l])):2===c?(t=u[0],a=u[1],n=t[0],o=t[1],i=a[0],r=a[1],v.default.I.doAddTwoItem([n,o*l],[i,r*l])):3===c&&(t=u[0],a=u[1],u=u[2],n=t[0],o=t[1],i=a[0],r=a[1],a=u[0],u=u[1],v.default.I.doAddThreeItem([n,o*l],[i,r*l],[a,u*l])),this.handleClose()},M.prototype.handleTacticUpdate=function(){this.initRewardUI()},M.prototype.handleClose=function(e){void 0===e&&(e=!1);var t=this.data.index;g.DataMgr.Task.reqChestOpenReward(t),this.doClose(l,e).then(function(){return v.default.I.removePopwinList()}).catch(function(){return v.default.I.removePopwinList()})},M.prefabPath="prefab/popwin_chest/popwin_chest_reward",c([i(_.default)],M.prototype,"shareVideo",void 0),c([i(cc.Label)],M.prototype,"txtCoin",void 0),c([i(cc.Node)],M.prototype,"nodeRewards",void 0),c([i(cc.SpriteFrame)],M.prototype,"spriteItems",void 0),o=l=c([o],M),r.default=o,cc._RF.pop()},{}],CoinFly:[function(e,t,n){"use strict";cc._RF.push(t,"8fd1fCkYrVE3ohKB42sUTP1","CoinFly");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Action"),l=i("Display");function d(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(d,c=cc.Component),d.prototype.start=function(){this.startPos=this.node.children[0].position},d.prototype.fly=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(o){n.state=0,n.params=t,n.resolve=o,n.flyNum=n.node.children.length-1;var i=n.node.children[5];(o=l.default.getTargetPos(e,n.node)).y=o.y-(t.offset?96:0),i.x=o.x,i.y=o.y,n.endPos=o,u.default.playAddAnim(n.node).then(function(){n.state+=1,n.checkEnd()})})},d.prototype.checkEnd=function(){var e=this;2===this.state&&(this.resolve&&this.resolve(),this.node.children.forEach(function(t){t.x=e.startPos.x,t.y=e.startPos.y}),this.params.end&&this.params.end.call(this.params.context))},d.prototype.CoinStartFly=function(e){var t=this,n=+e,o=this.node.children[n-1],i=cc.v2(o.position.x,o.position.y),r=cc.v2(this.endPos.x,this.endPos.y);e=l.default.getEndPointByTrigonometric(125,i,r),u.default.bezier(o,1,i,e,r,70/60).then(function(){t.params.iteator&&t.params.iteator.call(t.params.context,n),t.flyNum===n&&(t.state+=1,t.checkEnd())})},i=s([i],d),r.default=i,cc._RF.pop()},{}],CoinGiftPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"f8f2eZHg7tPRZnXBI5Y55PC","CoinGiftPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("BasePopwin"),d=o("ViewMgr"),p=o("ShareVideo"),h=o("SDKEnums"),f=o("SDKTools"),m=o("EventEnum"),g=o("OnlineMgr"),_=o("RandomUtils"),y=o("Display"),v=o("AudioMgr"),b=o("DataMgr"),S=o("WXApi"),w=o("BubbleMgr"),A=o("ImageLabelNew");function M(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_sharebtn=null,e.m_labtimes1=null,e.m_labtimes2=null,e.m_labcoins=null,e.m_coinnum=0,e.m_times=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(M,c=l.default),u=M,Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e);var t=e.data.isforce;this.callback=e.data.callback,6==y.default.s_CoinGiftFlagtimes?(this.m_times=100,y.default.s_CoinGiftFlagtimes=-1):this.m_times=t?50:10*_.default.random(3,6),this.m_coinnum=5*this.m_times,this.m_labtimes1.setValue(this.m_times,"",!1),this.m_labtimes2.string=this.m_times.toString(),this.m_labcoins.setValue(this.m_coinnum,"",!0),S.default.I.showsideAD()},M.prototype.addEvent=function(){f.default.bindEvent(m.EventEnum.TacticUpdate.toString(),this.initReward,this)},M.prototype.removeEvent=function(){f.default.removeEvent(m.EventEnum.TacticUpdate.toString(),this.initReward,this)},M.prototype.initReward=function(){},M.prototype.onget=function(){javaCall.ShowReward(this,function(){f.default.dispatch(h.ShareKeys.block_gold,{success:this.onSuccess,context:this})})},M.prototype.onSuccess=function(){0<=y.default.s_CoinGiftFlagtimes&&(y.default.s_CoinGiftFlagtimes=0),b.DataMgr.User.reqDiamond(this.m_coinnum/10),d.ViewMgr.closePopwin(u,{anim:!1})},M.prototype.onBack=function(){v.AudioMgr.button(),y.default.s_isshowcoingift=!1,d.ViewMgr.closePopwin(u,{anim:!1}),this.callback&&this.callback.call(this),0<=y.default.s_CoinGiftFlagtimes&&y.default.s_CoinGiftFlagtimes++},M.prototype.ongetsmall=function(){v.AudioMgr.button(),w.default.I.issmalladd=!0,b.DataMgr.User.reqDiamond(.5,0,{isUpdate:!0}),y.default.s_isshowcoingift=!1,d.ViewMgr.closePopwin(u,{anim:!1}),0<=y.default.s_CoinGiftFlagtimes&&y.default.s_CoinGiftFlagtimes++},M.prototype.onClose=function(){w.default.I.removePopwinList(),c.prototype.onClose.call(this),S.default.I.hidesideAD()},M.prototype.update=function(){},M.prefabPath="prefab/popwin/popwin_coingift",s([i(p.default)],M.prototype,"m_sharebtn",void 0),s([i(A.default)],M.prototype,"m_labtimes1",void 0),s([i(cc.Label)],M.prototype,"m_labtimes2",void 0),s([i(A.default)],M.prototype,"m_labcoins",void 0),o=u=s([o],M),r.default=o,cc._RF.pop()},{}],CollectPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"9c5a6GCcstMe5kRqWIFlxkg","CollectPopwin");var o=e,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("BasePopwin"),l=o("AudioMgr"),d=(o("OnlineMgr"),o("CommonMgr"));function p(){return null!==s&&s.apply(this,arguments)||this}o=cc._decorator.ccclass,r(p,s=u.default),(c=p).prototype.onOpen=function(e){s.prototype.onOpen.call(this,e)},Object.defineProperty(p.prototype,"BannerOpen",{get:function(){return null},enumerable:!0,configurable:!0}),p.prototype.onBack=function(){l.AudioMgr.button(),this.doClose(c,!1),d.default.I.sdkEventWithStr("close_ATM_tutorials_close")},p.prefabPath="prefab/popwin/popwin_collect",o=c=a([o],p),i.default=o,cc._RF.pop()},{}],ColorListener:[function(e,t,n){"use strict";cc._RF.push(t,"349b76HP3JFEovjUqrcIzDU","ColorListener");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Debug");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.circleNode=null,e.events={},e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),l.prototype.add=function(e,t,n,o){this.events[e]={callback:t,context:n,params:o}},l.prototype.remove=function(e,t,n){var o=this.events[e];o&&o.callback===t&&o.context===n&&(delete this.events[e],this.events[e]=null)},l.prototype.runEvent=function(e){u.default.error("runEvent",e);var t=this.events[e];t&&t.callback&&(e=t.callback).call.apply(e,[t.context||this].concat(t.params||[]))},s([i(cc.Node)],l.prototype,"circleNode",void 0),o=s([o],l),r.default=o,(r=r.AnimEventKey||(r.AnimEventKey={})).RocketBoomSeparate="RocketBoomSeparate",r.RocketBoomMove="RocketBoomMove",r.RocketBoomFire="RocketBoomFire",r.BtnStarMove1="BtnStarMove1",r.BtnStarMove2="BtnStarMove2",r.BtnStarMove3="BtnStarMove3",r.BtnStarParticle1="BtnStarParticle1",r.BtnStarParticle2="BtnStarParticle2",r.BtnStarParticle3="BtnStarParticle3",r.ObstacleBasketDrop="ObstacleBasketDrop",r.ChestStartShow="ChestStartShow",r.ChestOpenBoom="chest_chestboom",r.OverTargetSkipShow="OverTargetSkipShow",r.TaskStarFly="TaskStarFly",r.NewDownSmoke="NewDownSmoke",r.WinFlyCoinEnd="WinFlyCoinEnd",r.GuideTextShow="GuideTextShow",r.GiftCoinAddVal="GiftCoinAddVal",r.RewardLight="RewardLight",cc._RF.pop()},{}],ComPointTip:[function(e,t,n){"use strict";cc._RF.push(t,"ed0b2pa0DxLpL0xazLX/bcy","ComPointTip");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.style=1,e.redDot=null,e}r(u,s=cc.Component),u.prototype.refresh=function(e){this.init(e)},u.prototype.init=function(e){this.redDot&&(this.redDot.node.active=0<e)},a([c({displayName:"\u5c0f\u7ea2\u70b9\u7c7b\u578b",tooltip:"\u5c0f\u7ea2\u70b9\u7c7b\u578b\uff0c1\uff1a\u9ed8\u8ba4\u5c0f\u7ea2\u70b9 2\uff1a\u5927\u578b\u5c0f\u7ea2\u70b9\uff0c\u53ef\u663e\u793a\u6570\u5b57"})],u.prototype,"style",void 0),a([c(cc.Sprite)],u.prototype,"redDot",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],CommonMgr:[function(e,t,n){"use strict";cc._RF.push(t,"fbe53SkrC5MvJBDIjq/TMsp","CommonMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKAnalytics"),a=o("SDKEnums");function s(){this.livingCache={},this.gmType=0,this.livingCache={},this.levelSelectObjs={}}s.prototype.setGMType=function(e){this.gmType=e},s.prototype.getGMType=function(){return this.gmType},s.prototype.getLevelSelect=function(e){return!!this.levelSelectObjs[e]},s.prototype.addLevelSelect=function(e,t){this.levelSelectObjs[e]=t},s.prototype.clearLevelSelect=function(){this.levelSelectObjs={}},s.prototype.addLivingCache=function(e,t){this.livingCache[e]=t},s.prototype.getLivingCache=function(e){return this.livingCache[e]},s.prototype.sdkEventWithStr=function(e){(e=a.EventKeys[e])&&r.default.event(e,a.EventFrom.game)},s.prototype.sdkEventWithKey=function(e){e&&r.default.event(e,a.EventFrom.game)},Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),o=s,i.default=o,cc._RF.pop()},{}],ConfigModel:[function(e,t,n){"use strict";cc._RF.push(t,"70ef3ktOSZOcq3tAT6pie8G","ConfigModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseModel"),c=o("DataMgr"),u=o("UserModel"),l=o("RandomUtils"),d=o("ABTools");function p(){return null!==a&&a.apply(this,arguments)||this}r(p,a=s.default),p.prototype.init=function(){this.initSignDB()},p.prototype.initRedPacketDB=function(e){this._redpacketcfgData=e},p.prototype.initSeedDB=function(e){this._seedcfgData=e},p.prototype.getSeed=function(e){var t,n=c.DataMgr.User.UsedSeeds,o=[],i=[];if(d.default.I.wxSeedAB)for(var r=0;r<this._seedcfgData.length;r++)(t=this._seedcfgData[r]).id==e&&0<t.seedBase1.length&&(o=t.seedBase1);else for(r=0;r<this._seedcfgData.length;r++)(t=this._seedcfgData[r]).id==e&&0<t.seedBase0.length&&(o=t.seedBase0);if(o.forEach(function(t){(e<=u.default.I.CurLevel||n.indexOf(t)<0)&&i.push(t)}),0<i.length){var a=i[l.default.random(0,i.length)];return c.DataMgr.User.reqUseSeed(a),a}return-1},p.prototype.initSignDB=function(){this._signcfgData=[{id:1,props_reward:[0,1]},{id:2,props_reward:[101,150]},{id:3,props_reward:[1,1]},{id:4,props_reward:[3,1]},{id:5,props_reward:[101,300]},{id:6,props_reward:[2,1]},{id:7,props_reward:[401,2]}]},p.prototype.getShareRuleType=function(e){var t=c.DataMgr.User.Data.dayShareRuleIndex;return t[e]>=p.shareRuleMap[e].length&&(t[e]=0),p.shareRuleMap[e][t[e]]},p.prototype.getSignDBById=function(e){for(var t=0;t<this._signcfgData.length;t++){var n=this._signcfgData[t];if(n.id==e)return n}return null},p.prototype.getRedPacketRandomintegral=function(e){var t=u.default.I.RedPocketData.integral+e;if(t>this._redpacketcfgData[this._redpacketcfgData.length-1].cost_star[1])return-1;for(var n=0;n<this._redpacketcfgData.length;n++){var o=this._redpacketcfgData[n];if(t>=o.cost_star[0]&&t<=o.cost_star[1])return l.default.random(o.scene_id[0],o.scene_id[1]+1)}return-1},p.prototype.clearData=function(){this.init()},p.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(p,"I",{get:function(){return this.instance||(this.instance=new p)},enumerable:!0,configurable:!0}),p.shareRuleMap={maxRecord:[0,1],propBrick:[2,1,0],relive:[1,1,0],freeStar:[1,1,0],wipeReward:[2,1,1,0],share:[3,4,4,3,4,4,4]},p.instance=null,r=p,i.default=r,cc._RF.pop()},{}],Const:[function(e,t,n){"use strict";cc._RF.push(t,"0d2aat3mRFLrK0nQ56WHpuF","Const");var o=e,i=t,r=n;Object.defineProperty(r,"__esModule",{value:!0}),i=o("Enum");var a=o("SDKTools"),s=o("SDKEnums");function c(){}Object.defineProperty(c,"MaxLv",{get:function(){return a.default.getParamsInt(s.OnlineKeys.maxlv,2e3)},enumerable:!0,configurable:!0}),c.Version="1.0",c.DataVersion=1,c.Debug=!1,c.GameEnName="bubble_byte_new",c.GameName="\u5929\u5929\u73a9\u6ce1\u6ce1\u9f99-\u6296\u97f3",c.BaseData="base_data",c.IsExtLoader=!1,c.LoopLvMax=285,c.EditorLv=1,c.MaxHp=16,c.ADD_HP=5,c.MaxTicket=5,c.MinTarBallLv=8,c.InitTeachBall=0,c.MAXADDHPTIMES=a.default.getParamsInt(s.OnlineKeys.MaxAddPowerTimes,20),c.baseMinOnlineGiftlv=15,c.Scene={WX_STORE:1104,WX_Table:1023,WX_LASTEST:1089,WX_FLOATING:1187,WX_SHARE_FRIEND:1007,WX_SHARE_GROUP:1008,WX_SHARE_TICKET:1044},c.LogRes=((o={Diamond:{id:1e3,name:"\u661f\u661f(\u91d1\u5e01)"}})[i.PropsType.Boom]={id:0,name:"\u70b8\u5f39"},o[i.PropsType.Light]={id:1,name:"\u6fc0\u5149"},o[i.PropsType.Laser]={id:2,name:"\u95ea\u7535"},o[i.PropsType.RainbowBall]={id:3,name:"\u5f69\u7403"},o),c.PropTypes=[i.PropsType.Boom,i.PropsType.Light,i.PropsType.Laser,i.PropsType.RainbowBall],c.TestGrade=1,c.SubscribeIds={Sign:"xx",Activity:"xx",Treasure:"xx"},c.TeachDatas=[[0,0,3,3,3,4,4,4,4,4,0,0,0,3,3,3,4,4,4,4,2,0,0,0,3,3,3,4,4,4,2,2,0,0,0,3,3,3,4,4,2,2,2,0,0,0,3,3,3,4,1,2,2,2,0,0,0,3,3,3,1,1,2,2,2,0,0,0,3,3,1,1,1,2,2,2,0,0,0,3,1,1,1,1,2,2,2,0,0,0,1,1,1,1,1,2,2,2,0,0],[1,4,4,4,4,4,4,4,4,4,1,2,3,3,3,3,3,3,3,4,1,2,0,0,0,0,0,0,3,4,1,2,0,2,3,3,3,0,3,4,1,2,0,2,1,4,3,0,3,4,1,2,0,2,1,4,3,0,3,4,1,2,0,2,2,2,3,0,3,4,1,2,0,0,0,0,0,0,3,4,1,2,2,2,2,2,2,2,3,4,1,1,1,1,1,1,1,1,1,4],[1,1,1,1,0,0,1,1,1,1,1,2,2,2,0,0,2,2,2,1,1,2,4,4,3,3,4,4,2,1,1,2,4,4,3,3,4,4,2,1,0,0,3,3,0,0,3,3,0,0,0,0,3,3,0,0,3,3,0,0,1,2,4,4,3,3,4,4,2,1,1,2,4,4,3,3,4,4,2,1,1,2,2,2,0,0,2,2,2,1,1,1,1,1,0,0,1,1,1,1]],i=c,r.default=i,cc._RF.pop()},{}],CoordData:[function(e,t,n){"use strict";cc._RF.push(t,"9a27fj0VhtJA7Dy2lKUI3/b","CoordData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(e,t){this.r=e,this.c=t},i.default=o,cc._RF.pop()},{}],CubeParams:[function(e,t,n){"use strict";cc._RF.push(t,"b661fYhe91D5LADg132TOgi","CubeParams");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){this.scale=1,this.anchorX=.5,this.anchorY=.5,this.opacity=255,this.rotation=0,this.size=cc.size(74,74),this.color=cc.color(255,255,255)},i.default=o,cc._RF.pop()},{}],DataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"4d970CBwz5NsZh78DRU4JSR","DataMgr");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("Api"),s=o("Const"),c=o("Helper"),u=o("SDKTools"),l=o("PlotModel"),d=o("TaskModel"),p=o("MapsModel"),h=o("UserModel"),f=o("LocalModel"),m=o("PointModel"),g=o("LevelModel"),_=o("Enum"),y=o("ConfigModel"),v=o("LocalMgr"),b=o("UserExtModel"),S=o("UserBaseModel"),w=o("MilestoneModel"),A=o("PlatformUtils");function M(){this.userkey=_.BaseInfoKey.KeyUser}Object.defineProperty(M.prototype,"Maps",{get:function(){return p.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"User",{get:function(){return h.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"UserExt",{get:function(){return b.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"UserBase",{get:function(){return S.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Point",{get:function(){return m.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Local",{get:function(){return f.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Config",{get:function(){return y.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Level",{get:function(){return g.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Plot",{get:function(){return l.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Milestone",{get:function(){return w.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"Task",{get:function(){return d.default.I},enumerable:!0,configurable:!0}),M.prototype.init=function(){this.Config.init()},M.prototype.clear=function(){this.Maps.clearData(),this.User.clearData(),this.Milestone.clearData()},M.prototype.setData=function(e){void 0===e&&(e={});var t=(e=c.default.isObject(e)?e:JSON.parse(e)).userInfo||{};e.userInfo=this.User.setData(t),this.baseData=e},M.prototype.syncBaseUserData=function(e,t){return void 0===t&&(t=!1),this.syncBaseData({key:this.userkey,data:e},t)},M.prototype.debugTestServer=function(){return a.default.reqSaveData(s.default.BaseData,JSON.stringify({}))},M.prototype.syncToServer=function(){return a.default.reqSaveData(s.default.BaseData,JSON.stringify(this.baseData))},M.prototype.syncBaseData=function(e,t){if(void 0===t&&(t=!1),!this.baseData)return Promise.reject("\u6ca1\u6709\u8bbe\u7f6ebaseData");for(var n=c.default.isArray(e)?e:[e],o=0,i=n.length;o<i;o++){var r=(a=n[o]).key,a=a.data;r===this.userkey&&this.saveUserInfo(a)}return v.LocalMgr.set("WebData",{base_data:this.baseData}),u.default.setBaseData(this.baseData),t&&A.default.Platform!==A.Platform.H5?this.syncToServer():Promise.resolve()},M.prototype.saveUserInfo=function(e){var t=this.baseData[this.userkey]||{};e=r({},t,e),this.baseData[this.userkey]=e,this.User.setData(e)},Object.defineProperty(M,"I",{get:function(){return this._instance||(this._instance=new M)},enumerable:!0,configurable:!0}),o=M,i.default=o,i.DataMgr=o.I,cc._RF.pop()},{}],DateUtils:[function(e,t,n){"use strict";cc._RF.push(t,"cdbea1DTQxEoKM2FUTVLiXg","DateUtils");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(r,"now",{get:function(){return Math.floor(this.nowTime/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"nowTime",{get:function(){return(new Date).getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(r,"today",{get:function(){var e=(n=new Date(this.nowTime)).getFullYear(),t=n.getMonth()+1,n=n.getDate();return e+"-"+this.add(t)+"-"+this.add(n)},enumerable:!0,configurable:!0}),r.getFormatBySecond=function(e,t){var n="";switch(t=void 0===t?1:t){case 0:n=this.getFormatBySecond0(e);break;case 1:n=this.getFormatBySecond1(e);break;case 2:n=this.getFormatBySecond2(e);break;case 3:n=this.getFormatBySecond3(e);break;case 4:n=this.getFormatBySecond4(e);break;case 5:n=this.getFormatBySecond5(e)}return n},r.getFormatBySecond0=function(e){void 0===e&&(e=0);var t=Math.floor(e/60);return(0==t?"00":t<10?"0"+t:""+t)+":"+(0==(e=Math.floor(e%60))?"00":e<10?"0"+e:""+e)},r.getFormatBySecond1=function(e){void 0===e&&(e=0);var t,n="";0==(o=Math.floor(e/3600))?t="00":o<10?t="0"+o:(i=o%24,24<=o?(t=i<10?"0"+i:""+i,n=Math.floor(o/24)+"d "):t=i<10?"0"+i:""+i);var o,i=Math.floor((e-3600*o)/60);return n+t+":"+(0==i?"00":i<10?"0"+i:""+i)+":"+(0==(o=Math.floor((e-3600*o)%60))?"00":o<10?"0"+o:""+o)},r.getFormatBySecond3=function(e){void 0===e&&(e=0);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return(0==n?"00":n<10?"0"+n:""+n)+":"+(0==(t=Math.floor((e-3600*t)%60))?"00":t<10?"0"+t:""+t)},r.getFormatBySecond2=function(e){var t,n=(t=new Date(e)).getFullYear(),o=t.getMonth()+1,i=t.getDate(),r=t.getHours();return n+"-"+o+"-"+i+" "+(0==r?"00":r<10?"0"+r:""+r)+":"+(0==(e=t.getMinutes())?"00":e<10?"0"+e:""+e)+":"+(0==(t=t.getSeconds())?"00":t<10?"0"+t:""+t)},r.getFormatBySecond4=function(e){var t=Math.floor(e/3600);return 0<t?24<t?Math.floor(t/24)+"\u5929\u524d":t+"\u5c0f\u65f6\u524d":Math.floor(e/60)+"\u5206\u949f\u524d"},r.getFormatBySecond5=function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),o=Math.floor((e-3600*n)/60),i=Math.floor((e-3600*n)%60),r="";return 0<e?0==t?0==n?(r="",0==o?0==i?"":i<10?"0"+i+"\u79d2":i+"\u79d2":o+"\u5206\u949f"+(0==i?"":i<10?"0"+i+"\u79d2":i+"\u79d2")):(r=n+"\u5c0f\u65f6",0==o?r+(0==i?"":i<10?"0"+i+"\u79d2":i+"\u79d2"):r+(o<10?"0"+o+"\u5206\u949f":o+"\u5206\u949f")):t+"\u5929"+(0==n?"":n<10?"0"+n+"\u5c0f\u65f6":n+"\u5c0f\u65f6"):""},r.add=function(e){return e<10?"0"+e:e},r.getFormatBySecondtemp=function(e){return(e=new Date(e)).getFullYear()+"_"+(e.getMonth()+1)+"_"+e.getDate()+"_"+e.getHours()+"_"+e.getMinutes()+"_"+e.getSeconds()},r.getFormatBySecondTime=function(e){var t=new Date(e),n=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());return e=t.getMinutes(),t.getSeconds(),(0==n?"00":n<10?"0"+n:""+n)+":"+(0==e?"00":e<10?"0"+e:""+e)},o=r,i.default=o,cc._RF.pop()},{}],Debug:[function(e,t,n){"use strict";cc._RF.push(t,"e6ca1CVf/JKEriR1Xo7oBPP","Debug");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o("StringUtils");var r=o("DataMgr"),a=o("OnlineMgr"),s=o("SDKEnums");function c(){}Object.defineProperty(c,"isDebug",{get:function(){return!!a.OnlineMgr.getBool(s.OnlineKeys.DebugFlag,0)},enumerable:!0,configurable:!0}),c.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.isDebug&&e.unshift("[DebugErr]")},c.errorUser=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.DataMgr.UserBase.ID;n&&-1!==c.ignoreLogUsers.indexOf(n)&&e.unshift("[DebugUserError]")},c.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.isDebug&&e.unshift("[DebugWarn]")},c.ignoreLogUsers=[],c.logger=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.isDebug&&e.unshift("[DebugLog]")},c.loggerJson=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.isDebug&&1!==e.length&&e.unshift("[DebugLog]")},o=c,i.default=o,cc._RF.pop()},{}],Declare:[function(e,t,n){"use strict";cc._RF.push(t,"cdc2f9Gkh1PbrceSl6yxgPt","Declare");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o("MilestoneModel"),o("PlotModel"),cc._RF.pop()},{}],DelayBone:[function(e,t,n){"use strict";cc._RF.push(t,"aee17ZSSpRCX5TiTyz6+uTU","DelayBone");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.dragonBone=null,e}r(u,s=cc.Component),u.prototype.initWith=function(e,t){var n=this;return this.boneName=e,new Promise(function(e){n.loadBone().then(function(){t?(n.dragonBone.playAnimation(t,1),n.dragonBone.once(dragonBones.EventObject.COMPLETE,e,n)):e(null)}).catch(function(){return e(null)})})},u.prototype.playOne=function(e){var t=this;return this.dragonBone.dragonAtlasAsset?new Promise(function(n){t.dragonBone.playAnimation(e,1),t.dragonBone.once(dragonBones.EventObject.COMPLETE,n,t)}):Promise.resolve()},u.prototype.playLoop=function(e){var t=this;return this.dragonBone.dragonAtlasAsset?new Promise(function(n){t.dragonBone.playAnimation(e,0),n(null)}):Promise.resolve()},u.prototype.loadBone=function(){var e=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(t){var n=e.boneName;cc.loader.loadRes("texture/bones/"+n+"_ske",dragonBones.DragonBonesAsset,function(o,i){return o?e.loadBone():(e.dragonBone.dragonAsset=i,void cc.loader.loadRes("texture/bones/"+n+"_tex",dragonBones.DragonBonesAtlasAsset,e.onComplete.bind(e,t)))})})},u.prototype.onComplete=function(e,t,n){if(t)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",e()},a([c(dragonBones.ArmatureDisplay)],u.prototype,"dragonBone",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],Display:[function(e,t,n){"use strict";cc._RF.push(t,"44f9dR9hfZFIbGhHe8asGxq","Display");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("SDKTools"),s=o("TipsMgr"),c=o("Enum"),u=o("SDKEnums"),l=o("StarConfig"),d=o("AppDataMgr"),p=o("UserModel"),h=o("DataMgr"),f=o("SDKAnalytics"),m=o("PersistNode"),g=o("LoaderMgr"),_=o("PoolMgr"),y=o("Action"),v=o("UserBaseModel"),b=o("CoinFly"),S=o("OnlineMgr");function w(){}w.showTip=function(e,t,n){void 0===t&&(t=1),s.TipsMgr.show(e,t,n)},w.showProps=function(e,t){s.TipsMgr.showProps(e,t)},w.IsCanShowItemTips=function(){var e=a.default.getParamsObj(u.OnlineKeys.pop_prop_tips_disturb_abtest,[2,0]),t=e[1];return 0==t||1==t&&v.default.I.ID%2==1||this.s_CloseItemTipTimes<e[0]},Object.defineProperty(w,"PersistNode",{get:function(){return w.persistNode=w.persistNode?w.persistNode:cc.director.getScene().getChildByName("PersistNode").getComponent(m.default)},enumerable:!0,configurable:!0}),Object.defineProperty(w,"isOnlineGift",{get:function(){var e=a.default.getParamsInt(u.OnlineKeys.online_gift_abtest,2);return 0!=e&&(1!=e||v.default.I.ID%2!=1)},enumerable:!0,configurable:!0}),w.topShow=function(e){this.PersistNode.TopBar&&(this.PersistNode.TopBar.node.active=!0,this.PersistNode.TopBar.initWith(e))},w.getViewOffset=function(){return Math.max(0,cc.winSize.height/2-667)},w.getDes=function(){for(var e=[],t=0;t<32;t++)e.push("A");return e.join("")},w.getTargetPos=function(e,t){return e=e.convertToWorldSpaceAR(cc.v2(0,0)),t.convertToNodeSpaceAR(e)},w.getTarPos=function(e,t,n){return t=e.convertToWorldSpaceAR(t),n.convertToNodeSpaceAR(t)},w.getViewRatio=function(){var e=a.default.SystemData;return e?750/e.screenWidth:1},w.isblockquietopen=function(){var e=a.default.getParamsInt(u.OnlineKeys.gift_bubble_quiet_abtest,0);return 0!=e&&(1!=e||v.default.I.ID%2!=1)},w.setParent=function(e,t,n){e.parent!=t&&(n?(n=e.convertToWorldSpaceAR(cc.p(0,0)),n=t.convertToNodeSpaceAR(n),e.parent=t,e.position=n):e.parent=t)},w.getWorldPosition=function(e){return e.convertToWorldSpaceAR(cc.p(0,0))},w.showOnShowInterstitial=function(){a.default.interstitialShow(S.OnlineMgr.getAdByType(S.AdType.Interstitial))},w.showFailInterstitial=function(){var e=a.default.getParamsInt(u.OnlineKeys.insert_ad_min_lv,5);p.default.I.CurLevel<=e||((e=d.AppDataMgr.get(c.AppDataKey.FailCount,0))+1>=a.default.getParamsInt(u.OnlineKeys.InterstitialFailCd,l.StarConfig.InterstitialAdCd)?(d.AppDataMgr.set(c.AppDataKey.FailCount,0),a.default.interstitialShow(S.OnlineMgr.getAdByType(S.AdType.Interstitial))):d.AppDataMgr.set(c.AppDataKey.FailCount,e+1))},w.showRewardHintInterstitial=function(){var e=d.AppDataMgr.get(c.AppDataKey.RewardHint,0);e+1>=a.default.getParamsInt(u.OnlineKeys.InterstitialHintCd,l.StarConfig.InterstitialAdCd)?(d.AppDataMgr.set(c.AppDataKey.RewardHint,0),a.default.interstitialShow(S.OnlineMgr.getAdByType(S.AdType.Interstitial))):d.AppDataMgr.set(c.AppDataKey.RewardHint,e+1)},w.getRectSize=function(e){var t={left:0,top:0,width:0,height:0},n=cc.size(e.width+10,e.height+10),o=cc.view.getFrameSize(),i=cc.winSize;return t.left=(.5*i.width+e.x-.5*n.width)/i.width*o.width,t.top=(.5*i.height-e.y-.5*n.height)/i.height*o.height,t.width=n.width/i.width*o.width,t.height=n.height/i.height*o.height,t},w.setBtnInteractable=function(e,t){cc.isValid(e)&&(e.interactable=t)},w.createAuthBtn=function(e,t,n,o){void 0===o&&(o={}),n=w.getRectSize(n),n={type:"text",text:"",style:r({},n,{borderRadius:4})},t={isDebug:!1,msg:t=t||"\u67e5\u770b\u4e16\u754c\u6392\u884c\u699c\u9700\u6388\u6743\r\n\u662f\u5426\u524d\u5f80\u8bbe\u7f6e\u754c\u9762\u5f00\u542f?",callback:function(e){1===e?(a.default.login(!0),o.callback&&o.callback.call(o.context,1)):0===e?o.callback&&o.callback.call(o.context,0):o.callback&&o.callback.call(o.context,-1)},context:this},a.default.createUserBtns(e,n,t)},w.getIphoneBottomOffset=function(){if(!(t=a.default.SystemData))return 0;var e=t.platform,t=t.statusBarHeight;return!e||"ios"!==e.toLocaleLowerCase()&&"devtools"!==e.toLocaleLowerCase()||44!==t?0:14},w.adjustIphoneX=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var o=w.getIphoneOffset();!cc.isValid(e)||(e=e.getComponent(cc.Widget))&&(e.top=o*(t?.5:1)+n,e.updateAlignment())},w.getIphoneOffset=function(){var e=0,t=cc.view.getFrameSize(),n=t.width,o=t.height;return 1125===n&&2436===o||1242===n&&2688===o||360===n&&780===o||375===n&&812===o||414===n&&896===o?e=63:828===n&&1792===o?e=126:1080===n&&2208===o?e=171:360===n&&736===o?e=57:(t=(t=a.default.SystemData)&&t.statusBarHeight||0)<44?e=t+19:n<o&&(e=63),e},w.getEndPointByTrigonometric=function(e,t,n){var o=.382*t.sub(n).mag();return n=e*Math.PI/180,e=t.x+o*Math.cos(n),n=t.y+o*Math.sign(n),cc.v3(e,n)},w.animCoin=function(e,t,n){void 0===n&&(n=!1);var o=w.PersistNode.TopBar,i=o.IconCoin,r=Math.floor(e/5);return h.DataMgr.User.reqDiamond(e,110,{isUpdate:!1}),w.actionCoinFly(t,i,{offset:n,iteator:function(t){var n=4===t;t=n?r+e%5:r,o.actionCoinFly(t,n)},context:this})},w.actionCoinFly=function(e,t,n){return void 0===n&&(n={}),new Promise(function(o){g.LoaderMgr.loadPrefabWithUrl("prefab/common/coin_fly").then(function(i){var r=w.PersistNode.node,a=_.PoolMgr.getPrefab(i,r);r=w.getTargetPos(e,r),a.x=r.x,a.y=r.y,a.getComponent(b.default).fly(t,n).then(function(){_.PoolMgr.putNode(a),o(null)})})})},w.animStar=function(e){var t=w.PersistNode.TopBar.IconStar;return w.actionStarFly(t,e)},w.actionStarFly=function(e,t,n){return void 0===n&&(n="anim_star_fly"),new Promise(function(o){g.LoaderMgr.loadPrefabWithUrl("prefab/common/star_fly").then(function(i){var r=w.PersistNode.node,s=_.PoolMgr.getPrefab(i,r);i=w.getTargetPos(e,r),s.x=i.x,s.y=i.y,r=w.getTargetPos(t,r),i=cc.v2(i.x,i.y),r=cc.v2(r.x,r.y),s.children[0].getComponent(cc.ParticleSystem).resetSystem(),s.children[1].children[0].getComponent(cc.ParticleSystem).resetSystem(),y.default.playAddAnim(s,n),y.default.bezier(s,1,i,cc.v2(-300,400),r,1).then(function(){a.default.vibrateShort(),_.PoolMgr.putNode(s),o()})})})},w.sdkEventWithStr=function(e){h.DataMgr.User.isHadEventKey(e)||((e=u.EventKeys[e])&&f.default.event(e,""),h.DataMgr.User.reqaddEventKey(e))},w.sdkEventWithKey=function(e){h.DataMgr.User.isHadEventKey(e.toString())||(e&&f.default.event(e,""),h.DataMgr.User.reqaddEventKey(e.toString()))},w.persistNode=null,w.s_isShowWxAd=0,w.s_isShowedReward=!1,w.s_issubscribeDailyReward=!1,w.s_isClosedAddBubble=!1,w.s_isClosedGift2=!1,w.s_closerewardtimes=0,w.s_isShowedAD=!1,w.s_CoinGiftFlagtimes=0,w.s_isshowcoingift=!1,w.s_CloseItemTipTimes=0,w.s_loadingbgab=0,w.s_isCloseOnlineGift=!1,o=w,i.default=o,cc._RF.pop()},{}],DropCtr:[function(e,t,n){"use strict";cc._RF.push(t,"2b29eDwsLRKDqCfUXfGuDDt","DropCtr");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("EditorMgr"),l=o("Display");function d(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_ChooseObj=null,e.m_listObj=null,e.m_ItemObj=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(d,c=cc.Component),d.prototype.onLoad=function(){var e=this;this.m_ChooseObj.getChildByName("ScrollView").getChildByName("view").getChildByName("list").getChildByName("objlist").children.forEach(function(t){t.on("click",function(){var n=+t.name;e.addTar(n)})})},d.prototype.addTar=function(e){e={id:e,max:0,total:0,ratio:1},u.default.I.leveldata.drops||(u.default.I.leveldata.drops=[]),u.default.I.leveldata.drops.push(e),this.initlist()},d.prototype.onAdd=function(){this.m_ChooseObj.active=!0},d.prototype.start=function(){},d.prototype.initlist=function(){var e=this;this.m_ChooseObj.active=!1,this.m_listObj.children.forEach(function(e){e.destroy()});var t=u.default.I.leveldata.drops;t&&t.forEach(function(t,n){t.ratio=t.ratio||1,t.total=t.total||0;var o=cc.instantiate(e.m_ItemObj);o.active=!0;var i=n;o.parent=e.m_listObj,o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=u.default.I.getIcon(t.id),o.getChildByName("num").getComponent(cc.EditBox).string=t.max.toString(),o.getChildByName("num_total").getComponent(cc.EditBox).string=t.total.toString(),o.getChildByName("num_ratio").getComponent(cc.EditBox).string=t.ratio.toString(),o.getChildByName("del").on("click",function(){u.default.I.leveldata.drops.splice(i,1),e.initlist()})})},d.prototype.savedata=function(){var e=this,t=u.default.I.leveldata.drops;t&&t.forEach(function(t,n){n=e.m_listObj.children[n],t.max=+n.getChildByName("num").getComponent(cc.EditBox).string||0,t.total=+n.getChildByName("num_total").getComponent(cc.EditBox).string||0,t.ratio=+n.getChildByName("num_ratio").getComponent(cc.EditBox).string||0,n.active=!0})},d.prototype.onEditNumend=function(e){if(+e.string==Number.NaN)return l.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");this.savedata(),this.initlist()},s([i(cc.Node)],d.prototype,"m_ChooseObj",void 0),s([i(cc.Node)],d.prototype,"m_listObj",void 0),s([i(cc.Node)],d.prototype,"m_ItemObj",void 0),o=s([o],d),r.default=o,cc._RF.pop()},{}],EditorMgr:[function(e,t,n){"use strict";cc._RF.push(t,"3c926TXJ7lL1odZFiPrziUW","EditorMgr");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("LayerCtr"),d=o("Display"),p=o("FileUtils"),h=o("Const"),f=o("DateUtils");function m(){var e=null!==c&&c.apply(this,arguments)||this;return e.isReadResMap=!1,e.m_ab=0,e.m_BaseLayer=null,e.m_objlist=null,e.m_GameInfo=null,e.m_cubebtn=null,e.m_SeedBtn=null,e.m_gamebtn=null,e.m_tarbtn=null,e.m_gm=null,e.m_seed=null,e.m_lablv=null,e.m_Icons=[],e.m_BtnA=null,e.m_BubblesEdit=null,e.m_Score1Edit=null,e.m_Score2Edit=null,e.m_Score3Edit=null,e.m_StartBubblesEdit=null,e.m_RandomBubblesEdit=null,e.m_AddBubbleEdit=null,e.m_Copy2GroupEdit=null,e.m_changeEdit=null,e.m_level=1,e.tab=0,e.m_CurChoose=null,e.m_abbtns=[],e}(i={})[i.color1=1]="color1",i[i.color2=2]="color2",i[i.color3=3]="color3",i[i.color4=4]="color4",i[i.color5=5]="color5",i[i.color6=6]="color6",i[i.stone=1001]="stone",i[i.blackhole=1002]="blackhole",i[i.ice=1003]="ice",i[i.lock=1e4]="lock",i[i.randomcolor=1e5]="randomcolor",i[i.randomball=100]="randomball",i=(o=cc._decorator).ccclass,o=o.property,a(m,c=cc.Component),u=m,Object.defineProperty(m.prototype,"m_BaseLayerCtr",{get:function(){return this.m_BaseLayer.getComponent(l.default)},enumerable:!0,configurable:!0}),m.prototype.getIcon=function(e){switch(e){case 0:return this.m_Icons[0];case 1:return this.m_Icons[1];case 2:return this.m_Icons[2];case 3:return this.m_Icons[3];case 4:return this.m_Icons[4];case 5:return this.m_Icons[5];case 6:return this.m_Icons[6];case 1001:return this.m_Icons[7];case 1002:return this.m_Icons[8];case 1003:return this.m_Icons[9];case 1004:return this.m_Icons[27];case 1e4:return this.m_Icons[10];case 1e5:return this.m_Icons[11];case 100:return this.m_Icons[12];case 201:return this.m_Icons[13];case 202:return this.m_Icons[14];case 203:return this.m_Icons[15];case 204:return this.m_Icons[16];case 205:return this.m_Icons[17];case 206:return this.m_Icons[18];case-201:return this.m_Icons[19];case-202:return this.m_Icons[20];case-203:return this.m_Icons[21];case-204:return this.m_Icons[22];case-205:return this.m_Icons[23];case-206:return this.m_Icons[24];case 200:return this.m_Icons[25];case-200:return this.m_Icons[26]}return null},Object.defineProperty(m.prototype,"rootPath",{get:function(){var e=cc.url.raw("resources/data/levelDataNewB.json"),t=e.indexOf("library/imports");return t=e.substring(0,t-1),cc.error(t+"/assets/resources/data"),t+"/assets/resources/data"},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"tempPath",{get:function(){var e=cc.url.raw("resources/data/levelDataNewB.json"),t=e.indexOf("library/imports");return e.substring(0,t-1)+"/assets/tempData"},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"levelsPath",{get:function(){var e=cc.url.raw("resources/data/levelDataNewB.json"),t=e.indexOf("library/imports");return e.substring(0,t-1)+"/Configs/levelsData"},enumerable:!0,configurable:!0}),m.prototype.onLoad=function(){var e=this;(u.I=this).m_objlist.children.forEach(function(t){t.getChildByName("light").active=!1,t.on("click",function(){var n=+(o=t.name.split(","))[0],o=+o[1];e.setChoose(n,o),e.m_objlist.children.forEach(function(e){e.getChildByName("light").active=!1}),t.getChildByName("light").active=!0})}),this.m_BaseLayer.parent.parent.parent.on(cc.Node.EventType.TOUCH_START,function(){e.m_BaseLayer.parent.parent.parent.getComponent(cc.ScrollView).vertical=!1},this,!1),this.m_BaseLayer.parent.parent.parent.on(cc.Node.EventType.TOUCH_END,function(){e.m_BaseLayer.parent.parent.parent.getComponent(cc.ScrollView).vertical=!0},this,!1),this.m_BaseLayer.parent.parent.parent.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.m_BaseLayer.parent.parent.parent.getComponent(cc.ScrollView).vertical=!0},this,!1),this.createabcBtn()},m.prototype.setChoose=function(e,t){this.m_CurChoose=e,this.setLayer(t)},m.prototype.setLayer=function(e){0==e&&(this.m_BaseLayer.active=!0,this.m_BaseLayerCtr.initState())},m.prototype.createabcBtn=function(){var e=this;this.m_ab=0,this.m_abbtns=[],this.m_abbtns.push(this.m_BtnA);for(var t=1;t<10;t++){var n="levelDataNew"+this.getGroup(t);if(!p.default.isFileExist(this.rootPath+"/"+n+".json"))break;(n=cc.instantiate(this.m_BtnA)).parent=this.m_BtnA.parent,n.children[0].children[0].getComponent(cc.Label).string=this.getGroup(t),this.m_abbtns.push(n)}this.setABBtn(),this.m_abbtns.forEach(function(t,n){t.on("click",function(){e.onsetAB(n)})})},m.prototype.start=function(){this.m_level=h.default.EditorLv,this.initLv(!0)},m.prototype.copylv2othergroup=function(e){var t,n;this.leveldata.bubble_list=this.m_BaseLayerCtr.getMapData();var o=(t=p.default.ReadText("levelDataNew"+this.getGroup(e)+".json",this.rootPath))?JSON.parse(t):null;o?(n=this.getLvData2(this.m_level,o))||(n={id:o.levellist.length+1,bubble_list:[],bubble:0,score1:3e3,score2:6e3,score3:9e3,startbubble:[],randombubble:[]},o.levellist.push(n)):n={id:(o={levellist:[]}).levellist.length+1,bubble_list:[],bubble:0,score1:3e3,score2:6e3,score3:9e3,startbubble:[],randombubble:[]},0==n.id&&(n.id=this.m_level),n=this.leveldata;for(var i=null,r=0;r<o.levellist.length;r++){var a=o.levellist[r];if(a.id==this.m_level){i=a,o.levellist[r]=n;break}}i||(n.id=this.m_level,o.levellist.push(n)),o.levellist.sort(function(e,t){return e.id-t.id}),p.default.WriteText(JSON.stringify(o),"levelDataNew"+this.getGroup(e)+".json",this.rootPath),e=this.getGroup(e),d.default.showTip("\u7b2c"+this.m_level+"\u5173 copy2 "+e+"\u7ec4\u6210\u529f")},m.prototype.initLv=function(e){void 0===e&&(e=!1),d.default.showTip("\u5df2\u5207\u6362\u7b2c"+this.m_level+"\u5173"),e=p.default.ReadText(this.FileName,this.rootPath),this.map=e?JSON.parse(e):null,this.map?(this.leveldata=this.getLvData(this.m_level),cc.error(JSON.stringify(this.leveldata)),this.leveldata||(this.leveldata={id:this.map.levellist.length+1,bubble_list:[],bubble:0,score1:3e3,score2:6e3,score3:9e3,startbubble:[],randombubble:[]},this.map.levellist.push(this.leveldata))):(this.map={levellist:[]},this.leveldata={id:this.map.levellist.length+1,bubble_list:[],bubble:0,score1:3e3,score2:6e3,score3:9e3,startbubble:[],randombubble:[]}),0==this.leveldata.id&&(this.leveldata.id=this.m_level),this.m_gm.getComponent(cc.EditBox).string=this.leveldata.id+"",this.initMap(),this.m_lablv.string="\u5173\u5361"+this.m_level.toString()+"/"+this.getlvlenth();var t="";if(this.leveldata.startbubble)for(var n=0;n<this.leveldata.startbubble.length;n++){var o=this.leveldata.startbubble[n];n==this.leveldata.startbubble.length-1||1==this.leveldata.startbubble.length?t+=o+"":t+=o+","}var i="";if(this.leveldata.randombubble)for(n=0;n<this.leveldata.randombubble.length;n++)o=this.leveldata.randombubble[n],n==this.leveldata.randombubble.length-1||1==this.leveldata.randombubble.length?i+=o+"":i+=o+",";this.m_RandomBubblesEdit.string=i,this.m_StartBubblesEdit.string=t,null!=this.leveldata.score1?this.m_Score1Edit.string=this.leveldata.score1.toString():this.m_Score1Edit.string="",null!=this.leveldata.score2?this.m_Score2Edit.string=this.leveldata.score2.toString():this.m_Score2Edit.string="",null!=this.leveldata.score3?this.m_Score3Edit.string=this.leveldata.score3.toString():this.m_Score3Edit.string="",null!=this.leveldata.bubble?this.m_BubblesEdit.string=this.leveldata.bubble.toString():this.m_BubblesEdit.string="",this.onCube()},m.prototype.getlvlenth=function(){var e=0;return this.map.levellist.forEach(function(t){t.id>=e&&(e=t.id)}),this.map.levellist.length},m.prototype.initMap=function(){this.m_BaseLayerCtr.InitBaseLayer(this.leveldata.bubble_list)},m.prototype.onSave=function(){this.leveldata.bubble_list=this.m_BaseLayerCtr.getMapData(),this.getLvData(this.m_level)?this.leveldata:(this.leveldata.id=this.m_level,this.map.levellist.push(this.leveldata)),this.map.levellist.sort(function(e,t){return e.id-t.id}),p.default.WriteText(JSON.stringify(this.map),this.FileName,this.rootPath),d.default.showTip("\u7b2c"+this.m_level+"\u5173 \u4fdd\u5b58\u6210\u529f,\u5df2\u6709"+this.map.levellist.length+"\u5173");var e="lv"+this.m_level+"_"+f.default.getFormatBySecondtemp(f.default.nowTime);p.default.WriteText(JSON.stringify(this.map),e+".json",this.tempPath)},m.prototype.onpreView=function(){for(var e=this.m_Copy2GroupEdit.string,t=0;t<this.m_abbtns.length;t++)if(e==this.m_abbtns[t].children[0].children[0].getComponent(cc.Label).string)return void this.copylv2othergroup(t);d.default.showTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bf9\u8c61\u7ec4~")},m.prototype.dosave=function(){},m.prototype.checkIsBuffCanOn=function(e){return-10!=+this.m_BaseLayer.children[e].name},m.prototype.fixdata=function(e){for(var t=[],n=0;n<e.levellist.length;n++){var o=e.levellist[n];o.bubble_list&&0!=o.bubble_list.length||t.push(o)}t.forEach(function(t){e.levellist.splice(e.levellist.indexOf(t),1)})},m.prototype.getLvData=function(e){this.fixdata(this.map);for(var t=0;t<this.map.levellist.length;t++){var n=this.map.levellist[t];if(n.id==e)return n}return null},m.prototype.getLvData2=function(e,t){this.fixdata(t);for(var n=0;n<t.levellist.length;n++){var o=t.levellist[n];if(o.id==e)return o}return null},m.prototype.OnGmGoToLv=function(){var e=this.m_gm.getComponent(cc.EditBox).string;if(e=parseInt(e),Number.isNaN(e))return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");e<=0?d.default.showTip("\u8bf7\u8f93\u5165>0\u7684\u6b63\u6574\u6570"):(this.m_level=e,this.tab=0,this.onSave(),this.initLv())},m.prototype.onPrev=function(){this.onSave(),this.m_level=Math.max(1,this.m_level-1),this.initLv()},m.prototype.onNext=function(){this.onSave(),this.m_level=Math.max(1,this.m_level+1),this.initLv()},m.prototype.ongame=function(){this.initUI(),this.m_gamebtn.children[0].getComponent(cc.Animation).play("state_btn_game_on"),this.m_GameInfo.active=!0},m.prototype.onCube=function(){this.initUI(),this.m_cubebtn.children[0].getComponent(cc.Animation).play("state_btn_cube_on"),this.m_objlist.active=!0},m.prototype.onTargets=function(){},m.prototype.onSeed=function(){this.initUI(),this.m_SeedBtn.children[0].getComponent(cc.Animation).play("state_btn_targets_on"),this.m_seed.active=!0},m.prototype.initUI=function(){this.m_GameInfo.active=!1,this.m_objlist.active=!1,this.m_seed.active=!1,this.m_tarbtn.children[0].getComponent(cc.Animation).play("state_btn_targets_off"),this.m_gamebtn.children[0].getComponent(cc.Animation).play("state_btn_game_off"),this.m_cubebtn.children[0].getComponent(cc.Animation).play("state_btn_cube_off"),this.m_SeedBtn.children[0].getComponent(cc.Animation).play("state_btn_targets_off")},m.prototype.onEditScore1=function(){var e=+this.m_Score1Edit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");this.leveldata.score1=e},m.prototype.onEditScore2=function(){var e=+this.m_Score2Edit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");this.leveldata.score2=e},m.prototype.onEditScore3=function(){var e=+this.m_Score3Edit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");this.leveldata.score3=e},m.prototype.onEditBubbles=function(){var e=+this.m_BubblesEdit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");this.leveldata.bubble=e},m.prototype.onEditAddBubbles=function(){if(+this.m_AddBubbleEdit.string==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number")},m.prototype.onaddRandombubble=function(){var e=+this.m_AddBubbleEdit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");for(var t=[],n=0;n<e;n++){var o=[];if(n%2==0)for(var i=0;i<11;i++)o.push(100);else for(i=0;i<10;i++)o.push(100);t.push(o)}this.m_BaseLayerCtr.InitBaseLayer(t)},m.prototype.onEditStartBubblesEnd=function(){var e=this.m_StartBubblesEdit.string.split(",");this.leveldata.startbubble=[];for(var t=0;t<e.length;t++){var n=+e[t];if(n==Number.NaN)return void d.default.showTip("\u661f\u661f\u5206\u6570 \u914d\u7f6e\u6709\u8bef \u8bf7\u91cd\u65b0\u8f93\u5165");this.leveldata.startbubble[t]=n}},m.prototype.onsetAB=function(e){this.m_ab=e,this.initLv(),this.setABBtn()},m.prototype.setABBtn=function(){var e=this;this.m_abbtns.forEach(function(t,n){e.m_ab==n?t.children[0].getComponent(cc.Animation).play("state_btn_targets_on"):t.children[0].getComponent(cc.Animation).play("state_btn_targets_off")})},m.prototype.onEditRandomBubblesEnd=function(){var e=this.m_RandomBubblesEdit.string.split(",");this.leveldata.randombubble=[];for(var t=0;t<e.length;t++){var n=+e[t];if(n==Number.NaN)return void d.default.showTip("\u968f\u673a\u7403 \u914d\u7f6e\u6709\u8bef \u8bf7\u91cd\u65b0\u8f93\u5165");this.leveldata.randombubble[t]=n}},m.prototype.onInsertLv=function(){var e=this;this.map.levellist.sort(function(e,t){return e.id-t.id}),this.map.levellist.forEach(function(t){t.id>=e.m_level+1&&t.id++}),this.m_level=this.m_level+1,this.leveldata={id:this.m_level+1,bubble_list:[],bubble:0,score1:0,score2:0,score3:0,startbubble:[],randombubble:[]};for(var t=[],n=0;n<20;n++){var o=[];if(n%2==0)for(var i=0;i<11;i++)o.push(100);else for(i=0;i<10;i++)o.push(100);t.push(o)}this.leveldata.bubble_list=t,this.m_BaseLayerCtr.InitBaseLayer(t),this.onSave(),this.initLv()},m.prototype.clearAllBubble=function(){this.m_BaseLayerCtr.InitBaseLayer([])},m.prototype.getGroup=function(e){switch(e){case 0:return"A";case 1:return"B";case 2:return"C";case 3:return"D";case 4:return"E";case 5:return"F";case 6:return"G";case 7:return"H";case 8:return"I";case 9:return"J";case 10:return"K"}},Object.defineProperty(m.prototype,"FileName",{get:function(){return"levelDataNew"+this.getGroup(this.m_ab)+".json"},enumerable:!0,configurable:!0}),m.prototype.onAddGroup=function(){var e,t,n=this;10<=this.m_abbtns.length?d.default.showTip("\u4e0d\u5f97\u8d85\u8fc710\u7ec4"):(this.m_ab=this.m_abbtns.length,e=this.m_abbtns.length,(t=cc.instantiate(this.m_BtnA)).parent=this.m_BtnA.parent,t.children[0].children[0].getComponent(cc.Label).string=this.getGroup(e),t.on("click",function(){n.onsetAB(e)}),this.m_abbtns.push(t),this.setABBtn(),this.onSave(),this.initLv())},m.prototype.onDel=function(){for(var e=this,t=this.m_level,n=0,o=0;o<this.map.levellist.length;o++)if(this.map.levellist[o].id==t){n=o;break}this.map.levellist.splice(n,1),this.map.levellist.sort(function(e,t){return e.id-t.id}),this.map.levellist.forEach(function(t){t.id>=e.m_level+1&&t.id--}),p.default.WriteText(JSON.stringify(this.map),this.FileName,this.rootPath),this.initLv()},m.prototype.onChangeLv=function(){var e=+this.m_changeEdit.string;if(e==Number.NaN)return d.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");var t,n=this.getLvData(e);n?(t=this.m_level,n.id=t,this.leveldata.id=e,this.map.levellist.sort(function(e,t){return e.id-t.id}),p.default.WriteText(JSON.stringify(this.map),this.FileName,this.rootPath),this.initLv()):d.default.showTip("\u8981\u4ea4\u6362\u7684\u5173\u5361\u4e0d\u5b58\u5728\uff5e")},s([o(cc.Boolean)],m.prototype,"isReadResMap",void 0),s([o(cc.Node)],m.prototype,"m_BaseLayer",void 0),s([o(cc.Node)],m.prototype,"m_objlist",void 0),s([o(cc.Node)],m.prototype,"m_GameInfo",void 0),s([o(cc.Node)],m.prototype,"m_cubebtn",void 0),s([o(cc.Node)],m.prototype,"m_SeedBtn",void 0),s([o(cc.Node)],m.prototype,"m_gamebtn",void 0),s([o(cc.Node)],m.prototype,"m_tarbtn",void 0),s([o(cc.Node)],m.prototype,"m_gm",void 0),s([o(cc.Node)],m.prototype,"m_seed",void 0),s([o(cc.Label)],m.prototype,"m_lablv",void 0),s([o(cc.SpriteFrame)],m.prototype,"m_Icons",void 0),s([o(cc.Node)],m.prototype,"m_BtnA",void 0),s([o(cc.EditBox)],m.prototype,"m_BubblesEdit",void 0),s([o(cc.EditBox)],m.prototype,"m_Score1Edit",void 0),s([o(cc.EditBox)],m.prototype,"m_Score2Edit",void 0),s([o(cc.EditBox)],m.prototype,"m_Score3Edit",void 0),s([o(cc.EditBox)],m.prototype,"m_StartBubblesEdit",void 0),s([o(cc.EditBox)],m.prototype,"m_RandomBubblesEdit",void 0),s([o(cc.EditBox)],m.prototype,"m_AddBubbleEdit",void 0),s([o(cc.EditBox)],m.prototype,"m_Copy2GroupEdit",void 0),s([o(cc.EditBox)],m.prototype,"m_changeEdit",void 0),i=u=s([i],m),r.default=i,cc._RF.pop()},{}],Enum:[function(e,t,n){"use strict";cc._RF.push(t,"e8223wSf5BG3btDB1SrP785","Enum");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),(o=i.AppDataKey||(i.AppDataKey={})).GameQuit="game.quit",o.FailCount="fail.count",o.HomeCount="home.count",o.GameCount="home.count",o.RewardHint="reward.hint",o.PigSkipNum="pig.skip.num",o.OfflineTime="offline.time",o.GiftHelpSkip="gifthelp.skip",o.GiftProgress="gift.progress",o.OnHideHistory="onhide.history",o.UserInviteUid="user.invite.uid",o.EnterGameState="entergame.state",o.UserInviteType="user.invite.type",o.InviteFriendOpen="invite.friend.open",(o=i.LocalDataKey||(i.LocalDataKey={})).Vibrate="vibrate",o.SignDouble="sign.double",o.MusicState="music.state",o.SoundState="sound.state",o.SettingState="setting.state",o.CollectState="collect.state",o.AddDeskState="adddesk.state",o.ServiceState="service.state",o.FloatingState="floating.state",o.OfflineDouble="offline.double",o.WheelTicketNum="wheel.ticket.num",o.OfflineSubscribe="offline.subscribe",o.GuideGhost="guide.ghost",o.GuideCloud="guide.cloud",(o=i.DayKeys||(i.DayKeys={})).RecordNum="record.num",o.ReliveNum="relive.num",o.TodaySign="today.sign",o.TodaySignShow="today.sign.show",o.CollectState="collect.state",o.AddGameState="addgame.state",o.ShopFreeStar="share.free.star",o.BlockRewardNum="block.reward.num",o.SuperRewardNum="super.reward.num",o.SevenDaySign="sevendat.sign",o.AddPowerTimes="addpower_times",o.ClickAd="ClickAd",o.OnlineGiftShow="onlinegift.show",(i.BaseInfoKey||(i.BaseInfoKey={})).KeyUser="userInfo",(o=i.ErrorCode||(i.ErrorCode={}))[o.Unknow=1001]="Unknow",o[o.NetworkError=1e3]="NetworkError",o[o.LoginError=3e3]="LoginError",o[o.LoginInvlid=1e4]="LoginInvlid",(o=i.ModuleType||(i.ModuleType={})).ShopInvite="\u5546\u5e97\u9080\u8bf7",o.MenuInvite="\u83dc\u5355\u9080\u8bf7",o.TempInvite="\u4e34\u65f6\u9080\u8bf7",o.InviteNum="\u9080\u8bf7\u9886\u5956",o.Collect="\u6536\u85cf\u529f\u80fd",o.Service="\u5ba2\u670d\u529f\u80fd",o.Floating="\u60ac\u6d6e\u529f\u80fd",o.Menu="\u9996\u9875\u83dc\u5355",o.Shop="\u9996\u9875\u5546\u5e97",o.Fail="\u5931\u8d25\u754c\u9762",(o=i.InviteType||(i.InviteType={}))[o.Star=90]="Star",o[o.Net=100]="Net",(o=i.MenuType||(i.MenuType={}))[o.Menu=0]="Menu",o[o.Coin=1]="Coin",(o=i.RewardState||(i.RewardState={}))[o.Not=0]="Not",o[o.Receive=1]="Receive",o[o.Received=2]="Received",(o=i.EnterGameState||(i.EnterGameState={}))[o.First=1]="First",o[o.HistoryRecord=2]="HistoryRecord",o[o.HistoryCancel=3]="HistoryCancel",o[o.EnterMaxRecord=4]="EnterMaxRecord",o[o.MaxRecordClick=5]="MaxRecordClick",o[o.MenuMaxRecord=6]="MenuMaxRecord",o[o.FailMaxRecord=7]="FailMaxRecord",(o=i.PropTensesState||(i.PropTensesState={}))[o.Do=0]="Do",o[o.Doing=1]="Doing",o[o.Done=2]="Done",(o=i.BlockType||(i.BlockType={}))[o.Normal=0]="Normal",o[o.Money=1]="Money",o[o.Props=2]="Props",(o=i.ColorType||(i.ColorType={}))[o.None=-1]="None",o[o.Red=0]="Red",o[o.Yellow=1]="Yellow",o[o.Blue=2]="Blue",o[o.Green=3]="Green",o[o.Violet=4]="Violet",(o=i.GameMode||(i.GameMode={}))[o.Normal=0]="Normal",o[o.HighRecord=1]="HighRecord",o[o.History=2]="History",(o=i.PropsType||(i.PropsType={}))[o.Hammer=12]="Hammer",o[o.Brush=111]="Brush",o[o.Reset=222]="Reset",o[o.Joker=10]="Joker",o[o.Refresh=11]="Refresh",o[o.Boom=0]="Boom",o[o.Light=1]="Light",o[o.Laser=2]="Laser",o[o.RainbowBall=3]="RainbowBall",o[o.Change=4]="Change",(o=i.PropFromType||(i.PropFromType={}))[o.reviveProp=0]="reviveProp",o[o.share=1]="share",o[o.userProp=2]="userProp",(o=i.PropUseState||(i.PropUseState={}))[o.NotUse=-2]="NotUse",o[o.CanUse=-1]="CanUse",o[o.Hammer=1]="Hammer",o[o.Brush=2]="Brush",o[o.Reset=3]="Reset",o[o.Boom=4]="Boom",(o=i.RewardPopwinFrom||(i.RewardPopwinFrom={}))[o.super=0]="super",o[o.block=1]="block",o[o.hints=2]="hints",o[o.dayReward=3]="dayReward",(o=i.ShareRuleType||(i.ShareRuleType={}))[o.video=0]="video",o[o.share=1]="share",o[o.result=2]="result",o[o.shareFail=3]="shareFail",o[o.shareSuccess=4]="shareSuccess",(o=i.ShareRuleFrom||(i.ShareRuleFrom={})).maxRecord="maxRecord",o.propBrick="propBrick",o.revive="revive",o.freeStar="freeStar",o.wipeReward="wipeReward",o.share="share",(o=i.SceneTypes||(i.SceneTypes={})).GameGM="GameGM",o.GameScene="game",o.HomeScene="HomeScene",o.LoadScene="LoadScene",o.HomeGMScene="HomeGMScene",(o=i.ChapterType||(i.ChapterType={}))[o.Reward=0]="Reward",o[o.Normal=1]="Normal",(o=i.ExchangeType||(i.ExchangeType={}))[o.BubbleBig=0]="BubbleBig",o[o.BubbleSmall=1]="BubbleSmall",o[o.Redpacket=2]="Redpacket",o[o.Task=3]="Task",(o=i.ComAction||(i.ComAction={}))[o.Init=0]="Init",o[o.Enter=1]="Enter",o[o.Out=2]="Out",(o=i.AnimNames||(i.AnimNames={})).Poplight="anim_poplight",o.PoplightNormal="anim_poplight_normal",o.ChestOpen="anim_chest_open",o.ChestDouble="anim_chest_double",o.Treasure="anim_treasure",o.HomeMenuClose="home_menu_close",o.ItemHammerLoop="item_hammer_loop",o.TreasureNormal="anim_treasure_normal",o.RewardHintout="anim_reward_hintout",o.RankWorld="state_rank_world",o.RankFriend="state_rank_friend",(o=i.GuideType||(i.GuideType={}))[o.StoneBubble=0]="StoneBubble",o[o.RanbowBubble=1]="RanbowBubble",o[o.LaserBubble=2]="LaserBubble",o[o.IceBubble=3]="IceBubble",o[o.BlackHole=4]="BlackHole",o[o.Ghost=5]="Ghost",o[o.Cloud=6]="Cloud",(o=i.LoadType||(i.LoadType={}))[o.None=-1]="None",o[o.Json=1]="Json",o[o.Page=2]="Page",o[o.Seed=3]="Seed",o[o.Room=4]="Room",o[o.Plot=5]="Plot",o[o.Task=6]="Task",o[o.Guide=7]="Guide",o[o.Scene=8]="Scene",o[o.Package=9]="Package",o[o.Living=10]="Living",(o=i.ActionRole||(i.ActionRole={})).None="none",o.Idle="idle",o.Happy="happy",o.Appear="appear",o.Happy2Idle="happy-idle",o.Idle2Happy="idle-happy",(o=i.ActionTreasure||(i.ActionTreasure={})).GDown="G-down",o.SDown="S-down",o.GIdle="G_idle",o.SIdle="S_idle",o.GTitle="G_title",o.STitle="S_title",o.SOpen="S_open",o.GOpen="G_open",o.GOpenCoin="G_open_coin",(o=i.ActionFitTask||(i.ActionFitTask={}))[o.Out=-1]="Out",o[o.Pos0=0]="Pos0",o[o.Pos1=1]="Pos1",o[o.Pos2=2]="Pos2",(o=i.ActionTaskType||(i.ActionTaskType={}))[o.None=-1]="None",o[o.Garbage=0]="Garbage",o[o.Bone1=1]="Bone1",o[o.Bone2=2]="Bone2",o[o.Bone3=3]="Bone3",o[o.Bone4=5]="Bone4",o[o.Normal=4]="Normal",o[o.Replace=6]="Replace",o[o.Bone3Doubule=7]="Bone3Doubule",(o=i.PlotUIState||(i.PlotUIState={}))[o.None=0]="None",o[o.Entering=1]="Entering",o[o.EnterEnd=2]="EnterEnd",o[o.Hideing=3]="Hideing",o[o.HideEnd=4]="HideEnd",(o=i.PlotState||(i.PlotState={}))[o.None=0]="None",o[o.Plan=1]="Plan",o[o.Over=2]="Over",(o=i.EnterGameType||(i.EnterGameType={}))[o.None=0]="None",o[o.Task=1]="Task",o[o.StartGame=2]="StartGame",(o=i.RoomType||(i.RoomType={}))[o.None=-1]="None",o[o.Common=0]="Common",o[o.Living=1]="Living",o[o.Bed=2]="Bed",o[o.Bath=3]="Bath",o[o.Study=4]="Study",o[o.Garden=5]="Garden",o[o.Kitchen=6]="Kitchen",o[o.Porch=10]="Porch",o[o.Balcony=11]="Balcony",o[o.GardenSwing=50]="GardenSwing",o[o.GardenStudio=51]="GardenStudio",o[o.GardenBarbecue=52]="GardenBarbecue",o[o.GardenSwimming=53]="GardenSwimming",o[o.Garden1=100]="Garden1",o[o.Garden2=101]="Garden2",o[o.Garden3=102]="Garden3",o[o.GardenPond=103]="GardenPond",o[o.GardenFlowerhouse=104]="GardenFlowerhouse",(o=i.TopBarType||(i.TopBarType={}))[o.None=0]="None",o[o.Hp=1]="Hp",o[o.Coin=2]="Coin",o[o.Star=3]="Star",o[o.Whole=4]="Whole",o[o.HpAndCoin=5]="HpAndCoin",o[o.HpAndStar=6]="HpAndStar",o[o.CoinAndStar=7]="CoinAndStar",o[o.CoinShow=8]="CoinShow",(o=i.HomeUIState||(i.HomeUIState={}))[o.None=0]="None",o[o.ShowAll=1]="ShowAll",o[o.HideAll=2]="HideAll",o[o.OutAll=3]="OutAll",o[o.Top=4]="Top",o[o.Menu=5]="Menu",o[o.Bottom=6]="Bottom",o[o.OutBottom=7]="OutBottom",o[o.OutBottomAuto=8]="OutBottomAuto",o[o.TopMenu=9]="TopMenu",o[o.OutTopMenu=10]="OutTopMenu",o[o.OutBottomMenu=11]="OutBottomMenu",o[o.ShowTopMenuOutBottom=12]="ShowTopMenuOutBottom",(o=i.BubbleState||(i.BubbleState={}))[o.none=0]="none",o[o.normal=1]="normal",o[o.ghost=2]="ghost",(o=i.BubbleColor||(i.BubbleColor={}))[o.None=-1]="None",o[o.Pink=1]="Pink",o[o.Cyan=2]="Cyan",o[o.Yellow=3]="Yellow",o[o.Blue=4]="Blue",o[o.Green=5]="Green",o[o.Red=6]="Red",(o=i.DailyTaskIds||(i.DailyTaskIds={}))[o.Treasure1=1]="Treasure1",o[o.Treasure2=2]="Treasure2",o[o.Treasure3=3]="Treasure3",(o=i.TreasureState||(i.TreasureState={}))[o.Normal=0]="Normal",o[o.Enter=1]="Enter",o[o.EnterEnd=2]="EnterEnd",o[o.Outer=3]="Outer",o[o.OuterEnd=4]="OuterEnd",(i=i.LvGroup||(i.LvGroup={}))[i.A=0]="A",i[i.B=1]="B",i[i.C=2]="C",cc._RF.pop()},{}],EventEnum:[function(e,t,n){"use strict";cc._RF.push(t,"940fa3cabNBlL56dZZKsHDq","EventEnum");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),(o=o.EventEnum||(o.EventEnum={})).AppShow="app.show",o.AppHide="app.hide",o.CrossCancel="cross.cancel",o.TacticUpdate="tactic.update",o.UpdateCoin="update.coin",o.UpdateDiamond="update.diamond",o.UpdateReduceStar="update.reduce.star",o.UpdateCollectReward="update.collect.reward",o.UpdateAddDeskReward="update.adddesk.reward",o.UpdateFloatingReward="update.floating.reward",o.UpdateProps="update.props",o.UpdateChest="update.chest",o.UpdateLevel="update.level",o.UpdateStar="update.star",o.AddPowerSuc="add.power.suc",o.ChestOpen="chest.open",o.AddPowerFail="add.power.fail",o.FitUpGuideSelect="fitup.guide.select",o.PlayAddCoinAnim="play.add.coinanim",o.UpdateExtInvite="update.extinvite",o.LoadHomeSuccess="loadhome.success",o.GamePackageLoaded="game.package.loaded",o.ActionPlanTask="action.plan.task",o.ActionUnSelect="action.unselect",o.ActionPreview="action.preview",o.ActionChanged="action.change",o.ActionPlotAnim="action.plot.anim",o.ActionViewTemp="action.view.temp",o.SwitchLoadHDState="switch.load.hdstate",o.ActionCheckTaskNode="action.check.tasknode",o.MenuClose="menu.close",o.LoginSuccess="login.success",o.GuideOver="guide.over",o.ShowFitUp="show.fitup",o.HideFitUp="hide.fitup",o.MoveMapToNode="move.mapto.node",o.OpenMusic="open.music",o.PauseMusic="pause.music",o.BannerFailure="banner.failure",o.BannerSuccess="banner.success",o.SwitchLockBg="switch.lockbg",o.RecieveExchange="recieve.exchange",o.ClickUseProp="click.use.prop",o.HintsUseProp="hints.use.prop",o.RecordItemClick="record.item.click",o.ServiceRewardSuc="service.reward.suc",o.GameChestGet="game.chest.get",o.GameChapterPass="game.chapter.pass",o.GameWithChapter="game.with.chapter",o.GameChapterRelive="game.chapter.relive",o.GameChapterHistory="game.chapter.history",o.SDKADUpdate="pc.banner.update",o.PopwinFromFirst="popwin.from.first",o.PopwinToPop="popwin.to.pop",o.UpdateFriendRank="update.friend.rank",o.TOUCHEND_SHOOT="shoot",o.MSG_VITALITY_UPDATE="vitality.update",o.MSG_VITALITY_TIMER="vitality.timer",o.SceneToShow="scene.to.show",o.SceneToHide="scene.to.hide",o.Gride2AdSucc="Gride2AdSucc",o.Gride2AdFail="Gride2AdFail",o.AddEventUseCoin="event.usecoin",o.AddEventVideo="event.video",cc._RF.pop()},{}],EventMgr:[function(e,t,n){"use strict";cc._RF.push(t,"c40f0LvIblMeKIcIiOlOIFK","EventMgr");var o,i=n;function r(){this.dispatcher=new cc.EventTarget}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.on=function(e,t,n){this.dispatcher.on(e.toString(),t,n)},r.prototype.off=function(e,t,n){t?this.dispatcher.off(e.toString(),t,n):this.dispatcher.off(e.toString())},r.prototype.offTarget=function(e){this.dispatcher.targetOff(e)},r.prototype.once=function(e,t,n){this.dispatcher.once(e.toString(),t,n)},r.prototype.emit=function(e,t){void 0===t&&(t=null),(e=new cc.Event.EventCustom(e.toString(),!0)).setUserData(t),this.dispatcher.dispatchEvent(e)},Object.defineProperty(r,"I",{get:function(){return this.__instance||(this.__instance=new r)},enumerable:!0,configurable:!0}),o=r,i.default=o,i.EventMgr=o.I,cc._RF.pop()},{}],ExchangeData:[function(e,t,n){"use strict";cc._RF.push(t,"4b2e3Ye3MRNeYWVGfLhz952","ExchangeData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],ExchangePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"8bbdcdRJkdFwqqQfXTtvZr1","ExchangePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("BasePopwin"),p=o("AudioMgr"),h=o("OnlineMgr"),f=o("SDKEnums"),m=o("SDKAnalytics"),g=o("BubbleMgr"),_=o("UserModel"),y=o("DateUtils"),v=o("CashPopwin"),b=o("Api"),S=o("RandomUtils"),w=o("Action");function A(){var e=null!==c&&c.apply(this,arguments)||this;return e.logobjs=[],e.moneytxt=null,e.bar=null,e.m_Tip=null,e.dataList=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(A,c=d.default),(u=A).prototype.onLoad=function(){},A.prototype.addEvent=function(){c.prototype.addEvent.call(this)},A.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),A.prototype.onOpen=function(e){var t=this;c.prototype.onOpen.call(this,e),this.m_Tip.active=!1,this.setLog(),e=_.default.I.RedPocketData.integral+g.default.I.getAllTempintegrals(),this.moneytxt.string=e+" \u2248 "+(e/1e5).toFixed(2)+"\u5143",this.bar.fillRange=Math.min(e/5e5,1),m.default.event(f.EventKeys.red_packet_panel_show,""),this.dataList.length<=0?b.default.getlighttipdata({}).then(function(e){t.dataList=e.radio_list||[],t.showtip()}).catch(function(){t.m_Tip.active=!1}):this.showtip()},A.prototype.showtip=function(){var e=this;this.dataList.length<=0?this.m_Tip.active=!1:(this.m_Tip.active=!0,this.m_Tip.getChildByName("mask").getChildByName("richtext").getComponent(cc.RichText).string="<color=#ffffff>\u606d\u559c</c><color=#fff552>"+this.dataList[S.default.random(0,this.dataList.length)].nickname+"</c></color>\u4e8e"+y.default.getFormatBySecondTime(y.default.nowTime)+"\u6210\u529f</c><color=#fff552>\u63d0\u73b05\u5143\u7ea2\u5305",w.default.playAnim(this.m_Tip,"anim_exchange_round").then(function(){e.m_Tip.active=!1}))},A.prototype.setLog=function(){var e=g.default.I.m_tempintegrals,t=_.default.I.RedPocketData.log;t.sort(function(e,t){return t.t-e.t}),this.logobjs.forEach(function(n,o){var i,r,a;o<e.length+t.length?(n.active=!0,o<e.length?(r=(i=e[o]).v,a=i.t,n.getComponent(cc.Animation).play("anim_redpacket_list_having")):(r=(i=t[o-e.length]).v,a=i.t,n.getComponent(cc.Animation).play("anim_redpacket_list_had")),n.getChildByName("num").getComponent(cc.Label).string="+"+r,n.getChildByName("time").getComponent(cc.Label).string=y.default.getFormatBySecond(1e3*a,2)):n.active=!1})},A.prototype.onExchange=function(){p.AudioMgr.button(),l.ViewMgr.openPopwin(v.default)},A.prototype.onBack=function(){p.AudioMgr.button(),this.doClose(u,!1).then(function(){})},A.prefabPath="prefab/popwin/popwin_exchange",A.isshow=!1,s([i(cc.Node)],A.prototype,"logobjs",void 0),s([i(cc.Label)],A.prototype,"moneytxt",void 0),s([i(cc.Sprite)],A.prototype,"bar",void 0),s([i(cc.Node)],A.prototype,"m_Tip",void 0),o=u=s([o],A),r.default=o,cc._RF.pop()},{}],ExtScrollView:[function(e,t,n){"use strict";cc._RF.push(t,"62c30/n5IJHza9BGsQPWTjs","ExtScrollView");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=cc._decorator,l=u.ccclass,d=u.property;function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.itemPrefab=null,e.itemspace=10,e.animType=s.none,e.itemNodeArr=[],e.itemTempSize=null,e.prevContentPosition=cc.v2(0,0),e}o=u.menu,(u=s=i.AnimType||(i.AnimType={}))[u.none=0]="none",u[u.scale=1]="scale",u[u.scaleX=2]="scaleX",u[u.scaleY=3]="scaleY",r(p,c=cc.ScrollView),p.prototype.onLoad=function(){this.vertical?(this.content.anchorX=.5,this.content.anchorY=1):(this.content.anchorX=1,this.content.anchorY=.5)},p.prototype.loadData=function(e,t,n){var o=this;void 0===t&&(t=0),void 0===n&&(n=.01),this.scheduleOnce(function(){o.contentRect=o.node.getBoundingBoxToWorld(),o.dataList=e,o.createCellList(t),o.content.on(cc.Node.EventType.POSITION_CHANGED,o.updateContentView,o)},n)},p.prototype.createCellList=function(e){void 0===e&&(e=0),this.itemTempSize=this.itemPrefab.data.getContentSize(),this.vertical?(this.content.height=this.dataList.length*(this.itemTempSize.height+this.itemspace),this.content.y=this.content.parent.height/2+(this.itemTempSize.height+this.itemspace)*e,this.content.y=Math.min(this.content.y,this.content.height-this.content.parent.height/2),this.content.height<=this.content.parent.height&&(this.content.y=this.content.parent.height/2)):(this.content.width=this.dataList.length*(this.itemTempSize.width+this.itemspace),this.content.x=this.content.parent.width/-2-(this.itemTempSize.width+this.itemspace)*e,this.content.x=Math.max(this.content.x,-this.content.width+this.content.parent.width/2),this.content.width<=this.content.parent.width&&(this.content.x=-this.content.parent.width/2));for(var t,n,o=this.vertical?Math.ceil(this.node.height/this.itemTempSize.height):Math.floor(this.node.width/this.itemTempSize.width),i=e=e>this.dataList.length-o?Math.max(this.dataList.length-o,0):e,r=0;t=cc.instantiate(this.itemPrefab),this.content.addChild(t),this.itemNodeArr.push(t),i>=this.dataList.length?t.active=!1:t.getComponent(f).updateCell(this.dataList[i],i),this.vertical?t.y=-i*(this.itemTempSize.height+this.itemspace)-(this.itemTempSize.height-this.itemTempSize.height*t.anchorY):t.x=i*(this.itemTempSize.width+this.itemspace)+(this.itemTempSize.width-this.itemTempSize.width*t.anchorX),t.__itemID=i,n=t.getBoundingBoxToWorld(),this.animType!==s.none&&(this.animType==s.scale&&(t.scale=0),this.animType==s.scaleX&&(t.scaleX=0),this.animType==s.scaleY&&(t.scaleY=0),t.runAction(cc.sequence(cc.delayTime(.1*r),cc.scaleTo(.3,1,1).easing(cc.easeBackOut()))),r++),i==e&&(this.firstNode=t),this.lastNode=t,!(i>=this.dataList.length)&&(i++,this.contentRect.intersects(n)););},p.prototype.updateContentView=function(){var e,t,n=this.vertical?this.content.y<this.prevContentPosition.y:this.content.x>this.prevContentPosition.x;n&&0<this.firstNode.__itemID?(e=this.lastNode.getBoundingBoxToWorld(),this.contentRect.intersects(e)||(this.lastNode.active=!0,this.vertical?this.lastNode.y=this.firstNode.y+this.itemTempSize.height+this.itemspace:this.lastNode.x=this.firstNode.x-(this.itemTempSize.width+this.itemspace),t=Math.max(0,this.firstNode.__itemID-1),this.lastNode.__itemID=t,this.lastNode.getComponent(f).updateCell(this.dataList[t],t),this.firstNode=this.lastNode,this.itemNodeArr.unshift(this.itemNodeArr.pop()),this.lastNode=this.itemNodeArr[this.itemNodeArr.length-1])):!n&&this.lastNode.__itemID<this.dataList.length-1&&(e=this.firstNode.getBoundingBoxToWorld(),this.contentRect.intersects(e)||(this.vertical?this.firstNode.y=this.lastNode.y-(this.itemTempSize.height+this.itemspace):this.firstNode.x=this.lastNode.x+this.itemTempSize.width+this.itemspace,t=Math.min(this.dataList.length-1,this.lastNode.__itemID+1),this.firstNode.__itemID=t,this.firstNode.getComponent(f).updateCell(this.dataList[t],t),this.lastNode=this.firstNode,this.itemNodeArr.push(this.itemNodeArr.shift()),this.firstNode=this.itemNodeArr[0])),this.prevContentPosition=this.content.position},a([d({type:cc.Prefab,tooltip:"\u5217\u8868\u5b50\u8282\u70b9\u9884\u5236\u5bf9\u8c61"})],p.prototype,"itemPrefab",void 0),a([d({type:cc.Float,tooltip:"\u6bcf\u9879\u4e4b\u95f4\u7684\u95f4\u9694"})],p.prototype,"itemspace",void 0),a([d({type:cc.Enum(s),tooltip:"\u5f00\u573a\u52a8\u753b\u7c7b\u578b"})],p.prototype,"animType",void 0),o=a([l,o("\u81ea\u5b9a\u4e49/ExtScrollView")],p),i.default=o;var h,f=(r(m,h=cc.Component),m.prototype.updateCell=function(){},m);function m(){return null!==h&&h.apply(this,arguments)||this}i.ExtScrollItem=f,cc._RF.pop()},{}],FailPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"d4387H7XJlO54Gz4+RDhvN0","FailPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("SDKTools"),d=o("Display"),p=o("AudioMgr"),h=o("SDKAnalytics"),f=o("Enum"),m=o("SDKEnums"),g=o("OnlineMgr"),_=o("BasePopwin"),y=o("BubbleMgr"),v=o("WXApi"),b=o("ShareVideo"),S=o("EventEnum"),w=o("ABTools"),A=o("DataMgr");function M(){var e=null!==c&&c.apply(this,arguments)||this;return e.shareVideo=null,e.sharebtn=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(M,c=_.default),u=M,Object.defineProperty(M.prototype,"ShareKey",{get:function(){return m.ShareKeys.FailAddBubble2},enumerable:!0,configurable:!0}),M.prototype.addEvent=function(){c.prototype.addEvent.call(this),l.default.bindEvent(S.EventEnum.TacticUpdate.toString(),this.initRewardUI,this)},M.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),l.default.removeEvent(S.EventEnum.TacticUpdate.toString(),this.initRewardUI,this)},M.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),e={first:0,ctime:0,score:y.default.I.m_curScore,rnum:y.default.I.m_eventrevive,seed:y.default.I.m_eventseed,opts:{iid1_num:y.default.I.m_eventitemboom,iid2_num:y.default.I.m_eventitemLight,iid3_num:y.default.I.m_eventitemRainbow,iid4_num:y.default.I.m_eventitemLaser,vnum:y.default.I.m_eventvideo,gold:y.default.I.m_eventcoin,mid:A.DataMgr.User.CurLevel}},h.default.logLevelFail(y.default.I.m_curLv,e),this.initUI(),this.initRewardUI(),w.default.I.wxFailAB?(this.node.getChildByName("btns_1").active=!0,this.node.getChildByName("btns_2").active=!1):(this.node.getChildByName("btns_1").active=!1,this.node.getChildByName("btns_2").active=!0),this.sharebtn.active=!0,v.default.StopRecord(),v.default.I.showgrideadBottom()},M.prototype.onOpend=function(){c.prototype.onOpend.call(this),this.node.getChildByName("breakheart").getComponent(cc.Animation).play()},M.prototype.initRewardUI=function(){this.shareVideo.updateWith(this.ShareKey)},M.prototype.onClose=function(){c.prototype.onClose.call(this),v.default.I.hidegrideadBottom()},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.initUI=function(){d.default.showFailInterstitial()},M.prototype.onInvite=function(){p.AudioMgr.button(),l.default.share(m.ShareKeys.Friends,{invite_type:f.InviteType.Net}),h.default.event(m.EventKeys.OverShare,m.EventFrom.Over)},M.prototype.onRank=function(){p.AudioMgr.button(),h.default.event(m.EventKeys.OverRank,m.EventFrom.Over)},M.prototype.onAgain=function(){p.AudioMgr.button(),this.doClose(u,!0),y.default.I.reStart(),h.default.event(m.EventKeys.OverAgain,m.EventFrom.Over)},M.prototype.onRevive=function(){p.AudioMgr.button(),javaCall.ShowInterstitial(this,function(e){console.log("callback===============>FailPopwin.js\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\u5931\u8d25\uff0c\u590d\u6d3b\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),l.default.dispatch(e.ShareKey,{success:e.handlesucc,context:e})})},M.prototype.handlesucc=function(){this.doClose(u,!0),y.default.I.addBubble(5),y.default.I.isgameover=!1,y.default.I.setTimeProps(f.PropsType.Light,1),y.default.I.nextballAni()},M.prototype.onBack=function(){this.doClose(u,!1),y.default.I.showUILevel()},M.prototype.onShare=function(){var e=this;p.AudioMgr.button(),v.default.ShareVideo(function(){e.sharebtn.active=!1})},M.prefabPath="prefab/popwin/popwin_fail",s([i(b.default)],M.prototype,"shareVideo",void 0),s([i(cc.Node)],M.prototype,"sharebtn",void 0),o=u=s([o],M),r.default=o,cc._RF.pop()},{}],FileUtils:[function(e,t,n){"use strict";cc._RF.push(t,"d7821Bm7gpJi7oCiosV35aL","FileUtils");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Display"),a=o("Helper"),s=o("ArrayUtils");function c(){}c.getWriteablePath=function(){return cc.log(jsb.fileUtils.getWritablePath()),jsb.fileUtils.getWritablePath()},c.isDirectoryExist=function(e){return jsb.fileUtils.isDirectoryExist(e)},c.isFileExist=function(e){return jsb.fileUtils.isFileExist(e)},c.createNewDirectory=function(e){this.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e)},c.WriteText=function(e,t,n){e={data:s.default.getA(e,r.default.getDes(),a.default.getN())},e=JSON.stringify(e),jsb.fileUtils.writeStringToFile(e,n+"/"+t)},c.ReadText=function(e,t){return e=jsb.fileUtils.getStringFromFile(t+"/"+e),e=JSON.parse(e),s.default.getD(e.data,r.default.getDes(),a.default.getN())},c.getfilesPath=function(e){var t=[];return jsb.fileUtils.listFilesRecursively(e,t),t},c.WriteBinary=function(e,t,n){this.ReadBinary(t,n),jsb.fileUtils.writeDataToFile(e,n+"/"+t)},c.ReadBinary=function(e,t){return jsb.fileUtils.getDataFromFile(t+"/"+e)},c.DelDir=function(e){jsb.fileUtils.removeDirectory(e)},c.DelFile=function(e,t){jsb.fileUtils.removeFile(e+"/"+t)},c.prototype.start=function(){},o=c,i.default=o,cc._RF.pop()},{}],FitTaskItem:[function(e,t,n){"use strict";cc._RF.push(t,"e1fe8u3xqhFe5c8adHEO/8D","FitTaskItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("DataMgr"),l=o("AudioMgr"),d=o("MapConfig"),p=o("LoaderMgr"),h=o("ImageLabelNew"),f=o("Action");function m(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtCost=null,e.imgIcon=null,e.imgName=null,e.frameLoading=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(m,c=cc.Component),m.prototype.start=function(){this.node.children[0].getChildByName("btn_green1").on(cc.Node.EventType.TOUCH_END,this.onTask,this)},m.prototype.initWith=function(e,t,n){this.data=e,this.callback=t,this.context=n,this.isTouched=!1,n=u.DataMgr.Milestone.getTaskCostStar(e.id),this.txtCost.setText(n+""),n=this.imgIcon.node,f.default.stopAnim(n),n.rotation=0,n.width=50,n.height=50,n.color=cc.color(174,208,248),this.imgIcon.spriteFrame=this.frameLoading,f.default.playAddAnim(n),this.loadTextSprite(e),this.loadIconSprite(e),this.preloadSprite(e)},m.prototype.loadTextSprite=function(e){var t=this;this.loadSprite(e,1).then(function(e){cc.isValid(t.imgName)&&(t.imgName.spriteFrame=e),cc.dynamicAtlasManager.insertSpriteFrame(e)}).catch(function(){return t.loadTextSprite(e)})},m.prototype.loadIconSprite=function(e){var t=this;this.loadSprite(e,0).then(function(e){var n,o;cc.isValid(t.imgIcon)&&(n=e.getRect(),o=t.imgIcon.node,f.default.stopAnim(o),o.rotation=0,o.width=n.width||110,o.height=n.height||97,o.color=cc.color(255,255,255),t.imgIcon.spriteFrame=e),cc.dynamicAtlasManager.insertSpriteFrame(e)}).catch(function(){return t.loadIconSprite(e)})},m.prototype.loadSprite=function(e,t){var n=e.icon;return e=e.room_type,t=0===t?"icon":"txt",e=d.MapConfig.PrefixRoom+"/"+d.MapConfig.RoomData[e].name+"-task",p.LoaderMgr.loadSpriteFrameWithUrl(e+"/"+t+"_"+n)},m.prototype.preloadSprite=function(e){var t,n,o=e.add_furnitures;o.length&&(o=o[0],(o=u.DataMgr.Milestone.getFurnitureById(o))&&3===o.skin_num&&(t=e.select,n=e.room_type,[1,2,3].forEach(function(e){var o=d.MapConfig.PrefixRoom+"/"+d.MapConfig.RoomData[n].name+"-task";e="icon_"+t+"_select_"+e,p.LoaderMgr.loadSpriteFrameWithUrl(o+"/"+e)})))},m.prototype.onTask=function(e){l.AudioMgr.button(),this.isTouched||(this.isTouched=!1,this.callback&&this.callback.call(this.context,e,this.node,this.data))},s([i(h.default)],m.prototype,"txtCost",void 0),s([i(cc.Sprite)],m.prototype,"imgIcon",void 0),s([i(cc.Sprite)],m.prototype,"imgName",void 0),s([i(cc.SpriteFrame)],m.prototype,"frameLoading",void 0),o=s([o],m),r.default=o,cc._RF.pop()},{}],FloatingPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"7a5b9kFkBpAtINd5UdGBIs0","FloatingPopwin");var o=e,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("ViewMgr"),l=o("BasePopwin"),d=o("AudioMgr"),p=o("CommonMgr"),h=o("OnlineMgr");function f(){return null!==s&&s.apply(this,arguments)||this}o=cc._decorator.ccclass,r(f,s=l.default),(c=f).prototype.onOpen=function(e){s.prototype.onOpen.call(this,e)},Object.defineProperty(f.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(c.prefabPath)},enumerable:!0,configurable:!0}),f.prototype.onBack=function(){d.AudioMgr.button(),u.ViewMgr.closePopwin(c),p.default.I.sdkEventWithStr("close_AFL_tutorials_close")},f.prefabPath="prefab/popwin/popwin_floating",o=c=a([o],f),i.default=o,cc._RF.pop()},{}],FrameListener:[function(e,t,n){"use strict";cc._RF.push(t,"78eebPQFoVPaqpvD566DvG1","FrameListener");var o=e,i=t,r=n,a=__EXTENDS__();i=__DECORATE__,Object.defineProperty(r,"__esModule",{value:!0});var s,c=o("LogUtils");function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.events={},e}o=cc._decorator.ccclass,a(u,s=cc.Component),u.prototype.add=function(e,t,n,o){this.events[e]={callback:t,context:n,params:o}},u.prototype.remove=function(e,t,n){var o=this.events[e];o&&o.callback===t&&o.context===n&&(delete this.events[e],this.events[e]=null)},u.prototype.runEvent=function(e){c.default.error("runEvent",e);var t=this.events[e];t&&t.callback&&(e=t.callback).call.apply(e,[t.context||this].concat(t.params||[]))},o=i([o],u),r.default=o,(r=r.FrameEventKey||(r.FrameEventKey={})).WinStarSound="WinStarSound",r.WinCoinPigDown="WinCoinPigDown",cc._RF.pop()},{}],Friends:[function(e,t,n){"use strict";cc._RF.push(t,"6ec96RaZfNE5ZUpa4zvIEjI","Friends");var o,i,r=e,a=n,s=__EXTENDS__(),c=__DECORATE__;function u(e){var t="",n=!1;switch(e.type){case"touchstart":t="listTouchStart";break;case"touchmove":t="listTouchMove";break;case"touchend":t="listTouchEnd",n=!0;break;case"touchcancel":t="listTouchEnd",n=!0}wx.postMessage({message:t,data:n?"{}":JSON.stringify({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})})}function l(){return i.call(this)||this}Object.defineProperty(a,"__esModule",{value:!0}),o=r("BaseRank"),r=cc._decorator.ccclass,s(l,i=o.default),l.prototype.onLoad=function(){i.prototype.onLoad.call(this)},l.prototype.update=function(){this.render()},l.prototype.show=function(){this.Potential()},l.prototype.refresh=function(){},l.prototype.dissmiss=function(){i.prototype.dissmiss.call(this)},l.prototype.touchStart=function(e){e.type="touchstart",u(e)},l.prototype.touchMove=function(e){e.type="touchmove",u(e)},l.prototype.touchEnd=function(e){e.type="touchend",u(e)},l.prototype.touchCancel=function(e){e.type="touchcancel",u(e)},r=c([r],l),a.default=r,cc._RF.pop()},{}],FullScreenAdapter:[function(e,t){"use strict";cc._RF.push(t,"9dbfeA+HJBNn5zlSmwt2PlK","FullScreenAdapter"),cc.Class({extends:cc.Component,onLoad:function(){var e=this;cc.view.setResizeCallback(function(){return e.screenAdapter()}),this.screenAdapter()},screenAdapter:function(){cc.winSize.width,cc.winSize.height,cc.Canvas.instance.designResolution.width,cc.Canvas.instance.designResolution.height,cc.Canvas.width=750,cc.Canvas.height=cc.director.getWinSizeInPixels().height},setFitWidth:function(){cc.Canvas.instance.fitHeight=!1,cc.Canvas.instance.fitWidth=!0},setFitHeight:function(){cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1}}),cc._RF.pop()},{}],FurnitureItem:[function(e,t,n){"use strict";cc._RF.push(t,"1ae4b2Ko69IHoKEsWnadntz","FurnitureItem");var o,i=e,r=t,a=n,s=__EXTENDS__(),c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;function d(){var e=null!==o&&o.apply(this,arguments)||this;return e.txtName=null,e.txtGroup=null,e.imgIcon=null,e}Object.defineProperty(a,"__esModule",{value:!0}),i("Action"),i("Display"),i("DataMgr"),i("ViewMgr"),i("EventMgr"),i("AudioMgr"),i("EventEnum"),i("MapConfig"),i("LoaderMgr"),i=(r=cc._decorator).ccclass,r=r.property,s(d,o=cc.Component),d.prototype.initWith=function(){},d.prototype.loadIconSprite=function(){},d.prototype.loadSprite=function(){},d.prototype.preloadSprite=function(){},d.prototype.onMission=function(){return u(this,void 0,void 0,function(){return l(this,function(){return[2]})})},c([r(cc.Label)],d.prototype,"txtName",void 0),c([r(cc.Label)],d.prototype,"txtGroup",void 0),c([r(cc.Sprite)],d.prototype,"imgIcon",void 0),i=c([i],d),a.default=i,cc._RF.pop()},{}],GameAddBubble:[function(e,t,n){"use strict";cc._RF.push(t,"67e0eWiidtDVoxrk2nTAKMv","GameAddBubble");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Action"),l=i("BubbleMgr"),d=i("Enum");function p(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(p,c=cc.Component),p.prototype.show=function(e){var t=this;this.node.active=!0,10==e?u.default.playAddAnim(this.node,"anim_addbubble_10").then(function(){t.actionAddEnd()}):5==e&&u.default.playAddAnim(this.node,"anim_addbubble_5").then(function(){t.actionAddEnd(),l.default.I.doAddOneItem([d.PropsType.Light,1])})},p.prototype.actionAddEnd=function(){l.default.I.setHadBubbles(!0),cc.isValid(this.node)&&(this.node.active=!1)},i=s([i],p),r.default=i,cc._RF.pop()},{}],GameAddChange:[function(e,t,n){"use strict";cc._RF.push(t,"4d096nYlbVCbbAJUlsJoFi+","GameAddChange");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Action"),l=i("Display"),d=i("BubbleMgr");function p(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(p,c=cc.Component),p.prototype.show=function(){var e=this;this.node.active=!0,u.default.playAnim(this.node.children[0],"anim_getprop_endless_in").then(function(){e.actionShowEnd(),d.default.I.setfreechange(!0),l.default.showTip("\u672c\u5c40\u53ef\u65e0\u9650\u4ea4\u6362")})},p.prototype.actionShowEnd=function(){cc.isValid(this.node)&&(this.node.active=!1)},i=s([i],p),r.default=i,cc._RF.pop()},{}],GameBigScore:[function(e,t,n){"use strict";cc._RF.push(t,"20134Az6jtL65oy9s2NleYO","GameBigScore");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("PoolMgr"),d=o("RandomUtils"),p=o("ImageLabelNew");function h(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtNum=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(h,c=cc.Component),h.prototype.show=function(e){var t=this;this.txtNum.setValue(e,"",!1),e=d.default.random(1,5),u.default.playAnim(this.node,"anim_bigscore0"+e).then(function(){return t.actionAddEnd()})},h.prototype.actionAddEnd=function(){cc.isValid(this.node)&&l.PoolMgr.putNode(this.node)},s([i(p.default)],h.prototype,"txtNum",void 0),o=s([o],h),r.default=o,cc._RF.pop()},{}],GameCombo:[function(e,t,n){"use strict";cc._RF.push(t,"a167f3gc/lEYpDeHKUyA8K1","GameCombo");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Action"),l=i("ABTools"),d=i("AudioMgr"),p=i("RandomUtils");function h(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(h,c=cc.Component),h.prototype.show=function(){var e=this;this.node.active=!0;var t=p.default.random(1,4);l.default.I.wxCoolAudoAB&&(1==t?d.AudioMgr.playSoundbyStr("ku"):2==t?d.AudioMgr.playSoundbyStr("henhao"):d.AudioMgr.playSoundbyStr("chaoshen")),u.default.playAnim(this.node.children[0],"anim_combo_0"+t).then(function(){cc.isValid(e.node)&&(e.node.active=!1)})},i=s([i],h),r.default=i,cc._RF.pop()},{}],GameFitTask:[function(e,t,n){"use strict";cc._RF.push(t,"0090djp+bFLW5LeDpdt54XR","GameFitTask");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("ViewMgr"),h=o("Water"),f=o("Action"),m=o("GameFitUpGift"),g=o("PlotMgr"),_=o("Display"),y=o("FitTaskItem"),v=o("GuideHand"),b=o("DataMgr"),S=o("SDKEnums"),w=o("AudioMgr"),A=o("EventMgr"),M=o("PoolMgr"),T=o("ArrayUtils"),P=o("CommonMgr"),E=o("CheckTools"),D=o("EventEnum"),I=o("LoaderMgr"),C=o("ImageLabelNew"),B=o("BaseAnimPopwin"),k=o("OnlineMgr"),O=o("ColorListener"),R=o("Enum");function L(){var e=null!==l&&l.apply(this,arguments)||this;return e.wrapHand=null,e.nodeProgress=null,e.txtDay=null,e.txtProgress=null,e.nodeTxtTip=null,e.nodeStarFly=null,e.nodeTaskList=null,e.nodeGifts=[],e.taskPrefab=null,e.progressBar=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(L,l=B.default),(d=L).prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),this.nodeProgress.active=!1,this.initData(),this.initPage()},L.prototype.initPage=function(){this.initUI(),this.checkTreasure();var e=b.DataMgr.Milestone,t={};e.getGroupTaskList().forEach(function(e){return t[e.id]=1});var n,o=b.DataMgr.User.getRuningTasks();o.length&&1==o[0].id?(n=b.DataMgr.User.getRuningTasks(),n=e.getTaskById(n[0].id),this.handleTask(n)):o.length&&2==o[0].id&&this.checkShowGuideForce(2),this.node.getChildByName("bg").y=-459.5-_.default.getViewOffset(),_.default.sdkEventWithKey(S.EventKeys.panel_task_show)},L.prototype.onClosed=function(){this.data=null,l.prototype.onClosed.call(this)},L.prototype.onRelease=function(){l.prototype.onRelease.call(this),this.hideGuide(),this.removeTasks()},Object.defineProperty(L.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"BannerOpen",{get:function(){return k.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),L.prototype.addEvent=function(){l.prototype.addEvent.call(this),A.EventMgr.on(D.EventEnum.HideFitUp,this.onHideTask,this)},L.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),A.EventMgr.off(D.EventEnum.HideFitUp,this.onHideTask,this)},L.prototype.showTopBar=function(){_.default.topShow(R.TopBarType.Star)},Object.defineProperty(L.prototype,"ComputedProgress",{get:function(){var e=b.DataMgr.Milestone,t={};return e.getGroupTaskList().forEach(function(e){return t[e.id]=1}),+(b.DataMgr.User.CompleteTasks.filter(function(e){return!!t[e]}).map(function(t){return e.getTaskCostStar(t)}).reduce(function(e,t){return e+t},0)/this.progressMax).toFixed(2)},enumerable:!0,configurable:!0}),L.prototype.checkTreasure=function(){var e=b.DataMgr.User.TaskTreasures,t=b.DataMgr.Milestone,n={};t.getGroupTaskList().forEach(function(e){return n[e.id]=1});for(var o=b.DataMgr.User.CompleteTasks.filter(function(e){return!!n[e]}).map(function(e){return t.getTaskCostStar(e)}).reduce(function(e,t){return e+t},0),i=b.DataMgr.Milestone.getABRewardStar(this.data.milestone),r=0;r<i.length;r++){var a=i[r];if(a<=o&&!e[a])return void this.animTreasure(a,r)}},L.prototype.setLocked=function(e){this.isLocked=e},L.prototype.initData=function(){this.setLocked(!1),this.isUpdate=!1,this.data=b.DataMgr.Milestone.getMilestoneDetails();var e=b.DataMgr.Milestone.getABRewardStar(this.data.milestone);this.progressMax=e[e.length-1]},L.prototype.initUI=function(){this.nodeStarFly.active=!1,this.initProgress(),this.initTreasure(),this.initTasks(),this.node.children[0].y=17-_.default.getViewOffset()},L.prototype.initProgress=function(){this.nodeProgress.active=!0;var e=this.ComputedProgress;e=Math.min(1,e),this.progressBar.fillRange=e,this.txtProgress.setText(Math.floor(100*e)+"%"),this.progressCurr=e},L.prototype.initTreasure=function(){var e=this,t=(n=this.data).group,n=n.milestone;this.txtDay.setText(t.day+"");var o=b.DataMgr.User.TaskTreasures,i=b.DataMgr.Milestone.getABRewardStar(n);this.nodeGifts.forEach(function(t,n){n=i[n],o[n]?t.active=!1:(t.active=!0,t.x=t.parent.width*(n-e.progressMax/2)/e.progressMax)})},L.prototype.getActiveCount=function(){var e=0;return this.nodeTaskList.children.forEach(function(t){t.isValid&&t.active&&e++}),e},L.prototype.initTasks=function(){var e=this,t=b.DataMgr.User.getRuningTasks();this.nodeTxtTip.active=0===t.length;var n=[],o=[],i=R.ActionFitTask.Out;t.forEach(function(r,a){var s=r.id,c=r.from,u=r.to;void 0===(r=c!==i?c:u)&&(r=0);var l=e.buildTaskItem(r,s);return c===u?n.push(function(){return e.actionShow(l,s)}):c===i?n.push(function(){return e.actionEnter(l,s,u)}):u===i?n.push(function(){return e.actionOut(l,s,u)}):u<c&&(l.active=!0,o.push({node:l,from:s,to:u}),!(a=t[a+1])||a.from===i)?n.push(function(){return e.actionMoves(o)}):void 0}),T.default.queue(n)},L.prototype.buildTaskItem=function(e,t){var n=cc.instantiate(this.taskPrefab);return n.y=127-127*e,n.parent=this.nodeTaskList,n.active=!1,n.name=t+"",t=b.DataMgr.Milestone.getTaskById(t),n.getComponent(y.default).initWith(t,this.onItemClick,this),n},L.prototype.actionMoves=function(e){var t=this;return new Promise(function(n){var o=e.length-1;e.forEach(function(e,i){var r=e.node,a=e.from;e=e.to,t.actionMoveUp(r,a,e).then(function(){return i===o&&n(null)}).catch(function(){return i===o&&n(null)})})})},L.prototype.actionEnter=function(e,t,n){return c(this,void 0,void 0,function(){return u(this,function(o){switch(o.label){case 0:return e.active=!0,b.DataMgr.User.reqUpdateTaskState(t,{from:n}),[4,f.default.playAddAnim(e,"anim_task_come")];case 1:return o.sent(),[2]}})})},L.prototype.actionShow=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return e.active=!0,[4,f.default.playAddAnim(e,"anim_task_show")];case 1:return t.sent(),[2]}})})},L.prototype.actionOut=function(e,t,n){return c(this,void 0,void 0,function(){return u(this,function(){return e.active=!0,b.DataMgr.User.reqUpdateTaskState(t,{from:n}),[2,f.default.playAddAnim(e,"anim_task_out").then(function(){return e.destroy()})]})})},L.prototype.actionMoveUp=function(e,t,n){return c(this,void 0,Promise,function(){var o=this;return u(this,function(){return e.active=!0,b.DataMgr.User.reqUpdateTaskState(t,{from:n}),[2,f.default.playAddAnim(e,"anim_task_up").then(function(){e.y=127-127*n,o.actionShow(e,t)})]})})},L.prototype.actionFlyStar=function(e,t){return c(this,void 0,void 0,function(){var n,o,i,r,a,s,c,l,d;return u(this,function(u){switch(u.label){case 0:return n=t.children[0].children[1],1!==e?[3,1]:[2,this.actionReduceStar(1,n)];case 1:if(_.default.animStar(n),o=[],2===e)o=[1,2];else if(3===e)o=[1,2,3];else for(i=Math.floor(e/3),r=e%3,s=a=0;s<3;s++)o[s]=0<r?i+a+1:i+a,r--,a=o[s];c=o.length,l=0,u.label=2;case 2:return l<c?(d=o[l],l===c-1?[2,this.actionReduceStar(d,n)]:(this.actionReduceStar(d,n),[4,h.default.wait(300)])):[3,5];case 3:u.sent(),u.label=4;case 4:return l++,[3,2];case 5:return[2]}})})},L.prototype.actionReduceStar=function(e,t){return c(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return A.EventMgr.emit(D.EventEnum.UpdateReduceStar,e),[4,_.default.animStar(t)];case 1:return n.sent(),t.parent.parent.getComponent(cc.Animation).play(),[2]}})})},L.prototype.removeTasks=function(){for(var e=this.nodeTaskList.childrenCount-1;0<=e;e--){var t=this.nodeTaskList.children[e];f.default.stopAnim(t),t.destroy()}},L.prototype.refreshProgress=function(){var e=this.ComputedProgress;this.progressCurr=e,this.txtProgress.setText(Math.floor(100*e)+"%")},L.prototype.animTreasure=function(e,t){return c(this,void 0,void 0,function(){var n;return u(this,function(o){switch(o.label){case 0:return n={id:+(n=(n=this.data.milestone).rewards[t].split(":"))[0],num:+n[1]},b.DataMgr.User.reqTaskTreasure(e),[4,f.default.playAddAnim(this.nodeGifts[t])];case 1:return o.sent(),g.default.I.setIsPloting(!1),[4,this.doClose(d,!0)];case 2:return o.sent(),A.EventMgr.emit(D.EventEnum.SwitchLockBg,1),p.ViewMgr.openPopwin(m.default,{data:{progress:e,type:e===this.progressMax?1:0,data:[n]}}),[2]}})})},L.prototype.update=function(){var e;this.isUpdate&&0!==this.progressCurr&&((e=this.progressBar.fillRange+this.delaRatio)<this.progressCurr?this.progressBar.fillRange=e:(this.isUpdate=!1,this.checkTreasure()))},L.prototype.checkShowGuide=function(e){e=b.DataMgr.Milestone.getTaskById(e),this.showGuide(e)},L.prototype.checkShowGuideForce=function(e){e=b.DataMgr.Milestone.getTaskById(e),this.showGuideForce(e)},L.prototype.showGuide=function(e){var t=this;if(e.have_guide){if(e=this.wrapHand.getChildByName("GuideHand"))return e.getComponent(v.default).initWith(cc.Vec2.ZERO),void(e.active=!0);I.LoaderMgr.loadResWithUrl("prefab/guide/comp/course_hand",cc.Prefab,{success:function(e){var n=t.wrapHand.getChildByName("GuideHand");n||((n=M.PoolMgr.getPrefab(e,t.wrapHand)).active=!0,n.name="GuideHand",n.getComponent(v.default).initWith(cc.Vec2.ZERO))}})}},L.prototype.hideGuide=function(){var e=this.wrapHand.children[0];e&&(e.active=!1)},L.prototype.showGuideForce=function(e){var t=this;e.have_guide&&I.LoaderMgr.loadResWithUrl("prefab/guide/game_fit up_guide",cc.Prefab,{success:function(e){var n=t.wrapHand.getChildByName("GuideForce");n||((n=M.PoolMgr.getPrefab(e,t.wrapHand)).name="GuideForce",n.active=!0,n.position=cc.v2(0,0),f.default.playAnim(n,"anim_guide_in"))}})},L.prototype.hideGuideForce=function(){var e=this.wrapHand.getChildByName("GuideForce");e&&e.destroy()},L.prototype.onItemClick=function(e,t,n){var o=this,i=(a=this.data.group).day,r=a.id,a=this.data.milestone.taskgroup_ids;if(i===b.DataMgr.Milestone.Milestones.length&&r===a[a.length-1])return _.default.showTip("More content will be updated soon, please wait...",1,{type:1});n.id<=3&&P.default.I.sdkEventWithStr("Task"+n.id+"_doButtonTap");var s=b.DataMgr.Milestone.getTaskCostStar(n.id);E.default.checkStar(s,{taskId:n.id})&&(this.isLocked||A.EventMgr.emit(D.EventEnum.ActionCheckTaskNode,{data:n,callback:function(){return o.handleTaskNodeExsit(e,s,t,n)},context:this}))},L.prototype.handleTaskNodeExsit=function(e,t,n,o){var i=this;_.default.sdkEventWithKey(S.EventKeys.panel_task_tap),A.EventMgr.emit(D.EventEnum.SwitchLoadHDState,1),this.setLocked(!0);var r=e.target;e=_.default.getTargetPos(r,this.nodeStarFly.parent),this.nodeStarFly.x=e.x-170,this.nodeStarFly.y=e.y+100,this.nodeStarFly.children[0].children[1].getComponent(C.default).setValue(-t),this.hideGuide(),this.actionFlyStar(t,r).then(function(){f.default.playAddAnim(n,"anim_task_doit"),n.getComponent(O.default).add(O.AnimEventKey.TaskStarFly,i.onTaskStarFly,i,[n,o])}).catch(function(){return A.EventMgr.emit(D.EventEnum.SwitchLoadHDState,0)})},L.prototype.onTaskStarFly=function(e,t){var n=this;this.nodeStarFly.active=!0,f.default.playAddAnim(this.nodeStarFly).then(function(){return n.handleTask(t)}).catch(function(){return A.EventMgr.emit(D.EventEnum.SwitchLoadHDState,0)}),e.getComponent(O.default).remove(O.AnimEventKey.TaskStarFly,this.onTaskStarFly,this)},L.prototype.onHideTask=function(){this.onBack()},L.prototype.onBack=function(){var e,t;w.AudioMgr.button(),this.isLocked||(e={},b.DataMgr.Milestone.getGroupTaskList().forEach(function(t){return e[t.id]=1}),(t=b.DataMgr.User.getRuningTasks()).length&&t[0].id<=2||(g.default.I.setIsPloting(!1),p.ViewMgr.closePopwin(d,{data:{uiHome:R.HomeUIState.Bottom},anim:!0})))},L.prototype.onTaskEnd=function(e,t,n,o){A.EventMgr.emit(D.EventEnum.SwitchLoadHDState,0),b.DataMgr.User.reqUpdateTaskState(e,{to:R.ActionFitTask.Out},!0),b.DataMgr.User.reqNextAppearTask(),b.DataMgr.User.reqAsyncNextTask(b.DataMgr.Milestone.getTaskById(e)),b.DataMgr.User.reqStar(-t,{isSync:!0}),n&&o.length&&b.DataMgr.User.reqOpenFurnitureSkin(n,o,!0,!0),2===e&&P.default.I.sdkEventWithKey(S.EventKeys.Task2_decorAniFin)},L.prototype.handleTask=function(e){return c(this,void 0,void 0,function(){var t,n,o,i=this;return u(this,function(r){switch(r.label){case 0:return(t=e.plot_id)&&b.DataMgr.User.reqAysncPlot(t,R.PlotState.Plan),n=0===(n=g.default.I.getStatus(t)).code,g.default.I.setIsPloting(n),[4,p.ViewMgr.closePopwin(d,{data:{uiHome:R.HomeUIState.OutTopMenu}})];case 1:return r.sent(),this.setLocked(!1),n?(g.default.I.resetTask(),g.default.I.execute(t)):(o=b.DataMgr.Milestone.getTaskCostStar(e.id),A.EventMgr.emit(D.EventEnum.ActionPlanTask,{data:e,isMove:!0,callback:function(t,n){return i.onTaskEnd(e.id,o,t,n)},context:this})),[2]}})})},L.prototype.onGame=function(){w.AudioMgr.button(),this.isLocked||_.default.PersistNode.loadToGame()},L.prefabPath="prefab/game/game_fit-task",s([i(cc.Node)],L.prototype,"wrapHand",void 0),s([i(cc.Node)],L.prototype,"nodeProgress",void 0),s([i(C.default)],L.prototype,"txtDay",void 0),s([i(C.default)],L.prototype,"txtProgress",void 0),s([i(cc.Node)],L.prototype,"nodeTxtTip",void 0),s([i(cc.Node)],L.prototype,"nodeStarFly",void 0),s([i(cc.Node)],L.prototype,"nodeTaskList",void 0),s([i(cc.Node)],L.prototype,"nodeGifts",void 0),s([i(cc.Prefab)],L.prototype,"taskPrefab",void 0),s([i(cc.Sprite)],L.prototype,"progressBar",void 0),o=d=s([o],L),r.default=o,cc._RF.pop()},{}],GameFitUpGift:[function(e,t,n){"use strict";cc._RF.push(t,"558b6uehFVDybixv9TDRh3d","GameFitUpGift");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p,h=o("ViewMgr"),f=o("GameFitTask"),m=o("Action"),g=o("Display"),_=o("AudioMgr"),y=o("EventMgr"),v=o("EventEnum"),b=o("BaseAnimPopwin"),S=o("OnlineMgr"),w=o("ImageLabelNew"),A=o("ColorListener"),M=o("Enum");function T(){var e=null!==d&&d.apply(this,arguments)||this;return e.nodeOpen=null,e.nodeItem=null,e.nodeLight=null,e.txtRewardCoin=null,e.boneGift=null,e.islock=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(T,d=b.default),p=T,Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return S.OnlineMgr.getBanner(p.prefabPath)},enumerable:!0,configurable:!0}),T.prototype.onOpen=function(e){d.prototype.onOpen.call(this,e),this.isLocked=!1,this.rewards=e.data.data,this.progress=e.data.progress,this.isGiftLarge=1===e.data.type,this.islock=!1,this.initData(),this.initUI(),this.initOpen(),console.log("############\u5f3a\u884c3\u79d2\u540e\u83b7\u5f97\u5956\u52b1######"),this.schedule(this.actionOpen,2)},T.prototype.onOpend=function(e){d.prototype.onOpend.call(this,e)},T.prototype.onTouchMask=function(){this.onReward(null)},T.prototype.addEvent=function(){d.prototype.addEvent.call(this),this.nodeItem.getComponent(A.default).add(A.AnimEventKey.GiftCoinAddVal,this.onAddCoin,this)},T.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),this.nodeItem.getComponent(A.default).remove(A.AnimEventKey.GiftCoinAddVal,this.onAddCoin,this)},T.prototype.initData=function(){this.setState(l.None)},T.prototype.initUI=function(){this.nodeOpen.active=!1,this.txtRewardCoin.setValue(0,"+")},T.prototype.initOpen=function(){this.setState(l.Title);var e=this.isGiftLarge?M.ActionTreasure.GTitle:M.ActionTreasure.STitle;this.boneGift.playAnimation(e,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onTitleEnd,this)},T.prototype.isState=function(e){return this.state===e},T.prototype.setState=function(e){this.isState(e)||(this.state=e)},T.prototype.onAddCoin=function(){this.txtRewardCoin.setValue(this.rewards[0].num,"+")},T.prototype.onTitleEnd=function(){this.setState(l.Down);var e=this.isGiftLarge?M.ActionTreasure.GDown:M.ActionTreasure.SDown;this.boneGift.playAnimation(e,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onDownEnd,this),this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onTitleEnd,this)},T.prototype.onDownEnd=function(){var e=this;this.setState(l.Idle);var t=this.isGiftLarge?M.ActionTreasure.GIdle:M.ActionTreasure.SIdle;this.boneGift.playAnimation(t,0),this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onDownEnd,this),this.nodeOpen.active=!0,m.default.playAddAnim(this.nodeOpen,"anim_tap_open_apper").then(function(){return m.default.playAddAnim(e.nodeOpen,"anim_tap_open")}),m.default.playAddAnim(this.nodeLight.children[0]),m.default.playAddAnim(this.nodeLight,"anim_light_appear")},T.prototype.onOpenEnd=function(){this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onOpenEnd,this)},T.prototype.onOpenCoin=function(e){var t=this;"item_coin "===e.name&&(g.default.topShow(M.TopBarType.Coin),m.default.playAddAnim(this.nodeLight,"anim_light_dark"),m.default.playAddAnim(this.nodeItem).then(function(){return c(t,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return e=Math.floor(this.rewards[0].num/10),[4,g.default.animCoin(e,this.nodeItem.children[0])];case 1:return t.sent(),y.EventMgr.emit(v.EventEnum.SwitchLockBg,0),[4,h.ViewMgr.closePopwin(p,{data:{uiHome:M.HomeUIState.None}})];case 2:return t.sent(),h.ViewMgr.openPopwin(f.default,{data:{uiHome:M.HomeUIState.TopMenu}}),[2]}})})})),this.boneGift.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this.onOpenCoin,this)},T.prototype.actionOpen=function(){console.log("############\u5f3a\u884c3\u79d2\u540e\u53d6\u6d88\u5956\u52b1\u4e8b\u4ef6######"),this.unschedule(this.actionOpen),this.setState(l.Open);var e=this.isGiftLarge?M.ActionTreasure.GOpen:M.ActionTreasure.SOpen;this.boneGift.playAnimation(e,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onOpenEnd,this),this.boneGift.addEventListener(dragonBones.EventObject.FRAME_EVENT,this.onOpenCoin,this)},T.prototype.onReward=function(){_.AudioMgr.button(),this.isState(l.Idle)&&(this.islock||(this.islock=!0,this.actionOpen()))},T.prefabPath="prefab/game/game_fit-up-gift",s([i(cc.Node)],T.prototype,"nodeOpen",void 0),s([i(cc.Node)],T.prototype,"nodeItem",void 0),s([i(cc.Node)],T.prototype,"nodeLight",void 0),s([i(w.default)],T.prototype,"txtRewardCoin",void 0),s([i(dragonBones.ArmatureDisplay)],T.prototype,"boneGift",void 0),o=p=s([o],T),r.default=o,(o=l=l||{})[o.None=0]="None",o[o.Title=1]="Title",o[o.Down=2]="Down",o[o.Idle=3]="Idle",o[o.Open=4]="Open",o[o.OpenEnd=5]="OpenEnd",cc._RF.pop()},{}],GameFitUp:[function(e,t,n){"use strict";cc._RF.push(t,"e84e3TFaXlNBLAiimP43Cui","GameFitUp");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p,h=o("ViewMgr"),f=o("Action"),m=o("SDKTools"),g=o("Display"),_=o("GuideHand"),y=o("GuideMgr"),v=o("DataMgr"),b=o("ShareVideo"),S=o("CommonMgr"),w=o("AudioMgr"),A=o("PoolMgr"),M=o("EventMgr"),T=o("EventEnum"),P=o("LoaderMgr"),E=o("MapConfig"),D=o("BaseAnimPopwin"),I=o("OnlineMgr"),C=o("Enum"),B=o("GuideDatas"),k=o("SDKEnums");function O(){var e=null!==d&&d.apply(this,arguments)||this;return e.wrapHand=null,e.nodeClose=null,e.nodeLocks=[],e.nodeSelect=null,e.shareVideo=null,e.frameLoading=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(O,d=D.default),p=O,Object.defineProperty(O.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"BannerOpen",{get:function(){return I.OnlineMgr.getBanner(p.prefabPath)},enumerable:!0,configurable:!0}),O.prototype.start=function(){var e=this;this.nodeSelect.children.forEach(function(t,n){return t.on(cc.Node.EventType.TOUCH_END,e.onSelect.bind(e,n+1,t),e)})},O.prototype.onOpen=function(e){this.params=e.data,this.isFromTask=0===this.params.type,d.prototype.onOpen.call(this,e),this.isSelected=!this.isFromTask,this.isLocked=!0,y.default.I.addRoot(B.GuideRoot.FitUpSelect,this.nodeSelect),this.initSelectData(),this.initUI()},O.prototype.onOpend=function(e){d.prototype.onOpend.call(this,e),this.isLocked=!1,y.default.I.begin(B.GuideID.Task2)},O.prototype.showTopBar=function(){this.IsGuideTask?g.default.topShow(C.TopBarType.None):g.default.topShow(C.TopBarType.Star)},O.prototype.onRelease=function(){this.hideGuide(),this.unschedule(this.showGuide),d.prototype.onRelease.call(this)},O.prototype.addEvent=function(){d.prototype.addEvent.call(this),M.EventMgr.on(T.EventEnum.HideFitUp,this.onHideFitUp,this),M.EventMgr.on(T.EventEnum.GuideOver,this.onGuideOver,this),M.EventMgr.on(T.EventEnum.FitUpGuideSelect,this.onGuideSelect,this),m.default.bindEvent(T.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},O.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),M.EventMgr.off(T.EventEnum.HideFitUp,this.onHideFitUp,this),M.EventMgr.off(T.EventEnum.GuideOver,this.onGuideOver,this),M.EventMgr.off(T.EventEnum.FitUpGuideSelect,this.onGuideSelect,this),m.default.removeEvent(T.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(O.prototype,"TaskId",{get:function(){return this.params.data.id},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"IsGuideTask",{get:function(){var e=1e3*this.params.data.id;return e===B.GuideID.Task2&&y.default.I.isHasGuide(e)},enumerable:!0,configurable:!0}),O.prototype.initSelectData=function(){this.IsGuideTask&&v.DataMgr.User.reqOpenFurnitureSkin(2,this.params.furnitures,!1);var e=v.DataMgr.User.getFurnitureSkinById(this.params.furnitures[0]);this.skinData=s({select:1},e,{opens:e.opens.length?e.opens:[1]}),this.setSelectSkin(this.skinData.select)},O.prototype.setSelectSkin=function(e){this.selectSkin=e},O.prototype.initUI=function(){this.initSkins(),this.initRewardUI(),f.default.playAddAnim(this.node.children[1],"anim_fitup_unlockfly"),2===this.TaskId&&S.default.I.sdkEventWithKey(k.EventKeys.Task2_choosePanelShow),this.nodeClose.active=!this.isFromTask,this.node.children[1].y=17-g.default.getViewOffset(),this.node.getChildByName("bg").y=-459.5-g.default.getViewOffset()},O.prototype.unSelect=function(){this.isSelected&&M.EventMgr.emit(T.EventEnum.ActionUnSelect,s({},this.params,{skin:this.skinData.select,isChange:this.selectSkin!==this.skinData.select}))},O.prototype.initSkins=function(){var e=this;this.nodeSelect.children.forEach(function(t,n){e.loadIconSprite(t,e.params.data,n),t.active&&e.preloadSprite(e.params.data,n),e.renderSelect(t,n+1)});var t=this.skinData.opens;this.nodeLocks.forEach(function(e,n){e&&(e.active=-1===t.indexOf(n+1))})},O.prototype.initRewardUI=function(){this.shareVideo.updateWithType(k.ShareVideoType.None),console.log(this.itemFree),this.itemFree=0,console.log(this.itemFree)},O.prototype.loadIconSprite=function(e,t,n){var o,i=this;cc.isValid(e)&&(o=e.children[0].children[0],f.default.stopAnim(o),o.rotation=0,o.width=50,o.height=50,o.color=cc.color(174,208,248),o.getComponent(cc.Sprite).spriteFrame=this.frameLoading,f.default.playAddAnim(o)),this.loadSprite(t,n).then(function(t){var n,o,i;cc.isValid(e)&&(n=t.getRect(),i=(o=e.children[0].children[0]).getComponent(cc.Sprite),f.default.stopAnim(o),o.rotation=0,o.width=n.width||167,o.height=n.height||197,i.spriteFrame=t,o.color=cc.color(255,255,255)),cc.dynamicAtlasManager.insertSpriteFrame(t)}).catch(function(){return i.loadIconSprite(e,t,n)})},O.prototype.loadSprite=function(e,t){var n=e.room_type;return e=e.select,n=E.MapConfig.PrefixRoom+"/"+E.MapConfig.RoomData[n].name+"-task",t="icon_"+e+"_select_"+(t%3+1),P.LoaderMgr.loadSpriteFrameWithUrl(n+"/"+t)},O.prototype.preloadSprite=function(e,t){e.add_furnitures.forEach(function(e){var n=(r=v.DataMgr.Milestone.getFurnitureById(e)).skin_type,o=r.res_img,i=r.skin_num,r=(e=t%3+1,E.MapConfig.PrefixRoom+"/"+E.MapConfig.RoomData[n].name);n=o.replace("_1","").replace("_2","").replace("_3",""),(o=3===i?n+"_"+e:""+o)&&P.LoaderMgr.loadSpriteFrameWithUrl(r+"/"+o)})},O.prototype.updateRewardUI=function(){this.shareVideo.updateWithKey(k.ShareKeys.FurnitureSkin)},O.prototype.renderSelect=function(e,t){t===this.selectSkin?(this.selectNode=e,f.default.playAddAnim(e,"state_fitup_select_2")):f.default.playAddAnim(e,"state_fitup_select_1")},O.prototype.renderUnSelect=function(e){e&&f.default.playAddAnim(e,"state_fitup_select_1")},O.prototype.showGuide=function(){var e=this;if(v.DataMgr.User.getCurrPlot()){var t=this.wrapHand.getChildByName("GuideHand");if(t)return t.getComponent(_.default).initWith(cc.Vec2.ZERO),void(t.active=!0);P.LoaderMgr.loadResWithUrl("prefab/guide/comp/course_hand",cc.Prefab,{success:function(t){(t=A.PoolMgr.getPrefab(t,e.wrapHand)).name="GuideHand",t.active=!0,t.getComponent(_.default).initWith(cc.Vec2.ZERO)}})}},O.prototype.hideGuide=function(){var e=this.wrapHand.children[0];e&&(e.active=!1)},O.prototype.onHideFitUp=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return this.isFromTask?[2]:(this.unSelect(),M.EventMgr.emit(T.EventEnum.SwitchLoadHDState,0),[4,h.ViewMgr.closePopwin(p,{data:{uiHome:C.HomeUIState.Bottom},anim:!e.detail})]);case 1:return t.sent(),[2]}})})},O.prototype.onBack=function(){return u(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return w.AudioMgr.button(),this.isLocked||this.isFromTask?[2]:(M.EventMgr.emit(T.EventEnum.SwitchLoadHDState,0),[4,h.ViewMgr.closePopwin(p,{data:{uiHome:C.HomeUIState.Bottom},anim:!0})]);case 1:return e.sent(),this.unSelect(),[2]}})})},O.prototype.onGuideOver=function(){this.IsGuideTask&&(g.default.topShow(C.TopBarType.Whole),this.scheduleOnce(this.showGuide,10))},O.prototype.onGuideSelect=function(e){e=+e.detail,this.onSelect(e,this.nodeSelect.children[e-1]),S.default.I.sdkEventWithKey(k.EventKeys.Task2_choosePanelSelect2nd)},O.prototype.onSelect=function(e,t){w.AudioMgr.button(),this.isLocked||this.selectSkin!==e&&(M.EventMgr.emit(T.EventEnum.MoveMapToNode,[this.params.furnitures[0],null]),this.setSelectSkin(e),this.isSelected=!0,this.renderUnSelect(this.selectNode),this.renderSelect(t,e),0<=this.skinData.opens.indexOf(e)?this.initRewardUI():this.updateRewardUI(),M.EventMgr.emit(T.EventEnum.ActionPreview,s({},this.params,{skin:e})))},O.prototype.onSure=function(){var e;w.AudioMgr.button(),this.isLocked||(2<=(e=this.TaskId)&&e<=4&&S.default.I.sdkEventWithStr("Task"+e+"_choosePanelConfirm"),-1!==this.skinData.opens.indexOf(this.selectSkin)?this.isFromTask||this.selectSkin!==this.skinData.select?(h.ViewMgr.closePopwin(p,{data:{uiHome:this.isFromTask?C.HomeUIState.OutTopMenu:C.HomeUIState.Bottom},anim:!0}),this.isFromTask||v.DataMgr.User.reqSelectFurnitureSkin(this.selectSkin,this.params.furnitures,!0),M.EventMgr.emit(T.EventEnum.ActionChanged,s({},this.params,{skin:this.selectSkin}))):(M.EventMgr.emit(T.EventEnum.SwitchLoadHDState,0),h.ViewMgr.closePopwin(p,{data:{uiHome:C.HomeUIState.Bottom},anim:!0}),this.unSelect()):m.default.dispatch(k.ShareKeys.FurnitureSkin,{success:this.handleSkinReward,context:this})),this.adnode.active&&javaCall.ShowReward(this,null)},O.prototype.handleSkinReward=function(){return u(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return e=this.selectSkin,this.isLocked=!0,[4,v.DataMgr.User.reqOpenFurnitureSkin(e,this.params.furnitures,!1)];case 1:return t.sent(),this.isLocked=!1,this.initSelectData(),this.setSelectSkin(e),this.initRewardUI(),[2]}})})},O.prototype.handleTacticUpdate=function(){},O.itemFree=-1,O.prefabPath="prefab/game/game_fit-up",c([i(cc.Node)],O.prototype,"adnode",void 0),c([i(cc.Node)],O.prototype,"wrapHand",void 0),c([i(cc.Node)],O.prototype,"wrapHand",void 0),c([i(cc.Node)],O.prototype,"nodeClose",void 0),c([i(cc.Node)],O.prototype,"nodeLocks",void 0),c([i(cc.Node)],O.prototype,"nodeSelect",void 0),c([i(b.default)],O.prototype,"shareVideo",void 0),c([i(cc.SpriteFrame)],O.prototype,"frameLoading",void 0),o=p=c([o],O),r.default=o,cc._RF.pop()},{}],GameGM:[function(e,t,n){"use strict";cc._RF.push(t,"b4c8ctcgXBNGYNA15OG+PK+","GameGM");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0}),o("RoomItem");var l,d=o("Api"),p=o("PlotMgr"),h=o("Display"),f=o("GuideMgr"),m=o("DataMgr"),g=(o("ViewMgr"),o("AudioMgr"),o("EventMgr"),o("CommonMgr"),o("EventEnum"),o("Enum"));function _(){var e=null!==l&&l.apply(this,arguments)||this;return e.mEditCoin=null,e.mEditStars=null,e.content=null,e.scrollview=null,e.prefabItem=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(_,l=cc.Component),_.prototype.start=function(){},_.prototype.onDisable=function(){},_.prototype.onDestroy=function(){},Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return!1},enumerable:!0,configurable:!0}),_.prototype.showTopBar=function(){h.default.topShow(g.TopBarType.CoinAndStar)},_.prototype.renderList=function(){},_.prototype.createNode=function(){},_.prototype.onEditCoin=function(){},_.prototype.onEidtStars=function(){},_.prototype.onResetGuide=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[3,2];case 1:return e.sent(),[2,h.default.showTip("\u91cd\u7f6e\u6210\u529f")];case 2:return[2]}})})},_.prototype.onKillGame=function(){},_.prototype.onResetAllAccount=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[3,2];case 1:e.sent(),d.default.testAllUser(null),m.DataMgr.clear(),f.default.I.clear(),cc.director.loadScene(g.SceneTypes.LoadScene,function(){}),e.label=2;case 2:return[2]}})})},_.prototype.onResetSelfAccount=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[3,2];case 1:e.sent(),d.default.testSelfUser(null),m.DataMgr.clear(),f.default.I.clear(),p.default.I.clear(),cc.director.loadScene(g.SceneTypes.LoadScene,function(){}),e.label=2;case 2:return[2]}})})},_.prototype.onCoin=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[3,2];case 1:e.sent(),h.default.showTip("\u4fee\u6539\u6210\u529f"),e.label=2;case 2:return[2]}})})},_.prototype.onStars=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[3,2];case 1:e.sent(),h.default.showTip("\u4fee\u6539\u6210\u529f"),e.label=2;case 2:return[2]}})})},_.prototype.onBack=function(){},_.prototype.reqStars=function(e,t){return void 0===t&&(t={}),c(this,void 0,Promise,function(){return u(this,function(){return[2]})})},_.prototype.reqDiamond=function(e,t){return void 0===t&&(t={}),c(this,void 0,Promise,function(){return u(this,function(){return[2]})})},_.PREFAB_PATH="prefab/game/game_gm",s([i(cc.EditBox)],_.prototype,"mEditCoin",void 0),s([i(cc.EditBox)],_.prototype,"mEditStars",void 0),s([i(cc.Node)],_.prototype,"content",void 0),s([i(cc.ScrollView)],_.prototype,"scrollview",void 0),s([i(cc.Prefab)],_.prototype,"prefabItem",void 0),o=s([o],_),r.default=o,cc._RF.pop()},{}],GameGuideBlack:[function(e,t,n){"use strict";cc._RF.push(t,"61197/XjSFPMI4yHnMTIPyC","GameGuideBlack");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Action"),p=o("BubbleMgr");function h(){var e=null!==l&&l.apply(this,arguments)||this;return e.nodeBtn=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(h,l=cc.Component),h.prototype.onLoad=function(){this.nodeBtn.on("click",this.onClickGuidebg,this)},h.prototype.showBlack1=function(e,t){this.node.active=!0,this.node.position=e,t&&(this.node.y+=10),d.default.playAnim(this.node,"anim_guide_black1")},h.prototype.showBlack2=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return this.node.active=!0,[2,d.default.playAnim(this.node,"anim_guide_black2").then(function(){cc.isValid(e.node)&&(e.node.active=!1)})]})})},h.prototype.onClickGuidebg=function(){p.default.I.onclickGuidebg()},s([i(cc.Node)],h.prototype,"nodeBtn",void 0),o=s([o],h),r.default=o,cc._RF.pop()},{}],GameHome:[function(e,t,n){"use strict";cc._RF.push(t,"90e8e2g+1BEX7nvWcU7ppxJ","GameHome");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Water"),p=o("Action"),h=o("SDKTools"),f=o("Display"),m=o("DataMgr"),g=o("BubbleMgr"),_=o("SDKEnums"),y=o("AudioMgr"),v=o("AudioEnum"),b=o("ImageLabelNew");function S(){var e=null!==l&&l.apply(this,arguments)||this;return e.nodeTip=null,e.nodeGray=null,e.nodeAnimStar=null,e.nodeAnimHouse=null,e.nodeStarLight=null,e.imgStarSlider=null,e.txtAddStar=null,e.txtBuilding=null,e.txtProgress=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,l=cc.Component),S.prototype.onLoad=function(){this.nodeAnimStar.active=!1},S.prototype.hideTip=function(){this.nodeTip.active=!1},S.prototype.animAddStar=function(e){var t=this;this.nodeAnimStar.active=!0,this.txtAddStar.setValue(e,"+"),p.default.playAnim(this.nodeAnimStar,"anim_game_house_star").then(function(){h.default.vibrateShort(),t.initInfo(!0,e),t.animHouseStar(),cc.isValid(t.nodeAnimStar)&&(t.nodeAnimStar.active=!1)})},S.prototype.animFlyStar=function(e,t,n){var o=this;f.default.actionStarFly(t,this.nodeStarLight,"anim_star_fly_lvup").then(function(){o.animHouseStar(),h.default.vibrateShort(),0==n&&o.initInfo(!0,e)})},S.prototype.animBezierStar=function(e,t,n,o){var i=this,r=f.default.getTargetPos(this.nodeStarLight,n);cc.tween(t).to(1,{rotation:360},{easing:cc.easing.quartIn}).start(),n=f.default.getEndPointByTrigonometric(-90,t.position,r),p.default.bezier(t,1,t.position,n,r,1,cc.easeQuarticActionIn()).then(function(){t.destroy(),h.default.vibrateShort(),0==o&&i.initInfo(!0,e),cc.isValid(i.nodeAnimHouse)&&i.animHouseStar()})},S.prototype.initInfo=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=0),c(this,void 0,void 0,function(){var n,o,i,r,a,s=this;return u(this,function(c){switch(c.label){case 0:if(!(r=m.DataMgr.User.getRuningTasks())||0===r.length)return[2,this.nodeTip.active=!1];if(1==(a=r[0].id)&&(a=2),n=m.DataMgr.Milestone.getTaskCostStar(a),o=m.DataMgr.User.Star,i=Math.min(o/n,1),this.nodeTip.active=!1,e?cc.tween(this.imgStarSlider).to(.3,{fillRange:i}).start():this.imgStarSlider.fillRange=i,!(0<t))return[3,5];r=0,c.label=1;case 1:return r<t?[4,d.default.wait(250)]:[3,4];case 2:c.sent(),a=o-t+r+1,this.txtProgress.setText(a+"/"+n),y.AudioMgr.playSound(v.AudioEnum.home_star_get),c.label=3;case 3:return r++,[3,1];case 4:return[3,6];case 5:this.txtProgress.setText(o+"/"+n),c.label=6;case 6:return this.checkIsCanUpBuild()?(this.nodeTip.active=!0,p.default.playAnim(this.nodeTip,"anim_house_tip_in").then(function(){cc.isValid(s.nodeTip)&&p.default.playAnim(s.nodeTip,"anim_house_tip")})):this.nodeTip.active=!1,!m.DataMgr.User.IsFinishHomeGuid&&i<1?this.nodeGray.active=!1:e?this.nodeGray.active||(this.nodeGray.active=!0,this.animHouseUnlock()):this.nodeGray.active=!0,1<=i&&this.showHomeGuid(),this.txtBuilding.setValue(this.ComputedProgress,""),g.default.I.setbubblebottomUI(),[2]}})})},S.prototype.animHouseStar=function(){p.default.playAddAnim(this.nodeAnimHouse,"anim_home_star")},S.prototype.animHouseUnlock=function(){p.default.playAddAnim(this.nodeAnimHouse,"anim_house_unlock")},S.prototype.showHomeGuid=function(){var e=h.default.getParamsInt(_.OnlineKeys.force_build_tutorial_abtest,2);if(0!=e&&(1!=e||m.DataMgr.UserBase.ID%2!=1))return m.DataMgr.User.reqFinishHomeGuid();m.DataMgr.User.IsFinishHomeGuid||m.DataMgr.User.reqFinishHomeGuid()},S.prototype.checkIsCanUpBuild=function(){if(0==m.DataMgr.User.getRuningTasks().length)return!1;var e=m.DataMgr.User.getRuningTasks()[0].id;1==e&&(e=2);var t=m.DataMgr.Milestone.getTaskCostStar(e),n=m.DataMgr.User.Star;return e!=h.default.getParamsInt(_.OnlineKeys.task_no_build_tip,516)&&t<=n},Object.defineProperty(S.prototype,"ComputedProgress",{get:function(){var e=m.DataMgr.Milestone,t={};e.getGroupTaskList().forEach(function(e){return t[e.id]=1});var n=m.DataMgr.User.CompleteTasks.filter(function(e){return!!t[e]}).map(function(t){return e.getTaskCostStar(t)}).reduce(function(e,t){return e+t},0),o=m.DataMgr.Milestone.getMilestoneDetails();return+(100*+(n/((o=m.DataMgr.Milestone.getABRewardStar(o.milestone))[o.length-1]+1)).toFixed(2)).toFixed(0)},enumerable:!0,configurable:!0}),S.prototype.onGoHome=function(){y.AudioMgr.button(),g.default.I.ongohome()},s([i(cc.Node)],S.prototype,"nodeTip",void 0),s([i(cc.Node)],S.prototype,"nodeGray",void 0),s([i(cc.Node)],S.prototype,"nodeAnimStar",void 0),s([i(cc.Node)],S.prototype,"nodeAnimHouse",void 0),s([i(cc.Node)],S.prototype,"nodeStarLight",void 0),s([i(cc.Sprite)],S.prototype,"imgStarSlider",void 0),s([i(b.default)],S.prototype,"txtAddStar",void 0),s([i(b.default)],S.prototype,"txtBuilding",void 0),s([i(b.default)],S.prototype,"txtProgress",void 0),o=s([o],S),r.default=o,cc._RF.pop()},{}],GameImgTxt:[function(e,t,n){"use strict";cc._RF.push(t,"58e08QHB7hJb562wnpwJwqT","GameImgTxt");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("CheckTools"),d=o("ImageLabelNew");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtNum=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(p,c=cc.Component),p.prototype.show=function(e){var t=this;return this.node.active=!0,l.default.IsNewPassModel?this.node.children[0].active=!1:(this.node.children[0].active=!0,this.txtNum.setValue(e,"",!1)),u.default.playAddAnim(this.node,"anim_game_target").then(function(){return t.hide()},function(){return t.hide()})},p.prototype.hide=function(){this.actionShowEnd()},p.prototype.actionShowEnd=function(){cc.isValid(this.node)&&(this.node.active=!1)},s([i(d.default)],p.prototype,"txtNum",void 0),o=s([o],p),r.default=o,cc._RF.pop()},{}],GameItems:[function(e,t,n){"use strict";cc._RF.push(t,"66a5dup2c9MypY+SU1Lzzdz","GameItems");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("ViewMgr"),l=o("Action"),d=o("SDKTools"),p=o("Display"),h=o("DataMgr"),f=o("Enum"),m=o("ShopPopwin"),g=o("BubbleMgr"),_=o("AudioMgr"),y=o("SDKAnalytics"),v=o("ImageLabelNew"),b=o("PlatformUtils"),S=o("SDKEnums");function w(){var e=null!==c&&c.apply(this,arguments)||this;return e.nodeItems=[],e.txtAddNum=null,e.nodeAddAnim=null,e.nodeCancel=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(w,c=cc.Component),w.prototype.onEnable=function(){this.addEvent()},w.prototype.onDisable=function(){this.removeEvent()},w.prototype.init=function(){this.initInfo(),this.showAnim()},w.prototype.initInfo=function(){for(var e=0;e<4;e++){if(!cc.isValid(this.nodeItems[e]))return;this.setItemInfo(this.nodeItems[e],e)}},w.prototype.actionUse=function(e){g.default.I.createItemBubble(e)},w.prototype.show=function(){this.node.active=!0},w.prototype.hide=function(){this.node.active=!1},w.prototype.showAnim=function(){this.node.active||l.default.playAddAnim(this.node,"anim_game_in"),this.node.active=!0},w.prototype.showUse=function(){this.nodeCancel.scale=g.default.I.isstartrandomitem?0:1,l.default.playAddAnim(this.node,"anim_useprop_out")},w.prototype.hideUse=function(){l.default.playAddAnim(this.node,"anim_game_in")},w.prototype.showAdd=function(e,t){var n=this,o="";switch(e){case f.PropsType.Boom:o="anim_getprop_boom_in";break;case f.PropsType.Light:o="anim_getprop_ray_in";break;case f.PropsType.Laser:o="anim_getprop_light_in";break;case f.PropsType.RainbowBall:o="anim_getprop_colorball_in"}this.nodeAddAnim.active=!0,this.txtAddNum.string="+"+t,l.default.playAnim(this.nodeAddAnim.children[0],o).then(function(){n.nodeAddAnim.active=!1,p.default.showProps([{type:e,num:t}],n.nodeItems[e])})},w.prototype.showTip=function(){this.nodeItems.forEach(function(e){l.default.playAnim(e,"anim_prop_scale")})},w.prototype.stopTip=function(){},w.prototype.addEvent=function(){var e=this;this.nodeItems.forEach(function(t,n){return t.on("click",function(){return e.onItemClick(n)})})},w.prototype.removeEvent=function(){},w.prototype.setItemInfo=function(e,t){var n,o,i,r;e&&e.isValid&&(n=h.DataMgr.User.getPropNum(t),o=g.default.I.getTimePropNum(t),i=e.getChildByName("btn_buy"),(r=e.getChildByName("btn_ad")).active=!1,i.active=!1,(t=e.getChildByName("bg_prop_num")).active=!0,t.getChildByName("txt_num").getComponent(v.default).setValue(n,""),n<=0&&(t.active=!1),0<o?(e.getChildByName("img_limte").active=!0,e.getChildByName("img_limte").getChildByName("New Label").getComponent(v.default).setValue(o,"")):(e.getChildByName("img_limte").active=!1,n<=0&&(t.active=!1,h.DataMgr.User.Diamond<10&&b.default.isWx&&0==PCSDK.platform.isVideoErrored()?r.active=!0:i.active=!0)))},w.prototype.checkIsVideoGetItem=function(e){var t=this;return!(0<g.default.I.getTimePropNum(e)||0<h.DataMgr.User.getPropNum(e)||10<=h.DataMgr.User.Diamond||(b.default.isTecent&&0==PCSDK.platform.isVideoErrored()?d.default.dispatch(S.ShareKeys.UseItem,{success:function(){h.DataMgr.User.reqProps(e,1),t.actionUse(e)},fail:function(){h.DataMgr.User.IsVideoShop||(h.DataMgr.User.reqVideoShop(1),u.ViewMgr.openPopwin(m.default))},context:this}):(u.ViewMgr.openPopwin(m.default),p.default.showTip("Insufficient gold coins!")),0))},w.prototype.onItemClick=function(e){this.handleCheckUse(e)},w.prototype.onUseCance=function(){_.AudioMgr.button(),g.default.I.hidePropUI(!0)},w.prototype.handleCheckUse=function(e){var t;switch(this.initInfo(),e){case f.PropsType.Boom:t=S.EventKeys.props_tap_bomb;break;case f.PropsType.Light:t=S.EventKeys.props_tap_laser;break;case f.PropsType.Laser:t=S.EventKeys.props_tap_row;break;case f.PropsType.RainbowBall:t=S.EventKeys.props_tap_colorful}y.default.event(t,""),g.default.I.m_isready&&(b.default.isWx&&PCSDK.platform.isVideoPlaying()||g.default.I.isgameover||g.default.I.isShowProp||this.checkIsVideoGetItem(e)||this.actionUse(e))},s([i(cc.Node)],w.prototype,"nodeItems",void 0),s([i(cc.Label)],w.prototype,"txtAddNum",void 0),s([i(cc.Node)],w.prototype,"nodeAddAnim",void 0),s([i(cc.Node)],w.prototype,"nodeCancel",void 0),o=s([o],w),r.default=o,cc._RF.pop()},{}],GameLoad:[function(e,t,n){"use strict";cc._RF.push(t,"d69bbsLvkxHz49rSeKMM7m7","GameLoad");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=i("ViewMgr"),d=i("Display"),p=i("BasePopwin"),h=i("Enum"),f=i("EventMgr"),m=i("EventEnum");function g(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(g,c=p.default),(u=g).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.loadGame()},Object.defineProperty(g.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),g.prototype.showTopBar=function(){d.default.topShow(h.TopBarType.None)},g.prototype.loadGame=function(){this.initGame(),l.ViewMgr.closePopwin(u,{data:{uiHome:h.HomeUIState.None}}),f.EventMgr.emit(m.EventEnum.GamePackageLoaded)},g.prototype.initGame=function(){},g.PREFAB_PATH="prefab/game/game_load",i=u=s([i],g),r.default=i,cc._RF.pop()},{}],GameNewDay:[function(e,t,n){"use strict";cc._RF.push(t,"3c3b2+t5mpA3aI/R0AijbLs","GameNewDay");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("ViewMgr"),h=o("Action"),f=o("BasePopwin");function m(){var e=null!==l&&l.apply(this,arguments)||this;return e.boneNewDay=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(m,l=f.default),d=m,Object.defineProperty(m.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),m.prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),this.params=e,this.initUI()},m.prototype.openAnim=function(){return Promise.resolve()},Object.defineProperty(m.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),m.prototype.showTopBar=function(){},m.prototype.initUI=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,h.default.playAddAnim(this.node,"anim_dayoff")];case 1:return e.sent(),[4,h.default.playAddAnim(this.node,"anim_dayon")];case 2:return e.sent(),this.boneNewDay.node.active=!0,this.boneNewDay.playAnimation("run",1),this.boneNewDay.addEventListener(dragonBones.EventObject.COMPLETE,this.onRunnEnd,this),[2]}})})},m.prototype.onRunnEnd=function(){this.boneNewDay.removeEventListener(dragonBones.EventObject.COMPLETE,this.onRunnEnd,this);var e=this.params&&this.params.end;p.ViewMgr.closePopwin(d).then(function(){return e&&e.callback.call(e.context)})},m.prefabPath="prefab/game/game_newday",s([i(dragonBones.ArmatureDisplay)],m.prototype,"boneNewDay",void 0),o=d=s([o],m),r.default=o,cc._RF.pop()},{}],GameNoStar:[function(e,t,n){"use strict";cc._RF.push(t,"d6f15afmtNKApxdDYAAE6xR","GameNoStar");var o=e,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("ViewMgr"),l=o("GameFitTask"),d=o("Display"),p=o("SDKEnums"),h=o("AudioMgr"),f=o("OnlineMgr"),m=o("BaseAnimPopwin"),g=o("Enum");function _(){return null!==s&&s.apply(this,arguments)||this}o=cc._decorator.ccclass,r(_,s=m.default),(c=_).prototype.onOpen=function(e){s.prototype.onOpen.call(this),this.data=e.data},Object.defineProperty(_.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(c.prefabPath)},enumerable:!0,configurable:!0}),_.prototype.showTopBar=function(){d.default.topShow(g.TopBarType.Star)},_.prototype.onStarGame=function(){h.AudioMgr.button(),d.default.sdkEventWithKey(p.EventKeys.panel_not_enough_stars_tap),u.ViewMgr.closePopwin(c,{data:{uiHome:g.HomeUIState.None},anim:!1}),u.ViewMgr.closePopwin(l.default,{data:{uiHome:g.HomeUIState.None},anim:!1}),d.default.PersistNode.loadToGame()},_.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(c)},_.prefabPath="prefab/game/game_nostar",o=c=a([o],_),i.default=o,cc._RF.pop()},{}],GamePageGM:[function(e,t,n){"use strict";cc._RF.push(t,"d8617sfWUNJ4Kv9vri2BsfN","GamePageGM");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("ViewMgr"),l=o("BubbleMgr"),d=o("Enum"),p=o("CommonMgr"),h=o("Display");function f(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtLevel=null,e.txtSeed=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(f,c=cc.Component),f.prototype.initWith=function(e){this.node.active=e},f.prototype.onGmGoToLv=function(){var e=+this.txtLevel.string;e&&(l.default.I.m_curLv=e,l.default.I.hideUILevel(),l.default.I.enterGame(e))},f.prototype.onGmGoToLvseed=function(){var e,t=+this.txtSeed.string;if(Number.isNaN(t))return h.default.showTip("\u8bf7\u8f93\u5165Number"),void cc.error("only number");t<0?h.default.showTip("\u8bf7\u8f93\u5165>=0\u7684\u6b63\u6574\u6570"):(e=l.default.I.m_curLv,l.default.I.hideUILevel(),l.default.I.enterGame(e,!0,!0,!1,!0,t))},f.prototype.onGmReset=function(){var e=l.default.I.m_curLv;l.default.I.hideUILevel(),l.default.I.enterGame(e)},f.prototype.setSeedTxt=function(e){this.txtSeed.string=e.toString()},f.prototype.onLeftGMTest=function(){p.default.I.setGMType(0),cc.director.loadScene(d.SceneTypes.GameGM,function(){u.ViewMgr.init()})},s([i(cc.EditBox)],f.prototype,"txtLevel",void 0),s([i(cc.EditBox)],f.prototype,"txtSeed",void 0),o=s([o],f),r.default=o,cc._RF.pop()},{}],GameStory:[function(e,t,n){"use strict";cc._RF.push(t,"7470aMi8HJNsZBtaXkKuTUV","GameStory");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("PlotMgr"),l=o("ABTools"),d=o("Display"),p=o("DelayBone"),h=o("Enum"),f=o("AudioMgr"),m=o("SDKEnums"),g=o("BaseAnimPopwin"),_=o("OnlineMgr");function y(){var e=null!==c&&c.apply(this,arguments)||this;return e.comBone=null,e.txtContent=null,e.richText=null,e.typerTimer=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(y,c=g.default),y.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.wordsState={},this.isLocked=!0,this.data=e.data,this.wordsState[this.data.id]=0,this.richText.string="",this.txtContent.string="",this.duration=_.OnlineMgr.getInt(m.OnlineKeys.PlotAutoNext,3),this.initBone(),this.actionTalk()},y.prototype.onOpend=function(){c.prototype.onOpend.call(this),this.isLocked=!1,this.initContent(this.data)},y.prototype.onClose=function(){c.prototype.onClose.call(this),this.stopNext(),this.isLocked=!0,this.wordsState=null,this.richText.string="",this.txtContent.string="",this.typerTimer&&clearInterval(this.typerTimer)},y.prototype.onRefresh=function(e){this.data=e.data,this.wordsState[this.data.id]=0,this.actionTalk(),this.initContent(e.data)},Object.defineProperty(y.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),y.prototype.addEvent=function(){c.prototype.addEvent.call(this)},y.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},y.prototype.showTopBar=function(){d.default.topShow(h.TopBarType.None)},y.prototype.initBone=function(){var e=this;this.comBone.initWith("role","").then(function(){e.actionTalk(),e.comBone.node.children[0].active=!1})},y.prototype.initContent=function(e){var t=this.getRoleWords(e);this.richText.string="",this.txtContent.string="",this.makeRichTextTyper(t),d.default.sdkEventWithStr(e.event)},y.prototype.startNext=function(){this.stopNext(),this.schedule(this.playNext,this.duration)},y.prototype.stopNext=function(){this.unschedule(this.playNext)},y.prototype.playNext=function(){u.default.I.actionStep()},y.prototype.getRoleWords=function(e){return(l.default.IsStory?e.words:e.words_b)||""},Object.defineProperty(y.prototype,"RoleActions",{get:function(){return(l.default.IsStory?this.data.role_2d_ani:this.data.role_2d_ani_b)||[]},enumerable:!0,configurable:!0}),y.prototype.actionTalk=function(){var e=this,t=this.RoleActions;1===t.length?this.comBone.playLoop(t[0]):this.comBone.playOne(t[0]).then(function(){return e.onTalkEnd()})},y.prototype.onTalkEnd=function(){var e=this.RoleActions;this.comBone.playLoop(e[e.length-1])},y.prototype.onContent=function(){var e,t,n;f.AudioMgr.button(),this.isLocked||(e=this.data.id,t=this.getRoleWords(this.data),0===(n=this.wordsState[e])?(this.typerTimer&&clearInterval(this.typerTimer),this.richText.string=t,this.wordsState[e]=1,this.startNext()):1===n&&(this.stopNext(),this.playNext()))},y.prototype.onSkip=function(){f.AudioMgr.button(),this.isLocked||u.default.I.skip()},y.prototype.onShowFull=function(){f.AudioMgr.button(),this.isLocked},y.prototype.makeRichTextTyper=function(e){for(var t=this,n=/<.+?\/?>/g,o=e.match(n),i=["\u2701","\u2702","\u2703","\u2704","\u273a","\u273b","\u273c","\u2744","\u2745","\u2746","\u2747","\u2748","\u2749","\u274a"].find(function(t){return-1==e.indexOf(t)}),r=e.replace(n,i),a=[],s=[],c={},u=0,l=0;l<r.length;l++)r[l]==i&&(s.push(l),2<=s.length?(c.endStr=o[2*a.length+1],c.endtIdx=l-u,a.push(c),s=[],c={}):(c.startIdx=l-u,c.startStr=o[2*a.length]),u+=1);var d=e.replace(n,"").split(""),p=[];for(l=1;l<=d.length;l++){for(var h=d.join("").slice(0,l),f=0,m=0;m<a.length;m++){var g=a[m],_=g.startIdx,y=g.endtIdx;_<l&&l<=y?(h=h.slice(0,_+f)+g.startStr+h.slice(_+f)+g.endStr,f+=g.startStr.length+g.endStr.length):y<l&&(h=h.slice(0,_+f)+g.startStr+h.slice(_+f,y+f)+g.endStr+h.slice(y+f),f+=g.startStr.length+g.endStr.length)}p.unshift(h)}this.typerTimer&&clearInterval(this.typerTimer),this.typerTimer=setInterval(function(){p.length?t.richText.string=p.pop():(t.startNext(),t.wordsState[t.data.id]=1,t.typerTimer&&clearInterval(t.typerTimer))},50)},y.prefabPath="prefab/game/game_story",s([i(p.default)],y.prototype,"comBone",void 0),s([i(cc.Label)],y.prototype,"txtContent",void 0),s([i(cc.RichText)],y.prototype,"richText",void 0),o=s([o],y),r.default=o,cc._RF.pop()},{}],GameTaskChest:[function(e,t,n){"use strict";cc._RF.push(t,"09334avatVG2ZrSF9p1tQvh","GameTaskChest");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("DataMgr"),d=o("Enum"),p=o("ImageLabelNew");function h(){var e=null!==c&&c.apply(this,arguments)||this;return e.prefabNum=null,e.nodeNum=null,e.imgColor=null,e.nodeTreasure=null,e.nodeTreasureSkin=null,e.nodeProgress=null,e.nodeProgressLight=null,e.spriteColors=[],e.state=d.TreasureState.Normal,e}o=(i=cc._decorator).ccclass,i=i.property,a(h,c=cc.Component),h.prototype.show=function(e){return!l.DataMgr.Task.isChestFuncOpen||l.DataMgr.Task.checkChestOver()?this.node.active=!1:void(this.isState(d.TreasureState.OuterEnd)||this.isState(d.TreasureState.Normal)?this.setState(d.TreasureState.Enter,{isInit:!0,addNum:e}):this.setState(d.TreasureState.EnterEnd,{isInit:!0,addNum:e}))},h.prototype.isState=function(e){return e===this.state},h.prototype.setState=function(e,t){var n=this,o=(t=void 0===t?{}:t).isInit||!1,i=t.addNum||0;if(o||e!==this.state)switch(this.state=e,e){case d.TreasureState.Enter:this.node.active=!0;var r=l.DataMgr.User.TaskDaily.collectColor,a=this.spriteColors[r-1];this.imgColor.spriteFrame=a;var s=l.DataMgr.Task.getChestIndex(),c=l.DataMgr.Task.getCollectSum();r=l.DataMgr.Task.getChestTarget(),a=Math.min(1,c/r),this.nodeProgress.width=80*a,u.default.playAnim(this.nodeTreasure,"anim_chest_normal"),u.default.playAnim(this.nodeTreasureSkin,"anim_chest_0"+(s+1)),u.default.playAnim(this.node,"anim_chest_in").then(function(){return n.actionEnterEnd(t)});break;case d.TreasureState.EnterEnd:var h=cc.instantiate(this.prefabNum);h.parent=this.nodeNum,h.x=8,h.getComponent(p.default).setText("+"+i),u.default.playAnim(h).then(function(){h.destroy()}),l.DataMgr.Task.addCollectTempNum(i),c=l.DataMgr.Task.getCollectSum(),r=l.DataMgr.Task.getChestTarget(),a=Math.min(1,c/r),cc.tween(this.nodeProgress).to(.25,{width:90*a}).call(function(){}).start(),this.nodeProgressLight.width=0,u.default.playAnim(this.nodeProgressLight.parent,"anim_redlight").then(function(){return n.actionFull()}),cc.tween(this.nodeProgressLight).to(.25,{width:90*a}).call(function(){}).start();break;case d.TreasureState.Outer:u.default.stopAnim(this.node,"anim_chest_out"),u.default.playAnim(this.node,"anim_chest_out").then(function(){return n.actionOutEnd()});break;case d.TreasureState.OuterEnd:this.node.active=!1}},h.prototype.actionEnterEnd=function(e){void 0===e&&(e={}),this.setState(d.TreasureState.EnterEnd,e)},h.prototype.actionFull=function(){var e=this;l.DataMgr.Task.checkChestOver()?u.default.playAnim(this.nodeTreasure,"anim_chest_full").then(function(){return e.actionOut()}):this.actionOut()},h.prototype.actionOut=function(){this.setState(d.TreasureState.Outer)},h.prototype.actionOutEnd=function(){this.setState(d.TreasureState.OuterEnd)},s([i(cc.Prefab)],h.prototype,"prefabNum",void 0),s([i(cc.Node)],h.prototype,"nodeNum",void 0),s([i(cc.Sprite)],h.prototype,"imgColor",void 0),s([i(cc.Node)],h.prototype,"nodeTreasure",void 0),s([i(cc.Node)],h.prototype,"nodeTreasureSkin",void 0),s([i(cc.Node)],h.prototype,"nodeProgress",void 0),s([i(cc.Node)],h.prototype,"nodeProgressLight",void 0),s([i(cc.SpriteFrame)],h.prototype,"spriteColors",void 0),o=s([o],h),r.default=o,cc._RF.pop()},{}],GameUIWraps:[function(e,t,n){"use strict";cc._RF.push(t,"a92f6uZPsNKPKKAONMuirHf","GameUIWraps");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l,d=o("GameHome"),p=o("GameItems"),h=o("GameCombo"),f=o("GamePageGM"),m=o("GameImgTxt"),g=o("GameUpBubble"),_=o("GameBigScore"),y=o("GameAddBubble"),v=o("GameTaskChest"),b=o("GameAddChange"),S=o("GameGuideBlack"),w=o("PoolMgr"),A=o("LoaderMgr"),M=o("RedPacketCtr"),T=o("CheckTools"),P=o("OnlineMgr"),E=o("SDKEnums"),D=o("DataMgr"),I=cc._decorator;function C(){var e=l.call(this)||this;return e.nodeHome=null,e.nodeLunch=null,e.nodeItems=null,e.nodeTaskChest=null,e.comGameGM=null,e.comImgTxt=null,e.comGameHome=null,e.comGameCombo=null,e.comGameItems=null,e.comUpBubble=null,e.comAddBubble=null,e.comTaskChest=null,e.comAddChange=null,e.comGuideBlack=null,e.comRedPacket=null,e.release(),e}i=I.ccclass,o=I.property,(I=c=c||{})[I.GameGM=0]="GameGM",I[I.GameTop=1]="GameTop",I[I.GameHome=2]="GameHome",I[I.GameGuide=3]="GameGuide",I[I.GameCombo=4]="GameCombo",I[I.GameItems=5]="GameItems",I[I.GameImgTxt=6]="GameImgTxt",I[I.GameBigScore=7]="GameBigScore",I[I.GameUpBubble=8]="GameUpBubble",I[I.GameAddBubble=9]="GameAddBubble",I[I.GameTaskChest=10]="GameTaskChest",I[I.GameAddChange=11]="GameAddChange",I[I.GameGuideBlack=12]="GameGuideBlack",I[I.GameRedPacket=13]="GameRedPacket",(I=u=u||{})[I.Default=0]="Default",I[I.Failure=1]="Failure",I[I.Loading=1]="Loading",I[I.Success=2]="Success",a(C,l=cc.Component),C.prototype.release=function(){var e;this.loadState=((e={})[c.GameGM]=u.Default,e[c.GameTop]=u.Default,e[c.GameHome]=u.Default,e[c.GameGuide]=u.Default,e[c.GameCombo]=u.Default,e[c.GameItems]=u.Default,e[c.GameImgTxt]=u.Default,e[c.GameBigScore]=u.Default,e[c.GameUpBubble]=u.Default,e[c.GameAddBubble]=u.Default,e[c.GameTaskChest]=u.Default,e[c.GameAddChange]=u.Default,e[c.GameGuideBlack]=u.Default,e[c.GameRedPacket]=u.Default,e)},C.prototype.onDestroy=function(){this.release()},C.prototype.setGameGM=function(){var e=this;this.checkGameGM().then(function(){return cc.isValid(e.comGameGM)&&e.comGameGM.initWith(!0)})},C.prototype.setSeedTxt=function(e){var t=this;this.checkGameGM().then(function(){return cc.isValid(t.comGameGM)&&t.comGameGM.setSeedTxt(e)})},C.prototype.checkGameGM=function(){var e=this,t=P.OnlineMgr.getObject(E.OnlineKeys.GM_whitelist,(cc.sys.isBrowser,[]));if(0==t.length)return Promise.reject();var n=D.DataMgr.UserBase.ID;return t.indexOf(n)<0?Promise.reject():cc.isValid(this.comGameGM)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameGM).then(function(n){e.comGameGM||(n=w.PoolMgr.getPrefab(n,e.node),e.comGameGM=n.getComponent(f.default)),t(1)}).catch(function(){return n()})})},C.prototype.showImgTxt=function(e){var t=this;return new Promise(function(n){t.checkGameImgTxt().then(function(){cc.isValid(t.comImgTxt)?t.comImgTxt.show(e).then(function(){return n(1)},function(){return n(0)}):n(0)}).catch(function(){return n(0)})})},C.prototype.hideImgTxt=function(){var e=this;this.checkGameImgTxt().then(function(){return cc.isValid(e.comImgTxt)&&e.comImgTxt.hide()})},C.prototype.checkGameImgTxt=function(){var e=this;return cc.isValid(this.comImgTxt)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameImgTxt).then(function(n){e.comImgTxt||(n=w.PoolMgr.getPrefab(n,e.node),e.comImgTxt=n.getComponent(m.default)),t(1)}).catch(function(){return n()})})},C.prototype.showCombo=function(){var e=this;this.checkGameCombo().then(function(){return cc.isValid(e.comGameCombo)&&e.comGameCombo.show()})},C.prototype.checkGameCombo=function(){var e=this;return cc.isValid(this.comGameCombo)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameCombo).then(function(n){e.comGameCombo||(n=w.PoolMgr.getPrefab(n,e.node),e.comGameCombo=n.getComponent(h.default)),t(1)}).catch(function(){return n()})})},C.prototype.initItems=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.init()})},C.prototype.initItemsInfo=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.initInfo()})},C.prototype.actionItemUse=function(e){var t=this;this.checkGameItems().then(function(){return cc.isValid(t.comGameItems)&&t.comGameItems.actionUse(e)})},C.prototype.showItemUse=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.showUse()})},C.prototype.hideItemUse=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.hideUse()})},C.prototype.showItems=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.show()})},C.prototype.showAnimItems=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.showAnim()})},C.prototype.hideItems=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.hide()})},C.prototype.showAddItem=function(e,t){var n=this;this.checkGameItems().then(function(){return cc.isValid(n.comGameItems)&&n.comGameItems.showAdd(e,t)})},C.prototype.showItemTip=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.showTip()})},C.prototype.stopItemTip=function(){var e=this;this.checkGameItems().then(function(){return cc.isValid(e.comGameItems)&&e.comGameItems.stopTip()})},C.prototype.getNodeItem=function(e){var t=this;return new Promise(function(n){t.checkGameItems().then(function(){cc.isValid(t.comGameItems)?n(t.comGameItems.nodeItems[e]):n(null)}).catch(function(){return n(null)})})},C.prototype.checkGameItems=function(){var e=this;return cc.isValid(this.comGameItems)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameItems).then(function(n){e.comGameItems||(n=w.PoolMgr.getPrefab(n,e.nodeItems),e.comGameItems=n.getComponent(p.default)),t(1)}).catch(function(){return n()})})},C.prototype.showBigScore=function(e,t,n){var o=this;this.loadPrefab(c.GameBigScore).then(function(i){(i=w.PoolMgr.getPrefab(i,o.node)).active=!0,i.parent=n,t.x<=-300?t.x=-300:300<=t.x&&(t.x=300),i.position=t,i.getComponent(_.default).show(e)})},C.prototype.showUpBubble=function(e){var t=this;this.checkGameUpBubble().then(function(){return cc.isValid(t.comUpBubble)&&t.comUpBubble.show(e)})},C.prototype.checkGameUpBubble=function(){var e=this;return cc.isValid(this.comUpBubble)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameUpBubble).then(function(n){e.comUpBubble||(n=w.PoolMgr.getPrefab(n,e.node),e.comUpBubble=n.getComponent(g.default)),t(1)}).catch(function(){return n()})})},C.prototype.showAddBubble=function(e){var t=this;this.checkGameAddBubble().then(function(){return cc.isValid(t.comAddBubble)&&t.comAddBubble.show(e)})},C.prototype.checkGameAddBubble=function(){var e=this;return cc.isValid(this.comAddBubble)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameAddBubble).then(function(n){e.comAddBubble||(n=w.PoolMgr.getPrefab(n,e.node),e.comAddBubble=n.getComponent(y.default)),t(1)}).catch(function(){return n()})})},C.prototype.showAddChange=function(){var e=this;this.checkGameAddChange().then(function(){return cc.isValid(e.comAddChange)&&e.comAddChange.show()})},C.prototype.checkGameAddChange=function(){var e=this;return cc.isValid(this.comAddChange)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameAddChange).then(function(n){e.comAddChange||(n=w.PoolMgr.getPrefab(n,e.nodeLunch),e.comAddChange=n.getComponent(b.default)),t(1)}).catch(function(){return n()})})},C.prototype.iniHomeInfo=function(){var e=this;this.checkGameHome().then(function(){return cc.isValid(e.comGameHome)&&e.comGameHome.initInfo()})},C.prototype.hideHomeTip=function(){var e=this;this.checkGameHome().then(function(){return cc.isValid(e.comGameHome)&&e.comGameHome.hideTip()})},C.prototype.animHomeAddStar=function(e){var t=this;this.checkGameHome().then(function(){return cc.isValid(t.comGameHome)&&t.comGameHome.animAddStar(e)})},C.prototype.animHomeFlyStar=function(e,t,n){var o=this;this.checkGameHome().then(function(){return cc.isValid(o.comGameHome)&&o.comGameHome.animFlyStar(e,t,n)})},C.prototype.animHomeBezierStar=function(e,t,n,o){var i=this;this.checkGameHome().then(function(){return cc.isValid(i.comGameHome)&&i.comGameHome.animBezierStar(e,t,n,o)})},C.prototype.checkGameHome=function(){var e=this;return cc.isValid(this.comGameHome)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameHome).then(function(n){e.comGameHome||((n=w.PoolMgr.getPrefab(n,e.nodeHome)).active=!0,e.comGameHome=n.getComponent(d.default)),t(1)}).catch(function(){return n()})})},C.prototype.showAddChest=function(e){var t=this;this.checkGameTaskChest().then(function(){return cc.isValid(t.comTaskChest)&&t.comTaskChest.show(e)})},C.prototype.checkGameTaskChest=function(){var e=this;return cc.isValid(this.comTaskChest)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameTaskChest).then(function(n){e.comTaskChest||(n=w.PoolMgr.getPrefab(n,e.nodeTaskChest),e.comTaskChest=n.getComponent(v.default)),t(1)}).catch(function(){return n()})})},C.prototype.showGuideBlack1=function(e,t){var n=this;this.checkGameGuide().then(function(){return cc.isValid(n.comGuideBlack)&&n.comGuideBlack.showBlack1(e,t)})},C.prototype.showGuideBlack2=function(){var e=this;return new Promise(function(t){e.checkGameGuide().then(function(){cc.isValid(e.comGuideBlack)?e.comGuideBlack.showBlack2().then(function(){return t(1)},function(){return t(0)}):t(0)}).catch(function(){return t(0)})})},C.prototype.checkGameGuide=function(){var e=this;return cc.isValid(this.comGuideBlack)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameGuideBlack).then(function(n){e.comGuideBlack||(n=w.PoolMgr.getPrefab(n,e.node.parent),e.comGuideBlack=n.getComponent(S.default)),t(1)}).catch(function(){return n()})})},C.prototype.checkRedPacket=function(){var e=this;return!T.default.IsRedPacketOpen||cc.isValid(this.comRedPacket)?Promise.resolve(1):new Promise(function(t,n){e.loadPrefab(c.GameRedPacket).then(function(n){e.comRedPacket||(cc.error("==\u300b\u52a8\u6001\u52a0\u8f7d\u5b8c\u6210\u5e76\u5b89\u88c5\u300a\u7ea2\u5305\u300b\u7ec4\u4ef6"),n=w.PoolMgr.getPrefab(n,e.node.parent),e.comRedPacket=n.getComponent(M.default)),t(1)}).catch(function(){return n()})})},C.prototype.playRedBottominani=function(){var e=this;this.checkRedPacket().then(function(){return cc.isValid(e.comRedPacket)&&e.comRedPacket.playBottominani()})},C.prototype.playRedinani=function(){var e=this;this.checkRedPacket().then(function(){return cc.isValid(e.comRedPacket)&&e.comRedPacket.playinani()})},C.prototype.setRedPacketInfo=function(){var e=this;this.checkRedPacket().then(function(){return cc.isValid(e.comRedPacket)&&e.comRedPacket.setRedPacketInfo()})},C.prototype.checkOpenFirstRedPacket=function(){var e=this;this.checkRedPacket().then(function(){return cc.isValid(e.comRedPacket)&&e.comRedPacket.checkOpenFirstRedPacket()})},C.prototype.checkAddRedPacket=function(e){var t=this;this.checkRedPacket().then(function(){return cc.isValid(t.comRedPacket)&&t.comRedPacket.checkAddRedPacket(e)})},C.prototype.getAllTempintegrals=function(){var e=this;this.checkRedPacket().then(function(){return cc.isValid(e.comRedPacket)&&e.comRedPacket.getAllTempintegrals()})},C.prototype.loadPrefab=function(e){var t=this,n=c[e];return this.loadState[e]=u.Loading,new Promise(function(o,i){A.LoaderMgr.loadPrefabWithUrl("prefab/gameui/"+n).then(function(n){cc.isValid(t.node)?(t.loadState[e]=u.Success,o(n)):(t.loadState[e]=u.Failure,i())}).catch(function(){t.loadState[e]=u.Failure,t.loadPrefab(e)})})},s([o(cc.Node)],C.prototype,"nodeHome",void 0),s([o(cc.Node)],C.prototype,"nodeLunch",void 0),s([o(cc.Node)],C.prototype,"nodeItems",void 0),s([o(cc.Node)],C.prototype,"nodeTaskChest",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],GameUpBubble:[function(e,t,n){"use strict";cc._RF.push(t,"ee16eGsFgpEH670gLpN5n1w","GameUpBubble");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("ImageLabelNew");function d(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtNum=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(d,c=cc.Component),d.prototype.show=function(e){var t=this;this.node.active=!0,this.txtNum.setValue(e,"+",!1),u.default.playAnim(this.node,"anim_addbubble_lvup").then(function(){return t.actionAddEnd()})},d.prototype.actionAddEnd=function(){cc.isValid(this.node)&&(this.node.active=!1)},s([i(l.default)],d.prototype,"txtNum",void 0),o=s([o],d),r.default=o,cc._RF.pop()},{}],Garbage:[function(e,t,n){"use strict";cc._RF.push(t,"d2f0bVIKHxNCJJdHESb5dBm","Garbage");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.dragonBone=null,e}r(u,s=cc.Component),u.prototype.play=function(){var e=this;return new Promise(function(t){e.loadBone().then(function(){e.dragonBone.playAnimation("boom",1),e.dragonBone.once(dragonBones.EventObject.COMPLETE,t,e)}).catch(function(){return t(null)})})},u.prototype.loadBone=function(){var e=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(t){cc.loader.loadRes("texture/bones/boom_ske",dragonBones.DragonBonesAsset,function(n,o){return n?e.loadBone():(e.dragonBone.dragonAsset=o,void cc.loader.loadRes("texture/bones/boom_tex",dragonBones.DragonBonesAtlasAsset,e.onComplete.bind(e,t)))})})},u.prototype.onComplete=function(e,t,n){if(t)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",e()},a([c(dragonBones.ArmatureDisplay)],u.prototype,"dragonBone",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],GetCashPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"7578fcVcttD2ZMk4qPWrViZ","GetCashPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0}),o("Display");var c,u,l=o("BasePopwin"),d=o("AudioMgr");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.cashtxt=null,e}o("OnlineMgr"),o=(i=cc._decorator).ccclass,i=i.property,a(p,c=l.default),(u=p).prototype.onLoad=function(){},p.prototype.addEvent=function(){c.prototype.addEvent.call(this)},p.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(p.prototype,"BannerOpen",{get:function(){return null},enumerable:!0,configurable:!0}),p.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.cashtxt.string="0.0"},p.prototype.ongetcash=function(){},p.prototype.onBack=function(){d.AudioMgr.button(),this.doClose(u,!1).then(function(){})},p.prefabPath="prefab/popwin/popwin_cashout02",s([i(cc.Label)],p.prototype,"cashtxt",void 0),o=u=s([o],p),r.default=o,cc._RF.pop()},{}],GetRewardPopWin:[function(e,t,n){"use strict";cc._RF.push(t,"7c447D7O6VNaIYEMj9RwaHs","GetRewardPopWin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p,h=o("SDKEnums"),f=o("DataMgr"),m=o("ShareVideo"),g=o("SDKTools"),_=o("ViewMgr"),y=o("OnlineMgr"),v=o("SDKAnalytics"),b=o("Const"),S=o("BaseAnimPopwin"),w=o("BubbleMgr");function A(){var e=null!==d&&d.apply(this,arguments)||this;return e.m_isreturnMain=!1,e.m_DesFrom="",e.shareVideo=null,e.m_Icons=[],e.itemobj=null,e.diamondobj=null,e.isdouble=!1,e.time=0,e.Diamond=0,e.reward=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(A,d=S.default),p=A,Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(p.prefabPath)},enumerable:!0,configurable:!0}),A.prototype.onOpen=function(e){return u(this,void 0,void 0,function(){return l(this,function(){return d.prototype.onOpen.call(this,e),this.Diamond=e.data.diamond||0,this.reward=e.data.props||[],0<this.Diamond?(this.diamondobj.active=!0,this.diamondobj.getChildByName("num").getComponent(cc.Label).string="+"+(10*this.Diamond).toString()):(this.diamondobj.active=!1,this.itemobj.x=0),0<this.reward.length?(this.itemobj.active=!0,this.itemobj.getChildByName("img_hammer").getComponent(cc.Sprite).spriteFrame=this.m_Icons[this.reward[0]],this.itemobj.getChildByName("num").getComponent(cc.Label).string="+"+this.reward[1].toString()):(this.itemobj.active=!1,this.diamondobj.x=0),this.initRewardUI(),[2]})})},A.prototype.addEvent=function(){d.prototype.addEvent.call(this)},A.prototype.removeEvent=function(){d.prototype.removeEvent.call(this)},A.prototype.getparam=function(){return 0<this.Diamond&&0<this.reward.length?4:0<this.reward.length?this.reward[0]:0<this.Diamond?3:void 0},A.prototype.initRewardUI=function(){var e=this.ShareKey;e&&this.shareVideo.updateWith(e)},Object.defineProperty(A.prototype,"ShareKey",{get:function(){return h.ShareKeys.DoubleReward},enumerable:!0,configurable:!0}),A.prototype.singleReward=function(){this.reqDayReward(!1)},A.prototype.handleDayReward=function(){this.reqDayReward(!0)},A.prototype.handleTacticUpdate=function(){this.initRewardUI()},A.prototype.doDayReward=function(){javaCall.ShowReward(this,function(e){g.default.dispatch(e.ShareKey,{success:e.handleDayReward,context:e})})},A.prototype.reqDayReward=function(e){var t=(this.isdouble=e)?2*this.Diamond:this.Diamond;0<t&&(f.DataMgr.User.reqDiamond(t,10),v.default.addLogRes([s({},b.default.LogRes.Diamond,{type:1,cnum:t,onum:f.DataMgr.User.Diamond,reason:this.m_DesFrom+"isdouble="+this.isdouble,levelid:0})])),0<this.reward.length&&(e=this.reward[0],t=this.reward[1],this.isdouble?(this.itemobj.getChildByName("num").getComponent(cc.Label).string=(2*t).toString(),w.default.I.doAddOneItem([e,2*t])):w.default.I.doAddOneItem([e,t])),this.handleClose()},A.prototype.handleClose=function(e){return void 0===e&&(e=!0),u(this,void 0,Promise,function(){return l(this,function(){return[2,_.ViewMgr.closePopwin(p,{anim:e}).then(function(){w.default.I.removePopwinList()})]})})},A.prefabPath="prefab/popwin/popwin_double",c([i(m.default)],A.prototype,"shareVideo",void 0),c([i(cc.SpriteFrame)],A.prototype,"m_Icons",void 0),c([i(cc.Node)],A.prototype,"itemobj",void 0),c([i(cc.Node)],A.prototype,"diamondobj",void 0),o=p=c([o],A),r.default=o,cc._RF.pop()},{}],GiftPopwin2:[function(e,t,n){"use strict";cc._RF.push(t,"51f12Fpp+1MS4AUG8aGiX3P","GiftPopwin2");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("ViewMgr"),h=o("SDKTools"),f=o("Display"),m=o("BasePopwin"),g=o("ShareVideo"),_=o("BubbleMgr"),y=o("AudioMgr"),v=o("EventEnum"),b=o("OnlineMgr"),S=o("AppDataMgr"),w=o("Enum"),A=o("SDKEnums");function M(){var e=null!==l&&l.apply(this,arguments)||this;return e.shareVideo=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(M,l=m.default),(d=M).prototype.onOpen=function(){this.initRewardUI(),this.hideBanner()},M.prototype.onOpend=function(){l.prototype.onOpend.call(this),this.showBanner()},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"GiftProgress",{get:function(){return S.AppDataMgr.get(w.AppDataKey.GiftProgress,0)},enumerable:!0,configurable:!0}),M.prototype.closeAnim=function(){return Promise.resolve()},M.prototype.addEvent=function(){l.prototype.addEvent.call(this),h.default.bindEvent(v.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},M.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),h.default.removeEvent(v.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},M.prototype.onBannerSuccess=function(e){l.prototype.onBannerSuccess.call(this,e),this.showSuccessBanner(e)},M.prototype.onBannerFailure=function(e){l.prototype.onBannerFailure.call(this,e),this.showFailureBanner()},M.prototype.showSuccessBanner=function(){},M.prototype.showFailureBanner=function(){},M.prototype.initRewardUI=function(){this.shareVideo.updateWith(A.ShareKeys.GiftHelp)},M.prototype.onReward=function(){console.log("???????????????? GiftPopwin2.js"),y.AudioMgr.button(),javaCall.ShowReward(this,function(e){console.log("callback===============>GiftPopwin2.js"),h.default.dispatch(A.ShareKeys.GiftHelp2,{success:e.handleReward,context:e})})},M.prototype.onBack=function(){return c(this,void 0,void 0,function(){return u(this,function(){return y.AudioMgr.button(),this.doClose(d,!1),S.AppDataMgr.set(w.AppDataKey.GiftHelpSkip,1),f.default.s_isClosedGift2=!0,[2]})})},M.prototype.onCancel=function(){return c(this,void 0,void 0,function(){return u(this,function(){return y.AudioMgr.button(),[2]})})},M.prototype.handleReward=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return _.default.I.getstartitem(),[4,p.ViewMgr.closePopwin(d)];case 1:return e.sent(),[2]}})})},M.prototype.handleTacticUpdate=function(){this.initRewardUI()},M.prefabPath="prefab/popwin/popwin_gift2",s([i(g.default)],M.prototype,"shareVideo",void 0),o=d=s([o],M),r.default=o,cc._RF.pop()},{}],GridPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"54248s0A7tADpOWueANByLT","GridPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ADLike2"),d=o("WXApi"),p=o("Action"),h=o("BasePopwin"),f=o("BubbleMgr"),m=o("AudioMgr"),g=o("EventMgr"),_=o("EventEnum"),y=o("SDKAnalytics"),v=o("OnlineMgr"),b=o("SDKEnums");function S(){var e=null!==c&&c.apply(this,arguments)||this;return e.adlike1=null,e.adlike2=null,e.nodeContent=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,c=h.default),u=S,Object.defineProperty(S.prototype,"isFullScreen",{get:function(){return!0},enumerable:!0,configurable:!0}),S.prototype.onLoad=function(){this.adlike1.init(b.SDKBannerLocation.LOCATION_PAGE_RESULT),this.adlike2.init(b.SDKBannerLocation.LOCATION_PAGE_RESULT),this.adlike1.node.active=!1,this.adlike2.node.active=!1},S.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.node.zIndex=1e5,p.default.playAddAnim(this.nodeContent,"anim_ad_no"),d.default.I.showallgridad()},S.prototype.addEvent=function(){c.prototype.addEvent.call(this),g.EventMgr.on(_.EventEnum.Gride2AdSucc,this.onGride2AdSucc,this),g.EventMgr.on(_.EventEnum.Gride2AdFail,this.onGride2AdFail,this)},S.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),g.EventMgr.off(_.EventEnum.Gride2AdSucc,this.onGride2AdSucc,this),g.EventMgr.off(_.EventEnum.Gride2AdFail,this.onGride2AdFail,this)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),S.prototype.onGride2AdSucc=function(){y.default.event(b.EventKeys.grid_ad_show,""),this.adlike1.node.active=!1,this.adlike2.node.active=!1,p.default.playAddAnim(this.nodeContent,"anim_ad_no")},S.prototype.onGride2AdFail=function(){this.adlike1.node.active=!0,this.adlike2.node.active=!0,this.adlike1.show(),this.adlike2.show(),p.default.playAddAnim(this.nodeContent,"anim_ad_have")},S.prototype.onBack=function(){m.AudioMgr.button(),this.doClose(u,!1).then(function(){f.default.I.removePopwinList()}),u.isshow=!1,d.default.I.hideallgridad()},S.prototype.onBackbg=function(){this.node.getChildByName("close").opacity<255||(this.doClose(u,!1).then(function(){f.default.I.removePopwinList()}),u.isshow=!1,d.default.I.hideallgridad())},S.prefabPath="prefab/popwin/popwin_ad",S.isshow=!1,s([i(l.default)],S.prototype,"adlike1",void 0),s([i(l.default)],S.prototype,"adlike2",void 0),s([i(cc.Node)],S.prototype,"nodeContent",void 0),o=u=s([o],S),r.default=o,cc._RF.pop()},{}],GuideDatas:[function(e,t,n){"use strict";cc._RF.push(t,"436c8shXHdFQoJfLJttbvCD","GuideDatas");var o,i,r=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),(i=o=a.GuideID||(a.GuideID={}))[i.None=0]="None",i[i.Lv1=1]="Lv1",i[i.Task2=2e3]="Task2",i[i.Finish=2001]="Finish",(r=a.GuideState||(a.GuideState={}))[r.None=0]="None",r[r.Entering=1]="Entering",r[r.EnterEnd=2]="EnterEnd",r[r.Hideing=3]="Hideing",r[r.HideEnd=4]="HideEnd",(r=i=a.GuideRoot||(a.GuideRoot={}))[r.FitUpSelect=0]="FitUpSelect",a.default=((a={})[o.Task2]={0:{prefab:"guide_1",steps:[{arrows:[],finger:!0,fingerPos:cc.v3(-50,-150,0),target:{touch:!0,type:i.FitUpSelect,path:"bg_fit_choice_2"},hights:[],talk:{style:0,text:"There are <color=#f12be1>many styles</color> to choose from",state:"state_crouse_guide1_1",click:!1,position:[0,213]},next:2}]}},a),cc._RF.pop()},{}],GuideDeclare:[function(e,t,n){"use strict";cc._RF.push(t,"a3a4dhqZuRJpYh56izx9xIZ","GuideDeclare");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GuideHand:[function(e,t,n){"use strict";cc._RF.push(t,"0d7ebvgEOFCIovvFdR8o+ZG","GuideHand");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.boneHand=null,e}r(u,s=cc.Component),u.prototype.initWith=function(e){var t=this.node;t.active=!0,t.zIndex=1e4,t.position=e,t.children[0].getComponent(dragonBones.ArmatureDisplay).playAnimation("hand_idle",0)},a([c(dragonBones.ArmatureDisplay)],u.prototype,"boneHand",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],GuideMgr:[function(e,t,n){"use strict";cc._RF.push(t,"acaeatLkh5GVrSpB50LJZnY","GuideMgr");var o=e,i=n,r=__AWAITER__,a=__GENERATOR__;Object.defineProperty(i,"__esModule",{value:!0});var s=o("Debug"),c=o("Water"),u=o("Action"),l=o("Display"),d=o("DataMgr"),p=o("AudioMgr"),h=o("PoolMgr"),f=o("EventMgr"),m=o("CommonMgr"),g=o("EventEnum"),_=o("LoaderMgr"),y=o("GuideHand"),v=o("LayerMgr"),b=o("GuideDatas");function S(){this.mOffsetY=0,this.mData=null,this.mState=b.GuideState.None,this.mRoots={},this.mStepObj={},this.mConfig=b.default,this.mOffsetY=(cc.winSize.height-1624)/2}Object.defineProperty(S.prototype,"GuideData",{get:function(){return this.mData},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideMask",{get:function(){return this.GuideContainer.children[0]},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideWrapHand",{get:function(){return this.mNode.getChildByName("wrap_hand")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideWrapArrow",{get:function(){return this.mNode.getChildByName("wrap_arrow")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideContainer",{get:function(){return v.default.I.getLayer(v.Layer.Guide)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"IsEntering",{get:function(){return this.isState(b.GuideState.Entering)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"IsFinish",{get:function(){return d.DataMgr.User.isHadGuide(b.GuideID.Finish)},enumerable:!0,configurable:!0}),S.prototype.getById=function(e){return(e=this.mConfig[e])?e[0]||void 0:null},Object.defineProperty(S.prototype,"CurrStepIndex",{get:function(){var e=this.GuideData.id;return this.mStepObj[e]||0},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"CurrStepData",{get:function(){return this.GuideData.steps[this.CurrStepIndex]},enumerable:!0,configurable:!0}),S.prototype.addStepIndex=function(e){this.mStepObj[e]+=1},S.prototype.isStepOver=function(e){var t=this.getById(e);return!t||this.mStepObj[e]>=t.steps.length},S.prototype.isHasGuide=function(e){return!d.DataMgr.User.isHadGuide(e)&&!this.isStepOver(e)},S.prototype.isGuideLv1=function(){var e=d.DataMgr.User.MaxLevel;return e===b.GuideID.Lv1&&this.isHasGuide(e)},S.prototype.clear=function(){this.mRoots={},this.mStepObj={}},S.prototype.preload=function(e){return this.IsFinish?Promise.resolve():d.DataMgr.User.isHadGuide(e)?Promise.resolve():(e=this.getById(e))?_.LoaderMgr.loadPrefabWithUrl("prefab/guide/"+e.prefab):Promise.resolve()},S.prototype.begin=function(e){var t=this.getById(e);return!(!t||d.DataMgr.User.isHadGuide(e)||this.isStepOver(e)||(s.default.error("\u3010GuideMgr begin\u3011Start Boot",e,t),t.id=e,this.mData=t,this.mStepObj[e]=this.mStepObj[e]||0,this.setState(b.GuideState.Entering),this.showWith(t),0))},S.prototype.synch=function(e){e&&d.DataMgr.User.reqAysncGuide(e)},S.prototype.addRoot=function(e,t){this.mRoots[e]=t},S.prototype.getRoot=function(e){return this.mRoots[e]},S.prototype.clearRoot=function(e){delete this.mRoots[e],this.mRoots[e]=null},S.prototype.loadNode=function(e){var t=this,n=this.GuideContainer.getChildByName("guide");return n?(this.mNode=n,Promise.resolve(n)):new Promise(function(o,i){t.preload(e).then(function(e){(n=cc.instantiate(e)).parent=t.GuideContainer,n.name="guide",t.mNode=n,o(n)}).catch(function(){return i()})})},S.prototype.showMaskUI=function(){var e=this.GuideMask;e.opacity=0,e.active=!0},S.prototype.hideMaskUI=function(){this.GuideMask.active=!1},S.prototype.renderTalkUI=function(e){var t,n=this,o=this.mNode,i=(c=e.talk).state,r=c.text,a=c.style,s=c.click,c=c.position;0===a?t=o.getChildByName("course_bg1"):1===a&&(t=o.getChildByName("course_bg2")),t?(t.zIndex=100,t.position=cc.v2(c[0],c[1]),u.default.playAddAnim(t).then(function(){n.renderFingerUI(e),n.setState(b.GuideState.EnterEnd)}),i?u.default.playAddAnim(o,i).then(function(){n.renderTalkText(r,t)}):this.renderTalkText(r,t)):(this.renderFingerUI(e),this.setState(b.GuideState.EnterEnd),i&&u.default.playAddAnim(o,i)),s&&t&&t.getChildByName("btn_continue").on("click",this.onTalkTouch,this),this.mTalkNode=t},S.prototype.renderTalkText=function(e,t){e?t.getChildByName("word").children.forEach(function(t){"txt_rich"===t.name?(t.active=!0,t.getComponent(cc.RichText).string=e):t.active=!1}):(t=t.getChildByName("word").getChildByName("txt_rich"))&&(t.active=!1)},S.prototype.renderFingerUI=function(e){var t=e.finger;e=e.fingerPos,"boolean"==typeof t&&(e?this.showHand(cc.v2(e.x,e.y+667-cc.winSize.height/2)):(e=this.mNode.getChildByName("course_bg2").getChildByName("btn_continue"))&&(e=l.default.getTargetPos(e,this.mNode),this.showHand(e)))},S.prototype.showHand=function(e){var t=this.GuideWrapHand,n=t.children[0];n?(n.getComponent(y.default).initWith(cc.Vec2.ZERO),t.active=!0,t.zIndex=1e3,t.position=e):_.LoaderMgr.loadResWithUrl("prefab/guide/game_guide_hand",cc.Prefab,{success:function(o){n=h.PoolMgr.getPrefab(o,t),t.active=!0,t.zIndex=1e3,t.position=e,n.children[0].getComponent(cc.Animation).play("anim_hand_touch1")}})},S.prototype.hideHand=function(){var e=this.GuideWrapHand.children[0];e&&h.PoolMgr.putNode(e)},S.prototype.renderArrowUI=function(e){var t,n=this,o=this.GuideWrapArrow;o&&((t=e.arrows)&&0!==t.length?(this.arrowNodes=[],o.zIndex=1e3,o.active=!0,_.LoaderMgr.loadResWithUrl("prefab/guide/comp/course_arrow",cc.Prefab,{success:function(e){t.forEach(function(t){var i=t.scale,r=t.angle,a=t.pos;(t=h.PoolMgr.getPrefab(e,o)).active=!0,t.scale=i||1,t.angle=r||0,t.position=cc.v2(a.x,a.y+n.mOffsetY/2),u.default.playAddAnim(t),n.arrowNodes.push(t)})}})):o.active=!1)},S.prototype.hideArrow=function(){(this.arrowNodes||[]).forEach(function(e){return h.PoolMgr.putNode(e)})},S.prototype.renderMaskUI=function(){var e=this.GuideMask;e.opacity=100,e.active=!0,e.runAction(cc.fadeTo(.45,180))},S.prototype.renderHightsUI=function(e){var t=this;if(!(e=e.hights)||!e.length)return Promise.resolve();var n=[];return e.forEach(function(e){return n.push(t.renderGuideNode(e))}),Promise.all(n)},S.prototype.renderTargetUI=function(e){return(e=e.target)?this.renderGuideNode(e):Promise.resolve()},S.prototype.renderGuideNode=function(e){return r(this,void 0,void 0,function(){var t,n,o,i,r=this;return a(this,function(a){switch(a.label){case 0:return t=e.type,n=e.touch,i=e.path,o=this.mNode.getChildByName("target"),[4,this.findNodes(t,i)];case 1:return i=(i=a.sent()).map(function(e){var i=l.default.getTargetPos(e,o);(e=cc.instantiate(e)).active=!0,e.position=i,e.parent=o,t!==b.GuideRoot.FitUpSelect||n&&e.on(cc.Node.EventType.TOUCH_END,r.onFitUpTouch,r)}),[2,Promise.all(i)]}})})},S.prototype.showWith=function(e){var t=this,n=e.id,o=e.steps[this.CurrStepIndex];this.showMaskUI(),this.loadNode(n).then(function(e){return r(t,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return e.active=!0,[4,this.renderHightsUI(o)];case 1:return t.sent(),[4,this.renderTargetUI(o)];case 2:return t.sent(),this.renderTalkUI(o),this.renderArrowUI(o),this.renderMaskUI(o),[2]}})})}).catch(function(){return t.hideMaskUI()})},S.prototype.findNodes=function(e,t){return r(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:n=this.getRoot(e),o.label=1;case 1:return(n=this.findLayerObj(n,t))?[2,Promise.resolve([n])]:[4,c.default.wait(10)];case 2:return o.sent(),[3,1];case 3:return[2]}})})},S.prototype.findLayerObj=function(e,t){if(!e)return null;var n=t.split("/"),o=e.getChildByName(n[0]);if(!o)return null;for(var i=1;i<n.length;i++)if(!(o=o.getChildByName(n[i])))return null;return o},S.prototype.isState=function(e){return this.mState===e},S.prototype.setState=function(e){this.isState(e)||(this.mState=e)},S.prototype.onTalkTouch=function(){var e,t;p.AudioMgr.button(),this.isState(b.GuideState.EnterEnd)&&(e=this.mData.id,t=this.CurrStepIndex,e==b.GuideID.Lv1&&1===t&&m.default.I.sdkEventWithStr("Level1_tutorialStep2Fin"),this.actionNextStep())},S.prototype.onFitUpTouch=function(){p.AudioMgr.button(),this.isState(b.GuideState.EnterEnd)&&(f.EventMgr.emit(g.EventEnum.FitUpGuideSelect,2),this.actionNextStep())},S.prototype.actionNextStep=function(){var e=this.mData.id,t=(n=this.CurrStepData).talk,n=n.next;switch(t=t.click,this.CurrStepIndex,this.addStepIndex(e),t&&this.mTalkNode.getChildByName("btn_continue").off("click",this.onTalkTouch,this),n){case 1:this.GuideMask.opacity=100,this.mNode.getChildByName("target").removeAllChildren(!0),this.hideHand(),this.hideArrow(),this.begin(e);break;case 2:this.GuideMask.opacity=100,this.GuideMask.active=!1,this.hideHand(),this.hideArrow(),this.mNode.destroy(),this.synch(e),f.EventMgr.emit(g.EventEnum.GuideOver);break;case 3:this.GuideMask.opacity=0,this.mNode.active=!1,this.mNode.getChildByName("target").removeAllChildren(!0),this.hideHand(),this.hideArrow()}},Object.defineProperty(S,"I",{get:function(){return this.__instance||(this.__instance=new S)},enumerable:!0,configurable:!0}),o=S,i.default=o,cc._RF.pop()},{}],GuidePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"5a8399tMp1LZJ9a6dvbohkL","GuidePopwin");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=i("AudioMgr"),d=i("BubbleMgr"),p=i("Enum"),h=i("OnlineMgr"),f=i("SDKAnalytics"),m=i("SDKEnums"),g=i("BasePopwin");function _(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(_,c=g.default),(u=_).prototype.onOpen=function(e){switch(c.prototype.onOpen.call(this,e),this.guidetype=e.data.type,this.guidetype){case p.GuideType.StoneBubble:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide01");break;case p.GuideType.RanbowBubble:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide02");break;case p.GuideType.LaserBubble:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide03");break;case p.GuideType.IceBubble:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide04");break;case p.GuideType.BlackHole:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide05");case p.GuideType.Ghost:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide06");break;case p.GuideType.Cloud:this.node.getChildByName("bg").getComponent(cc.Animation).play("anim_popup_guide07")}},_.prototype.onOpend=function(e){c.prototype.onOpend.call(this,e)},_.prototype.onClose=function(){c.prototype.onClose.call(this),this.guidetype==p.GuideType.StoneBubble&&f.default.event(m.EventKeys.metal_ball_done,""),d.default.I.removePopwinList()},Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),_.prototype.onBack=function(){l.AudioMgr.button(),this.doClose(u),d.default.I.isguiding=!1},_.prefabPath="prefab/popwin/popwin_guide",i=u=s([i],_),r.default=i,cc._RF.pop()},{}],H5:[function(e,t){"use strict";cc._RF.push(t,"d31c016PtpE/ZiTdTyAwOvu","H5"),cc._RF.pop()},{}],HandleData:[function(e,t,n){"use strict";cc._RF.push(t,"8fca1gNQqdMlYFI5l8tKQ2t","HandleData");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Const"),a=o("Helper"),s=o("SDKTools"),c=o("DataMgr"),u=o("Enum"),l=o("Display");function d(){}d.doLogin=function(e){var t=this;s.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:e,showCancel:!1,confirmText:"\u786e\u5b9a",success:function(){s.default.login(!0).then(function(e){return t.handleLoginSuccess(e)}).catch(function(e){return t.handleLoginFailure(e)})}})},d.doFailure=function(e){var t=e.code,n=e.msg;if(e&&e.hasOwnProperty("errMsg")&&e.hasOwnProperty("err_code"))d.doLogin("\u8bfb\u53d6\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u3002\r\n\u9519\u8bef\u7801\uff1a"+e.err_code);else switch(t){case u.ErrorCode.LoginError:case u.ErrorCode.LoginInvlid:d.doLogin("\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");break;default:-1!==t&&n&&l.default.showTip(n+"\n\u9519\u8bef\u7801\uff1a"+t,3)}},d.doSuccess=function(e){if(e&&a.default.isPlainObject(e)&&0!==Object.keys(e).length)for(var t in e.hasOwnProperty("tips_data")&&this.handleTipsData(e.tips_data),e.hasOwnProperty("user_base_data")&&this.handleUserBaseData(e.user_base_data),e.hasOwnProperty("user_ext_data")&&this.handleUserExtData(e.user_ext_data),e)this.handleWithKeyAndValue(t,e[t])},d.handleWithKeyAndValue=function(e,t){e===r.default.BaseData&&this.handleBaseData(t)},d.handleBaseData=function(e){c.DataMgr.setData(e)},d.handleTipsData=function(e){c.DataMgr.Point.setData(e)},d.handleUserBaseData=function(e){c.DataMgr.UserBase.setData(e)},d.handleUserExtData=function(e){c.DataMgr.UserExt.setData(e)},d.handleLoginSuccess=function(e){d.doSuccess(e)},d.handleLoginFailure=function(e){d.doFailure(e)},o=d,i.default=o,cc._RF.pop()},{}],HelloWorld:[function(e,t){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(){}}),cc._RF.pop()},{}],Helper:[function(e,t,n){"use strict";cc._RF.push(t,"89c4eZ5wQRNVbc8wyT2xRIp","Helper");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),r.throttle=function(e,t,n){return void 0===n&&(n=""),n="please wait"+(t=void 0===t?600:t)/1e3+"s ,try aggin",new Promise(function(n){if(r.map[e])return!1;r.map[e]=!0;var o=setTimeout(function(){r.map[e]=!1,clearTimeout(o),o=null},t);n()})},r.getN=function(){for(var e=[],t=0;t<8;t++)e.push(t+1);return e.join("")},Object.defineProperty(r,"nextId",{get:function(){return this.messageIndex++},enumerable:!0,configurable:!0}),r.isFunction=function(e){return"function"==typeof e},r.isString=function(e){return"[object String]"===r.toString.call(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isPlainObject=function(e){return null!==e&&"[object Object]"===r.toString.call(e)&&"isPrototypeOf"in e},r.isArray=function(e){return"[object Array]"===r.toString.call(e)},r.isNumber=function(e){return"number"==typeof e&&isFinite(e)},r.isNullOrUndefined=function(e){return null==e||null==e},r.clone=function(e){if(!e)return e;if(!r.isPlainObject(e))return e;var t;if(r.isArray(e)){t=[];for(var n=0,o=e.length;n<o;n++)t.push(r.clone(e[n]))}else for(var i in t={},e)t[i]=r.clone(e[i]);return t},r.messageIndex=0,r.toString=Object.prototype.toString,r.map={},o=r,i.default=o,cc._RF.pop()},{}],HistoryData:[function(e,t,n){"use strict";cc._RF.push(t,"65c5frqKRhB1Kx16T3Auvc2","HistoryData");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Enum");o=function(){this.timeProps={0:0,1:0,2:0,3:0}},i.default=o,o=function(){this.index=-1,this.isBreakIce=!1,this.isRandom=!1,this.buff=-1,this.state=r.BubbleState.none,this.state=r.BubbleState.none},i.bubbledata=o,o=function(){},i.BallData=o,cc._RF.pop()},{}],HomeScene:[function(e,t,n){"use strict";cc._RF.push(t,"edc1cmRLO9PDovq60JC8sq2","HomeScene");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("ADLike"),h=o("ViewMgr"),f=o("BtnLike"),m=o("WXApi"),g=o("ViewBack"),_=o("SDKTools"),y=o("BottomBar"),v=o("MapView"),b=o("BaseScene"),S=o("Display"),w=o("GuideMgr"),A=o("DataMgr"),M=o("PlatformAd"),T=o("EventMgr"),P=o("CommonMgr"),E=o("GuideDatas"),D=o("EventEnum"),I=o("LoaderMgr"),C=o("OnlineMgr"),B=o("TopMenu"),k=o("PlatformUtils"),O=o("PlotMgr"),R=o("AppDataMgr"),L=o("SDKEnums"),N=o("Enum");function x(){var e=null!==d&&d.apply(this,arguments)||this;return e.bgLock=null,e.mapNode=null,e.nAdLike=null,e.nViewBack=null,e.nTopMenu=null,e.nBottomBar=null,e.prefabTopbar=null,e.stateViewTemp=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(x,d=b.default),Object.defineProperty(x.prototype,"MapView",{get:function(){return this.mapNode.getComponent(v.default)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"TopMenu",{get:function(){return this.nTopMenu.getComponent(B.default)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"ViewBack",{get:function(){return this.nViewBack.getComponent(g.default)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"BottomBar",{get:function(){return this.nBottomBar.getComponent(y.default)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"LeftADLike",{get:function(){return this.nAdLike.getComponent(f.default)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"BottomADLike",{get:function(){return this.comAdLike.getComponent(p.default)},enumerable:!0,configurable:!0}),x.prototype.actionMoveMap=function(e,t){return this.MapView.moveMapToNode(e,t)},x.prototype.onDestroy=function(){d.prototype.onDestroy.call(this),P.default.I.clearLevelSelect()},x.prototype.onDisable=function(){this.MapView.mapRelease()},x.prototype.addEvent=function(){d.prototype.addEvent.call(this),T.EventMgr.on(D.EventEnum.MoveMapToNode,this.handleMoveMap,this),T.EventMgr.on(D.EventEnum.ActionPreview,this.handlePreview,this),T.EventMgr.on(D.EventEnum.ActionChanged,this.handleChanged,this),T.EventMgr.on(D.EventEnum.ActionViewTemp,this.handleViewTemp,this),T.EventMgr.on(D.EventEnum.ActionUnSelect,this.handleUnselect,this),T.EventMgr.on(D.EventEnum.ActionPlanTask,this.handlePlanTask,this),T.EventMgr.on(D.EventEnum.ActionPlotAnim,this.handlePlotAnim,this),T.EventMgr.on(D.EventEnum.PlayAddCoinAnim,this.handleAddCoin,this),T.EventMgr.on(D.EventEnum.UpdateExtInvite,this.handleInviteHp,this),T.EventMgr.on(D.EventEnum.SwitchLockBg,this.handleSwitchLockBg,this),T.EventMgr.on(D.EventEnum.LoadHomeSuccess,this.handleHomeSuccess,this),T.EventMgr.on(D.EventEnum.SwitchLoadHDState,this.handleSwitchHDState,this),T.EventMgr.on(D.EventEnum.ActionCheckTaskNode,this.handleCheckTaskNode,this),k.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleShow),wx.onHide(this.handleHide)):(cc.game.on(cc.game.EVENT_SHOW,this.handleShow,this),cc.game.on(cc.game.EVENT_HIDE,this.handleHide,this))},x.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),T.EventMgr.off(D.EventEnum.MoveMapToNode,this.handleMoveMap,this),T.EventMgr.off(D.EventEnum.ActionPreview,this.handlePreview,this),T.EventMgr.off(D.EventEnum.ActionChanged,this.handleChanged,this),T.EventMgr.off(D.EventEnum.ActionViewTemp,this.handleViewTemp,this),T.EventMgr.off(D.EventEnum.ActionUnSelect,this.handleUnselect,this),T.EventMgr.off(D.EventEnum.ActionPlanTask,this.handlePlanTask,this),T.EventMgr.off(D.EventEnum.ActionPlotAnim,this.handlePlotAnim,this),T.EventMgr.off(D.EventEnum.PlayAddCoinAnim,this.handleAddCoin,this),T.EventMgr.off(D.EventEnum.UpdateExtInvite,this.handleInviteHp,this),T.EventMgr.off(D.EventEnum.SwitchLockBg,this.handleSwitchLockBg,this),T.EventMgr.off(D.EventEnum.LoadHomeSuccess,this.handleHomeSuccess,this),T.EventMgr.off(D.EventEnum.SwitchLoadHDState,this.handleSwitchHDState,this),T.EventMgr.off(D.EventEnum.ActionCheckTaskNode,this.handleCheckTaskNode,this),k.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleShow),wx.offHide(this.handleHide)):(cc.game.off(cc.game.EVENT_SHOW,this.handleShow,this),cc.game.off(cc.game.EVENT_HIDE,this.handleHide,this))},Object.defineProperty(x.prototype,"BannerOpen",{get:function(){return C.OnlineMgr.getBanner("home")},enumerable:!0,configurable:!0}),x.prototype.onOpen=function(){this.MapView.mapPreload(),this.setHomeUI(N.HomeUIState.HideAll),1==_.default.getParamsInt(L.OnlineKeys.build_scene_module_ad,0)&&m.default.I.showSinglegridad(null);var e=0<=C.OnlineMgr.getObject(L.OnlineKeys.GM_whitelist,(cc.sys.isBrowser,[])).indexOf(A.DataMgr.UserBase.ID);this.nBottomBar.parent.getChildByName("btn_gm_test").active=e},x.prototype.handleSwitchHDState=function(e){1==+e.detail?this.MapView.setStartLoadFlag(!1):this.MapView.setStartLoadFlag(!0)},x.prototype.handleHomeSuccess=function(){this.initUI(),this.preload()},x.prototype.onSceneShow=function(e){var t=e.detail||{};O.default.I.isPloting?t.hasOwnProperty("uiHome")&&this.setHomeUI(e.detail.uiHome):(t=t.hasOwnProperty("uiHome")?+t.uiHome:N.HomeUIState.ShowAll,this.setHomeUI(t))},x.prototype.onSceneHide=function(e){var t=e.detail||{};O.default.I.isPloting?t.hasOwnProperty("uiHome")&&this.setHomeUI(e.detail.uiHome):(t=t.hasOwnProperty("uiHome")?+t.uiHome:N.HomeUIState.OutAll,this.setHomeUI(t))},x.prototype.onBannerSuccess=function(e){var t,n=Math.max(0,cc.winSize.height-1334);0!==n&&e&&e.detail&&e.detail.height&&(t=S.default.getViewRatio(),n=e.detail.height*t+S.default.getIphoneBottomOffset()*t,this.setBottomOffset(n))},x.prototype.onBannerFailure=function(){this.setBottomOffset(220)},x.prototype.initUI=function(){S.default.PersistNode.TopBar||S.default.PersistNode.install(cc.instantiate(this.prefabTopbar)),S.default.adjustIphoneX(this.nTopMenu.parent),this.initEnter(),this.initMapView(),S.default.sdkEventWithKey(L.EventKeys.scene_enter),O.default.I.begin(this),javaCall.ShowInterstitial(this,null)},x.prototype.setBottomOffset=function(e){var t=this.nBottomBar.parent.getComponent(cc.Widget);t.bottom=e,t.updateAlignment()},x.prototype.initMapView=function(){this.MapView.mapInit()},x.prototype.preload=function(){w.default.I.preload(E.GuideID.Lv1),this.scheduleOnce(this.initPreload,2)},x.prototype.initPreload=function(){[].forEach(function(e){return I.LoaderMgr.loadPrefabWithUrl(e)})},x.prototype.showLockBg=function(){this.bgLock.active=!0},x.prototype.hideLockBg=function(){this.bgLock.active=!1},Object.defineProperty(x.prototype,"isShowBottomGuide",{get:function(){var e=O.default.I.isPlotStart(),t=A.DataMgr.User.isPlanPlot(O.PlotID.Task01),n=A.DataMgr.User.isOverPlot(O.PlotID.Task01);return!(e||t||n)},enumerable:!0,configurable:!0}),x.prototype.setHomeUI=function(e){switch(e){case N.HomeUIState.None:return Promise.resolve();case N.HomeUIState.ShowAll:return S.default.topShow(N.TopBarType.Star),this.TopMenu.animWith(N.ComAction.Enter),this.LeftADLike.animWith(N.ComAction.Enter),this.BottomADLike.animWith(N.ComAction.Enter),this.BottomBar.animWith(N.ComAction.Enter);case N.HomeUIState.HideAll:return S.default.topShow(N.TopBarType.None),this.TopMenu.animWith(N.ComAction.Init),this.LeftADLike.animWith(N.ComAction.Init),this.BottomADLike.animWith(N.ComAction.Init),this.BottomBar.animWith(N.ComAction.Init);case N.HomeUIState.OutAll:return S.default.topShow(N.TopBarType.None),this.TopMenu.animWith(N.ComAction.Out),this.LeftADLike.animWith(N.ComAction.Out),this.BottomADLike.animWith(N.ComAction.Out),this.BottomBar.animWith(N.ComAction.Out);case N.HomeUIState.OutBottomMenu:return this.TopMenu.animWith(N.ComAction.Out),this.LeftADLike.animWith(N.ComAction.Out),this.BottomADLike.animWith(N.ComAction.Out),this.BottomBar.animWith(N.ComAction.Out);case N.HomeUIState.Menu:return this.LeftADLike.animWith(N.ComAction.Enter),this.TopMenu.animWith(N.ComAction.Enter);case N.HomeUIState.ShowTopMenuOutBottom:return S.default.topShow(N.TopBarType.Star),this.TopMenu.animWith(N.ComAction.Enter),this.LeftADLike.animWith(N.ComAction.Enter),this.BottomADLike.animWith(N.ComAction.Out),this.BottomBar.animWith(N.ComAction.Out);case N.HomeUIState.TopMenu:return S.default.topShow(N.TopBarType.Star),this.LeftADLike.animWith(N.ComAction.Enter),this.TopMenu.animWith(N.ComAction.Enter);case N.HomeUIState.Bottom:return this.BottomADLike.animWith(N.ComAction.Enter),this.BottomBar.animWith(N.ComAction.Enter);case N.HomeUIState.OutBottom:return this.BottomADLike.animWith(N.ComAction.Out),this.BottomBar.animWith(N.ComAction.Out);case N.HomeUIState.OutBottomAuto:return S.default.topShow(N.TopBarType.Star),this.BottomADLike.animWith(N.ComAction.Init),this.BottomBar.animWith(N.ComAction.Init);case N.HomeUIState.OutTopMenu:return S.default.topShow(N.TopBarType.None),this.LeftADLike.animWith(N.ComAction.Out),this.TopMenu.animWith(N.ComAction.Out)}},x.prototype.initBottomLv=function(e){this.BottomBar.initWithLevel(e)},x.prototype.initEnter=function(){var e=this;this.TopMenu.init(),this.BottomBar.init(),this.LeftADLike.init(),this.BottomADLike.setOffset(b.default.ADLikeOffsetY);var t=A.DataMgr.User.MaxLevel;this.showLockBg(),this.initBottomLv(t-1),this.initAnimEnter().then(function(){e.checkAutoTask(1),e.actionEnterEnd(t)}).catch(function(){e.checkAutoTask(1),e.actionEnterEnd(t)}),A.DataMgr.Maps.resetAddStar()},x.prototype.initAnimEnter=function(){return!O.default.I.isPlotStart()&&this.isShowBottomGuide?this.setHomeUI(N.HomeUIState.Bottom):this.setHomeUI(N.HomeUIState.HideAll)},x.prototype.actionEnterEnd=function(e){this.hideLockBg(),this.initBottomLv(e)},x.prototype.isShowTop=function(e){return!!A.DataMgr.User.isOverPlot(O.PlotID.Task01)&&!!e},x.prototype.isOpenTask=function(e){return!(!A.DataMgr.User.isOverPlot(O.PlotID.Task01)||!R.AppDataMgr.get(N.AppDataKey.GameQuit,!1)&&!e)},x.prototype.checkAutoTask=function(e){this.isOpenTask(e)&&this.BottomBar.actionOpenTask(),A.DataMgr.User.isOverPlot(O.PlotID.Task01)&&M.default.interstitialWithHome()},x.prototype.actionViewTempOut=function(){},x.prototype.onGMJump=function(e,t){return u(this,void 0,void 0,function(){var e;return l(this,function(n){switch(n.label){case 0:return(e=+t)?[4,A.DataMgr.syncBaseUserData({maxLevel:e,maxScore:0,addScore:0},!0)]:[3,2];case 1:n.sent(),S.default.PersistNode.loadToGame(),n.label=2;case 2:return[2]}})})},x.prototype.onGMTest=function(){P.default.I.setGMType(1),cc.director.loadScene("GameGM",function(){h.ViewMgr.init()})},x.prototype.handleMoveMap=function(e){e=(t=e.detail)[0];var t=t[1];this.actionMoveMap(e,t)},x.prototype.handlePreview=function(e){e=e.detail,this.MapView.actionPreview(e)},x.prototype.handleChanged=function(e){e=e.detail,this.MapView.actionChangedTask(e)},x.prototype.handleCheckTaskNode=function(e){e=e.detail,this.MapView.actionCheckTaskNode(e)},x.prototype.handleViewTemp=function(e){var t,n=this,o=+e.detail.type,i=e.detail.data;switch(o){case 0:this.showLockBg(),this.stateViewTemp=1;break;case 1:1===this.stateViewTemp&&(this.hideLockBg(),this.ViewBack.animIn(i));break;case 2:case 3:1===this.stateViewTemp&&(this.stateViewTemp=0,t=this.ViewBack.Data,this.MapView.actionBackup({skin:1,data:t,furnitures:[t.add_furnitures[0],t.del_furnitures[0]],callback:function(){},context:this}).then(function(){return n.actionViewTempOut(o)}).catch(function(){return n.actionViewTempOut(o)}))}},x.prototype.handleUnselect=function(e){var t=e.detail.isChange;e=e.detail,this.MapView.actionUnselect(e,t)},x.prototype.handlePlanTask=function(e){var t,n,o,i,r=this,a=(c=e.detail).data,c=s({},c,{skin:1,furnitures:a.add_furnitures.slice()});e.detail.isMove?(void 0,t=a.plot_id,e=a.del_furnitures,a=a.add_furnitures,o=(t&&(n=A.DataMgr.Plot.getPlotById(t).focus).length?n:e)[0],i=a[0]||null,this.actionMoveMap(o,i).then(function(){return r.MapView.actionPlanTask(c)}).catch(function(){return r.MapView.actionPlanTask(c)})):this.MapView.actionPlanTask(c)},x.prototype.handlePlotAnim=function(e){var t=e.detail,n=(e=t.data,t.callback),o=t.context;this.MapView.actionPlotAnim(e).then(function(){return n&&n.call(o)}).catch(function(){return n&&n.call(o)})},x.prototype.handleAddCoin=function(){},x.prototype.handleShow=function(){},x.prototype.handleHide=function(){R.AppDataMgr.set(N.AppDataKey.OnHideHistory,!1)},x.prototype.handleInviteHp=function(){this.TopMenu.refreshWith(B.TopMenuUI.Invite)},x.prototype.handleSwitchLockBg=function(e){1==+e.detail?this.showLockBg():this.hideLockBg()},c([i(cc.Node)],x.prototype,"bgLock",void 0),c([i(cc.Node)],x.prototype,"mapNode",void 0),c([i(cc.Node)],x.prototype,"nAdLike",void 0),c([i(cc.Node)],x.prototype,"nViewBack",void 0),c([i(cc.Node)],x.prototype,"nTopMenu",void 0),c([i(cc.Node)],x.prototype,"nBottomBar",void 0),c([i(cc.Prefab)],x.prototype,"prefabTopbar",void 0),o=c([o],x),r.default=o,cc._RF.pop()},{}],Http:[function(e,t,n){"use strict";cc._RF.push(t,"e4e61Z0gh1EjIJXLs6Ea8tC","Http");var o=e,i=t,r=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),i=o("entry");var s=o("Const"),c=o("HandleData"),u=o("SDKTools"),l=o("LogUtils"),d=i.default.create({baseURL:"object"==typeof PCSDK?PCSDK.data.GameApi:"https://pre-wxstar.quzzgames.com/v1.0",timeout:5e3,responseType:"json",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}});function p(e){return a({},e,{token:u.default.Token,version:s.default.Version})}d.defaults.withCredentials=!0,d.interceptors.request.use(function(e){var t=e.url,n=e.params,o=e.data;return l.default.loggerJson("\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42, \u8def\u5f84: "+t+" , \u53c2\u6570params data: ",n,o),e},function(e){return Promise.reject(e)}),d.interceptors.response.use(function(e){var t=e.config;if(l.default.loggerJson("\u7f51\u7edc\u8bf7\u6c42\u6210\u529f\uff0c\u8def\u5f84: "+t.url+" , \u6570\u636e: ",e.data),!e.data){var n=-1,o="\u63a5\u53e3\u8fd4\u56de\u6570\u636e\u5931\u8d25\uff01";return c.default.doFailure({code:n,msg:o}),Promise.reject({code:n,msg:o,config:e.config})}return e.data.status?(e=e.data.result.data,c.default.doSuccess(e),e):(n=(t=e.data.result).code,o=t.msg,c.default.doFailure({code:n,msg:o}),Promise.reject({code:n,msg:o,config:e.config}))},function(e){var t=e.code,n=e.config,o=e.message;return l.default.logger("\u7f51\u7edc\u8bbf\u95ee\u5931\u8d25\uff1a"+JSON.stringify(e)),c.default.doFailure({code:t,msg:o}),Promise.reject({code:t,msg:o,config:n})}),r.buildParams=p,r.default={get:function(e,t){return t=p(t=void 0===t?{}:t),d({method:"get",url:e,params:t})},post:function(e,t){return t=p(t=void 0===t?{}:t),d({method:"post",url:e,data:t})}},cc._RF.pop()},{}],ImageLabelNew:[function(e,t,n){"use strict";cc._RF.push(t,"bae14CEqvlGS5gN0EiIUbft","ImageLabelNew");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("RandomUtils");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.sprite=null,e.spriteColor=cc.color(255,255,255,255),e.spriteFrames=[],e.spritePlus=null,e.spriteMinus=null,e.spriteTimes=null,e.spriteProgress=null,e.spriteDiv=null,e.spriteColon=null,e.spriteInfinite=null,e.layoutSpaceX=2,e.stepTime=.05,e.stepRate=.2,e.isNumberAdd=!1,e._step=0,e._value=0,e._offset=0,e._spriteCaches=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),l.prototype.start=function(){this.sprite.node.active=!1,this.layoutSpaceX&&(this.node.getComponent(cc.Layout).spacingX=this.layoutSpaceX),this.isNumberAdd&&this.setText("0")},l.prototype.setText=function(e){this.node.children.forEach(function(e){e.active=!1});for(var t=0;t<this._spriteCaches.length;t++)this._spriteCaches[t].node.active=!1;for(var n=e.length,o=0;o<n;o++){var i=void 0;(i=o<this._spriteCaches.length?this._spriteCaches[o]:this.createSprite()).node.active=!0,i.node.color=this.spriteColor,i.spriteFrame=this.getSpriteFrame(e.charAt(o))}},l.prototype.setValue=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=!0),this._char=t,e!=this._value&&n?(this._offset=e-this._value,this._step=Math.abs(Math.floor(this._offset*this.stepRate)),this._value=e,this.unschedule(this.updateNumber),this.schedule(this.updateNumber,this.stepTime)):(this._value=e,this.setText(""+this._char+this.value))},Object.defineProperty(l.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LayoutSpaceX",{set:function(e){this.layoutSpaceX=e,this.node.getComponent(cc.Layout).spacingX=e},enumerable:!0,configurable:!0}),l.prototype.reset=function(e){this._char="",this._step=0,this._offset=0,this._value=e},l.prototype.getSpriteFrame=function(e){var t=+e;if(!Number.isNaN(t))return this.spriteFrames[e];switch(e){case"+":return this.spritePlus;case"-":return this.spriteMinus;case"*":case"x":case"X":return this.spriteTimes;case"/":return this.spriteDiv;case"%":return this.spriteProgress;case":":case"\uff1a":return this.spriteColon;case"\u221e":return this.spriteInfinite}return null},l.prototype.createSprite=function(){var e=cc.instantiate(this.sprite.node);return e.parent=this.node,e=e.getComponent(cc.Sprite),this._spriteCaches.push(e),e},l.prototype.updateNumber=function(e){0==this._offset?this.unschedule(this.updateNumber):(e=Math.floor(this._step*(1+e)),e=u.default.range(Math.floor(.8*e),e),0!=this._offset&&0==e&&(e=1),0<this._offset?(this._offset-=e,this._offset=Math.max(this._offset,0)):this._offset<0&&(this._offset+=e,this._offset=Math.min(this._offset,0)),e=this._value-this._offset,this.setText(""+this._char+e))},s([i(cc.Sprite)],l.prototype,"sprite",void 0),s([i],l.prototype,"spriteColor",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteFrames",void 0),s([i(cc.SpriteFrame)],l.prototype,"spritePlus",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteMinus",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteTimes",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteProgress",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteDiv",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteColon",void 0),s([i(cc.SpriteFrame)],l.prototype,"spriteInfinite",void 0),s([i],l.prototype,"layoutSpaceX",void 0),s([i({tooltip:"\u95f4\u9694\u591a\u957f\u65f6\u95f4\u66f4\u65b0\uff0c\u5355\u4f4d\uff1a\u79d2"})],l.prototype,"stepTime",void 0),s([i({tooltip:"\u6bcf\u79d2\u504f\u79fb\u6570\u503c"})],l.prototype,"stepRate",void 0),s([i],l.prototype,"isNumberAdd",void 0),o=s([o],l),r.default=o,cc._RF.pop()},{}],InviteData:[function(e,t,n){"use strict";cc._RF.push(t,"988d8WgD9hIdIOzkBf81FL3","InviteData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],InviteItem:[function(e,t,n){"use strict";cc._RF.push(t,"6f7ccKwcbVDa6wZyQad8RR9","InviteItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l=o("Api"),d=o("Const"),p=o("SDKTools"),h=o("DataMgr"),f=o("AudioMgr"),m=o("SDKAnalytics"),g=o("OnlineMgr"),_=o("Enum"),y=o("SDKEnums");function v(){var e=null!==u&&u.apply(this,arguments)||this;return e.txtNumber=null,e.txtReward=null,e.iconHead=null,e.btnYet=null,e.btnInvite=null,e.btnReward=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(v,u=cc.Component),v.prototype.init=function(e,t){var n=this;t?this.txtReward.string=10*t.reward_val+"":(o=g.OnlineMgr.InviteRewards,this.txtReward.string=""+10*o[Math.min(e,o.length-1)]);var o=t.invite_avatar_url;o&&-1===o.indexOf("default_icon/icon_avatar")&&cc.loader.load({url:o,type:"png"},function(e,t){!e&&cc.isValid(n.iconHead)&&(n.iconHead.spriteFrame=new cc.SpriteFrame(t))}),this.txtNumber.string=""+(e+1),t&&(this.data=t,this.updateBtn())},v.prototype.doReward=function(){h.DataMgr.Point.updatePoint(_.ModuleType.InviteNum,-1),this.data.is_receive=_.RewardState.Received,this.updateBtn();var e=this.data.reward_val;h.DataMgr.User.reqDiamond(e/10,100),m.default.addLogRes(s({},d.default.LogRes.Diamond,{type:1,cnum:e,onum:h.DataMgr.User.Diamond,reason:"\u9080\u8bf7\u5956\u52b1",levelid:0})),m.default.event(y.EventKeys.InviteReward,y.EventFrom.Invite)},v.prototype.updateBtn=function(){switch(this.btnYet.active=this.btnReward.active=this.btnInvite.active=!1,this.data.is_receive){case _.RewardState.Not:this.btnInvite.active=!0;break;case _.RewardState.Receive:this.btnReward.active=!0;break;case _.RewardState.Received:this.btnYet.active=!0}},v.prototype.onShare=function(){f.AudioMgr.button();var e=this.data.type;p.default.share(y.ShareKeys.Invite,{invite_type:e}),m.default.event(y.EventKeys.InviteShare,y.EventFrom.Invite)},v.prototype.onReward=function(e){var t=this;f.AudioMgr.button();var n=(o=this.data).type,o=o.id;e.target.getComponent(cc.Button).interactable=!1,l.default.receivedByInvite({invite_id:o,invite_type:n}).then(function(){return t.doReward()}).catch(function(){return e.target.getComponent(cc.Button).interactable=!0})},c([i(cc.Label)],v.prototype,"txtNumber",void 0),c([i(cc.Label)],v.prototype,"txtReward",void 0),c([i(cc.Sprite)],v.prototype,"iconHead",void 0),c([i(cc.Node)],v.prototype,"btnYet",void 0),c([i(cc.Node)],v.prototype,"btnInvite",void 0),c([i(cc.Node)],v.prototype,"btnReward",void 0),o=c([o],v),r.default=o,cc._RF.pop()},{}],InvitePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"67efdVui1JFaLA46NwoIN5g","InvitePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("Api"),h=o("InviteItem"),f=o("BasePopwin"),m=o("DataMgr"),g=o("AudioMgr"),_=o("SDKAnalytics"),y=o("SDKEnums"),v=o("Enum"),b=o("OnlineMgr");function S(){var e=null!==l&&l.apply(this,arguments)||this;return e.item=null,e.content=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,l=f.default),(d=S).prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),this.type=e.data.type},S.prototype.onOpend=function(){l.prototype.onOpend.call(this),this.reqList(this.type),m.DataMgr.Point.updatePoint(v.ModuleType.TempInvite)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),S.prototype.reqList=function(e){var t=this;p.default.getListByInvite({invite_type:e}).then(function(e){e=e.invite_list,t.renderList(e)})},S.prototype.renderList=function(e){var t=this;(e=e||[]).forEach(function(e,n){return t.createNode(n,e)})},S.prototype.createNode=function(e,t){var n=cc.instantiate(this.item);this.content.addChild(n),n.getComponent(h.default).init(e,t)},S.prototype.onBack=function(){return c(this,void 0,void 0,function(){return u(this,function(){return g.AudioMgr.button(),this.doClose(d,!1),_.default.event(y.EventKeys.InviteClose,y.EventFrom.Invite),[2]})})},S.prefabPath="prefab/popwin/popwin_invite",s([i(cc.Prefab)],S.prototype,"item",void 0),s([i(cc.Node)],S.prototype,"content",void 0),o=d=s([o],S),r.default=o,cc._RF.pop()},{}],InvitefirendPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"ae037zAEmBOpb/kPxUqpF2x","InvitefirendPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("BasePopwin"),h=o("AudioMgr"),f=o("SDKAnalytics"),m=o("SDKEnums"),g=o("Enum"),_=o("OnlineMgr"),y=o("Friends"),v=o("BubbleMgr"),b=o("AppDataMgr");function S(){var e=null!==l&&l.apply(this,arguments)||this;return e.content=null,e.invitebtns=[],e.friends=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,l=p.default),(d=S).prototype.onLoad=function(){var e=this;this.invitebtns.forEach(function(t,n){t.node.on("click",function(){f.default.event(m.EventKeys.invite_p2p_click,""),e.friends.Inivte(n)})})},S.prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),b.AppDataMgr.set(g.AppDataKey.InviteFriendOpen,1)},S.prototype.onOpend=function(){l.prototype.onOpend.call(this),f.default.event(m.EventKeys.invite_p2p_show,""),this.friends.show()},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),S.prototype.refresh=function(){h.AudioMgr.button(),this.friends.show()},S.prototype.onBack=function(){return c(this,void 0,void 0,function(){return u(this,function(){return h.AudioMgr.button(),this.doClose(d,!1).then(function(){v.default.I.removePopwinList()}),f.default.event(m.EventKeys.InviteClose,m.EventFrom.Invite),[2]})})},S.prefabPath="prefab/popwin/popwin_invitefriend",s([i(cc.Node)],S.prototype,"content",void 0),s([i(cc.Button)],S.prototype,"invitebtns",void 0),s([i(y.default)],S.prototype,"friends",void 0),o=d=s([o],S),r.default=o,cc._RF.pop()},{}],ItemTipPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"f44f34dlLpProI+GiFqUnKk","ItemTipPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("SDKEnums"),h=o("DataMgr"),f=o("ShareVideo"),m=o("SDKTools"),g=o("EventEnum"),_=o("ViewMgr"),y=o("OnlineMgr"),v=o("Display"),b=o("AudioMgr"),S=o("BaseAnimPopwin"),w=o("BubbleMgr"),A=o("Enum");function M(){var e=null!==l&&l.apply(this,arguments)||this;return e.m_isreturnMain=!1,e.m_DesFrom="",e.m_Icons=[],e.m_ID=0,e.labdes=null,e.diamondobj=null,e.sharevideo1=null,e.img=null,e.isdouble=!1,e.time=0,e.Diamond=0,e.reward=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(M,l=S.default),d=M,Object.defineProperty(M.prototype,"ShareKey",{get:function(){return p.ShareKeys.ItemTipUse},enumerable:!0,configurable:!0}),M.openTip=function(e){return this.isopen=!0,0<h.DataMgr.User.getPropNum(A.PropsType.Boom)?w.default.I.addPopwinList(d,{id:A.PropsType.Boom,type:e}):0<h.DataMgr.User.getPropNum(A.PropsType.Light)?w.default.I.addPopwinList(d,{id:A.PropsType.Light,type:e}):0<h.DataMgr.User.getPropNum(A.PropsType.RainbowBall)?w.default.I.addPopwinList(d,{id:A.PropsType.RainbowBall,type:e}):0<h.DataMgr.User.getPropNum(A.PropsType.Laser)?w.default.I.addPopwinList(d,{id:A.PropsType.Laser,type:e}):w.default.I.addPopwinList(d,{id:A.PropsType.Boom,type:e}),!0},M.prototype.onTouchMask=function(){this.isHide||this.onback()},M.prototype.addEvent=function(){l.prototype.addEvent.call(this),m.default.bindEvent(g.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},M.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),m.default.removeEvent(g.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.onOpen=function(e){return c(this,void 0,void 0,function(){return u(this,function(){return l.prototype.onOpen.call(this,e),d.isopen=!0,this.m_ID=e.data.id,this.img.spriteFrame=this.m_Icons[this.m_ID],this.labdes.string=this.getDes(this.m_ID),this.initRewardUI(),v.default.getViewOffset(),[2]})})},M.prototype.handleTacticUpdate=function(){this.initRewardUI()},M.prototype.initRewardUI=function(){h.DataMgr.User.getPropNum(this.m_ID)<=0?this.sharevideo1.updateWith(this.ShareKey):this.sharevideo1.getComponent(cc.Animation).play("state_random_free")},M.prototype.onVideoUse=function(){b.AudioMgr.button(),m.default.dispatch(this.ShareKey,{success:this.handleReward,context:this})},M.prototype.getDes=function(e){return 0==e?"Eliminate bubbles around the explosion at one time":1==e?"Eliminate all bubbles on the straight line at one time":2==e?"Eliminate all bubbles in a row":3==e?"Combine and eliminate bubbles of any color":4==e?"You can use exchange bubbles unlimited times in this level":""},M.prototype.onuse=function(){b.AudioMgr.button(),javaCall.ShowReward(this,function(e){console.log("callback===============>ItemTipPopwin.js"),0<h.DataMgr.User.getPropNum(e.m_ID)?(e.useitem(e.m_ID),e.handleClose(!1)):m.default.dispatch(e.ShareKey,{success:e.handleReward,context:e})})},M.prototype.handleReward=function(){var e=this;h.DataMgr.User.reqProps(this.m_ID,1).then(function(){e.useitem(e.m_ID),e.handleClose(!1)})},M.prototype.useitem=function(e){v.default.s_CloseItemTipTimes=0,w.default.I.comGameUIWraps.actionItemUse(e)},M.prototype.onback=function(){b.AudioMgr.button(),this.handleClose(!1),v.default.s_CloseItemTipTimes++},M.prototype.handleClose=function(e){return void 0===e&&(e=!0),c(this,void 0,Promise,function(){return u(this,function(){return[2,_.ViewMgr.closePopwin(d,{anim:e}).then(function(){w.default.I.removePopwinList(),d.isopen=!1})]})})},M.prefabPath="prefab/popwin/popwin_itemtip",M.isopen=!1,s([i(cc.SpriteFrame)],M.prototype,"m_Icons",void 0),s([i(cc.Label)],M.prototype,"labdes",void 0),s([i(cc.Node)],M.prototype,"diamondobj",void 0),s([i(f.default)],M.prototype,"sharevideo1",void 0),s([i(cc.Sprite)],M.prototype,"img",void 0),o=d=s([o],M),r.default=o,cc._RF.pop()},{}],LayerCtr:[function(e,t,n){"use strict";cc._RF.push(t,"3b23a0z2k9PI7njXXU4DL2x","LayerCtr");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("EditorMgr");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_state=0,e}i=(o=cc._decorator).ccclass,o.property,a(l,c=cc.Component),l.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this),this.node.children.forEach(function(t){t.children.forEach(function(t){t.name="0",e.setIcon(t,+t.name),t.on(cc.Node.EventType.MOUSE_MOVE,e.ontouchMove,e,!0)})})},l.prototype.InitBaseLayer=function(e){var t=this;if(this.node.children.forEach(function(e){e.children.forEach(function(e){e.name="0",t.setIcon(e,+e.name)})}),!(e.length<=0))for(var n=0;n<e.length;n++)for(var o=e[n],i=this.node.children[n],r=0;r<o.length;r++){var a=o[r],s=i.children[r];s.name=a.toString(),this.setIcon(s,a),this.checkmap(i)}},l.prototype.getMapData=function(){for(var e=[],t=this,n=0;n<this.node.children.length;n++)!function(n){for(var o=t.node.children[n],i=0;i<o.children.length;i++)o.children[i].name;e[n]=[],o.children.forEach(function(t,o){e[n][o]=+t.name})}(n);return e},l.prototype.onMouseDown=function(e){(e=e.getButton())===cc.Event.EventMouse.BUTTON_LEFT?this.m_state=1:e===cc.Event.EventMouse.BUTTON_MIDDLE||e===cc.Event.EventMouse.BUTTON_RIGHT&&(this.m_state=-1)},l.prototype.onMouseUp=function(){this.m_state=0},l.prototype.checkmap=function(e){var t=this,n=+e.name;1+n==this.node.childrenCount&&((e=cc.instantiate((1+n)%2==0?this.node.children[0]:this.node.children[1])).name=(1+n).toString(),e.parent=this.node,e.children.forEach(function(e){e.name="0",t.setIcon(e,+e.name),e.on(cc.Node.EventType.MOUSE_MOVE,t.ontouchMove,t,!0)}))},l.prototype.ontouchMove=function(e){null==u.default.I.m_CurChoose||Number.isNaN(u.default.I.m_CurChoose)||(1==this.m_state?(this.node.children.indexOf(e.currentTarget),e.currentTarget.name=u.default.I.m_CurChoose.toString(),this.setIcon(e.currentTarget,u.default.I.m_CurChoose)):-1==this.m_state&&(e.currentTarget.name="0",this.setIcon(e.currentTarget,0)),this.checkmap(e.currentTarget.parent),e.stopPropagationImmediate())},l.prototype.setIcon=function(e,t){e.getComponent(cc.Sprite).spriteFrame=u.default.I.getIcon(t)},l.prototype.start=function(){},l.prototype.initState=function(){this.m_state=0},i=s([i],l),r.default=i,cc._RF.pop()},{}],LayerMgr:[function(e,t,n){"use strict";cc._RF.push(t,"51adaQ+7ydE8a3PP+Jy+1Nl","LayerMgr");var o,i=n;function r(){this.layers=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.init=function(){this.layers.forEach(function(e){return e.destroy()}),this.layers=[];for(var e=cc.director.getScene(),t=cc.winSize,n=["Bg","Popwin","Modal","Tips","Mask","Guide"],o=0;o<n.length;o++){var i=new cc.Node;i.anchorX=.5,i.anchorY=.5,i.setContentSize(t),i.setPosition(t.width/2,t.height/2),i.name=n[o],e.addChild(i),this.layers.push(i)}},r.prototype.addTo=function(e,t){var n=this.layers[e];cc.isValid(n)||this.init(),t.parent=this.layers[e]},r.prototype.getLayer=function(e){return this.layers[e]},Object.defineProperty(r,"I",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),o=r,i.default=o,(i=i.Layer||(i.Layer={}))[i.Bg=0]="Bg",i[i.Popwin=1]="Popwin",i[i.Modal=2]="Modal",i[i.Tips=3]="Tips",i[i.Mask=4]="Mask",i[i.Guide=5]="Guide",cc._RF.pop()},{}],LevelData:[function(e,t,n){"use strict";cc._RF.push(t,"094c0mYWllGipF7VvMBvITW","LevelData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],LevelModel:[function(e,t,n){"use strict";cc._RF.push(t,"db154LkbyZEyad2Dv7Upoa/","LevelModel");var o=e,i=n,r=__EXTENDS__(),a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var s,c=o("BaseModel"),u=o("Const"),l=o("Helper"),d=o("SDKTools"),p=o("Display"),h=o("ArrayUtils"),f=o("SDKEnums");function m(){var e=s.call(this)||this;return e.dataObjs={},e}r(m,s=c.default),m.prototype.init=function(e){var t=this;e=h.default.getD(e.json.data,p.default.getDes(),l.default.getN()),JSON.parse(e).levellist.forEach(function(e){t.dataObjs[e.id]=a({},e)})},m.prototype.getData=function(e){var t,n=(t=d.default.getParamsObj(f.OnlineKeys.level_loop_scope,[10,u.default.LoopLvMax]))[0];return(t=t[1])<e&&(e=(e-n)%(t-n+1)+n),this.dataObjs[e]},m.prototype.convert=function(e){h.default.getA(JSON.stringify(e.json),p.default.getDes(),l.default.getN())},m.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(m,"I",{get:function(){return this.instance||(this.instance=new m)},enumerable:!0,configurable:!0}),m.instance=null,r=m,i.default=r,cc._RF.pop()},{}],LoadGame:[function(e,t,n){"use strict";cc._RF.push(t,"521dfS3r0dG5IQx6FbGoc0M","LoadGame");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=i("ViewMgr"),p=i("WXApi"),h=i("Debug"),f=i("SDKTools"),m=i("SDKEnums"),g=i("ArrayUtils"),_=i("SDKAnalytics"),y=i("Enum");function v(){var e=null!==l&&l.apply(this,arguments)||this;return e.mProgress=0,e}i=(o=cc._decorator).ccclass,o.property,a(v,l=cc.Component),v.prototype.action=function(e){this.params=e,this.loadState=0,this.mProgress=0,this.loadInfo=Object.create({state:0,scene:!1}),this.initRes()},v.prototype.initRes=function(){this.loadRes()},v.prototype.loadRes=function(){var e=this,t=(t=[]).map(function(){return function(){return Promise.resolve()}});g.default.queue(t).then(function(){return e.preloadScene()}).then(function(){return e.handleResSuccess()}).catch(function(){_.default.event(m.EventKeys.resource_redown_panel_show,""),f.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u6e38\u620f\u8d44\u6e90\u5305\u52a0\u8f7d\u5931\u8d25\u3002\u9519\u8bef\u7801\uff1a-1",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){_.default.event(m.EventKeys.resource_redown_retry,""),cc.director.loadScene("LoadScene",function(){d.ViewMgr.init()})}})})},v.prototype.preloadScene=function(){var e=this;return new Promise(function(t,n){cc.director.preloadScene(y.SceneTypes.GameScene,e.onProgress.bind(e,e.mProgress),e.onLoaded.bind(e,t,n))})},v.prototype.setProgress=function(e){this.mProgress+=e},v.prototype.onProgress=function(){},v.prototype.onLoaded=function(e,t,n){n?t(y.LoadType.Scene):e()},v.prototype.handleResSuccess=function(){this.loadState++,this.checkEnter()},v.prototype.checkEnter=function(){1===this.loadState&&this.enterGame()},v.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return this.params.before&&this.params.before.call(this.params.context),p.default.I.hideSinglegridad(),cc.director.loadScene(y.SceneTypes.GameScene,function(t){d.ViewMgr.init(),e.params.after&&e.params.after.call(e.params.context),h.default.warn("\u6e38\u620f\u573a\u666f\u52a0\u8f7d\u6210\u529f: "+y.SceneTypes.GameScene,t)}),[2]})})},i=s([i],v),r.default=i,cc._RF.pop()},{}],LoadHDImage:[function(e,t,n){"use strict";cc._RF.push(t,"fca44TQIHxOvrI4XEdnSgng","LoadHDImage");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Debug");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.imgName="",e.imgType=0,e.relativePath="",e.initialeSprite=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),l.prototype.onLoad=function(){this.initData()},l.prototype.start=function(){this.initialSprite()},l.prototype.initialSprite=function(){var e,t,n=this.initialeSprite;!n||(e=this.getCompSprite())&&((t=this.getHDTexture())?this.setImgTexture(e,t):e.spriteFrame=n)},l.prototype.initData=function(){this.isLoaded=!1,this.imgName&&(this.spriteName=this.imgName);var e=this.getCompSprite();e&&e.spriteFrame&&e.spriteFrame&&(e=e.spriteFrame.getTexture())&&(e=(e=e.url.split("."))[e.length-1],this.imgExtName=e)},l.prototype.setSpriteName=function(e){return this.spriteName=e,this},l.prototype.setRelativePath=function(e){return this.relativePath=e,this},l.prototype.getHDTexture=function(){var e=this.getImgInfo().imgPath;return(e=cc.loader.getRes(e))&&e.loaded?e:null},l.prototype.loadHD=function(){var e=this;if(!cc.isValid(this.node))return u.default.error("\u3010LoadHDImage\u3011\u8282\u70b9\u88ab\u9500\u6bc1"),Promise.resolve(0);if(this.isLoaded)return u.default.error("\u3010LoadHDImage\u3011\u5df2\u7ecf\u662f\u9ad8\u6e05\u56fe\u7247"),Promise.resolve(1);if(!this.relativePath)return u.default.error("\u3010LoadHDImage\u3011\u672a\u8bbe\u7f6e\u9ad8\u6e05\u56fe\u7247\u76f8\u5bf9\u4e8ecdn\u76ee\u5f55dynamic\u7684\u8def\u5f84"),Promise.resolve(0);if(!this.spriteName)return u.default.error("\u3010LoadHDImage\u3011\u672a\u8bbe\u7f6e\u9ad8\u6e05\u56fe\u7247\u540d\u79f0"),Promise.resolve(0);var t,n=(t=this.getImgInfo()).imgPath,o=t.extName,i=this.getCompSprite();return(t=cc.loader.getRes(n))?(this.setImgTexture(i,t),Promise.resolve(1)):(u.default.error("\u3010LoadHDImage\u3011imgPath",n),new Promise(function(t){cc.loader.load({url:n,type:o},function(n,o){n?t(0):(e.setImgTexture(i,o),t(1))})}))},l.prototype.setImgTexture=function(e,t){t&&cc.isValid(e)&&(this.isLoaded=!0,e.spriteFrame=new cc.SpriteFrame(t))},l.prototype.getCompSprite=function(){var e=this.node.getComponent(cc.Sprite);return cc.isValid(e)?e:null},l.prototype.getImgInfo=function(){var e=this.relativePath,t=this.spriteName,n="";switch(this.imgType){case 0:n="png";break;case 1:n="jpg";break;case 2:n="jpeg"}return{imgPath:(cc.sys.isBrowser?"res/import/":"")+"dynamic/"+e+"/"+t+"."+n,extName:n}},s([i({tooltip:"\u9ad8\u6e05\u56fe\u7247\u7684\u540d\u79f0"})],l.prototype,"imgName",void 0),s([i({tooltip:"\u9ad8\u6e05\u56fe\u7247\u7684\u683c\u5f0f\uff0c0\uff1apng\uff0c1\uff1ajpg\uff0c2\uff1ajpeg"})],l.prototype,"imgType",void 0),s([i({tooltip:"\u9ad8\u6e05\u56fe\u7247\u7684\u76f8\u5bf9\u4e8ecdn\u76ee\u5f55dynamic\u7684\u8def\u5f84"})],l.prototype,"relativePath",void 0),s([i({type:cc.SpriteFrame,tooltip:"\u9ad8\u6e05\u56fe\u7247\u7684\u76f8\u5bf9\u4e8ecdn\u76ee\u5f55dynamic\u7684\u8def\u5f84"})],l.prototype,"initialeSprite",void 0),o=s([o],l),r.default=o,cc._RF.pop()},{}],LoadHome:[function(e,t,n){"use strict";cc._RF.push(t,"a5e14A5OaFEEqDSy95m4T9Z","LoadHome");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=i("ViewMgr"),p=i("SDKTools"),h=i("DataMgr"),f=i("SDKEnums"),m=i("ArrayUtils"),g=i("AudioMgr"),_=i("AudioEnum"),y=i("SDKAnalytics"),v=i("MapConfig"),b=i("LoaderMgr"),S=i("Enum");function w(){return null!==l&&l.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(w,l=cc.Component),w.prototype.action=function(e){this.params=e,this.loadState=0,this.loadInfo=Object.create({state:0,plot:!1,task:!1,scene:!1}),this.timeErrors=((e={})[S.LoadType.Scene]=0,e),this.initUI(),this.initRes(),this.preloadLivingRoom()},w.prototype.initUI=function(){this.onWaitEnd()},w.prototype.onWaitEnd=function(){this.loadState++,this.checkEnter()},w.prototype.initRes=function(){this.loadRes(-1)},w.prototype.loadRes=function(e){var t=this,n=[];this.loadInfo.plot||n.push(S.LoadType.Plot),this.loadInfo.task||n.push(S.LoadType.Task),n=n.map(function(e){return function(){switch(e){case S.LoadType.Plot:return t.loadResPlot();case S.LoadType.Task:return t.loadResTask()}}}),-1!=e&&this.timeErrors.hasOwnProperty(e)&&y.default.event("enter_home_retry_"+e+"_"+this.timeErrors[e],""),m.default.queue(n).then(function(){return t.preloadScene()}).then(function(){return t.handleResSuccess()}).then(function(){-1!=e&&y.default.event("enter_home_retry_success","")}).catch(function(n){y.default.event(f.EventKeys.resource_redown_panel_show,""),-1===e&&y.default.event("enter_home_error_"+n,""),p.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u6e38\u620f\u8d44\u6e90\u5305\u52a0\u8f7d\u5931\u8d25\u3002\u9519\u8bef\u7801\uff1a-1",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){y.default.event(f.EventKeys.resource_redown_retry,""),t.timeErrors.hasOwnProperty(n)&&t.timeErrors[n]++,cc.director.loadScene("LoadScene",function(){d.ViewMgr.init()})}})})},w.prototype.loadResPlot=function(){var e=this;return new Promise(function(t){b.LoaderMgr.loadPrefabWithUrl("prefab/game/game_story").then(function(){e.loadInfo.plot=!0,t(null)}).catch(function(){e.loadInfo.plot=!0,t(null)})})},w.prototype.loadResTask=function(){var e=this,t=[];t.push(b.LoaderMgr.loadPrefabWithUrl("prefab/game/game_fit-task"));var n=h.DataMgr.User.getRuningTasks();return n&&n.length&&n.forEach(function(n){n=h.DataMgr.Milestone.getTaskById(n.id),t.push(e.loadTaskTextSprite(n)),t.push(e.loadTaskIconSprite(n))}),new Promise(function(n){Promise.all(t).then(function(){e.loadInfo.task=!0,n(null)}).catch(function(){e.loadInfo.task=!0,n(null)})})},w.prototype.loadTaskTextSprite=function(e){return this.loadTaskSprite(e,1)},w.prototype.loadTaskIconSprite=function(e){return this.loadTaskSprite(e,0)},w.prototype.loadTaskSprite=function(e,t){var n=e.icon;return e=e.room_type,t=0===t?"icon":"txt",e=v.MapConfig.PrefixRoom+"/"+v.MapConfig.RoomData[e].name+"-task",b.LoaderMgr.loadSpriteFrameWithUrl(e+"/"+t+"_"+n)},w.prototype.preloadScene=function(){var e=this;return new Promise(function(t,n){cc.director.preloadScene(v.MapConfig.HomeJumpScene,e.onProgress.bind(e,0),e.onLoaded.bind(e,t,n))})},w.prototype.onProgress=function(){},w.prototype.onLoaded=function(e,t,n){n?(this.loadInfo.scene=!1,t(S.LoadType.Scene)):(this.loadInfo.scene=!0,e())},w.prototype.handleResSuccess=function(){this.loadState++,this.checkEnter()},w.prototype.checkEnter=function(){2===this.loadState&&this.enterGame()},w.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(){return this.params.before&&this.params.before.call(this.params.context),cc.director.loadScene(v.MapConfig.HomeJumpScene,function(){g.AudioMgr.stopMusic(),g.AudioMgr.playMusic(_.AudioEnum.music3,!0),d.ViewMgr.init(),e.params.after&&e.params.after.call(e.params.context)}),[2]})})},w.prototype.preloadLivingRoom=function(){for(var e=this,t=h.DataMgr.Milestone.getOldFurnitures([S.RoomType.Living]),n=h.DataMgr.User.Milestone.complete_tasks,o={},i=this,r=0;r<t.length;r++)!function(r){var a,s,c=t[r].id;c&&(s=h.DataMgr.Milestone.getTaskIdByFurnitureId(c),r=0!=n.filter(function(e){return s===e}).length,o[s]||(r?(o[s]=!0,r=(a=h.DataMgr.Milestone.getTaskById(s).add_furnitures)[0],(a=(r=h.DataMgr.Milestone.getTaskOtherByFurnitureId(r))&&0<=n.indexOf(r.id)&&r.add_furnitures.length?r.add_furnitures.concat(a.slice(1)):a).forEach(function(t){var n=h.DataMgr.Milestone.getFurnitureById(t);t=(t=h.DataMgr.User.getFurnitureSkinById(t))?t.select:0,e.loadSprite(t,n)})):(a=h.DataMgr.Milestone.getFurnitureById(c),c=(c=h.DataMgr.User.getFurnitureSkinById(c))?c.select:0,i.loadSprite(c,a))))}(r);return m.default.queue([])},w.prototype.loadSprite=function(e,t){var n=this,o=t.skin_type,i=t.res_img,r=t.skin_num;return i?new Promise(function(a){var s=v.MapConfig.PrefixRoom+"/"+v.MapConfig.RoomData[o].name,c=i.replace("_1","").replace("_2","").replace("_3","");c=3===r?c+"_"+e:""+i,b.LoaderMgr.loadSpriteFrameWithUrl(s+"/"+c).then(function(e){cc.dynamicAtlasManager.insertSpriteFrame(e),a(null)},function(){return n.loadSprite(e,t)}).catch(function(){})}):Promise.resolve()},i=s([i],w),r.default=i,cc._RF.pop()},{}],LoadPlist:[function(e,t,n){"use strict";cc._RF.push(t,"bb53505sb1FXZ3D5hBESIlI","LoadPlist");var o,i=n;function r(){this.BRACE_REGEX=/[\{\}]/g}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.parseSize=function(e){var t=(e=e.slice(1,-1)).split(",");return e=parseFloat(t[0]),t=parseFloat(t[1]),new cc.Size(e,t)},r.prototype.parseVec2=function(e){var t=(e=e.slice(1,-1)).split(",");return e=parseFloat(t[0]),t=parseFloat(t[1]),new cc.Vec2(e,t)},r.prototype.parseTriangles=function(e){return e.split(" ").map(parseFloat)},r.prototype.parseVertices=function(e){return e.split(" ").map(parseFloat)},r.prototype.parseRect=function(e){return e=(e=e.replace(this.BRACE_REGEX,"")).split(","),new cc.Rect(parseFloat(e[0]||"0"),parseFloat(e[1]||"0"),parseFloat(e[2]||"0"),parseFloat(e[3]||"0"))},r.prototype.parsePlist=function(e,t){var n,o=e.metadata,i=e.frames,r=(e=new cc.SpriteAtlas).getSpriteFrames();for(n in i){var a=i[n],s=!1,c=void 0,u=void 0,l=void 0;0===o.format?(s=!1,c="{"+a.originalWidth+","+a.originalHeight+"}",u="{"+a.offsetX+","+a.offsetY+"}",l="{{"+a.x+","+a.y+"},{"+a.width+","+a.height+"}}"):1===o.format||2===o.format?(s=a.rotated,c=a.sourceSize,u=a.offset,l=a.frame):3===o.format&&(s=a.textureRotated,c=a.spriteSourceSize,u=a.spriteOffset,l=a.textureRect);var d=new cc.SpriteFrame;if(d.setTexture(t,this.parseRect(l),!!s,this.parseVec2(u),this.parseSize(c)),a.triangles){var p=this.parseVertices(a.vertices),h=this.parseVertices(a.verticesUV);d.vertices={triangles:this.parseTriangles(a.triangles),x:[],y:[],u:[],v:[]};for(var f=0;f<p.length;f+=2)d.vertices.x.push(p[f]),d.vertices.y.push(p[f+1]);for(f=0;f<h.length;f+=2)d.vertices.u.push(h[f]),d.vertices.v.push(h[f+1])}r[cc.path.mainFileName(n)]=d}return e._spriteFrames=r,e},r.prototype.load=function(e,t,n,o){var i=this,r=e+"/"+t;cc.loader.load(r,function(t,a){return t?o(t):(r=e+"/"+n,void cc.loader.load(r,function(e,t){if(e)return o(e);t=i.parsePlist(a,t),o(null,t)}))})},Object.defineProperty(r,"I",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r._instance=null,o=r,i.default=o,cc._RF.pop()},{}],LoadScene:[function(e,t,n){"use strict";cc._RF.push(t,"ef6f6SX7FRAOrbvCxkiKHw2","LoadScene");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0}),o("Main");var l,d,p=o("Api"),h=o("ViewMgr"),f=o("Const"),m=o("SDKTools"),g=o("Display"),_=o("ABTools"),y=o("DataMgr"),v=o("SDKEnums"),b=o("AudioMgr"),S=o("ArrayUtils"),w=o("HandleData"),A=o("SDKAnalytics"),M=o("LocalMgr"),T=o("AudioEnum"),P=o("MapConfig"),E=o("LoaderMgr"),D=o("OnlineMgr"),I=o("AppDataMgr"),C=o("Enum");function B(){var e=null!==d&&d.apply(this,arguments)||this;return e.txtProgress=null,e.progressBar=null,e.persistNode=null,e.errorNum=0,e.mProgress=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(B,d=cc.Component),B.prototype.start=function(){this.initData(),this.initUI(),this.initEnv(),this.yinsi.enabled=!1},B.prototype.initData=function(){this.loadInfo=Object.create({stateEnter:0,stateLevel:0,json:!1,plot:!1,scene:!1}),this.errorNum=0,this.timeErrors=((e={})[l.Json]=0,e[l.Json]=0,e[l.Scene]=0,e);var e=.5<Math.random()?1:0;M.LocalMgr.isExist("sdk_loadingbgab")&&(e=M.LocalMgr.get("sdk_loadingbgab")),g.default.s_loadingbgab=e},B.prototype.initUI=function(){this.persistNode.zIndex=1e4,cc.game.addPersistRootNode(this.persistNode)},B.prototype.initEnv=function(){return c(this,void 0,void 0,function(){var e,t=this;return u(this,function(n){switch(n.label){case 0:return[4,this.awaitWrap(m.default.env(f.default.Version))];case 1:if(n.sent()[0]){if(!(this.errorNum<=3))return[2,m.default.showModal({title:"Friendly tips",content:"Failed to initialize the environment. Please click [Retry]",showCancel:!1,confirmText:"Retry",success:function(){t.initEnv&&t.initEnv()}})];this.initEnv(),this.errorNum++}return(e=m.default.CdnUrl)&&"object"==typeof window&&"object"==typeof window.wxDownloader&&(window.wxDownloader.REMOTE_SERVER_ROOT=""+e+f.default.GameEnName),this.loadLogin(!1),this.loadRes(-1),m.default.updateOnlineParams().then(function(){return t.initOnlineParmas()}).catch(function(){return t.initOnlineParmas()}),[2]}})})},B.prototype.initOnlineParmas=function(){_.default.I.init(),D.OnlineMgr.init(),this.checkStateLevel()},B.prototype.loadRes=function(e){var t=this,n=[];this.loadInfo.json||n.push(l.Json),n=n.map(function(e){return function(){if(e===l.Json)return t.loadResJson()}}),S.default.queue(n).then(function(){return t.preloadScene()}).then(function(){return t.handleResSuccess()}).then(function(){-1!=e&&A.default.event("enter_game_retry_success","")}).catch(function(n){A.default.event(v.EventKeys.resource_redown_panel_show,""),-1===e&&A.default.event("enter_game_error_"+n,""),m.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u6e38\u620f\u8d44\u6e90\u5305\u52a0\u8f7d\u5931\u8d25\u3002\u9519\u8bef\u7801\uff1a-1",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){A.default.event(v.EventKeys.resource_redown_retry,""),t.timeErrors.hasOwnProperty(n)&&t.timeErrors[n]++,cc.director.loadScene(C.SceneTypes.LoadScene,function(){h.ViewMgr.init()})}})})},B.prototype.loadResJson=function(){var e=this;return new Promise(function(t,n){var o=P.MapConfig.JsonPath,i=o.Zip,r=o.Plot,a=o.Milestone,s=o.RedPacket,c=o.Seedbase,u=[r,a,s,c];i=cc.url.raw("resources/data/"+i),cc.loader.load({url:i,type:"binary"},function(o,i){o?(e.loadInfo.json=!1,n(l.Json)):JSZip.loadAsync(i).then(function(e){var t,n,o=[];for(t in e.files)e.files.hasOwnProperty(t)&&0<=u.indexOf(t)&&(n=e.files[t],o.push(n.async("text")));var i=Object.keys(e.files).filter(function(e){return 0<=u.indexOf(e)}).map(function(e){return e.replace("configs/","")});return new Promise(function(e){return Promise.all(o).then(function(t){return e([i,t])})})}).then(function(n){var o=n[0],i=n[1];o.forEach(function(e,t){var n=JSON.parse(i[t]);switch(e){case r:y.DataMgr.Plot.setCfg(n);break;case a:y.DataMgr.Milestone.setCfg(n);break;case s:y.DataMgr.Config.initRedPacketDB(n);break;case c:y.DataMgr.Config.initSeedDB(n)}}),e.loadInfo.json=!0,e.setProgress(.1),t(null)}).catch(function(){e.loadInfo.json=!1,n(l.Json)})})})},B.prototype.preloadScene=function(){var e=this;return new Promise(function(t,n){cc.director.preloadScene(C.SceneTypes.GameScene,e.onProgress.bind(e,e.mProgress),e.onLoaded.bind(e,t,n))})},B.prototype.onProgress=function(e,t,n,o){o&&cc.isValid(this.progressBar)&&(e+=t/n*(1-e),this.progressBar.progress<e&&(this.mProgress=e,this.progressBar.progress=e,this.txtProgress.string="\u6b63\u5728\u51c6\u5907\u65b0\u7684\u6ce1\u6ce1\u2026\u2026"))},B.prototype.onLoaded=function(e,t,n){n?t(l.Scene):e()},B.prototype.setProgress=function(e){this.mProgress+=e,this.progressBar.progress=this.mProgress},B.prototype.handleResSuccess=function(){var e=this;y.DataMgr.init(),A.default.newLoadingFinish(!1).then(function(){A.default.event(v.EventKeys.FirstLogin_Loading100Reach,"loading\u9875\u9762"),e.checkStateEnter()}).catch(function(){e.checkStateEnter()})},B.prototype.loadLogin=function(e){var t=this;m.default.login(e).then(function(e){return t.handleLoginSuccess(e)}).catch(function(e){return t.handleLoginFailure(e)})},B.prototype.handleLoginSuccess=function(e){w.default.doSuccess(e),this.checkStateLevel();var t=I.AppDataMgr.get(C.AppDataKey.UserInviteUid,"");e=I.AppDataMgr.get(C.AppDataKey.UserInviteType,0),t&&e&&t+""!=y.DataMgr.UserBase.ID+""&&(p.default.setInviteFriend({invite_uid:t,invite_type:e}),I.AppDataMgr.set(C.AppDataKey.UserInviteUid,0)),A.default.event(v.EventKeys.FirstLogin_LoadingStart,"loading\u9875\u9762")},B.prototype.handleLoginFailure=function(){var e=this;m.default.showModal({title:"Friendly tips",content:"Login failed. Please click [Login again]",showCancel:!1,confirmText:"Sign in again",success:function(){e.loadLogin&&e.loadLogin(!0)}})},B.prototype.checkStateLevel=function(){this.loadInfo.stateLevel+=1,2===this.loadInfo.stateLevel&&(y.DataMgr.Task.init(),this.doLoadLevel())},B.prototype.checkStateEnter=function(){this.loadInfo.stateEnter+=1,2===this.loadInfo.stateEnter&&this.doEnterGame()},B.prototype.doLoadLevel=function(){var e=this,t=_.default.I.wxABlv==C.LvGroup.A?"data/levelDataNewA":_.default.I.wxABlv==C.LvGroup.B?"data/levelDataNewB":"data/levelDataNewC";E.LoaderMgr.loadResWithUrl(t,cc.JsonAsset,{success:function(t){y.DataMgr.Level.init(t),e.setProgress(.1),e.checkStateEnter()},failure:function(){m.default.showModal({title:"Friendly tips",content:"Game level loading failed\u3002errcode\uff1a-1000",showCancel:!1,confirmText:"Retry",success:function(){e.doLoadLevel()}})}})},B.prototype.doEnterGame=function(){return javaCall.LOGINUI(),c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return m.default.checkUpdate(),[4,m.default.getAllData().catch(function(){})];case 1:return e=t.sent()||M.LocalMgr.get("WebData")||{base_data:{}},w.default.doSuccess(e),2<=y.DataMgr.User.CurLevel&&A.default.active(),cc.director.loadScene(C.SceneTypes.GameScene,function(){b.AudioMgr.playMusic(T.AudioEnum.bubble_bgm1,!0),h.ViewMgr.init()}),[2]}})})},B.prototype.awaitWrap=function(e){return c(this,void 0,void 0,function(){return u(this,function(){return[2,e.then(function(e){return[null,e]}).catch(function(e){return[e,null]})]})})},s([i(cc.Label)],B.prototype,"txtProgress",void 0),s([i(cc.Label)],B.prototype,"yinsi",void 0),s([i(cc.ProgressBar)],B.prototype,"progressBar",void 0),s([i(cc.Node)],B.prototype,"persistNode",void 0),o=s([o],B),r.default=o,(o=l=l||{})[o.None=-1]="None",o[o.Json=1]="Json",o[o.Room=3]="Room",o[o.Plot=4]="Plot",o[o.Guide=5]="Guide",o[o.Scene=6]="Scene",o[o.Level=7]="Level",cc._RF.pop()},{}],LoaderCfg:[function(e,t,n){"use strict";cc._RF.push(t,"0ef76Ip3qpBsKzS8zGLOQnZ","LoaderCfg");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ResJson={Maps:"config/maps"},cc._RF.pop()},{}],LoaderMgr:[function(e,t,n){"use strict";cc._RF.push(t,"292b2MWvV5LBq/39PVUk8RV","LoaderMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Helper");function a(){this.resLoadNumMap=null,this.resLoadNumMap=new Map}a.prototype.loadSpriteFramesWithUrl=function(e){var t=this;return new Promise(function(n,o){t.loadResWithUrl(e,cc.SpriteAtlas,{success:function(e){return n(e.getSpriteFrames())},failure:function(e){return o(e)},context:t})})},a.prototype.loadSpriteFrameWithUrl=function(e){var t=this;return new Promise(function(n,o){t.loadResWithUrl(e,cc.SpriteFrame,{success:function(e){return n(e)},failure:function(e){return o(e)},context:t})})},a.prototype.loadAudioWithUrl=function(e){var t=this;return new Promise(function(n,o){t.loadResWithUrl(e,cc.AudioClip,{success:function(e){return n(e)},failure:function(e){return o(e)},context:t})})},a.prototype.loadPrefabWithUrl=function(e){var t=this;return new Promise(function(n,o){t.loadResWithUrl(e,cc.Prefab,{success:function(e){return n(e)},failure:function(e){return o(e)},context:t})})},a.prototype.loadResWithUrl=function(e,t,n){var o=this;n=n||Object.create(null);var i=cc.loader.getRes(e,t);if(cc.isValid(i))return n.success&&n.success.call(n.context,i);n.prefix&&n.prefix.call(n.context),cc.loader.loadRes(e,t,function(e,t,o){n.progress&&n.progress.call(n.context,e,t,o)},function(t,i){if(t)return cc.error("ResManager loadRes Error",t),void(n.failure&&n.failure.call(n.context,t));n.success&&n.success.call(n.context,i);for(var r=0,a=cc.loader.getDependsRecursively(e);r<a.length;r++){var s=a[r],c=o.resLoadNumMap.get(s);null==c?o.resLoadNumMap.set(s,1):o.resLoadNumMap.set(s,c+1)}})},a.prototype.releaseRes=function(e){for(var t=0,n=cc.loader.getDependsRecursively(e);t<n.length;t++){var o=n[t],i=this.resLoadNumMap.get(o);r.default.isNullOrUndefined(i)||(i--,this.resLoadNumMap.set(o,Math.max(i,0)),i<=0&&(cc.loader.releaseRes(e),this.resLoadNumMap.delete(o)))}},a.prototype.loadRes=function(e,t){return new Promise(function(n){var o=cc.loader.getRes(e,t);if(cc.isValid(o))return n(o);cc.loader.loadRes(e,t,function(t,o){t?(cc.warn("loadAsset error",e),n(t)):cc.isValid(o)?n(o):n(t)})})},a.prototype.loadResArray=function(e,t){return new Promise(function(n){var o={},i=[];if(e.forEach(function(e){var n=cc.loader.getRes(e,t);cc.isValid(n)?o[e]=n:i.push(e)}),0==i.length)return n(o);cc.loader.loadResArray(i,t,function(e){if(e)return n(null);var r=!0;i.forEach(function(e){var n=cc.loader.getRes(e,t);cc.isValid(n)?o[e]=n:r=!1}),n(r?o:null)})})},a.prototype.loadPrefabObj=function(e){return new Promise(function(t){var n=cc.loader.getRes(e,cc.Prefab);if(cc.isValid(n))return t(cc.instantiate(n));cc.loader.loadRes(e,cc.Prefab,function(e,n){!e&&cc.isValid(n)?t(cc.instantiate(n)):t(null)})})},Object.defineProperty(a,"I",{get:function(){return this._instance||(this._instance=new a)},enumerable:!0,configurable:!0}),a._instance=null,o=a,i.default=o,i.LoaderMgr=o.I,cc._RF.pop()},{}],LocalMgr:[function(e,t,n){"use strict";cc._RF.push(t,"9d5b54BTAVAiI5tWtMyj68r","LocalMgr");var o,i=n;function r(){this.store=cc.sys.localStorage}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(r,"timestamp",{get:function(){return+((new Date).getTime()/1e3).toFixed(0)},enumerable:!0,configurable:!0}),r.__isExpired=function(e){return!e||0<=r.timestamp-(e.timestamp+e.expiration)},r.prototype.isExist=function(e){return this.store.getItem(e)},r.prototype.set=function(e,t,n){return t={timestamp:r.timestamp,expiration:n=void 0===n?0:n,key:e,value:t},this.store.setItem(e,JSON.stringify(t)),this},r.prototype.get=function(e){var t;try{if(!(t=this.store.getItem(e)))return null;t=JSON.parse(t)}catch(e){return null}return t.expiration&&r.__isExpired(t)?(this.remove(e),null):t.value},r.prototype.remove=function(e){try{this.store.removeItem(e)}catch(e){}return this},r.prototype.clear=function(){try{this.store.clear()}catch(e){}return this},Object.defineProperty(r,"I",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r._instance=null,o=r,i.default=o,i.LocalMgr=o.I,cc._RF.pop()},{}],LocalModel:[function(e,t,n){"use strict";cc._RF.push(t,"8db28sz02pDD5ibfy8aINp5","LocalModel");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("DateUtils"),a=o("Enum"),s=o("LocalMgr");function c(){}c.prototype.getValueWithKey=function(e,t){void 0===t&&(t=0);var n=r.default.today;return(e=s.LocalMgr.get(e))&&void 0!==e[n]?e[n]:t},c.prototype.isDefaultWithKey=function(e){return!s.LocalMgr.isExist(e)||s.LocalMgr.get(e)},c.prototype.getWheelTicketNum=function(){return this.getValueWithKey(a.LocalDataKey.WheelTicketNum)},c.prototype.saveWheelTicketNum=function(){var e,t=r.default.today,n=this.getWheelTicketNum();s.LocalMgr.set(a.LocalDataKey.WheelTicketNum,((e={})[t]=n+1,e))},c.prototype.getAirshipGunsNum=function(){var e=s.LocalMgr.get(a.LocalDataKey.WheelTicketNum);return e&&+e||0},c.prototype.saveAirshipGunsNum=function(e){var t=this.getAirshipGunsNum();s.LocalMgr.set(a.LocalDataKey.WheelTicketNum,t+e)},c.prototype.isVibrateOpen=function(){return this.isDefaultWithKey(a.LocalDataKey.Vibrate)},c.prototype.saveVibrate=function(e){s.LocalMgr.set(a.LocalDataKey.Vibrate,e)},Object.defineProperty(c.prototype,"ServiceState",{get:function(){return s.LocalMgr.get(a.LocalDataKey.ServiceState)||a.RewardState.Not},enumerable:!0,configurable:!0}),c.prototype.saveServiceState=function(e){s.LocalMgr.set(a.LocalDataKey.ServiceState,e)},Object.defineProperty(c.prototype,"CollectState",{get:function(){return s.LocalMgr.get(a.LocalDataKey.CollectState)||a.RewardState.Not},enumerable:!0,configurable:!0}),c.prototype.saveCollectState=function(e){s.LocalMgr.set(a.LocalDataKey.CollectState,e)},Object.defineProperty(c.prototype,"AddDeskState",{get:function(){return s.LocalMgr.get(a.LocalDataKey.AddDeskState)||a.RewardState.Not},enumerable:!0,configurable:!0}),c.prototype.saveAddDeskState=function(e){s.LocalMgr.set(a.LocalDataKey.AddDeskState,e)},Object.defineProperty(c.prototype,"FloatingState",{get:function(){return s.LocalMgr.get(a.LocalDataKey.FloatingState)||a.RewardState.Not},enumerable:!0,configurable:!0}),c.prototype.saveFloatingState=function(e){s.LocalMgr.set(a.LocalDataKey.FloatingState,e)},Object.defineProperty(c,"I",{get:function(){return this._instance||(this._instance=new c)},enumerable:!0,configurable:!0}),c._instance=null,o=c,i.default=o,cc._RF.pop()},{}],LogUtils:[function(e,t,n){"use strict";cc._RF.push(t,"8a3afABtMBNhZy6I47+R4d7","LogUtils");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Const");function a(){}o("StringUtils"),a.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.default.Debug&&e.unshift("[DebugErr]")},a.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.default.Debug&&e.unshift("[DebugWarn]")},a.logger=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.default.Debug&&e.unshift("[DebugLog]")},a.loggerJson=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.default.Debug&&1!==e.length&&e.unshift("[DebugLog]")},o=a,i.default=o,cc._RF.pop()},{}],LvItem:[function(e,t,n){"use strict";cc._RF.push(t,"61a9aU2ndBPxZgpW62NjCjd","LvItem");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("AudioMgr"),l=i("BubbleMgr"),d=i("Action"),p=i("Display"),h=i("Const"),f=i("UserModel"),m=i("ExtScrollView"),g=i("ImageLabelNew"),_=i("ViewMgr"),y=i("UITask");function v(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_index=0,e}i=(o=cc._decorator).ccclass,o.property,a(v,c=m.ExtScrollItem),v.prototype.updateCell=function(e,t){t=Math.floor(t),this.m_index=t;for(var n=1;n<7;n++)(o=this.node.getChildByName("point_"+n)).active=!1;var o,i=h.default.MaxLv%6==0?h.default.MaxLv:h.default.MaxLv+(6-h.default.MaxLv%6);if(!(i/6<=t))for(this.tar=null,n=1;n<7&&!(i-6*t-(n-1)<=0);n++)i<i-6*t-(n-1)||(o=this.node.getChildByName("point_"+n),this.setLv(o,i-6*t-(n-1)))},v.prototype.Refresh=function(){this.updateCell(null,this.m_index)},v.prototype.update=function(){var e;this.tar&&l.default.I.isautomove&&8<=f.default.I.CurLevel+1&&f.default.I.CurLevel+1<=h.default.MaxLv-8&&(e=p.default.getTargetPos(this.tar,this.node).y,0!=p.default.getTargetPos(this.tar,this.node).y&&(cc.tween(this.node.parent).to(.5,{y:this.node.parent.y-e}).start(),this.tar=null,l.default.I.isautomove=!1))},v.prototype.setLv=function(e,t){var n,o,i,r,a;t>h.default.MaxLv?e.active=!1:(e.active=!0,a=f.default.I.getLeveldataByLv(t),n=e.getChildByName("img_lamp").getComponent(cc.Animation),r=e.getChildByName("img_lamp").getChildByName("txt_num").getComponent(g.default),i=(o=e.getChildByName("star_checkpoint_0")).getComponent(cc.Animation),r.node.children.forEach(function(e){e.active=!1}),r.setValue(t,"",!1),(r=e.getChildByName("img_round_now").getComponent(cc.Animation)).node.active=!1,o.active=!1,f.default.I.CurLevel+1==t&&(r.node.active=!0,o.active=!0,r.play("anim_checkpoint_round"),this.tar=e),a&&0<=a.star?(r=Math.ceil(t/20)-1,n.play("state_checkpoint_lamp"+r%6),0==(a=a.star)?(o.active=!0,d.default.playAnim(i.node,"state_checkpoint_star_0").then(function(){})):1==a?(o.active=!0,d.default.playAnim(i.node,"state_checkpoint_star_1").then(function(){})):2==a?(o.active=!0,d.default.playAnim(i.node,"state_checkpoint_star_2").then(function(){})):3==a&&(o.active=!0,d.default.playAnim(i.node,"state_checkpoint_star_3").then(function(){}))):(n.play("state_checkpoint_lamp_off"),i.play("state_checkpoint_star_0")),e.off(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){u.AudioMgr.button(),f.default.I.CurLevel+1<t?p.default.showTip("Come back to challenge after passing the previous level~"):_.ViewMgr.openPopwin(y.default,{data:{lv:t}})}))},i=s([i],v),r.default=i,cc._RF.pop()},{}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"f2044fhPydBvKTKXSan2TI3","Main");var o=e,i=n;__AWAITER__,__GENERATOR__,Object.defineProperty(i,"__esModule",{value:!0}),o("Api");var r=o("Const"),a=o("SDKTools"),s=(o("Display"),o("DataMgr")),c=o("ViewMgr"),u=o("DateUtils"),l=(o("SDKEnums"),o("EventMgr")),d=(o("SDKAnalytics"),o("EventEnum")),p=o("AppDataMgr"),h=o("PlatformUtils"),f=o("CollectPopwin"),m=o("AddDeskPopwin"),g=o("FloatingPopwin"),_=o("Enum");function y(){this.init()}y.prototype.init=function(){a.default.setBannerWidth(750,500),h.default.isTecent?(wx.onShow(this.onShow.bind(this)),wx.onHide(this.onHide.bind(this)),this.initWxCollect(1,a.default.LaunchData)):(cc.game.on(cc.game.EVENT_SHOW,this.onShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this))},y.prototype.initWxCollect=function(e,t){t&&(t.scene===r.default.Scene.WX_LASTEST?s.DataMgr.Local.CollectState===_.RewardState.Receive&&(c.ViewMgr.closePopwin(f.default),l.EventMgr.emit(d.EventEnum.UpdateCollectReward,1)):t.scene===r.default.Scene.WX_Table?s.DataMgr.Local.AddDeskState===_.RewardState.Not&&(c.ViewMgr.closePopwin(m.default),s.DataMgr.Local.saveAddDeskState(_.RewardState.Receive),l.EventMgr.emit(d.EventEnum.UpdateAddDeskReward,1)):t.scene===r.default.Scene.WX_FLOATING&&s.DataMgr.Local.FloatingState===_.RewardState.Not&&(c.ViewMgr.closePopwin(g.default),s.DataMgr.Local.saveFloatingState(_.RewardState.Receive),l.EventMgr.emit(d.EventEnum.UpdateFloatingReward,1)))},y.prototype.onShow=function(){},y.prototype.onHide=function(){p.AppDataMgr.get(_.AppDataKey.OnHideHistory,!1)||s.DataMgr.syncBaseUserData({lastTime:u.default.nowTime},!0),p.AppDataMgr.set(_.AppDataKey.OfflineTime,0)},o=y,i.default=o,cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,new o,cc._RF.pop()},{}],MapConfig:[function(e,t,n){"use strict";cc._RF.push(t,"254fb0weMJAcYlOU0ybSwAf","MapConfig");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=o("Enum"),i.MapConfig={HomeJumpScene:o.SceneTypes.HomeScene,PrefixRoom:"texture/room-new",RoomData:((i={})[o.RoomType.Common]={id:o.RoomType.Common,name:"common-room"},i[o.RoomType.Living]={id:o.RoomType.Living,name:"living-room"},i[o.RoomType.Bed]={id:o.RoomType.Bed,name:"bed-room"},i[o.RoomType.Bath]={id:o.RoomType.Bath,name:"bath-room"},i[o.RoomType.Study]={id:o.RoomType.Study,name:"study-room"},i[o.RoomType.Porch]={id:o.RoomType.Porch,name:"porch-room"},i[o.RoomType.Garden]={id:o.RoomType.Garden,name:"garden-room"},i[o.RoomType.Balcony]={id:o.RoomType.Balcony,name:"balcony-room"},i[o.RoomType.Kitchen]={id:o.RoomType.Kitchen,name:"kitchen-room"},i[o.RoomType.GardenSwing]={id:o.RoomType.GardenSwing,name:"garden-swing"},i[o.RoomType.GardenStudio]={id:o.RoomType.GardenStudio,name:"garden-studio"},i[o.RoomType.GardenBarbecue]={id:o.RoomType.GardenBarbecue,name:"garden-barbecue"},i[o.RoomType.GardenSwimming]={id:o.RoomType.GardenSwimming,name:"garden-swimming"},i[o.RoomType.Garden1]={id:o.RoomType.Garden1,name:"garden-1"},i[o.RoomType.Garden2]={id:o.RoomType.Garden2,name:"garden-2"},i[o.RoomType.Garden3]={id:o.RoomType.Garden3,name:"garden-3"},i[o.RoomType.GardenPond]={id:o.RoomType.GardenPond,name:"garden-pond"},i[o.RoomType.GardenFlowerhouse]={id:o.RoomType.GardenFlowerhouse,name:"garden-flowerroom"},i),JsonPath:{Zip:"configs.bin",Plot:"Plot.json",Milestone:"Milestone.json",Missions:"Missions.json",ActiveReward:"Missions_rewards.json",Daily_rewards:"Daily_rewards.json",Lottery:"Lottery.json",Lottery_pack:"Lottery_pack.json",RedPacket:"Redpacket.json",Seedbase:"Seedbase.json"},FurnitureRelated:[["N3-BathroomWall2","N3-BathroomWall1"]],FurnitureSpecial:{Floor1:"O1-Floor1",NewDaySofa:"A1-NewDaySofa",NewDayBath:"A1-NewDayBathroom",NewDayStudy:"A1-NewDayStudyroom",NewDayPorch:"A1-NewDayPorchroom",NewDayKitchen:"A1-NewDayKitchenroom",BedRoomBed:"O2-BedrommBedBed1",NewDayGardenSwimming:"A1-NewDayGardenSwimming"}},cc._RF.pop()},{}],MapView:[function(e,t,n){"use strict";cc._RF.push(t,"4c656aH01xAlJW7Ry4k+XUP","MapView");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p=o("Garbage"),h=o("ViewMgr"),f=o("WXApi"),m=(o("Water"),o("Action")),g=o("Display"),_=o("DataMgr"),y=o("DateUtils"),v=o("SDKEnums"),b=o("PoolMgr"),S=o("ArrayUtils"),w=o("EventMgr"),A=o("LoadHDImage"),M=o("GameFitUp"),T=o("BuildingItem"),P=o("EventEnum"),E=o("GameNewDay"),D=o("MapConfig"),I=o("LoaderMgr"),C=o("PlotMgr"),B=o("PlatformUtils"),k=o("Enum"),O=o("MilestoneModel");function R(){var e=null!==d&&d.apply(this,arguments)||this;return e.map=null,e.buildingItem=null,e.garbagePrefab=null,e.wxAd=null,e.defaultScale=2,e.minScale=2,e.maxScale=3,e.moveOffset=2,e.edgeOffset=80,e.isLocked=!1,e.isMoving=!1,e.isCacheing=!1,e.mapTouchList=[],e.onSingleTouch=null,e.touchBegin=cc.Vec2.ZERO,e.loadHDQueue=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(R,d=cc.Component),R.prototype.showWxAD=function(){1==g.default.s_isShowWxAd&&f.default.I.showwxSinglegridad(this.wxAd)},R.prototype.hideWxAD=function(){f.default.I.hidewxSinglegridad()},R.prototype.start=function(){this.showWxAD(),B.default.isH5&&(window.MapView=this)},R.prototype.mapPreload=function(){this.initData(),this.initRoom(),this.initMapCamare(),this.initCacheLiving()},R.prototype.mapInit=function(){this.loadHDQueue=[],this.addEvent(),this.initMask(),this.initOuter(),this.initMapView()},R.prototype.mapRelease=function(){this.addCacheLiving()},R.prototype.onDisable=function(){this.hideWxAD(),this.releaseCacheLiving(),this.removeEvent(),this.clear()},R.prototype.addEvent=function(){var e=this.node;w.EventMgr.on(v.EventKeys.HideWxad,this.hideWxAD,this),w.EventMgr.on(v.EventKeys.ShowWxad,this.showWxAD,this),e.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),e.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),e.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this,!0)},R.prototype.removeEvent=function(){var e=this.node;w.EventMgr.off(v.EventKeys.HideWxad,this.hideWxAD,this),w.EventMgr.off(v.EventKeys.ShowWxad,this.showWxAD,this),e.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),e.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),e.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this,!0)},R.prototype.getRoom=function(e){return this.roomNodeMap||(this.roomNodeMap={}),this.roomNodeMap[e]},R.prototype.getRoomOld=function(e){return e=this.getRoom(e),cc.isValid(e)?e.getChildByName("old"):null},R.prototype.getRoomNew=function(e){return e=this.getRoom(e),cc.isValid(e)?e.getChildByName("new"):null},R.prototype.getShadow=function(e){return e=D.MapConfig.RoomData[e].name,this.map.getChildByName(e+"-shadow")},Object.defineProperty(R.prototype,"EffectNode",{get:function(){return this.map.getChildByName("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"Milestone",{get:function(){return this.modleMilestone||(this.modleMilestone=_.DataMgr.Milestone),this.modleMilestone},enumerable:!0,configurable:!0}),R.prototype.clear=function(){this.mapTouchList=[],this.roomNodeMap={},this.isCacheing=!1,this.modleMilestone=null},R.prototype.initData=function(){this.roomNodeMap={},this.isCacheing=!1},R.prototype.initRoom=function(){var e,t=D.MapConfig.RoomData;for(e in t){var n=t[e].name;this.roomNodeMap[+e]=this.map.getChildByName(n)}var o=(i=_.DataMgr.User.Milestone).curr_scene,i=i.through_scenes;i=[o].concat(i),this.toggleLivingDoor(i.indexOf(5)<0)},R.prototype.toggleLivingDoor=function(e){var t=this.getRoom(k.RoomType.Common);!cc.isValid(t)||(t=t.getChildByName("living-room_door"))&&(t.active=e)},R.prototype.initOuter=function(){var e=this;["gate_1","gate_2","fountain","kitchen_outwall","bathroom_outwall","living-room_outwall3","living-room_outwall2","living-room_outwall1"].forEach(function(t){return e.loadCommonOuter(t)})},R.prototype.loadCommonOuter=function(e){var t,n,o,i=this,r=k.RoomType.Common,a=this.getRoom(r);cc.isValid(a)&&(o=a.getChildByName(e),cc.isValid(o)&&(t=o.children[0],cc.isValid(t)&&((n=t.getComponent(A.default))&&n.getHDTexture()?this.animCommonOuter(a,t,new cc.SpriteFrame(n.getHDTexture())):(r=D.MapConfig.PrefixRoom+"/outer",o=""+e,I.LoaderMgr.loadSpriteFrameWithUrl(r+"/"+o).then(function(e){cc.isValid(a)&&i.animCommonOuter(a,t,e),cc.dynamicAtlasManager.insertSpriteFrame(e),cc.isValid(n)&&i.loadHDQueue.push(n)},function(){return i.loadCommonOuter(e)}).catch(function(){})))))},R.prototype.animCommonOuter=function(e,t,n){t&&(t.getComponent(cc.Sprite).spriteFrame=n)},R.prototype.initMask=function(){_.DataMgr.User.isOverPlot(C.PlotID.Start1)?_.DataMgr.User.isOverPlot(C.PlotID.Task01)?this.getShadow(k.RoomType.Living).active=!1:this.loadLivingGarbage():this.loadLivingShadow()},R.prototype.loadLivingGarbage=function(){var e,t,n,o=this,i=k.RoomType.Living,r=this.getShadow(i);cc.isValid(r)&&(e=r.getChildByName("garbage"),cc.isValid(e)&&((t=e.getComponent(A.default))&&t.getHDTexture()?this.animGarbageLiving(r,e,new cc.SpriteFrame(t.getHDTexture())):(n=D.MapConfig.PrefixRoom+"/shadow",i=D.MapConfig.RoomData[i].name+"-garbage",I.LoaderMgr.loadSpriteFrameWithUrl(n+"/"+i).then(function(n){cc.isValid(r)&&o.animGarbageLiving(r,e,n),cc.dynamicAtlasManager.insertSpriteFrame(n),cc.isValid(t)&&o.loadHDQueue.push(t)},function(){return o.loadLivingGarbage()}).catch(function(){}))))},R.prototype.animGarbageLiving=function(e,t,n){e.active=!0,e.opacity=0,t.getComponent(cc.Sprite).spriteFrame=n,cc.tween(e).to(.5,{opacity:255}).start(),m.default.playAddAnim(e)},R.prototype.loadLivingShadow=function(){var e,t,n,o=this,i=k.RoomType.Living,r=this.getShadow(i);cc.isValid(r)&&(e=r.getChildByName("shadow"),cc.isValid(e)&&((t=e.getComponent(A.default))&&t.getHDTexture()?this.animShadowLiving(r,e,new cc.SpriteFrame(t.getHDTexture())):(n=D.MapConfig.PrefixRoom+"/shadow",i=D.MapConfig.RoomData[i].name+"-black",I.LoaderMgr.loadSpriteFrameWithUrl(n+"/"+i).then(function(n){cc.isValid(r)&&o.animShadowLiving(r,e,n),cc.dynamicAtlasManager.insertSpriteFrame(n),cc.isValid(t)&&o.loadHDQueue.push(t)},function(){return o.loadLivingShadow()}).catch(function(){}))))},R.prototype.animShadowLiving=function(e,t,n){e.active=!0,e.opacity=0,t.getComponent(cc.Sprite).spriteFrame=n,cc.tween(e).to(.5,{opacity:255}).start()},R.prototype.animShadowSprite=function(e,t,n){e.active=!0,t.opacity=0,t.getComponent(cc.Sprite).spriteFrame=n,cc.tween(t).to(20/60,{opacity:255}).start()},R.prototype.hideMask=function(e,t){var n=this.getShadow(e);if(n){if(m.default.stopAnim(n),t)return new Promise(function(e){cc.tween(n).to(.5,{opacity:0}).call(function(){cc.isValid(n)&&n.destroy(),e(null)}).start()});n.destroy()}},R.prototype.update=function(){this.isStartLoad&&this.loadHDBuild()},R.prototype.loadHDBuild=function(){var e,t=this;!this.loadHDQueue.length||this.isLoadingHD||(e=this.loadHDQueue.shift())&&cc.isValid(e)&&(this.isLoadingHD=!0,e.loadHD().then(function(){return t.isLoadingHD=!1}).catch(function(){return t.isLoadingHD=!1}))},R.prototype.setStartLoadFlag=function(e){this.isStartLoad=e},R.prototype.initMapView=function(){var e=this,t=[k.RoomType.Living,k.RoomType.Common],n=[k.RoomType.GardenSwing,k.RoomType.Bed,k.RoomType.Bath,k.RoomType.Kitchen,k.RoomType.Study,k.RoomType.Porch,k.RoomType.Balcony,k.RoomType.GardenSwimming,k.RoomType.GardenStudio,k.RoomType.Garden1,k.RoomType.GardenPond,k.RoomType.Garden2,k.RoomType.Garden3,k.RoomType.GardenBarbecue,k.RoomType.GardenFlowerhouse],o={};switch(_.DataMgr.User.Milestone.curr_scene){case 3:o[k.RoomType.Bed]=1;break;case 4:o[k.RoomType.Bed]=1,o[k.RoomType.Bath]=1;break;case 5:o[k.RoomType.Bed]=1,o[k.RoomType.Bath]=1,o[k.RoomType.Kitchen]=1;break;case 6:o[k.RoomType.Bed]=1,o[k.RoomType.Bath]=1,o[k.RoomType.Kitchen]=1,o[k.RoomType.Porch]=1;break;case 7:o[k.RoomType.Bed]=1,o[k.RoomType.Bath]=1,o[k.RoomType.Kitchen]=1,o[k.RoomType.Porch]=1,o[k.RoomType.Study]=1;break;case 8:o[k.RoomType.Bed]=1,o[k.RoomType.Bath]=1,o[k.RoomType.Kitchen]=1,o[k.RoomType.Porch]=1,o[k.RoomType.Study]=1,o[k.RoomType.GardenSwimming]=1}Object.keys(o).forEach(function(e){var o=+e;t.push(o),n=n.filter(function(e){return e!==o})});var i=[];t.forEach(function(t){return i.push(function(){return e.initMapWithTypes([t],t!==k.RoomType.Living||!e.isCacheing)})}),n.forEach(function(t){return i.push(function(){return e.loadShadowSprite(t)})}),S.default.queue(i).then(function(){cc.isValid(e.node)&&e.removeCacheLiving();var n,o=[];cc.isValid(e.map)&&(n=e.map.children[0],cc.isValid(n)&&n.children.forEach(function(e){e=e.getComponent(A.default),cc.isValid(n)&&o.push(e)})),t.forEach(function(t){t=e.getRoomOld(t),!cc.isValid(t)||(t=t.children).length&&t.forEach(function(e){cc.isValid(e)&&(e=e.getComponent(T.default),cc.isValid(e)&&o.push(e))})}),e.loadHDQueue=e.loadHDQueue.concat(o),e.isStartLoad=!0,e.isLoadingHD=!1}).catch(function(){return cc.isValid(e.node)&&e.removeCacheLiving()})},R.prototype.loadShadowSprite=function(e){var t=this;return new Promise(function(n){var o=t.getShadow(e);if(!cc.isValid(o))return n(null);var i=o.children[0];if(!cc.isValid(i))return n(null);var r,a,s=i.getComponent(A.default);s&&s.getHDTexture()?(t.animShadowSprite(o,i,new cc.SpriteFrame(s.getHDTexture())),n(null)):(r=D.MapConfig.PrefixRoom+"/shadow",a=""+D.MapConfig.RoomData[e].name,I.LoaderMgr.loadSpriteFrameWithUrl(r+"/"+a).then(function(e){cc.isValid(o)&&t.animShadowSprite(o,i,e),cc.dynamicAtlasManager.insertSpriteFrame(e),cc.isValid(s)&&t.loadHDQueue.push(s),n(null)},function(){return t.loadShadowSprite(e)}).catch(function(){}))})},R.prototype.initNewDayMapView=function(){var e=-1;switch(_.DataMgr.User.Milestone.curr_scene+1){case 3:e=k.RoomType.Bed;break;case 4:e=k.RoomType.Bath;break;case 5:e=k.RoomType.Kitchen;break;case 6:e=k.RoomType.Porch;break;case 7:e=k.RoomType.Study;break;case 8:e=k.RoomType.GardenSwimming}-1!=e&&this.initMapWithTypes([e],!0)},R.prototype.initMapWithTypes=function(e,t){var n=this;void 0===t&&(t=!0);for(var o=this.Milestone.getOldFurnitures(e),i=_.DataMgr.User.Milestone.complete_tasks,r={},a=[],s=[],c=this,u=0;u<o.length;u++)!function(e){var t,n,a=o[e].id;a&&(t=c.Milestone.getTaskIdByFurnitureId(a),n=0!=i.filter(function(e){return t===e}).length,r[t]||(s=n?(r[t]=!0,n=(e=c.Milestone.getTaskById(t).add_furnitures)[0],(n=c.Milestone.getTaskOtherByFurnitureId(n))&&0<=i.indexOf(n.id)&&n.add_furnitures.length&&(e=n.add_furnitures.concat(e.slice(1))),s.concat(e)):s.concat([a])))}(u);var l=[];s.forEach(function(e){(e=n.buildBuildById(e))&&l.push(e)});var d=Math.ceil(l.length/2);for(u=0;u<d;u++)!function(){var e=[];l.slice(2*u,2*u+2).forEach(function(n){var o=n[0],i=n[1];n=n[2],e.push(o.getComponent(T.default).initWith(i,n,{isInitial:t}))}),a.push(function(){return Promise.all(e)})}();return S.default.queue(a)},R.prototype.initMapCamare=function(){var e;C.default.I.isPlotStart()?this.setMapCamare(C.PlotID.Start1):_.DataMgr.User.isOverPlot(C.PlotID.Task01)?(e=cc.Vec2.ZERO,this.smoothOperate(this.map,e,this.defaultScale)):this.setMapCamare(C.PlotID.Task01,150)},R.prototype.setMapCamare=function(e,t){void 0===t&&(t=0);var n=cc.Vec2.ZERO;e=_.DataMgr.Plot.getPlotById(e).focus[0],(e=this.map.getChildByName("anchor").getChildByName(e))?(e=g.default.getTargetPos(e,this.map),t=this.checkMovePos(-e.x,-e.y+t),this.map.x=t.x,this.map.y=t.y):this.smoothOperate(this.map,n,this.defaultScale)},R.prototype.initCacheLiving=function(){var e=g.default.PersistNode.getLivingRoom();if(e&&e.length){for(var t=this.getRoomNew(k.RoomType.Living),n=(e=e.reverse()).length-1;0<=n;n--)e[n].parent=t;this.isCacheing=!0}},R.prototype.addCacheLiving=function(){var e=this.getRoomOld(k.RoomType.Living);cc.isValid(e)&&(e=e.children,g.default.PersistNode.addLivingRoom(e))},R.prototype.removeCacheLiving=function(){var e,t=this.getRoomNew(k.RoomType.Living);t&&cc.isValid(t)&&(e=t.children)&&e.length&&t.removeAllChildren(!0)},R.prototype.releaseCacheLiving=function(){this.unschedule(this.removeCacheLiving)},R.prototype.actionPlotAnim=function(e){return u(this,void 0,void 0,function(){var t,n,o=this;return l(this,function(i){switch(i.label){case 0:switch(e){case"anim_1":return[3,1];case"anim_2":return[3,2];case"anim_3":return[3,3];case"anim_4":return[3,4];case"anim_5":return[3,7];case"anim_6":return[3,10];case"anim_10":return[3,13];case"anim_11":return[3,16];case"anim_12":return[3,19]}return[3,22];case 1:return(t=this.getShadow(k.RoomType.Living))&&(t.active=!0,m.default.playAddAnim(t)),[2,Promise.resolve()];case 2:return[2,this.moveMapToNode("O1-Allfloor0",null).then(function(){var e=o.getRoomOld(k.RoomType.Living).getChildByName("O1-Floor1");if(!e)return Promise.resolve();var t=o.Milestone.getFurnitureById("O1-Floor1");return t.res_bone="floor_dong",e.getComponent(T.default).changeBone(0,!1,t,null,k.ActionTaskType.Bone4)})];case 3:return this.initNewDayMapView(),[2,new Promise(function(e){h.ViewMgr.openPopwin(E.default,{end:{callback:function(){return e(null)},context:o}})})];case 4:return n="O2-BedrommBedBed1",[4,this.moveMapToNode(n,null)];case 5:return i.sent(),[4,this.hideMask(k.RoomType.Bed,!0)];case 6:return i.sent(),[3,22];case 7:return n=D.MapConfig.FurnitureSpecial.NewDayBath,[4,this.moveMapToNode(n,null)];case 8:return i.sent(),[4,this.hideMask(k.RoomType.Bath,!0)];case 9:return i.sent(),[3,22];case 10:return n=D.MapConfig.FurnitureSpecial.NewDayKitchen,[4,this.moveMapToNode(n,null)];case 11:return i.sent(),[4,this.hideMask(k.RoomType.Kitchen,!0)];case 12:return i.sent(),this.toggleLivingDoor(!1),[3,22];case 13:return n=D.MapConfig.FurnitureSpecial.NewDayPorch,[4,this.moveMapToNode(n,null)];case 14:return i.sent(),[4,this.hideMask(k.RoomType.Porch,!0)];case 15:return i.sent(),[3,22];case 16:return n=D.MapConfig.FurnitureSpecial.NewDayStudy,[4,this.moveMapToNode(n,null)];case 17:return i.sent(),[4,this.hideMask(k.RoomType.Study,!0)];case 18:return i.sent(),[3,22];case 19:return n=D.MapConfig.FurnitureSpecial.NewDayGardenSwimming,[4,this.moveMapToNode(n,null)];case 20:return i.sent(),[4,this.hideMask(k.RoomType.GardenSwimming,!0)];case 21:return i.sent(),[3,22];case 22:return[2]}})})},R.prototype.actionPlanTask=function(e){var t=e.data,n=e.callback,o=e.context;switch(t.action_type){case k.ActionTaskType.Garbage:this.hideMask(k.RoomType.Living,!0),this.clearGarbage(t).then(function(){n&&n.call(o)}).catch(function(){n&&n.call(o)});break;case k.ActionTaskType.Replace:this.replace(e);break;default:this.focus(e)}},R.prototype.actionChangedTask=function(e){var t=e.data.action_type;switch(t){case k.ActionTaskType.Bone1:case k.ActionTaskType.Bone2:case k.ActionTaskType.Bone3:this.changeBone(e,t).then(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)}).catch(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)});break;case k.ActionTaskType.Bone3Doubule:this.changeBones(e,k.ActionTaskType.Bone3).then(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)}).catch(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)});break;case k.ActionTaskType.Normal:this.changeNormal(e).then(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)}).catch(function(){return w.EventMgr.emit(P.EventEnum.SwitchLoadHDState,0)});break;case k.ActionTaskType.Replace:this.change(e)}},R.prototype.actionPreview=function(e){this.preview(e)},R.prototype.actionBackup=function(e){return this.backup(e)},R.prototype.actionUnselect=function(e,t){this.unselect(e,t)},R.prototype.actionCheckTaskNode=function(e){var t=e.data,n=e.callback;if(e=e.context,(t=t.del_furnitures||[]).length&&this.checkFurniture(t[0]).code<0)return g.default.showTip("\u65b0\u7684\u5bb6\u5177\u8d44\u6e90\u6b63\u5728\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e");n&&n.call(e)},R.prototype.focus=function(e){var t=this,n=e.data,o=e.skin,i=e.furnitures,r=e.callback,a=e.context,c=n.del_furnitures,u=[],l=[];i.forEach(function(e,n){var i=t.Milestone.getFurnitureById(e).skin_num;n=c[n],t.focusFurniture(o,n,e),(3===i?u:l).push(e)}),u.length&&h.ViewMgr.openPopwin(M.default,{data:{data:n,type:0,uiHome:k.HomeUIState.Menu,furnitures:u.slice(),callback:r,context:a}}),l.length&&this.actionChangedTask(s({},e,{furnitures:l.slice()}))},R.prototype.replace=function(e){return u(this,void 0,void 0,function(){var t,n,o,i,r,a=this;return l(this,function(s){switch(s.label){case 0:return r=e.data,t=e.skin,n=e.furnitures,o=e.callback,i=e.context,(r=r.del_furnitures).slice(1).forEach(function(e){var t=a.Milestone.getFurnitureById(e).room_type;(e=a.getRoomOld(t).getChildByName(e))&&a.cleanFurniture(e)}),[4,this.backupFurniture(t,r[0],n[0],!1)];case 1:return s.sent(),o&&o.call(i,t,n),[2]}})})},R.prototype.focusFurniture=function(e,t,n){var o=(i=this.checkFurniture(t)).code,i=(t=i.msg,i.node);return o<0?Promise.reject(t):(n=this.Milestone.getFurnitureById(n),i.getComponent(T.default).actionFocus(e,n))},R.prototype.backupFurniture=function(e,t,n,o){var i=(r=this.checkFurniture(t)).code,r=(t=r.msg,r.node);return i<0?Promise.resolve(t):(n=this.Milestone.getFurnitureById(n),r.getComponent(T.default).actionBackup(e,n,o))},R.prototype.unselect=function(e,t){var n=this,o=e.skin;e.furnitures.forEach(function(e){n.unselectFurniture(o,e,t)})},R.prototype.unselectFurniture=function(e,t,n){var o=(r=this.checkFurniture(t)).code,i=r.msg,r=r.node;return o<0?Promise.resolve(i):(t=this.Milestone.getFurnitureById(t),r.getComponent(T.default).actionUnselect(e,t,n))},R.prototype.preview=function(e){var t=this,n=e.skin;e.furnitures.forEach(function(e){return t.previewFurniture(n,e,e)})},R.prototype.change=function(e){var t=this,n=e.skin;e.furnitures.forEach(function(e){return t.changeFurniture(n,e,e)})},R.prototype.backup=function(e){var t=e.skin,n=(e=(n=e.furnitures)[0],n[1]);return this.backupFurniture(t,e,n,!0)},R.prototype.previewFurniture=function(e,t,n){var o=(i=this.checkFurniture(t)).code,i=(t=i.msg,i.node);return o<0?Promise.resolve(t):(n=this.Milestone.getFurnitureById(n),i.getComponent(T.default).actionPreview(e,n))},R.prototype.changeFurniture=function(e,t,n){var o=(i=this.checkFurniture(t)).code,i=(t=i.msg,i.node);return o<0?Promise.resolve(t):(n=this.Milestone.getFurnitureById(n),i.getComponent(T.default).actionChange(e,n))},R.prototype.checkFurniture=function(e){if(!e)return{code:-1,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u7269\u54c1\u6765\u6e90src\u3011"};var t=this.Milestone.getFurnitureById(e);return t?(t=this.getRoomOld(t.room_type).getChildByName(e))?{code:0,msg:"",node:t}:{code:-3,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u627e\u5230\u7269\u54c1\u6765\u6e90:"+e+"\u3011"}:{code:-2,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u7269\u54c1\u6765\u6e90"+e+"\u3011"}},R.prototype.changeNormal=function(e){return u(this,void 0,Promise,function(){var t,n,o,i,r,a=this;return l(this,function(){return t=e.skin,n=e.furnitures,o=e.callback,i=e.context,r=n.map(function(e){var t=(n=a.checkFurniture(e)).code,n=(e=n.msg,n.node);return t<0?Promise.reject(e):n.getComponent(T.default).actionDown()}),[2,Promise.all(r).then(function(){return o&&o.call(i,t,n)}).catch(function(){return o&&o.call(i,t,n)})]})})},R.prototype.changeBone=function(e,t){return u(this,void 0,Promise,function(){var n,o,i,r,a,s,c,u,d,p,h=this;return l(this,function(){return s=e.data,n=e.skin,o=e.furnitures,i=e.callback,r=e.context,c=s.add_furnitures,a=s.del_furnitures,d=c[0],p=a[0],u=this.checkFurniture(d),s=u.code,c=u.msg,u=u.node,s<0?[2,Promise.reject(c)]:(d=this.Milestone.getFurnitureById(d),p=this.Milestone.getFurnitureById(p),a.slice(1).forEach(function(e){var t=h.Milestone.getFurnitureById(e).room_type;(e=h.getRoomOld(t).getChildByName(e))&&h.cleanFurniture(e)}),[2,u.getComponent(T.default).changeBone(n,!0,d,p,t).then(function(){return i&&i.call(r,n,o)}).catch(function(){return i&&i.call(r,n,o)})])})})},R.prototype.changeBones=function(e,t){return u(this,void 0,Promise,function(){var n,o,i,r,a,s,c,u,d,p,h=this;return l(this,function(){return n=e.data,o=e.skin,i=e.furnitures,r=e.callback,a=e.context,p=n.add_furnitures,s=n.del_furnitures,c=[],u=[],d="",p.forEach(function(e,t){var n=(i=h.checkFurniture(e)).code,o=i.msg,i=i.node;0<=n?(u.push({node:i,newId:e,oldId:s[t]}),c.push(s[t])):d+=o}),0===u.length?[2,Promise.resolve(d)]:(c.forEach(function(e){var t=h.Milestone.getFurnitureById(e).room_type;(e=h.getRoomOld(t).getChildByName(e))&&h.cleanFurniture(e)}),p=u.map(function(e){var n=h.Milestone.getFurnitureById(e.newId),i=h.Milestone.getFurnitureById(e.oldId);return e.node.getComponent(T.default).changeBone(o,!0,n,i,t)}),[2,Promise.all(p).then(function(){return r&&r.call(a,o,i)}).catch(function(){return r&&r.call(a,o,i)})])})})},R.prototype.clearGarbage=function(e){return u(this,void 0,void 0,function(){var t,n,o,i,r=this;return l(this,function(){return(i=e.del_furnitures)&&i.length?(t=this.Milestone.getFurnitureById(i[0]).room_type,n=this.getRoomOld(t),o=0,(i=S.default.shuffle(i).slice()).forEach(function(e,t){var o=n.getChildByName(e);o&&r.scheduleOnce(function(){return r.cleanFurniture(o)},.2*(t+1))}),i=i.slice(0,1).map(function(e){var t=n.getChildByName(e);return t?(o+=1,function(){return r.playClearGarbageAnim(t,o-1)}):function(){return Promise.resolve()}}),[2,S.default.queue(i).then(function(){})]):[2,Promise.resolve()]})})},R.prototype.playClearGarbageAnim=function(e,t){var n=this;return new Promise(function(o){0===t?n.animClearGarbageBone(e).then(function(){return o(null)}).catch(function(){return o(null)}):n.scheduleOnce(function(){n.animClearGarbageBone(e).then(function(){return o(null)}).catch(function(){return o(null)})},.1*t)})},R.prototype.animClearGarbageBone=function(e){var t=this;return new Promise(function(n){var o=t.EffectNode,i=g.default.getTargetPos(e,o),r=b.PoolMgr.getPrefab(t.garbagePrefab);r.x=i.x-50,r.y=i.y+50,o.addChild(r),r.getComponent(p.default).play().then(function(){return u(t,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.cleanFurniture(e)];case 1:return t.sent(),n(null),cc.isValid(r)&&b.PoolMgr.putNode(r),[2]}})})})})},R.prototype.cleanFurniture=function(e){return u(this,void 0,void 0,function(){return l(this,function(){return cc.isValid(e)?(e.getComponent(T.default).actionClean(),[2]):[2,Promise.resolve()]})})},R.prototype.moveMapToNode=function(e,t,n){var o=this;if(void 0===n&&(n=!0),!e)return Promise.resolve();var i,r=this.Milestone.getFurnitureById(e);if(!r)return Promise.resolve();switch(r.type){case O.FurnitureType.Old:case O.FurnitureType.New:i=this.getRoomOld(r.room_type);break;case O.FurnitureType.Anchor:i=this.map.getChildByName("anchor")}var a=i.getChildByName(e);if(!a)return Promise.resolve();var s=g.default.getTargetPos(a,this.map);!t||e===D.MapConfig.FurnitureSpecial.NewDaySofa||(a=this.buildBuildById(t))&&(c=a[0],e=a[1],u=a[2],c.getComponent(T.default).initWith(e,u,{isInitial:!0}),r=this.Milestone.getFurnitureById(t),s=g.default.getTargetPos(c,this.map),c.destroy()),cc.tween(this.map).stop(),t=(t=(u=r.res_offset)[0])||0;var c=(c=u[1])||0;c+=150,s=cc.v2(s.x-t,s.y-c);var u=this.checkMovePos(-s.x,-s.y),l=(t=this.map.position,c=u.x,s=u.y,c=parseInt(c+""),s=parseInt(s+""),cc.v2(c*this.map.scale,s*this.map.scale)),d=(t=t.sub(l).mag(),Math.max(.4,t/500));return n?new Promise(function(e){o.isLocked=!0,cc.tween(o.map).to(d,{x:l.x,y:l.y},{easing:cc.easing.quintOut}).call(function(){o.isLocked=!1,e(null)}).start()}):(this.map.x=u.x,this.map.y=u.y,Promise.resolve())},R.prototype.buildBuildById=function(e){var t,n=this.Milestone.getFurnitureById(e),o=this.getRoomOld(n.room_type);return o.getChildByName(e)?null:(e=(t=_.DataMgr.User.getFurnitureSkinById(e))?t.select:0,(t=cc.instantiate(this.buildingItem)).parent=o,[t,e,n])},R.prototype.checkMovePos=function(e,t){var n=e;return e=t,n+(t=this.map.scale*this.edgeOffset)>this.MaxOffset.x?n=this.MaxOffset.x-t:n-t<-this.MaxOffset.x&&(n=-this.MaxOffset.x+t),e+t>this.MaxOffset.y?e=this.MaxOffset.y-t:e-t<-this.MaxOffset.y&&(e=-this.MaxOffset.y+t),{x:n,y:e}},R.prototype.onTouchStart=function(e){this.touchBegin=e.getLocation(),this.touchTime=y.default.nowTime,this.moveTween1&&this.moveTween1.stop(),this.moveTween2&&this.moveTween2.stop(),this.moveTween3&&this.moveTween3.stop(),this.moveTween1=null,this.moveTween2=null,this.moveTween3=null,this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0)},R.prototype.onTouchMove=function(e){var t,n,o,i;this.isLocked||(2<=(i=e.getTouches()).length?(this.isMoving=!0,o=i[0],t=i[1],n=cc.v2(o.getDelta()),e=cc.v2(t.getDelta()),o=this.map.convertToNodeSpaceAR(cc.v2(o.getLocation())),t=this.map.convertToNodeSpaceAR(cc.v2(t.getLocation())),o=o.sub(t),n=n.sub(e),e=1,e=Math.abs(o.x)>Math.abs(o.y)?(o.x+n.x)/o.x*this.map.scaleX:(o.y+n.y)/o.y*this.map.scaleY,o=t.add(cc.v2(o.x/2,o.y/2)),this.smoothOperate(this.map,o,e)):1===i.length&&(this.isMoving||this.isCanStartMove(i[0]))&&(this.isMoving=!0,i=cc.v2(i[0].getDelta()),this.dealMove(i,this.map,this.node)))},R.prototype.onTouchEnd=function(e){var t,n,o,i,r;!this.isLocked&&e.getTouches().length<=1&&(this.isMoving?y.default.nowTime-this.touchTime<300?(t=(n=this.MaxOffset).x,i=n.y,o=cc.v2(this.touchBegin.x-e.getLocation().x,this.touchBegin.y-e.getLocation().y),n=this.map.x+-2*o.x,o=this.map.y+-2*o.y,n=Math.min(+t,Math.max(n,0-t)),o=Math.min(+i,Math.max(o,0-i)),this.moveTween1=cc.tween(this.map).to(1,{x:n,y:o},{easing:cc.easing.quintOut}).start(),i=this.checkMovePos(n,o),Object.keys(i).length&&(r={},i.x&&(r.x=i.x),i.y&&(r.y=i.y),this.moveTween2=cc.tween(this.map).delay(.3).to(1,s({},r),{easing:cc.easing.quintOut}).start())):(n=this.map.x,o=this.map.y,i=this.checkMovePos(n,o),Object.keys(i).length&&(r={},i.x&&(r.x=i.x),i.y&&(r.y=i.y),this.moveTween3=cc.tween(this.map).delay(1).to(1,s({},r),{easing:cc.easing.quintOut}).start()),w.EventMgr.emit(P.EventEnum.HideFitUp,!1)):(r=cc.v2(e.getLocation()),r=this.map.convertToNodeSpaceAR(r),this.dealSelect(e,r)),this.isMoving=!1,this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0))},R.prototype.onTouchCancel=function(e){var t,n,o,i,r;this.isLocked||(e.getTouches().length<=1&&(y.default.nowTime-this.touchTime<300?(t=(n=this.MaxOffset).x,i=n.y,o=cc.v2(this.touchBegin.x-e.getLocation().x,this.touchBegin.y-e.getLocation().y),n=this.map.x+-2*o.x,o=this.map.y+-2*o.y,n=Math.min(+t,Math.max(n,0-t)),o=Math.min(+i,Math.max(o,0-i)),this.moveTween1=cc.tween(this.map).to(1,{x:n,y:o},{easing:cc.easing.quintOut}).start(),i=this.checkMovePos(n,o),Object.keys(i).length&&(r={},i.x&&(r.x=i.x),i.y&&(r.y=i.y),this.moveTween2=cc.tween(this.map).delay(.3).to(1,s({},r),{easing:cc.easing.quintOut}).start())):(n=this.map.x,o=this.map.y,i=this.checkMovePos(n,o),Object.keys(i).length&&(r={},i.x&&(r.x=i.x),i.y&&(r.y=i.y),this.moveTween3=cc.tween(this.map).delay(1).to(1,s({},r),{easing:cc.easing.quintOut}).start()))),this.isMoving=!1,this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0))},R.prototype.isCanStartMove=function(e){var t=e.getStartLocation();return e=e.getLocation(),Math.abs(e.x-t.x)>this.moveOffset||Math.abs(e.y-t.y)>this.moveOffset},R.prototype.dealMove=function(e,t,n){var o=t.convertToWorldSpaceAR(cc.Vec2.ZERO);(o=n.convertToNodeSpaceAR(o)).x+=e.x,o.y+=e.y,(o=this.calculateEdge(t,n,o)).left<=0&&o.right<=0&&(t.x+=e.x),o.top<=0&&o.bottom<=0&&(t.y+=e.y)},R.prototype.getColliders=function(){var e,t,n=[];for(e in this.roomNodeMap)this.getRoomOld(+e)&&(t=this.getRoomOld(+e).children.filter(function(e){return e.active&&e.children[1]}).map(function(e){return e.children[1].children[0].getComponent(cc.PolygonCollider)}).filter(function(e){return!!e}),n=n.concat(t));return n},R.prototype.dealSelect=function(e,t){if(this.onSingleTouch&&this.onSingleTouch(t),(t=e.target.getComponent(T.default))&&t.data){for(var n=e.getLocation(),o=this.getColliders(),i=void 0,r=o.length-1;0<=r;r--){var a=(i=o[r]).node.convertToNodeSpaceAR(n);if(cc.Intersection.pointInPolygon(a,i.points)){(a=(a=i.node.parent.parent)&&a.getComponent(T.default))&&a.actionClick(),a&&a.actionTouchAnim();break}}w.EventMgr.emit(P.EventEnum.ActionViewTemp,{type:2,data:null})}},R.prototype.removeTouchFromContent=function(e,t){for(var n=e.getTouches().map(function(e){return e.getID()}),o=t.length-1;0<=o;--o)-1<n.indexOf(t[o].id)&&t.splice(o,1)},R.prototype.smoothOperate=function(e,t,n){var o;this.minScale<=n&&n<=this.maxScale?(o=n-e.scaleX,o=t.scale(cc.v2(o,o)),o=e.position.sub(cc.v2(o.x,o.y)),n=Math.floor(100*n)/100,e.scale=n,this.dealScalePos(cc.v2(o.x,o.y),e)):n=cc.misc.clampf(n,this.minScale,this.maxScale)},R.prototype.dealScalePos=function(e,t){var n;1===t.scale?e=cc.Vec2.ZERO:(n=this.node.convertToWorldSpaceAR(e),n=this.node.convertToNodeSpaceAR(n),0<(n=this.calculateEdge(t,this.node,n)).left&&(e.x-=n.left),0<n.right&&(e.x+=n.right),0<n.top&&(e.y+=n.top),0<n.bottom&&(e.y-=n.bottom)),t.position=cc.v2(e.x,e.y)},R.prototype.calculateEdge=function(e,t,n){var o=(t.width-e.width*e.scaleX)/2;return e=(t.height-e.height*e.scaleY)/2,{left:o+n.x,right:o-n.x,top:e-n.y,bottom:e+n.y}},Object.defineProperty(R.prototype,"MaxOffset",{get:function(){var e=this.map.scale,t=(this.map.width*e-cc.winSize.width)/2;return e=(this.map.height*e-cc.winSize.height)/2,cc.v2(t,e)},enumerable:!0,configurable:!0}),R.prototype.testBuildOld=function(){},R.prototype.testBuildNew=function(){},R.prototype.testBuildAnchor=function(e){void 0===e&&(e=1)},c([i(cc.Node)],R.prototype,"map",void 0),c([i(cc.Prefab)],R.prototype,"buildingItem",void 0),c([i(cc.Prefab)],R.prototype,"garbagePrefab",void 0),c([i(cc.Node)],R.prototype,"wxAd",void 0),c([i({tooltip:"\u56fe\u7247\u521d\u59cb\u7f29\u653e"})],R.prototype,"defaultScale",void 0),c([i({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5c0fscale"})],R.prototype,"minScale",void 0),c([i({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5927scale"})],R.prototype,"maxScale",void 0),c([i({tooltip:"\u5355\u70b9\u89e6\u6478\u5bb9\u5fcd\u8bef\u5dee"})],R.prototype,"moveOffset",void 0),o=c([o],R),r.default=o,cc._RF.pop()},{}],MapsModel:[function(e,t,n){"use strict";cc._RF.push(t,"6f740YZxm9CqY1OSFn8NELI","MapsModel");var o,i=e,r=t,a=n;function s(){return null!==o&&o.apply(this,arguments)||this}r=__EXTENDS__(),Object.defineProperty(a,"__esModule",{value:!0}),r(s,o=i("BaseModel").default),s.prototype.init=function(){},s.prototype.clearData=function(){this.init()},s.prototype.resetAddStar=function(){},s.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(s,"I",{get:function(){return this.instance||(this.instance=new s)},enumerable:!0,configurable:!0}),s.instance=null,r=s,a.default=r,cc._RF.pop()},{}],MilestoneModel:[function(e,t,n){"use strict";cc._RF.push(t,"4dd13autt1OOYTFsI/ukSZI","MilestoneModel");var o=e,i=n,r=__EXTENDS__(),a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("BaseModel"),l=o("DataMgr"),d=o("ABTools");function p(){var e=c.call(this)||this;return e.init(),e}(o=s=i.MilestoneKey||(i.MilestoneKey={})).Tasks="Tasks",o.TasksOld="TasksOld",o.Furniture="Furniture",o.TaskGroup="TaskGroup",o.Milestones="Milestones",r(p,c=u.default),p.prototype.init=function(){this._cfgData=Object.create(null)},p.prototype.setCfg=function(e){this._cfgData=e},p.prototype.getCfg=function(e){return this._cfgData[e]},p.prototype.clearData=function(){this.init()},Object.defineProperty(p.prototype,"Tasks",{get:function(){return this.getCfg(s.Tasks)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"TasksOld",{get:function(){return this.getCfg(s.TasksOld)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"TaskGroup",{get:function(){return this.getCfg(s.TaskGroup)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Furniture",{get:function(){return this.getCfg(s.Furniture)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Milestones",{get:function(){return this.getCfg(s.Milestones)},enumerable:!0,configurable:!0}),p.prototype.getTaskById=function(e){return this.Tasks[e]},p.prototype.getTaskOldById=function(e){return this.TasksOld[e]},p.prototype.getTaskOldBySceneId=function(e){var t,n,o=[];for(t in this.TasksOld)!Object.prototype.hasOwnProperty.call(this.TasksOld,t)||(n=this.TasksOld[t]).scene_id===e&&o.push(a({},n));return o},p.prototype.getFurnitureById=function(e){return this.Furniture[e]},p.prototype.getTaskCostStar=function(e){return e=this.getTaskById(e),d.default.IsStarCost?e.cost_star:e.cost_star_b},p.prototype.getMilestoneById=function(e){return this.Milestones.filter(function(t){return t.id===e})[0]},p.prototype.getTaskIdByFurnitureId=function(e){var t,n=this.Tasks;for(t in n)if(n[t].del_furnitures.filter(function(t){return t===e}).length)return+t;return 0},p.prototype.getTaskOtherByFurnitureId=function(e){var t,n=this.Tasks;for(t in n)if(n[t].del_furnitures[0]===e)return a({},n[t]);return null},p.prototype.getTaskByAddFurnitureId=function(e){var t,n=this.Tasks;for(t in n)if(n[t].add_furnitures.filter(function(t){return t===e}).length)return n[t];return null},p.prototype.getTaskByPlotId=function(e){var t,n=this.Tasks;for(t in n)if(n[t].plot_id===e)return n[t];return null},p.prototype.getTaskGroupById=function(e){return this.TaskGroup[e]||{id:e,day:1,task_ids:[],name:""}},p.prototype.getNextTaskGroupById=function(e){for(var t=this.Milestones,n=t.length,o=null,i=0;i<n;i++){var r=t[i],s=r.taskgroup_ids,c=r.scene_id,u=r.next_milestone,l=s.indexOf(e);if(0<=l){l===s.length-1?(r=t[i+1])&&(o={curr_group:r.taskgroup_ids[0],curr_scene:r.scene_id,next_scene:r.next_milestone}):o={curr_group:s[l+1],curr_scene:c,next_scene:u};break}}if(o){var d=o.curr_group;return a({},o,{task_list:this.getTaskListById(d)})}return null},p.prototype.getTaskListById=function(e){var t=this;return this.getTaskGroupById(e).task_ids.map(function(e){return t.Tasks[e]})},p.prototype.getMilestoneDetails=function(){var e=(t=l.DataMgr.User.Milestone).curr_group,t=t.curr_scene;return{milestone:this.getMilestoneById(t),group:this.getTaskGroupById(e),tasks:this.getTaskListById(e)}},p.prototype.getABRewardStar=function(e){return d.default.IsStarCost?e.reward_star:e.reward_star_b},p.prototype.getGroupTaskList=function(){var e=l.DataMgr.User.Milestone.curr_scene;return this.getGroupTaskListById(e)},p.prototype.getGroupTaskListById=function(e){var t=this,n=[];return this.getMilestoneById(e).taskgroup_ids.forEach(function(e){var o=t.getTaskGroupById(e).task_ids.map(function(n){return n=t.getTaskById(n),a({},n,{groupId:e})});n=n.concat(o)}),n},p.prototype.getOldFurnitures=function(e){var t=[],n={};e.forEach(function(e){return n["O"+e]=1});var o,i=this.Furniture;for(o in i){var r=i[o],a=r.id.split("-")[0];n[a]&&t.push(r)}return t},p.prototype.getNewFurnitures=function(e){void 0===e&&(e=1);var t,n=[],o=this.Furniture,i=this.getCompleteTaskAddFurnitures();for(t in o){var r=o[t];i[r.id]&&0===r.id.indexOf("N"+e+"-")&&n.push(r)}return n},p.prototype.getCompleteTaskAddFurnitures=function(){var e=this,t={};return l.DataMgr.User.Milestone.complete_tasks.forEach(function(n){(n=e.getTaskById(n))&&n.add_furnitures.forEach(function(e){return t[e]=1})}),t},p.prototype.getCompleteTaskDelFurnitures=function(){var e=this,t={};return l.DataMgr.User.Milestone.complete_tasks.forEach(function(n){(n=e.getTaskById(n))&&n.del_furnitures.forEach(function(e){return t[e]=1})}),t},p.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(p,"I",{get:function(){return this.instance||(this.instance=new p)},enumerable:!0,configurable:!0}),p.instance=null,r=p,i.default=r,(r=i.FurnitureType||(i.FurnitureType={}))[r.Anchor=-1]="Anchor",r[r.Old=0]="Old",r[r.New=1]="New",(i=i.SwitchEffect||(i.SwitchEffect={}))[i.None=0]="None",i[i.Light=1]="Light",i[i.DownAndLight=2]="DownAndLight",cc._RF.pop()},{}],MoneyCfg:[function(e,t,n){"use strict";cc._RF.push(t,"c7c0bfevdVAl7Ll1AfLcMNJ","MoneyCfg");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],NumberAddScore:[function(e,t,n){"use strict";cc._RF.push(t,"29c6bCg6glA+Y48i1hm4hKd","NumberAddScore");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("RandomUtils");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.stepTime=.05,e.stepRate=.2,e._step=0,e._value=0,e._offset=0,e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(e){e!=this._value?(this._offset=e-this._value,this._step=Math.abs(Math.floor(this._offset*this.stepRate)),this._value=e,this.unschedule(this.updateNumber),this.schedule(this.updateNumber,this.stepTime)):this.valueLabel.string=this.value+""},enumerable:!0,configurable:!0}),l.prototype.resetValue=function(e){this._value=e,this._offset=0,this._step=0},l.prototype.onLoad=function(){this.valueLabel=this.node.getComponent(cc.Label)},l.prototype.updateNumber=function(){},l.prototype.onTest=function(){this.value=this.value+u.default.range(100,5e3)},s([i({tooltip:"How often to update, in seconds"})],l.prototype,"stepTime",void 0),s([i({tooltip:"Offset value per second"})],l.prototype,"stepRate",void 0),o=s([o],l),r.default=o,cc._RF.pop()},{}],OnlineGiftPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"9f3a4eM3fVA3KRqLMl2An8k","OnlineGiftPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("AudioMgr"),h=o("BubbleMgr"),f=o("Action"),m=o("CheckTools"),g=o("Display"),_=o("Enum"),y=o("UserModel"),v=o("OnlineMgr"),b=o("SDKEnums"),S=o("SDKTools"),w=o("RandomUtils"),A=o("BaseAnimPopwin"),M=o("ShareVideo"),T=o("ViewMgr"),P=o("GetRewardPopWin");function E(){var e=null!==l&&l.apply(this,arguments)||this;return e.m_Sharevideo=null,e.m_arrow=null,e.isvideo=!0,e}o=(i=cc._decorator).ccclass,i=i.property,a(E,l=A.default),(d=E).prototype.addEvent=function(){l.prototype.addEvent.call(this)},E.prototype.removeEvent=function(){l.prototype.removeEvent.call(this)},E.prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),y.default.I.reqAddDayReward(_.DayKeys.OnlineGiftShow,1),this.initui(),this.m_arrow.parent.parent.active=!1,m.default.OnlineDoubleRewardAB&&(this.m_arrow.parent.parent.active=!0,this.isvideo=!0,this.m_arrow.active=!0,f.default.playAnim(this.m_Sharevideo.node,"state_onlinegift_video"))},E.prototype.initui=function(){this.m_Sharevideo.updateWithKey(b.ShareKeys.onlinegift)},E.prototype.onOpend=function(){l.prototype.onOpend.call(this)},E.prototype.onOnlinegiftReward=function(){p.AudioMgr.button(),javaCall.ShowReward(this,function(e){console.log("callback===============>OnlineGiftPopwin.js"),0<y.default.I.OnlineGiftNowTime?g.default.showTip("Play a little more, online time is not enough"):!m.default.OnlineDoubleRewardAB||e.isvideo?S.default.dispatch(b.ShareKeys.onlinegift,{success:e.handlegetgiftreward,fail:function(){},context:e}):e.handlegetgiftrewardsingle()})},E.prototype.handlegetgiftrewardsingle=function(){var e=[w.default.random(0,4),1],t=w.default.random(2,11);T.ViewMgr.openPopwin(P.default,{data:{diamond:t,props:e}}),y.default.I.reqOnlineReward(),T.ViewMgr.closePopwin(d,{anim:!0}).then(function(){h.default.I.removePopwinList()})},E.prototype.handlegetgiftreward=function(){var e=0,t=m.default.OnlineDoubleRewardAB,n=[w.default.random(0,4),t?2:1];e=w.default.random(2,11),t&&(e*=2),T.ViewMgr.openPopwin(P.default,{data:{diamond:e,props:n}}),y.default.I.reqOnlineReward(),T.ViewMgr.closePopwin(d,{anim:!0}).then(function(){h.default.I.removePopwinList()})},Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),E.prototype.onBack=function(){return c(this,void 0,void 0,function(){return u(this,function(){return p.AudioMgr.button(),g.default.s_isCloseOnlineGift=!0,T.ViewMgr.closePopwin(d,{anim:!0}).then(function(){h.default.I.removePopwinList()}),[2]})})},E.prototype.setad=function(){this.isvideo=!this.isvideo,this.m_arrow.active=this.isvideo,this.isvideo?f.default.playAnim(this.m_Sharevideo.node,"state_onlinegift_video"):f.default.playAnim(this.m_Sharevideo.node,"state_onlinegift_free")},E.prototype.onClose=function(){l.prototype.onClose.call(this),h.default.I.isopenonlinegift=!1},E.prefabPath="prefab/popwin/popwin_onlinegift",s([i(M.default)],E.prototype,"m_Sharevideo",void 0),s([i(cc.Node)],E.prototype,"m_arrow",void 0),o=d=s([o],E),r.default=o,cc._RF.pop()},{}],OnlineMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a392cDF345HkafcysTB/Soq","OnlineMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKTools"),a=o("SDKEnums"),s=o("StarConfig");function c(){this.bannerOpen={fail:1,win:1,shop:0,game:1,rank:1,chest:1,random:1,invite:0,record:0,reward:0,revive:1,service:0,history:0,collect:0,floating:0,chest_tip:1,reward_hint:0,task:1,energy:1,checkpoint:1,popup:1},this.adIds={banner_game:"adunit-aabb26cd01966195",banner_common:"adunit-932a02079eb8aa61",custom_left:"adunit-43728e08f423fa86",custom_right:"adunit-b16acbb66c0a2e54",custom_bottom:"adunit-f56c8b4066ab9a93",custom_single:"adunit-bb30dc7ba8349c5b",custom_matrix_inter:"adunit-b0a4d678bbc5c059",custom_single_forwx:"adunit-bb30dc7ba8349c5b",custom_matrix:"adunit-1a5e8b233995f7f8",interstitial:"adunit-d2ab5dbe1249789d"}}(o=i.AdType||(i.AdType={})).BannerGame="banner_game",o.BannerCommon="banner_common",o.CustomLeft="custom_left",o.CustomRight="custom_right",o.CustomBottom="custom_bottom",o.CustomSingle="custom_single",o.CustomSingleWx="custom_single_forwx",o.CustomMatrixInter="custom_matrix_inter",o.CustomMatrix="custom_matrix",o.Interstitial="interstitial",c.prototype.init=function(){},c.prototype.getAdByType=function(e){return this.getObject(a.OnlineKeys.SDKADList,this.adIds)[e]},Object.defineProperty(c.prototype,"GameBanerRefresh",{get:function(){return r.default.getParamsInt(a.OnlineKeys.GameBannerRefresh,10)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ChestMax",{get:function(){return r.default.getParamsInt(a.OnlineKeys.ChestMax,s.StarConfig.ChestMax)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ChestRewards",{get:function(){return r.default.getParamsObj(a.OnlineKeys.ChestRewards,s.StarConfig.ChestRewards)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"BlockRewards",{get:function(){return r.default.getParamsObj(a.OnlineKeys.BlockRewardLimit,s.StarConfig.BlockRewardLimit)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"getLvParam",{get:function(){return r.default.getParamsObj(a.OnlineKeys.LvupP,s.StarConfig.LvupP)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"InviteRewards",{get:function(){return r.default.getParamsObj(a.OnlineKeys.InviteRewards,s.StarConfig.InviteRewards)},enumerable:!0,configurable:!0}),c.prototype.getBanner=function(e){if(!e)return!0;var t=this.getObject(a.OnlineKeys.BannerModulesOpen,this.bannerOpen);return!!t&&!!t[(e=e.split("/"))[e.length-1].replace(/(popwin|panel)_/,"")]},Object.defineProperty(c.prototype,"BottomSkipOffset",{get:function(){return r.default.getParamsInt(a.OnlineKeys.BottomSkipOffset,20)},enumerable:!0,configurable:!0}),c.prototype.getInt=function(e,t){return void 0===t&&(t=0),r.default.getParamsInt(e,t)},c.prototype.getBool=function(e,t){return void 0===t&&(t=0),1===r.default.getParamsInt(e,t)},c.prototype.getString=function(e,t){return void 0===t&&(t=""),r.default.getParamsString(e,t)},c.prototype.getObject=function(e,t){return r.default.getParamsObj(e,t)},Object.defineProperty(c,"I",{get:function(){return this._instance||(this._instance=new c)},enumerable:!0,configurable:!0}),o=c,i.default=o,i.OnlineMgr=o.I,cc._RF.pop()},{}],OpenContext:[function(e,t,n){"use strict";cc._RF.push(t,"bb625FKKxVP+r81YO+bkjnl","OpenContext");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("DataMgr"),s=o("RankEnum");function c(){}Object.defineProperty(c.prototype,"ShareCanvas",{get:function(){return this.sharedCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"OpenId",{get:function(){return a.DataMgr.UserBase.UserOpenId},enumerable:!0,configurable:!0}),c.prototype.post=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=s.RankType.None),"object"==typeof wx&&wx.getOpenDataContext().postMessage(r({type:n,event:s.RankEvent[e]},t))},c.prototype.save=function(e,t,n){void 0===n&&(n=!1),this.post(s.RankEvent.Update1,{keys:["score","honor1"],values:[e,t],isForceUpdate:n,openid:this.OpenId})},c.prototype.setSize=function(e,t){var n;"object"==typeof wx&&(n=wx.getOpenDataContext(),this.sharedCanvas=n.canvas,this.sharedCanvas&&(this.sharedCanvas.width=e,this.sharedCanvas.height=t))},Object.defineProperty(c,"I",{get:function(){return this._instance||(this._instance=new c)},enumerable:!0,configurable:!0}),o=c,i.default=o,cc._RF.pop()},{}],PausePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"a72a8IW1YVDp68vRvxWbk17","PausePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l,d=o("AudioEnum"),p=o("AudioMgr"),h=o("BubbleMgr"),f=o("ABTools"),m=o("Action"),g=o("Display"),_=o("Enum"),y=o("DataMgr"),v=o("OnlineMgr"),b=o("SDKAnalytics"),S=o("SDKEnums"),w=o("SDKTools"),A=o("WXApi"),M=o("BasePopwin"),T=o("ViewMgr"),P=o("ChestOverPopwin");function E(){var e=null!==u&&u.apply(this,arguments)||this;return e.btnReplay=null,e.iconAudio=null,e.iconVibrate=null,e.nodeFeedback=null,e.txtUserId=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(E,u=M.default),(l=E).prototype.onOpen=function(e){u.prototype.onOpen.call(this,e),this.initUI(),A.default.I.showgrideadBottom(),this.wxBtnFeedback&&this.wxBtnFeedback.destroy()},E.prototype.onOpend=function(e){u.prototype.onOpend.call(this,e),this.doInitOpen()},E.prototype.onHide=function(){this.wxBtnFeedback&&this.wxBtnFeedback.hide()},E.prototype.onShow=function(){this.wxBtnFeedback&&this.wxBtnFeedback.show()},E.prototype.onClose=function(){A.default.I.hidegrideadBottom(),this.wxBtnFeedback&&this.wxBtnFeedback.destroy(),this.wxBtnFeedback=null,u.prototype.onClose.call(this)},E.prototype.onTouchMask=function(){this.onBack()},Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(l.prefabPath)},enumerable:!0,configurable:!0}),E.prototype.oncopyid=function(){p.AudioMgr.button(),PCSDK.wxApi.copy((1e7+y.DataMgr.UserBase.ID).toString()).then(function(){return g.default.showTip("ID\u590d\u5236\u6210\u529f")})},E.prototype.initUI=function(){this.txtUserId.string="ID: "+(1e7+y.DataMgr.UserBase.ID),this.initAudio(),this.initVibrate()},E.prototype.initAudio=function(){var e=this.iconAudio.node.getComponent(cc.Animation);y.DataMgr.User.Data.mute?e.play("state_music_off"):e.play("state_music_on")},E.prototype.initVibrate=function(e){void 0===e&&(e=!1);var t=this.iconVibrate.node.getComponent(cc.Animation);e&&y.DataMgr.User.Data.vibrate&&w.default.vibrateShort(),y.DataMgr.User.Data.vibrate?t.play("state_shanke_on"):t.play("state_shanke_off")},E.prototype.doInitOpen=function(){m.default.playAddAnim(this.btnReplay)},E.prototype.initFeedback=function(e){e=g.default.getRectSize(e),e={type:"text",text:"",backgroundColor:"#ff0000",style:s({},e,{borderRadius:4})},this.wxBtnFeedback=w.default.createFeedbackButton(e)},E.prototype.onBack=function(){p.AudioMgr.button(),this.handleClose()},E.prototype.onSound=function(){var e=this;p.AudioMgr.button(),y.DataMgr.User.reqSwitchMute().then(function(){p.AudioMgr.musicMuted=y.DataMgr.User.Data.mute,p.AudioMgr.playMusic(d.AudioEnum.bubble_bgm1),e.initAudio()}),b.default.event(S.EventKeys.MenuAudio,S.EventFrom.Menu)},E.prototype.onVibrate=function(){var e=this;p.AudioMgr.button(),y.DataMgr.User.reqSwitchVibrate().then(function(){return e.initVibrate(!0)}),b.default.event(S.EventKeys.MenuVibrate,S.EventFrom.Menu)},E.prototype.onShare=function(){p.AudioMgr.button(),w.default.share(S.ShareKeys.Friends,{invite_type:_.InviteType.Net}),b.default.event(S.EventKeys.MenuShare,S.EventFrom.Menu)},E.prototype.onReplay=function(){p.AudioMgr.button(),this.handleClose(),h.default.I.reStart()},E.prototype.onExit=function(){p.AudioMgr.button(),this.handleClose(),0<y.DataMgr.Task.CollectTempNum&&f.default.I.wxGiveUpPopup?T.ViewMgr.openPopwin(P.default,{data:{type:0}}):h.default.I.showUILevel()},E.prototype.handleClose=function(){this.wxBtnFeedback&&this.wxBtnFeedback.hide(),this.doClose(l)},E.prefabPath="prefab/popwin/popwin_pause",c([i(cc.Node)],E.prototype,"btnReplay",void 0),c([i(cc.Sprite)],E.prototype,"iconAudio",void 0),c([i(cc.Sprite)],E.prototype,"iconVibrate",void 0),c([i(cc.Node)],E.prototype,"nodeFeedback",void 0),c([i(cc.Label)],E.prototype,"txtUserId",void 0),o=l=c([o],E),r.default=o,cc._RF.pop()},{}],PersistNode:[function(e,t,n){"use strict";cc._RF.push(t,"d9fe2pnjDFDyIjDox9bbvzn","PersistNode");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("TopBar"),l=o("ViewMgr"),d=o("LoadGame"),p=o("LoadHome"),h=o("Action"),f=o("Display"),m=o("Enum"),g=o("EventMgr"),_=o("EventEnum"),y=o("PlatformUtils"),v=o("OnlineMgr"),b=o("SDKTools");function S(){var e=null!==c&&c.apply(this,arguments)||this;return e.loading=null,e.nodeBlack=null,e.livingroom=null,e.loadingBone=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(S,c=cc.Component),Object.defineProperty(S.prototype,"TopBar",{get:function(){return this.topBar&&this.topBar.getComponent(u.default)},enumerable:!0,configurable:!0}),S.prototype.showBlack=function(){this.nodeBlack.active=!0;var e=v.OnlineMgr.getAdByType(v.AdType.BannerGame),t=v.OnlineMgr.getAdByType(v.AdType.BannerCommon);e&&b.default.hide(e),t&&b.default.hide(t)},S.prototype.hideBlack=function(){this.nodeBlack.active=!1},Object.defineProperty(S.prototype,"IsShowBlack",{get:function(){return!!this.nodeBlack.active},enumerable:!0,configurable:!0}),S.prototype.install=function(e){this.topBar||(this.topBar=e,this.topBar.parent=this.loading.parent,f.default.adjustIphoneX(this.topBar),y.default.isH5&&(window.PersistNode=this))},S.prototype.addLivingRoom=function(e){if(e&&e.length)for(var t=this.livingroom,n=(e=e.reverse()).length-1;0<=n;n--)e[n].parent=t;this.livingroom.active=!1},S.prototype.getLivingRoom=function(){return 0===this.livingroom.children.length?null:this.livingroom.children},S.prototype.loadToGame=function(){var e=this;this.loading.active=!0,f.default.topShow(m.TopBarType.None),h.default.playAddAnim(this.loading,"anim_enter");var t=this.loadingBone;t.playAnimation("run_1",1),t.timeScale=2,t.once(dragonBones.EventObject.COMPLETE,function(){e.loading.getComponent(d.default).action({before:function(){l.ViewMgr.closeAllPopwin()},after:e.handleLoadSuccess,context:e})},this)},S.prototype.loadToHome=function(){var e=this;this.loading.active=!0,f.default.topShow(m.TopBarType.None),h.default.playAddAnim(this.loading,"anim_enter");var t=this.loadingBone;t.playAnimation("run_1",1),t.timeScale=2,t.once(dragonBones.EventObject.COMPLETE,function(){e.loading.getComponent(p.default).action({before:function(){l.ViewMgr.closeAllPopwin()},after:e.handleLoadSuccess,context:e})},this)},S.prototype.handleLoadSuccess=function(){var e=this,t=this.loadingBone;t.playAnimation("run_2",1),t.once(dragonBones.EventObject.COMPLETE,function(){g.EventMgr.emit(_.EventEnum.LoadHomeSuccess),h.default.playAddAnim(e.loading,"anim_out").then(function(){e.loading.active=!1}).catch(function(){e.loading.active=!1})},this)},s([i(cc.Node)],S.prototype,"loading",void 0),s([i(cc.Node)],S.prototype,"nodeBlack",void 0),s([i(cc.Node)],S.prototype,"livingroom",void 0),s([i(dragonBones.ArmatureDisplay)],S.prototype,"loadingBone",void 0),o=s([o],S),r.default=o,cc._RF.pop()},{}],PlatformAd:[function(e,t,n){"use strict";cc._RF.push(t,"f387dwvA0pCSYpBXbYDELRY","PlatformAd");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("SDKTools"),s=o("Display"),c=o("DataMgr"),u=o("Enum"),l=o("SDKEnums"),d=o("OnlineMgr"),p=o("StarConfig"),h=o("AppDataMgr");function f(){}f.interstitialWithOnshow=function(){d.OnlineMgr.getInt(l.OnlineKeys.InterstitialAdOnshow,0)&&a.default.interstitialShow(d.OnlineMgr.getAdByType(d.AdType.Interstitial))},f.interstitialWithFail=function(){f.showInterstitial(u.AppDataKey.FailCount,l.OnlineKeys.InterstitialFailCd,p.StarConfig.InterstitialAdCd)},f.interstitialWithHome=function(){c.DataMgr.User.CurLevel>=d.OnlineMgr.getInt(l.OnlineKeys.InterstitialHomeLv,p.StarConfig.InterstitialAdCd)&&f.showInterstitial(u.AppDataKey.HomeCount,l.OnlineKeys.InterstitialHomeCd,p.StarConfig.InterstitialAdCd)},f.interstitialWithGame=function(){c.DataMgr.User.MaxLevel>=d.OnlineMgr.getInt(l.OnlineKeys.InterstitialGameLv,p.StarConfig.InterstitialAdCd)&&f.showInterstitial(u.AppDataKey.GameCount,l.OnlineKeys.InterstitialGameCd,p.StarConfig.InterstitialAdCd)},f.showInterstitial=function(e,t,n){var o=h.AppDataMgr.get(e,0);o+1>=d.OnlineMgr.getInt(t,n)?(h.AppDataMgr.set(e,0),a.default.interstitialShow(d.OnlineMgr.getAdByType(d.AdType.Interstitial))):h.AppDataMgr.set(e,o+1)},f.createAuthBtn=function(e,t,n,o){void 0===o&&(o={}),n=s.default.getRectSize(n),n={type:"text",text:"",style:r({},n,{borderRadius:4})},t={isDebug:!1,msg:t=t||"\u67e5\u770b\u4e16\u754c\u6392\u884c\u699c\u9700\u6388\u6743\r\n\u662f\u5426\u524d\u5f80\u8bbe\u7f6e\u754c\u9762\u5f00\u542f?",callback:function(e){1===e?(a.default.login(!0),o.callback&&o.callback.call(o.context,1)):0===e?o.callback&&o.callback.call(o.context,0):o.callback&&o.callback.call(o.context,-1)},context:this},a.default.createUserBtns(e,n,t)},o=f,i.default=o,cc._RF.pop()},{}],PlatformUtils:[function(e,t,n){"use strict";cc._RF.push(t,"24e30SiCMZOLrMgfXy5i0Rm","PlatformUtils");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r,a=o("Const");function s(){}Object.defineProperty(s,"Platform",{get:function(){var e=a.default.GameEnName;return-1!==e.indexOf("_qq")?r.QQ:"object"==typeof wx?r.WX:-1!==e.indexOf("_oppo")?r.Oppo:r.H5},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isH5",{get:function(){return s.Platform===r.H5},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isWx",{get:function(){return s.Platform===r.WX},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isTecent",{get:function(){return"object"==typeof wx&&(s.Platform===r.WX||s.Platform===r.QQ)},enumerable:!0,configurable:!0}),o=s,i.default=o,(i=r=i.Platform||(i.Platform={}))[i.WX=0]="WX",i[i.QQ=1]="QQ",i[i.H5=2]="H5",i[i.Oppo=3]="Oppo",cc._RF.pop()},{}],PlotMgr:[function(e,t,n){"use strict";cc._RF.push(t,"301915I1RVC2KTVTboUSI53","PlotMgr");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)},a=__AWAITER__,s=__GENERATOR__;Object.defineProperty(i,"__esModule",{value:!0});var c,u,l=o("Debug"),d=o("Display"),p=o("ABTools"),h=o("ViewMgr"),f=o("DataMgr"),m=o("SDKEnums"),g=o("EventMgr"),_=o("CommonMgr"),y=o("EventEnum"),v=o("GameStory"),b=o("GameFitTask"),S=o("Enum");function w(){this.context=null,this.mStep={},this.mData=null,this.mPloting=!1,this.mUIState=S.PlotUIState.None}w.prototype.getById=function(e){return f.DataMgr.Plot.getPlotById(e)},w.prototype.getContents=function(e){return(p.default.IsStory?e.contents:e.contents_b)||[]},Object.defineProperty(w.prototype,"StepIndex",{get:function(){var e=this.mData.id;return this.mStep[e]||0},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"isPloting",{get:function(){return this.mPloting},enumerable:!0,configurable:!0}),w.prototype.setIsPloting=function(e){this.mPloting=e},w.prototype.setStep=function(e,t){this.mStep[e]=t},w.prototype.addStep=function(e){this.mStep[e]+=1},w.prototype.clear=function(){this.mStep={}},w.prototype.isStepOver=function(e){var t=this.getById(e);return!t||this.mStep[e]>=this.getContents(t).length},w.prototype.isPlotStart=function(){return!f.DataMgr.User.isOverPlot(c.Start1)&&!this.isStepOver(c.Start1)},w.prototype.begin=function(e){this.context=e,(e=f.DataMgr.User.getCurrPlot())&&(this.resetTask(),this.execute(e.id))},w.prototype.clearPlot=function(){var e=f.DataMgr.User.getCurrPlot();e&&e.id===c.Start1&&(this.mStep[c.Start1]=S.PlotState.None,this.mStep[c.Start2]=S.PlotState.None,this.mStep[c.Start3]=S.PlotState.None)},w.prototype.getStatus=function(e){if(!e)return{code:-1,msg:"\u3010\u5267\u60c5"+e+"\u4e0d\u5b58\u5728\uff01\u3011"};var t=this.getById(e);return t?f.DataMgr.User.isOverPlot(e)?{code:-1,msg:"\u3010\u5267\u60c5"+e+"\u5df2\u7ecf\u7ed3\u675f\uff01\u3011",data:t}:f.DataMgr.User.isPlanPlot(e)?{code:0,msg:"",data:t}:{code:-1,msg:"\u3010\u5267\u60c5"+e+"\u6ca1\u6709\u88ab\u5b89\u6392\uff01\u3011",data:t}:{code:-1,msg:"\u3010\u5267\u60c5"+e+"\u6570\u636e\u627e\u4e0d\u5230\uff01\u3011",data:t}},w.prototype.resetTask=function(){this.taskData=null},w.prototype.execute=function(e){var t=this,n=this.getStatus(e);if(-1===n.code)return Promise.reject(n.msg);var o=n.data;return this.mData=o,this.mPloting=!0,this.mStep[e]=this.mStep[e]||0,l.default.error("PlotMgr begin\u3011\u5f00\u59cb\u5267\u60c5",e,o),g.EventMgr.emit(y.EventEnum.SwitchLockBg,1),new Promise(function(e){var n=f.DataMgr.Milestone.getTaskByPlotId(o.id),i=o.focus[0];n=n&&n.add_furnitures[0]||null,t.context.actionMoveMap(i,n).then(function(){t.actionStep(),t.setState(S.PlotUIState.Entering),e(null)}).catch(function(){t.actionStep(),t.setState(S.PlotUIState.Entering),e(null)})})},w.prototype.getSkipIndex=function(){var e=this.getContents(this.mData),t=this.StepIndex,n=e.length;if(t===n-1)return n;for(;t<n;t++)if(-1===e[t].indexOf("dialog_"))return t;return n},w.prototype.skip=function(){var e,t=this.mData.id,n=this.getSkipIndex();this.setStep(t,n),this.handleStep(n),120===t?e=2:130===t?e=3:140===t&&(e=4),e&&_.default.I.sdkEventWithStr("Plot"+e+"_plotsFin")},w.prototype.actionStep=function(){var e=this.StepIndex;this.handleStep(e)},w.prototype.handleStep=function(e){var t=this.mData.id;e=this.getContents(this.mData)[e],this.addStep(t),e?0===e.indexOf(u.Dialog)?this.handlePlotDialog(t,e):0===e.indexOf(u.Task)?this.handlePlotTask(t,e.replace(u.Task,"")):0===e.indexOf(u.Anim)&&this.handlePlotAnim(t,e):this.handlePlotEnd()},w.prototype.handlePlotEnd=function(){return a(this,void 0,void 0,function(){var e,t,n,o=this;return s(this,function(i){switch(i.label){case 0:return n=this.mData,e=n.id,n=n.end_action,this.asyncTask(),g.EventMgr.emit(y.EventEnum.SwitchLoadHDState,0),120===e?t=2:130===e?t=3:140===e&&(t=4),t&&_.default.I.sdkEventWithStr("Plot"+t+"_plotsFin"),[4,h.ViewMgr.closePopwin(v.default)];case 1:return i.sent(),t=n.replace("enter_",""),(n=+t)?(this.mPloting=!1,f.DataMgr.User.reqAysncPlot(n,S.PlotState.Plan),this.execute(n)):"game"===t?(this.mPloting=!1,d.default.PersistNode.loadToGame()):"task"===t&&h.ViewMgr.openPopwin(b.default,{data:{uiHome:S.HomeUIState.TopMenu,isAuto:!0}}).then(function(){return o.mPloting=!1}).catch(function(){return o.mPloting=!1}),g.EventMgr.emit(y.EventEnum.SwitchLockBg,0),[2]}})})},w.prototype.handlePlotDialog=function(e,t){t=f.DataMgr.Plot.getDialogById(t),h.ViewMgr.openPopwin(v.default,{data:r({},t,{plotId:e,uiHome:S.HomeUIState.HideAll})})},w.prototype.handlePlotTask=function(e,t){return a(this,void 0,void 0,function(){var n,o=this;return s(this,function(i){switch(i.label){case 0:return[4,h.ViewMgr.closePopwin(v.default)];case 1:return i.sent(),n=f.DataMgr.Milestone.getTaskById(+t),g.EventMgr.emit(y.EventEnum.ActionPlanTask,{data:n,isMove:!1,callback:function(t,n){return o.onPlotEnd(e,{skin:t,furnitures:n})},context:this}),[2]}})})},w.prototype.handlePlotAnim=function(e,t){return a(this,void 0,void 0,function(){var n=this;return s(this,function(o){switch(o.label){case 0:return[4,h.ViewMgr.closePopwin(v.default)];case 1:return o.sent(),g.EventMgr.emit(y.EventEnum.ActionPlotAnim,{data:t,callback:function(){return n.onPlotEnd(e,null)},context:this}),[2]}})})},w.prototype.onPlotEnd=function(e,t){t&&(this.taskData=t,e===c.Task02&&_.default.I.sdkEventWithKey(m.EventKeys.Task2_decorAniFin)),this.isStepOver(e)?this.handlePlotEnd():this.actionStep()},w.prototype.asyncTask=function(){var e,t,n=(i=this.mData).id,o=i.end_action,i=this.getContents(this.mData).filter(function(e){return 0<=e.indexOf(u.Task)}).map(function(e){return+e.replace(u.Task,"")});f.DataMgr.User.reqAysncPlot(n,S.PlotState.Over),i.length?(e=f.DataMgr.Milestone.getTaskCostStar(i[0]),i.forEach(function(e){var t=f.DataMgr.Milestone.getTaskById(e);t&&(f.DataMgr.User.reqUpdateTaskState(e,{to:S.ActionFitTask.Out},!0),f.DataMgr.User.reqNextAppearTask(),f.DataMgr.User.reqAsyncNextTask(t))}),f.DataMgr.User.reqStar(-e,{isSync:!0})):!Number.isNaN(+o.replace("enter_",""))||(t=f.DataMgr.Milestone.getTaskByPlotId(n))&&(n=t.id,e=f.DataMgr.Milestone.getTaskCostStar(t.id),f.DataMgr.User.reqUpdateTaskState(n,{to:S.ActionFitTask.Out},!0),f.DataMgr.User.reqNextAppearTask(),f.DataMgr.User.reqAsyncNextTask(t),f.DataMgr.User.reqStar(-e,{isSync:!0})),this.taskData&&(e=(t=this.taskData).skin,t=t.furnitures,e&&t.length&&f.DataMgr.User.reqOpenFurnitureSkin(e,t,!0,!0))},w.prototype.isState=function(e){return this.mUIState===e},w.prototype.setState=function(e){this.isState(e)||(this.mUIState=e)},Object.defineProperty(w,"I",{get:function(){return this.__instance||(this.__instance=new w)},enumerable:!0,configurable:!0}),o=w,i.default=o,(o=c=i.PlotID||(i.PlotID={}))[o.None=0]="None",o[o.Start1=100]="Start1",o[o.Start2=101]="Start2",o[o.Start3=102]="Start3",o[o.Task01=110]="Task01",o[o.Task02=120]="Task02",o[o.Task03=130]="Task03",o[o.Task04=140]="Task04",o[o.Task05=150]="Task05",o[o.Task06=160]="Task06",o[o.Task07=170]="Task07",o[o.Task08=180]="Task08",o[o.Finish=1e6]="Finish",(i=u=i.PlotPrefix||(i.PlotPrefix={})).Anim="anim_",i.Dialog="dialog_",i.Task="decortask_",cc._RF.pop()},{}],PlotModel:[function(e,t,n){"use strict";cc._RF.push(t,"1956cckiQlDKoHIVEjOBD0K","PlotModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s,c=o("BaseModel");function u(){var e=s.call(this)||this;return e.init(),e}(o=a=i.PlotKey||(i.PlotKey={})).Plots="Plots",o.Dialogs="Dialogs",r(u,s=c.default),u.prototype.init=function(){this._cfgData=Object.create(null)},u.prototype.setCfg=function(e){this._cfgData=e},u.prototype.getCfg=function(e){return this._cfgData[e]},u.prototype.clearData=function(){this.init()},Object.defineProperty(u.prototype,"Dialogs",{get:function(){return this.getCfg(a.Dialogs)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Plots",{get:function(){return this.getCfg(a.Plots)},enumerable:!0,configurable:!0}),u.prototype.getPlotById=function(e){return this.Plots.filter(function(t){return t.id===e})[0]},u.prototype.getDialogById=function(e){return this.Dialogs[e]},u.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(u,"I",{get:function(){return this.instance||(this.instance=new u)},enumerable:!0,configurable:!0}),u.instance=null,r=u,i.default=r,cc._RF.pop()},{}],PointData:[function(e,t,n){"use strict";cc._RF.push(t,"64a64XBFcxGirWxJCU7Kq3A","PointData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){this.comps=[],this.tips=[]},i.default=o,cc._RF.pop()},{}],PointMgr:[function(e,t,n){"use strict";cc._RF.push(t,"28fe7HhA7BNK4Ap/KH6ArsD","PointMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("DataMgr"),a=o("ArrayUtils");function s(){this.isDebug=!1,this.pointDatas={}}s.prototype.register=function(e){if(e&&e.length){for(var t,n=0,o=e.length;n<o;n++){var i,r=(t=e[n]).type;this.pointDatas[r]?(i=this.pointDatas[r],this.pointDatas[r]={type:i.type,comps:i.comps.concat(t.comps)}):this.pointDatas[r]=t,this.initPoint(t)}this.isDebug}},s.prototype.unregister=function(e){var t=this;if(e&&e.length){for(var n,o=0,i=e.length;o<i;o++){var r,s=(n=e[o]).type;this.pointDatas[s]&&(0===(r=(r=this.pointDatas[s].comps).filter(function(e){return-1===a.default.indexOf(n.comps,function(t){return e===t},t)})).length?(this.pointDatas[s]=null,delete this.pointDatas[s]):this.pointDatas[s].comps=r,this.isDebug)}this.isDebug}},s.prototype.refresh=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e=e||this.ModuleTypes;for(var n=0;n<e.length;n++){var o=e[n];this.updatePoint(o)}},s.prototype.getSingleTipNum=function(e){return r.DataMgr.Point.getPointNum(e)},s.prototype.getMultipleTipNum=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=0;o<e.length;o++)0<this.getSingleTipNum(e[o])&&(n+=1);return n},s.prototype.initPoint=function(e){this.renderPointUI(e,!1)},s.prototype.updatePoint=function(e){e=this.pointDatas[e],this.renderPointUI(e,!0)},s.prototype.renderPointUI=function(e){var t,n,o=this;e&&(t=e.type,n=e.tips,e.comps.forEach(function(e){var i;cc.isValid(e,!0)&&(i=n&&n.length?o.getMultipleTipNum.apply(o,n):o.getSingleTipNum(t),e.refresh(i),o.isDebug)}))},Object.defineProperty(s.prototype,"ModuleTypes",{get:function(){var e,t=[];for(e in this.pointDatas)this.pointDatas.hasOwnProperty(e)&&t.push(this.pointDatas[e].type);return t},enumerable:!0,configurable:!0}),Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s._instance=null,o=s,i.default=o,i.PointMgr=o.I,cc._RF.pop()},{}],PointModel:[function(e,t,n){"use strict";cc._RF.push(t,"16655IB8PdLM78dgzOCTh7K","PointModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseModel"),c=o("DataMgr"),u=o("SDKTools"),l=o("SDKEnums"),d=o("PointMgr"),p=o("StarConfig"),h=o("Enum");function f(){var e=a.call(this)||this;return e.data={temp_menu:1,temp_invite:1},e.isInit=!1,e}r(f,a=s.default),f.prototype.setData=function(e){var t=!1;this.isInit||(t=this.isInit=!0),e&&e.hasOwnProperty("invite_num")&&(t?this.setInviteNum(e.invite_num,!0):this.updatePoint(h.ModuleType.InviteNum))},Object.defineProperty(f.prototype,"Menu",{get:function(){return this.MenuTemp||this.MenuInvite},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"MenuTemp",{get:function(){return this.data&&this.data.temp_menu||0},enumerable:!0,configurable:!0}),f.prototype.setMenuTemp=function(e){return!!this.data&&this.MenuTemp!==e&&(this.data.temp_menu=e,!0)},Object.defineProperty(f.prototype,"MenuInvite",{get:function(){return this.TempInvite||this.InviteNum},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"TempInvite",{get:function(){return this.data&&this.data.temp_invite||0},enumerable:!0,configurable:!0}),f.prototype.setTempInvite=function(e){return!!this.data&&this.TempInvite!==e&&(this.data.temp_invite=e,!0)},Object.defineProperty(f.prototype,"InviteNum",{get:function(){return this.data&&this.data.invite_num||0},enumerable:!0,configurable:!0}),f.prototype.setInviteNum=function(e,t){return void 0===t&&(t=!1),!!this.data&&(e=t?e:Math.max(this.InviteNum+e,0),this.InviteNum!==e&&(this.data.invite_num=e,!0))},Object.defineProperty(f.prototype,"Shop",{get:function(){return this.ShopInvite||this.Service||this.Collect||this.Floating},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ShopInvite",{get:function(){return this.TempInvite||this.InviteNum},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Service",{get:function(){return c.DataMgr.Local.ServiceState===h.RewardState.Received?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Floating",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Collect",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ShopVideo",{get:function(){return c.DataMgr.User.getDayDataWithKey(h.DayKeys.ShopFreeStar,0)>=u.default.getParamsInt(l.OnlineKeys.ShopFreeStar,p.StarConfig.ShopFreeStar)?0:1},enumerable:!0,configurable:!0}),f.prototype.updatePoint=function(e,t){void 0===t&&(t=0);var n=[e];switch(e){case h.ModuleType.Menu:this.setMenuTemp(t),n=[h.ModuleType.Menu];break;case h.ModuleType.Service:n=[h.ModuleType.Shop,h.ModuleType.Service];break;case h.ModuleType.Collect:n=[h.ModuleType.Shop,h.ModuleType.Collect];break;case h.ModuleType.Floating:n=[h.ModuleType.Shop,h.ModuleType.Floating];break;case h.ModuleType.TempInvite:if(!this.setTempInvite(t))return;n=[h.ModuleType.Shop,h.ModuleType.ShopInvite,h.ModuleType.Menu,h.ModuleType.MenuInvite];break;case h.ModuleType.InviteNum:if(!this.setInviteNum(t))return;n=[h.ModuleType.Shop,h.ModuleType.ShopInvite,h.ModuleType.Menu,h.ModuleType.MenuInvite]}d.PointMgr.refresh.apply(d.PointMgr,n)},f.prototype.getPointNum=function(e){switch(e){case h.ModuleType.MenuInvite:return this.MenuInvite;case h.ModuleType.ShopInvite:return this.ShopInvite;case h.ModuleType.Menu:return this.Menu;case h.ModuleType.Shop:return this.Shop;case h.ModuleType.Service:return this.Service;case h.ModuleType.Collect:return this.Collect;case h.ModuleType.Floating:return this.Floating;default:return 0}},f.prototype.clearData=function(){this.clear()},f.prototype.clear=function(){this.data=null,this.setData(null)},Object.defineProperty(f,"I",{get:function(){return this._instance||(this._instance=new f)},enumerable:!0,configurable:!0}),f._instance=null,r=f,i.default=r,cc._RF.pop()},{}],PoolMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1065aDooc9ElJZioJ1u6O29","PoolMgr");var o,i=n;function r(){this.dictPools={}}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.getNode=function(e){var t,n=e.__name;return this.dictPools.hasOwnProperty(n)?0<(t=this.dictPools[n]).size()?t.get():new e:(t=new cc.NodePool(n),this.dictPools[n]=t,new e)},r.prototype.getPrefab=function(e,t){var n,o=e.data.name,i=null;return i=this.dictPools.hasOwnProperty(o)?0<(n=this.dictPools[o]).size()?n.get():cc.instantiate(e):(n=new cc.NodePool(o),this.dictPools[o]=n,cc.instantiate(e)),cc.isValid(t)&&(i.parent=t),i},r.prototype.getObj=function(e,t){var n,o=e.name,i=null;return i=this.dictPools.hasOwnProperty(o)?0<(n=this.dictPools[o]).size()?n.get():cc.instantiate(e):(n=new cc.NodePool(o),this.dictPools[o]=n,cc.instantiate(e)),t&&(i.parent=t),i.active=!0,i.opacity=255,i},r.prototype.putNode=function(e){var t,n;cc.isValid(e)&&(t=e.name,n=null,this.dictPools.hasOwnProperty(t)?n=this.dictPools[t]:(n=new cc.NodePool(t),this.dictPools[t]=n),n.put(e))},r.prototype.clearPool=function(e){(e=this.dictPools[e])&&e.clear()},Object.defineProperty(r,"I",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r._instance=null,o=r,i.default=o,i.PoolMgr=o.I,cc._RF.pop()},{}],QueuePopMgr:[function(e,t,n){"use strict";cc._RF.push(t,"82ddfvsNYZHzqX/Vk84SXiB","QueuePopMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("ViewMgr");function a(){this.queuePopArr=[]}a.prototype.addShow=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.queuePopArr.unshift({cls:e,data:t,type:2}),this.show()},a.prototype.addEnd=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.queuePopArr.push({cls:e,data:t,type:1}),this},a.prototype.addTop=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.queuePopArr.unshift({cls:e,data:t,type:1}),this},a.prototype.show=function(){var e=this;return new Promise(function(t){e.resolveEnd=t,e.handleOpen()})},a.prototype.clear=function(){this.currShow=null},a.prototype.next=function(e){void 0===e&&(e=!0),this.currShow&&!this.currShow.cls.isAutoPop||(this.currShow=null,e&&this.handleOpen())},a.prototype.handleOpen=function(){var e=this;this.doOpen().then(function(t){return t.isEnd&&e.resolveEnd&&(e.resolveEnd(),e.resolveEnd=null)})},a.prototype.doOpen=function(){if(this.currShow)return Promise.reject();if(!(t=this.filterCanshowArr()).length)return this.queuePopArr=[],this.currShow=null,Promise.resolve({isEnd:!0});this.currShow=t.shift();var e=(n=this.currShow).cls,t=n.data,n=n.index;return e.isAutoPop=!0,this.queuePopArr.splice(n,1),r.ViewMgr.openPopwin.apply(r.ViewMgr,[e].concat(t)),Promise.resolve({isEnd:!1})},a.prototype.filterCanshowArr=function(){for(var e=[],t=0;t<this.queuePopArr.length;t++){var n=this.queuePopArr[t],o=n.cls,i=n.data;1===n.type?(n="function"==typeof o.canShow&&o.canShow())&&e.push({cls:o,index:t,data:n}):e.push({cls:o,index:t,data:i})}return e},Object.defineProperty(a,"I",{get:function(){return this.instance||(this.instance=new a)},enumerable:!0,configurable:!0}),o=a,i.default=o,i.QueuePopMgr=o.I,cc._RF.pop()},{}],RandomUtils:[function(e,t,n){"use strict";cc._RF.push(t,"11f18/4iuFE0LfEtbt31iql","RandomUtils");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(r,"seed",{get:function(){return this.s_seed},enumerable:!0,configurable:!0}),r.range=function(e,t){return Math.round(Math.random()*(t-e)+e)},r.random=function(e,t){return Math.floor(Math.random()*(t-e)+e)},r.rnd=function(){return(9301*r.s_seed+49297)%233280/233280},r.setSeed=function(e){r.s_seed=0<=e?e:(new Date).getTime(),r.s_randomSeedTimes=0},r.randomSeed=function(e,t){return r.s_seed+=++r.s_randomSeedTimes,Math.round(r.rand()*(t-e))+e},r.rand=function(){return r.rnd()},r.randomF=function(e,t){return Math.random()*(t-e)+e},r.randomArray=function(e){return e[Math.floor(Math.random()*e.length)]},r.arrayShuffle=function(e,t){for(var n,o,i=e.slice(0),r=e.length,a=r-t;r-- >a;)n=i[o=Math.floor((r+1)*Math.random())],i[o]=i[r],i[r]=n;return i.slice(a)},r.sortArray=function(e){return e.sort(function(){return.5<Math.random()?-1:1})},r.s_seed=(new Date).getTime(),r.s_randomSeedTimes=0,o=r,i.default=o,cc._RF.pop()},{}],RankEnum:[function(e,t,n){"use strict";cc._RF.push(t,"74194/dbhhBv41McOmeGMKS","RankEnum");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),(o=i.RankEvent||(i.RankEvent={}))[o.Show=0]="Show",o[o.Clear=1]="Clear",o[o.Update=2]="Update",o[o.Update1=3]="Update1",o[o.Update2=4]="Update2",o[o.Loading=5]="Loading",o[o.Potential=6]="Potential",o[o.Invite=7]="Invite",(i=i.RankType||(i.RankType={}))[i.None=0]="None",i[i.Game=1]="Game",i[i.Over=2]="Over",i[i.Friend=3]="Friend",cc._RF.pop()},{}],RankItem:[function(e,t,n){"use strict";cc._RF.push(t,"717470fvipOCapwbAAdfRfE","RankItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("ExtScrollView"),l=o("DataMgr");function d(){var e=null!==c&&c.apply(this,arguments)||this;return e.itemBgSelf=null,e.itemBgOther=null,e.number=null,e.numberBg=null,e.head=null,e.nickName=null,e.score=null,e.iconSpriteFrame=[],e.title=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(d,c=u.ExtScrollItem),d.prototype.updateCell=function(e){var t=this,n=e.rank,o=e.value,i=e.nickname,r=e.avatar_url;e=e.openid,this.nickName.string=i,this.score.string=o+"",l.DataMgr.UserBase.UserOpenId===e?(this.itemBgSelf.active=!0,this.itemBgOther.active=!1):(this.itemBgSelf.active=!1,this.itemBgOther.active=!0,this.nickName.node.color=cc.color(55,105,156)),n<=3?(this.numberBg.node.active=!0,this.numberBg.spriteFrame=this.iconSpriteFrame[n-1],this.number.node.parent.active=!1):(this.numberBg.node.active=!1,this.number.node.parent.active=!0,this.number.string=0==n?"100+":n+""),""!==r&&cc.loader.load({url:r,type:"png"},function(e,n){cc.isValid(t.head)&&!e&&(t.head.spriteFrame=new cc.SpriteFrame(n))})},s([i(cc.Node)],d.prototype,"itemBgSelf",void 0),s([i(cc.Node)],d.prototype,"itemBgOther",void 0),s([i(cc.Label)],d.prototype,"number",void 0),s([i(cc.Sprite)],d.prototype,"numberBg",void 0),s([i(cc.Sprite)],d.prototype,"head",void 0),s([i(cc.Label)],d.prototype,"nickName",void 0),s([i(cc.Label)],d.prototype,"score",void 0),s([i(cc.SpriteFrame)],d.prototype,"iconSpriteFrame",void 0),s([i(cc.Sprite)],d.prototype,"title",void 0),o=s([o],d),r.default=o,cc._RF.pop()},{}],RankPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"23e6bfjon9Glqqg0pjM82nA","RankPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("Api"),h=o("AudioMgr"),f=o("SDKTools"),m=o("ViewMgr"),g=o("EventMgr"),_=o("EventEnum"),y=o("Display"),v=o("ExtScrollView"),b=o("Enum"),S=o("Action"),w=o("OpenContext"),A=o("SDKAnalytics"),M=o("OnlineMgr"),T=o("BaseAnimPopwin"),P=o("RankEnum"),E=o("SDKEnums");function D(){var e=null!==l&&l.apply(this,arguments)||this;return e.wordRank=null,e.wordRankContent=null,e.rankItemPrefab=null,e.tabGroup=null,e.self=null,e.rankPrefab=null,e.worldScorllView=null,e.firstnode=null,e.ranknode1=null,e.ranknode2=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(D,l=T.default),(d=D).prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),this.tabIndex=1,this.dataList=[],this.isShowFriend=!1,this.focusTab(this.tabIndex,!0)},D.prototype.onOpend=function(){l.prototype.onOpend.call(this)},D.prototype.onRelease=function(){l.prototype.onRelease.call(this)},D.prototype.onHide=function(){},D.prototype.onShow=function(){},D.prototype.onClose=function(){l.prototype.onClose.call(this)},D.prototype.setSelfInfo=function(){var e=this.selfdata,t=this.self.getChildByName("rank").getComponent(cc.Label);e.rank<=0?t.string="1000+":t.string=e.rank.toString(),this.self.getChildByName("name").getComponent(cc.Label).string=e.nickname,this.self.getChildByName("score").getComponent(cc.Label).string=e.value.toString();var n=this.self.getChildByName("head").getChildByName("image").getComponent(cc.Sprite);""!==e.avatar_url&&cc.loader.load({url:e.avatar_url,type:"png"},function(e,t){cc.isValid(n)&&!e&&(n.spriteFrame=new cc.SpriteFrame(t))})},D.prototype.focusTab=function(e,t){switch(void 0===t&&(t=!1),e){case 0:this.forcusFriendRank(t);break;case 1:this.forcusWorldRank()}},D.prototype.forcusFriendRank=function(e){void 0===e&&(e=!1),this.firstnode.active=!1,this.self.active=!1,this.wordRank.active=!1,this.actionShowRank(),e||w.default.I.post(P.RankEvent.Loading,{offset:80}),this.isShowFriend=!0,S.default.playAnim(this.tabGroup,b.AnimNames.RankFriend),A.default.event(E.EventKeys.RankFriend,E.EventFrom.Rank)},D.prototype.actionShowRank=function(){cc.isValid(this.wxrank)&&this.wxrank.destroy();var e=cc.instantiate(this.rankPrefab);this.wxrank=e,this.node.getChildByName("content").addChild(e),e.y=0,w.default.I.post(P.RankEvent.Show,{keys:["score"],box:e.getBoundingBoxToWorld(),winSize:cc.winSize},P.RankType.Friend)},D.prototype.actionHideRank=function(){w.default.I.post(P.RankEvent.Clear)},D.prototype.forcusWorldRank=function(){var e,t=this;this.actionHideRank(),S.default.playAnim(this.tabGroup,b.AnimNames.RankWorld),f.default.Authorize?(this.self.active=!0,this.wordRank.active=!0,this.firstnode.active=!1,(e=this.dataList)&&e.length||(wx.showLoading({title:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u540e",mask:!0}),p.default.worldRank({type:10}).then(function(e){wx.hideLoading(),t.dataList=e.user_rank_list||[],t.selfdata=e.user_rank_data,t.worldScorllView.loadData(t.dataList,0),t.setSelfInfo()}).catch(function(){wx.hideLoading(),y.default.showTip("\u6392\u884c\u699c\u52a0\u8f7d\u5931\u8d25")}))):this.firstnode.active=!0,A.default.event(E.EventKeys.RankWorld,E.EventFrom.Rank)},D.prototype.refreshworld=function(){var e=this;this.self.active=!0,this.wordRank.active=!0,this.firstnode.active=!1;var t=this.dataList;t&&t.length||("object"==typeof wx&&wx.showLoading({title:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u540e",mask:!0}),p.default.worldRank({type:10}).then(function(t){"object"==typeof wx&&wx.hideLoading(),e.dataList=t.user_rank_list||[],e.selfdata=t.user_rank_data,e.worldScorllView.loadData(e.dataList,0,.3),e.setSelfInfo()}).catch(function(){"object"==typeof wx&&wx.hideLoading(),y.default.showTip("\u6392\u884c\u699c\u52a0\u8f7d\u5931\u8d25")}))},D.prototype.initAuthBtn=function(e,t){var n=this;y.default.createAuthBtn(t,"",e,{callback:function(e){0===e?y.default.showTip("\u67e5\u770b\u6392\u884c\u699c\u9700\u6388\u6743\u54e6~"):1===e&&n.refreshworld()},context:this})},Object.defineProperty(D.prototype,"BannerOpen",{get:function(){return M.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),D.prototype.handleClose=function(e){return void 0===e&&(e=!0),c(this,void 0,Promise,function(){return u(this,function(){return[2,m.ViewMgr.closePopwin(d,{anim:e})]})})},D.prototype.onTab=function(e,t){h.AudioMgr.button(),this.tabIndex!==+t&&(this.tabIndex=+t,this.focusTab(this.tabIndex,!1))},D.prototype.onShare=function(e){e.stopPropagation(),h.AudioMgr.button(),f.default.share(E.ShareKeys.Challenge)},D.prototype.onBack=function(){this.isShowFriend&&this.actionHideRank(),h.AudioMgr.button(),this.handleClose(!0).then(function(){return g.EventMgr.emit(_.EventEnum.UpdateFriendRank)})},D.prototype.removeView=function(){this.onRelease(),this.node.destroy()},D.prefabPath="prefab/popwin/popwin_rank",s([i(cc.Node)],D.prototype,"wordRank",void 0),s([i(cc.Node)],D.prototype,"wordRankContent",void 0),s([i(cc.Prefab)],D.prototype,"rankItemPrefab",void 0),s([i(cc.Node)],D.prototype,"tabGroup",void 0),s([i(cc.Node)],D.prototype,"self",void 0),s([i(cc.Prefab)],D.prototype,"rankPrefab",void 0),s([i(v.default)],D.prototype,"worldScorllView",void 0),s([i(cc.Node)],D.prototype,"firstnode",void 0),s([i(cc.Node)],D.prototype,"ranknode1",void 0),s([i(cc.Node)],D.prototype,"ranknode2",void 0),o=d=s([o],D),r.default=o,cc._RF.pop()},{}],RecordData:[function(e,t,n){"use strict";cc._RF.push(t,"16f12apdN9Ncq3EXMRzFO4t","RecordData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(e,t,n,o){this.level=0,this.score=0,this.timeProps={0:0,1:0,2:0},this.score=e,this.balls=t,this.timeProps=o,this.reviveTimes=n,this.tarballlv=0},i.default=o,cc._RF.pop()},{}],RedPacketCtr:[function(e,t,n){"use strict";cc._RF.push(t,"7a266inOpFJg5d2eGMzlsDj","RedPacketCtr");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Action"),p=o("BubbleMgr"),h=o("CheckTools"),f=o("UserModel"),m=o("Water"),g=o("DataMgr"),_=o("DateUtils"),y=o("RedPacketPopwin"),v=o("LoaderMgr"),b=o("PoolMgr"),S=o("Display"),w=o("RandomUtils"),A=o("AudioMgr"),M=o("ViewMgr"),T=o("ExchangePopwin");function P(){var e=null!==l&&l.apply(this,arguments)||this;return e.nodeBubble=null,e.instate=-1,e}o=(i=cc._decorator).ccclass,i=i.property,a(P,l=cc.Component),P.prototype.onLoad=function(){},P.prototype.checkAddRedPacket=function(e){return c(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:if(!h.default.IsRedPacketOpen)return[2];if(!(0<(t=g.DataMgr.Config.getRedPacketRandomintegral(this.getAllTempintegrals()))))return[3,4];p.default.I.m_tempintegrals.push({v:t,t:_.default.now}),t=0,n.label=1;case 1:return t<5?(this.playRedPacketAnim(e,t),[4,m.default.wait(5/60*1e3)]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},P.prototype.checkOpenFirstRedPacket=function(){h.default.IsRedPacketOpen&&(3e5<=f.default.I.RedPocketData.integral||(h.default.IsNewRedPacketUIOpen?p.default.I.addPopwinList(y.default,{},!1):this.addFirstRedPacket()))},P.prototype.addFirstRedPacket=function(){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:if(!h.default.IsRedPacketOpen)return[2];if(3e5<=f.default.I.RedPocketData.integral)return[2];f.default.I.reqAddRedPacket([{v:3e5,t:_.default.now}]),e=0,t.label=1;case 1:return e<5?(this.playRedPacketAnim(null,e),[4,m.default.wait(5/60*1e3)]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},P.prototype.getAllTempintegrals=function(){var e=0;return p.default.I.m_tempintegrals.forEach(function(t){e+=t.v}),e},P.prototype.setRedPacketInfo=function(e){var t=this;void 0===e&&(e=!1);var n=f.default.I.RedPocketData.integral+this.getAllTempintegrals(),o=this.node.getChildByName("red_bg").getChildByName("pro_bg").getChildByName("red_pro"),i=Math.min(1,n/5e5),r=this.node.getChildByName("red_bg").getChildByName("pro_bg").getChildByName("prolight_anim").children[0];cc.tween(o).to(.3,{width:90*i}).call(function(){e&&(r.width=0,t.node.getChildByName("red_bg").getChildByName("pro_bg").getChildByName("prolight_anim").getComponent(cc.Animation).play("anim_redlight"),cc.tween(r).to(.3,{width:90*i}).call(function(){}).start())}).start(),this.nodeBubble.active=f.default.I.CurLevel<2},P.prototype.playRedPacketAnim=function(e,t){var n=this;return new Promise(function(o){v.LoaderMgr.loadPrefabWithUrl("prefab/common/redpacked_fly").then(function(i){var r=b.PoolMgr.getPrefab(i);r.active=!0,r.parent=p.default.I.node.parent,r.position=e||cc.v2(cc.winSize.width/2,cc.winSize.height/2);var a=n.node.getChildByName("red_bg").getChildByName("img_red"),s=r.position,c=S.default.getTargetPos(a,p.default.I.node.parent).sub(r.position).mag()/1e3;i=S.default.getTargetPos(a,p.default.I.node.parent),a=S.default.getEndPointByTrigonometric(w.default.random(0,-200),s,i),d.default.bezierwitheasing(r,1,s,a,i,c).then(function(){b.PoolMgr.putNode(r),n.node.getChildByName("red_bg").getChildByName("img_red").getChildByName("img_redanim").getComponent(cc.Animation).play(),0==t&&n.setRedPacketInfo(!0),o(0)})})})},P.prototype.onRedPacket=function(){A.AudioMgr.button(),M.ViewMgr.openPopwin(T.default)},P.prototype.playBottominani=function(){0!=this.instate&&(this.node.getComponent(cc.Animation).play("anim_game_redpacket_in_bottom"),this.instate=0)},P.prototype.playinani=function(){1!=this.instate&&(this.node.getComponent(cc.Animation).play("anim_game_redpacket_in"),this.instate=1)},s([i(cc.Node)],P.prototype,"nodeBubble",void 0),o=s([o],P),r.default=o,cc._RF.pop()},{}],RedPacketPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"bdd1cXBnhVOCpXK8g7+8S9D","RedPacketPopwin");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=i("BasePopwin"),d=i("AudioMgr"),p=i("OnlineMgr"),h=i("SDKEnums"),f=i("SDKAnalytics"),m=i("BubbleMgr");function g(){var e=null!==c&&c.apply(this,arguments)||this;return e.time=5,e}i=(o=cc._decorator).ccclass,o.property,a(g,c=l.default),(u=g).prototype.onLoad=function(){},g.prototype.addEvent=function(){c.prototype.addEvent.call(this)},g.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(g.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),g.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.time=5,f.default.event(h.EventKeys.red_packet_newbie_show,"")},g.prototype.onBack=function(){d.AudioMgr.button(),this.doClose(u,!1).then(function(){m.default.I.removePopwinList(),m.default.I.addFirstRedPacket()}),f.default.event(h.EventKeys.red_packet_newbie_close,"")},g.prototype.update=function(e){0<this.time&&(this.time-=e,this.time<=0&&(this.doClose(u,!1).then(function(){m.default.I.removePopwinList(),m.default.I.addFirstRedPacket()}),f.default.event(h.EventKeys.red_packet_newbie_close,"")))},g.prefabPath="prefab/popwin/popwin_redpacket",g.isshow=!1,i=u=s([i],g),r.default=i,cc._RF.pop()},{}],ResLoader:[function(e,t,n){"use strict";cc._RF.push(t,"93799cbMyFCEqgifYKtL+4r","ResLoader");var o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=(i=cc.js.isChildClassOf)||cc.isChildClassOf,r=(a.destroy=function(){this._resLoader&&(this._resLoader=null)},a.prototype._getResItem=function(e,t){var n=cc.loader,o=n._cache[e];return o||(t=n._getResUuid(e,t,!1))&&(t=n._getReferenceKey(t),o=n._cache[t]),o},a.prototype._makeLoadResArgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return null;for(var e={url:arguments[0]},t=1;t<arguments.length;++t)1==t&&i(arguments[t],cc.RawAsset)?e.type=arguments[t]:t==arguments.length-1&&"string"==typeof arguments[t]?e.use=arguments[t]:"function"==typeof arguments[t]&&(t+1<arguments.length&&"function"==typeof arguments[t+1]?e.onProgess=arguments[t]:e.onCompleted=arguments[t]);return e},a.prototype._makeReleaseResArgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return null;for(var e={url:arguments[0]},t=1;t<arguments.length;++t)"string"==typeof arguments[t]?e.use=arguments[t]:e.type=arguments[t];return e},a.prototype.makeUseKey=function(e,t,n){return"use_"+e+"_by_"+(t=void 0===t?"none":t)+"_for_"+(void 0===n?"":n)},a.prototype.getCacheInfo=function(e){return this._resMap.has(e)||this._resMap.set(e,{refs:new Set,uses:new Set}),this._resMap.get(e)},a.prototype.loadRes=function(){function e(e,o){var i,r=t._getResItem(n.url,n.type);r&&r.id?function e(n,o){if(n&&n.dependKeys&&Array.isArray(n.dependKeys))for(var i=0,r=n.dependKeys;i<r.length;i++){var a=r[i];t.getCacheInfo(a).refs.add(o),cc.log(a+" ref by "+o),e(a=cc.loader._cache[a],o)}}(r,r.id):cc.warn("addDependKey item error1! for "+n.url),r&&((i=t.getCacheInfo(r.id)).refs.add(r.id),n.use&&i.uses.add(n.use)),n.onCompleted&&n.onCompleted(e,o)}var t=this,n=this._makeLoadResArgs.apply(this,arguments),o=cc.loader.getRes(n.url,n.type);o?e(null,o):cc.loader.loadRes(n.url,n.type,n.onProgess,e)},a.prototype.releaseRes=function(){var e,t=this._makeReleaseResArgs.apply(this,arguments),n=this._getResItem(t.url,t.type);n&&(cc.log("resloader release item"),e=this.getCacheInfo(n.id),t.use&&e.uses.delete(t.use),this._release(n,n.id))},a.prototype._release=function(e,t){var n,o=this;e&&((n=this.getCacheInfo(e.id)).refs.delete(t),function(e,t){if(e&&e.dependKeys&&Array.isArray(e.dependKeys))for(var n=0,i=e.dependKeys;n<i.length;n++){var r=i[n];r=cc.loader._cache[r],o._release(r,t)}}(e,t),0==n.uses.size&&0==n.refs.size&&(e.uuid?(cc.loader.release(e.uuid),cc.log("resloader release item by uuid :"+e.id)):(cc.loader.release(e.id),cc.log("resloader release item by url:"+e.id)),this._resMap.delete(e.id)))},a.prototype.checkReleaseUse=function(){var e=this._makeReleaseResArgs.apply(this,arguments),t=this._getResItem(e.url,e.type);if(!t)return!0;var n=this.getCacheInfo(t.id),o=!(e.use&&0<n.uses.size&&(1!=n.uses.size||!n.uses.has(e.use))),i=!!(1==n.refs.size&&n.refs.has(t.id)||0==n.refs.size);return o&&i},Object.defineProperty(a,"I",{get:function(){return this._resLoader||(this._resLoader=new a)},enumerable:!0,configurable:!0}),a._resLoader=null,a);function a(){this._resMap=new Map}o.default=r,o.ResLoader=r.I,cc._RF.pop()},{}],RewardCfg:[function(e,t,n){"use strict";cc._RF.push(t,"8298eVLykBGLYMXYjCZ1UP2","RewardCfg");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){},i.default=o,cc._RF.pop()},{}],RoomItem:[function(e,t,n){"use strict";cc._RF.push(t,"e20d5jnVBVGKZmq1OAbI6v8","RoomItem");var o,i=e,r=t,a=n,s=__EXTENDS__(),c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;function d(){var e=null!==o&&o.apply(this,arguments)||this;return e.txtRoom=null,e.nodeMission=null,e.prefabFurniture=null,e}Object.defineProperty(a,"__esModule",{value:!0}),i("FurnitureItem"),i("Action"),i("DataMgr"),i("AudioMgr"),i("CommonMgr"),i=(r=cc._decorator).ccclass,r=r.property,s(d,o=cc.Component),d.prototype.initWith=function(){},d.prototype.initMissions=function(){},d.prototype.onTouch=function(){return u(this,void 0,void 0,function(){return l(this,function(){return[2]})})},c([r(cc.Label)],d.prototype,"txtRoom",void 0),c([r(cc.Node)],d.prototype,"nodeMission",void 0),c([r(cc.Prefab)],d.prototype,"prefabFurniture",void 0),i=c([i],d),a.default=i,(i={})[i.Expand=0]="Expand",i[i.Expanding=1]="Expanding",i[i.Reduce=2]="Reduce",i[i.Reduceing=3]="Reduceing",cc._RF.pop()},{}],RulePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"cde2ed9HldCCZmbqUvCByWC","RulePopwin");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=i("BasePopwin"),h=i("AudioMgr"),f=i("OnlineMgr"),m=i("SDKEnums"),g=i("BubbleMgr"),_=i("SDKTools"),y=i("Water");function v(){var e=null!==l&&l.apply(this,arguments)||this;return e.m_time=3,e}i=(o=cc._decorator).ccclass,o.property,a(v,l=p.default),(d=v).prototype.onLoad=function(){},v.prototype.addEvent=function(){l.prototype.addEvent.call(this)},v.prototype.removeEvent=function(){l.prototype.removeEvent.call(this)},Object.defineProperty(v.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),v.prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),e=_.default.getParamsInt(m.OnlineKeys.tutorial_panel_skip_time,5),this.m_time=e,this.playani2()},v.prototype.playani2=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,y.default.wait(6333)];case 1:return e.sent(),this.node.getChildByName("bg").getChildByName("anim_2").getComponent(cc.Animation).play(),[2]}})})},v.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(d,!1).then(function(){g.default.I.removePopwinList()})},v.prototype.update=function(e){0<this.m_time?this.m_time-=e:(this.doClose(d,!1).then(function(){g.default.I.removePopwinList()}),this.m_time=-1)},v.prefabPath="prefab/popwin/popwin_rule",i=d=s([i],v),r.default=i,cc._RF.pop()},{}],SDKAnalytics:[function(e,t,n){"use strict";cc._RF.push(t,"6a4a3Z8w4NI2JX53m/mbcoH","SDKAnalytics");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKTools"),a=o("BubbleMgr");function s(){}s.setLogind=function(e){return r.default.checkNormal(function(){return PCSDK.stat.setLogind(e)})},s.addLogRes=function(e){return r.default.checkNormal(function(){return PCSDK.stat.addLogRes(e)},null)},s.addLogLevel=function(e){return r.default.checkNormal(function(){return PCSDK.stat.addLogLevel(e)},null)},s.logLevelRelive=function(e,t){return r.default.checkNormal(function(){return PCSDK.stat.logLevelRelive(e,t)},null)},s.logLevelHide=function(e,t){return a.default.I.clearEventData(),r.default.checkNormal(function(){return PCSDK.stat.logLevelHide(e,t)},null)},s.logLevelFail=function(e,t){return a.default.I.clearEventData(),r.default.checkNormal(function(){return PCSDK.stat.logLevelFail(e,t)},null)},s.logLevelWin=function(e,t){return r.default.checkNormal(function(){return PCSDK.stat.logLevelWin(e,t)},null)},s.logMerge=function(e){return r.default.checkNormal(function(){return PCSDK.stat.logMerge(e)},null)},s.addExposures=function(e,t){return r.default.checkNormal(function(){return PCSDK.stat.addExposure(e,t)},null)},s.loadingFinish=function(){return r.default.checkPromise(function(){return PCSDK.stat.loadingFinish()})},s.newLoadingFinish=function(e){return r.default.checkPromise(function(){return PCSDK.stat.newLoadingFinish(e)})},s.agreeAuth=function(e,t){return r.default.checkPromise(function(){return PCSDK.stat.authorize(e,t)})},s.refuseAuth=function(){return r.default.checkPromise(function(){return PCSDK.stat.refuseAuth()})},s.active=function(){return r.default.checkPromise(function(){return PCSDK.stat.active()})},s.dot=function(e,t){return void 0===t&&(t={}),r.default.checkPromise(function(){return PCSDK.stat.dot(e,t)})},s.event=function(e,t,n){return r.default.checkPromise(function(){return PCSDK.stat.event(e.toString(),t,n)})},s.reqBannerList=function(e){return r.default.checkPromise(function(){return PCSDK.stat.bannerList(e)},Promise.reject(null))},s.reqBannerClick=function(e,t){return r.default.checkPromise(function(){return PCSDK.stat.bannerNavigateTo(e,t)})},o=s,i.default=o,cc._RF.pop()},{}],SDKBanner:[function(e,t,n){"use strict";cc._RF.push(t,"f25b6YRbK5Og5Loy7Vbnfxd","SDKBanner");var o=e,i=n,r=__AWAITER__,a=__GENERATOR__;Object.defineProperty(i,"__esModule",{value:!0});var s=o("SDKTools"),c=o("EventMgr"),u=o("EventEnum"),l=o("LogUtils");function d(){this.isDebug=!1,this.activeBanners={},this.styles={}}Object.defineProperty(d.prototype,"SystemData",{get:function(){return s.default.SystemData},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"CanShow",{get:function(){return"undefined"!=typeof wx&&wx.hasOwnProperty("createBannerAd")},enumerable:!0,configurable:!0}),d.prototype.show=function(e,t){var n,o,i,r,a,s=this;void 0===t&&(t=0),this.CanShow&&(this.activeBanners[e]&&!this.activeBanners[e]._destroyed||(n=this.SystemData,o=n.screenWidth,i=n.screenHeight,t=t?(r=o/750,Math.max(r*t,300)):o,a=wx.createBannerAd({adUnitId:e,style:{left:0,top:i-148,width:t}}),t=n.platform,n.statusBarHeight,!t||"ios"!==t.toLocaleLowerCase()&&t.toLocaleLowerCase(),a.onResize(function(t){s.styles[e]=t,a&&(a.style.left=o/2-t.width/2,a.style.top=i-t.height)}),a.onError(function(){s.isDebug,c.EventMgr.emit(u.EventEnum.BannerFailure),s.destory(e)}),this.activeBanners[e]=a,l.default.error("[Banner]\u521b\u5efabanner:",e)),this.display(e,this.activeBanners[e]))},d.prototype.display=function(e,t){return r(this,void 0,void 0,function(){var n=this;return a(this,function(){return this.isDebug,t&&t.show().then(function(){n.isDebug,c.EventMgr.emit(u.EventEnum.BannerSuccess,{style:n.styles,adUnitId:e})}).catch(function(){n.isDebug,c.EventMgr.emit(u.EventEnum.BannerFailure),n.destory(e)}),[2]})})},d.prototype.hide=function(e){var t=this.activeBanners[e];!t||t._destroyed?l.default.error("[Banner]banner\u672a\u521b\u5efa\u6216\u5df2\u9500\u6bc1",e):t.hide()},d.prototype.destory=function(e){var t=this.activeBanners[e];if(t&&!t._destroyed)return t.destroy(),void(this.activeBanners[e]=null);l.default.error("[Banner]banner\u672a\u521b\u5efa\u6216\u5df2\u9500\u6bc1",e)},d.prototype.destroyAll=function(){for(var e in this.activeBanners)this.destory(e)},Object.defineProperty(d,"I",{get:function(){return this.instance||(this.instance=new d)},enumerable:!0,configurable:!0}),o=d,i.default=o,cc._RF.pop()},{}],SDKEnums:[function(e,t,n){"use strict";cc._RF.push(t,"dbca0oIfrBIm578DXRCfzlB","SDKEnums");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),(o=i.OnlineKeys||(i.OnlineKeys={})).SDKVerssion="sdk_version",o.GM_whitelist="GM_whitelist",o.SDKADList="sdk_ad_objs",o.BannerGameUid="banner_game_uid",o.GridBottomRatio="grid_bottom_ratio",o.ADToufangShenHe="toufang_shenhe",o.SignDataList="sign_data_list",o.ClientTestFunction="client_test_function",o.SwitchLayaStat="switch_laya_stat",o.InterstitialAdOnshow="isshow_interstitial",o.GiftDropRules="gift_drop_rules",o.TreasureDropRules="treasure_drop_rules",o.InterstitialAdMergeLimit="interstitialAd_merge_limit",o.ShopCoinRecommendNum="shop_coin_recommend",o.DisplayTextureAnim="display_texture_anim",o.MaxAddPowerTimes="one_day_limit_energy",o.AddPowerTime="renew_energy",o.UILevelConsole="uilevel_onsole",o.MaxPower="limit_energy",o.InterstitialShow="InterstitialShow",o.OlduserLv="user_new_with_level",o.UserOpen="user_state_open",o.BannerPcGamesOpen="pc_games_open",o.GiftBannerJump="gift_banner_jump",o.sign_min_lv="sign_min_lv",o.BannerModulesOpen="banner_modules_open",o.ChestMax="chest_max",o.GameBannerRefresh="game_banner_refresh",o.ReliveNum="relive_num",o.ShopFreeStar="shop_free_star",o.RecordNum="relive_num",o.ChestRewards="chest_rewards",o.InviteRewards="invite_rewards",o.SwitchDebugFlag="switch_debug_flag",o.ServiceRewardNum="service_reward_num",o.CollectRewardNum="collect_reward_num",o.FloatingRewardNum="floating_reward_num",o.AddDeskRewardNum="add_desk_reward_num",o.InterstitialFailCd="interstitialAd_cd2",o.InterstitialHintCd="interstitialAd_cd1",o.BlockRewardLimit="block_reward_limit",o.SuperRewardLimit="super_reward_limit",o.HintTipLimit="hint_tip_limit",o.ExchangeOpen="network_gold_open",o.BubblePopParams="bubble_pop_params",o.LvupP="lvup_p",o.BottomSkipOffset="bottom_skip_offset",o.DebugFlag="debug_flag",o.EnergyWorkABTest="energy_work_abtest",o.words_before_video_ad_abtest="words_before_video_ad_abtest",o.InsertAdGameStartABTest="insert_ad_game_start_abtest",o.StartBonusHideABTest="start_bonus_hide_abtest",o.star_cost_abtest="star_cost_abtest",o.story_abtest="story_abtest",o.StartBonusABTest="start_bonus_abtest",o.start_bonus_min_lv="start_bonus_min_lv",o.piggy_bank_min_lv="piggy_bank_min_lv",o.grid_ad_all_abtest="grid_ad_all_abtest",o.skip_win_panel_max_lv="skip_win_panel_max_lv",o.skip_win_panel_max_lv_abtest="skip_win_panel_max_lv_abtest",o.skip_win_panel_max_lv_b="skip_win_panel_max_lv_b",o.skip_win_panel_abtest="skip_win_panel_abtest",o.no_start_bonus_lv="no_start_bonus_lv",o.maxlv="level_max_num",o.matrix_inter_abtest="matrix_inter_abtest",o.level_loop_scope="level_loop_scope",o.revive_type_abtest="revive_type_abtest",o.invite_p2p_abtest="invite_p2p_abtest",o.free_change_tutorial_abtest="free_change_tutorial_abtest",o.free_change_for_1_lv_abtest="free_change_for_1_lv_abtest",o.insert_ad_target_done_abtest="insert_ad_target_done_abtest",o.insert_ad_win_panel_abtest="insert_ad_win_panel_abtest",o.insert_ad_lv_start_abtest="insert_ad_lv_start_abtest",o.insert_ad_min_lv="insert_ad_min_lv",o.lucky_pop_min_lv="lucky_pop_min_lv",o.lucky_pop_ban_lvs="lucky_pop_ban_lvs",o.game_center_auto_show_minlv="game_center_auto_show_minlv",o.game_center_auto_show_abtest="game_center_auto_show_abtest",o.lucky_pop_double_abtest="lucky_pop_double_abtest",o.back_step_abtest="back_step_abtest",o.PlotAutoNext="plot_auto_next",o.task_unlock_minlv_abtest="task_unlock_minlv_abtest",o.lucky_pop_abtest="lucky_pop_abtest",o.force_build_tutorial_abtest="force_build_tutorial_abtest",o.task_no_build_tip="task_no_build_tip",o.skip_win_panel_type_abtest="skip_win_panel_type_abtest",o.hide_ui_moves_num="hide_ui_moves_num",o.gift_bubble_quiet_num="gift_bubble_quiet_num",o.gift_bubble_quiet_abtest="gift_bubble_quiet_abtest",o.new_start_bonus_abtest="new_start_bonus_abtest",o.early_props_abtest="early_props_abtest",o.early_props_lvs="early_props_lvs",o.level_abtest="new_lv_abtest",o.game_bg_image_abtest="game_bg_image_abtest",o.object_pool_max_lv="object_pool_max_lv",o.pop_prop_tips_minlv="pop_prop_tips_minlv",o.pop_prop_tips_rule_a="pop_prop_tips_rule_a",o.pop_prop_tips_rule_b="pop_prop_tips_rule_b",o.pop_prop_tips_rule_abtest="pop_prop_tips_rule_abtest",o.pop_prop_tips_disturb_abtest="pop_prop_tips_disturb_abtest",o.invite_pop_minlv="invite_pop_minlv",o.all_levels_bubbles_add_a="all_levels_bubbles_add_a",o.all_levels_bubbles_add_b="all_levels_bubbles_add_b",o.all_levels_bubbles_add_c="all_levels_bubbles_add_c",o.all_levels_bubbles_add_abctest="all_levels_bubbles_add_abctest",o.tutorial_show_levels_a="tutorial_show_levels_a",o.tutorial_show_levels_b="tutorial_show_levels_b",o.red_packet_abtest="red_packet_abtest",o.build_scene_module_ad="build_scene_module_ad",o.InterstitialHomeCd="interstitialAd_cdhome",o.InterstitialGameCd="interstitialAd_cdgame",o.InterstitialHomeLv="interstitialAd_cdhomelv",o.InterstitialGameLv="interstitialAd_cdgamelv",o.tutorial_panel_skip_time="tutorial_panel_skip_time",o.tutorial_panel_abtest="tutorial_panel_abtest",o.red_packet_welcome_abtest="red_packet_welcome_abtest",o.online_gift_show_lv="online_gift_show_lv",o.online_gift_abtest="online_gift_abtest",o.shoot_line_abtest="shoot_line_abtest",o.nonstop_mode_abtest="nonstop_mode_abtest",o.sign_in_reward_abtest="sign_in_reward_abtest",o.online_time_reward_abtest="online_time_reward_abtest",o.free_change_for_1_lv_firstfree_abtest="free_change_for_1_lv_firstfree_abtest",o.voice_of_good_pop_abtest="voice_of_good_pop_abtest",o.fail2_add_bubble_ABtest="fail2_add_bubble_ABtest",o.dt_quit_abtest="dt_quit_abtest",o.dt_give_up_abtest="dt_give_up_abtest",o.dt_reward_abtest="dt_reward_abtest",o.dt_open_abtest="dt_open_abtest",o.dt_start_abtest="dt_start_abtest",o.redpacketbanner="rd1_banner_abtest",o.dt_goal_abtest="dt_goal_abtest",o.bubble_random_range="bubble_random_range",o.seed_abtest0="seed_abtest0",o.two_dragon_open="two_dragon_open",(o=i.ShareKeys||(i.ShareKeys={})).GiftHelp="gift_help",o.Relive="resurgence",o.DayReward="day_reward",o.ChestReward="chest_reward",o.ShopReward="shop_reward",o.SuperReward="super_reward",o.BlockReward="block_reward",o.Friends="Friends_challenge",o.Invite="Invite_rewards",o.RecordContinue="record_continue",o.Challenge="challenge",o.FurnitureSkin="furniture_skin",o.MissionVideo="mission_video",o.DoubleExchange="double_exchage",o.DoubleBubble="double_bubble",o.BigBubble="big_bubble",o.UseItem="use_item",o.GetHp="get_hp",o.AddBubble="add_bubble",o.FailAddBubble="fail_add_bubble",o.FailAddBubble2="fail2_add_bubble",o.ChangeBubble="change_bubble",o.GetRewardPig="get_reward_pig",o.WinAddCoin="win_add_coin",o.LevelAddCoin="level_add_coin",o.GiftHelp2="gift_help2",o.DoubleReward="double_reward",o.backbubble="back_bubble",o.block_gold="block_gold",o.ItemTipUse="itemtip_use",o.onlinegift="online_gift",o.ContinueCollect="continue_collect",o.ChestDoubleReward="chest_double_reward",o.WinGetItem="win_getitem",(o=i.EventKeys||(i.EventKeys={})).inter_ad_request="inter_ad_request",o.Task2_decorAniFin="[task_2]decor_ani_fin",o.Task2_choosePanelShow="[task_2]choose_panel_show",o.Task2_choosePanelSelect2nd="[task_2]choose_panel_select_2nd",o.FirstLogin_LoadingStart="[first_login]Loading_start",o.FirstLogin_Loading100Reach="[first_login]Loading_100_reach",o.ChestDouble="chest_double",o.ChestOpen="chest_open",o.ChestNormal="chest_normal",o.OpenChest="open_chest",o.OverRank="over_rank",o.OverAgain="over_again",o.OverShare="over_share",o.ReviveSkip="revive_skip",o.ReviveShare="revive_share",o.PropSkip="prop_skip",o.PropGet="prop_get",o.HintsSkip="hints_skip",o.HintsGet="hints_get",o.SuperSkip="super_skip",o.SuperGet="super_get",o.InviteClose="invite_close",o.InviteReward="invite_reward",o.InviteShare="invite_share",o.RankClose="rank_close",o.RankWorld="rank_world",o.RankFriend="rank_friend",o.RecordClose="record_close",o.RecordResume="record_resume",o.MenuVibrate="menu_vibrate",o.MenuAudio="menu_audio",o.MenuDebug="menu_debug",o.MenuShare="menu_share",o.MenuNewGame="menu_newGame",o.MenuInvite="menu_invite",o.MenuRank="menu_rank",o.MenuRecord="menu_record",o.ShopClose="shop_close",o.ShopInvite="shop_invite",o.ShopFree="shop_free",o.OpenMenu="open_menu",o.OpenShop="open_shop",o.SginShare="sgin_share",o.SginNormal="sgin_normal",o.SginDouble="sgin_double",o.Load="load",o.Start="start",o.ServiceNumber1="serviceNumber1",o.serviceNumber2="serviceNumber2",o.CollectNumber1="collectNumber1",o.CollectNumber2="collectNumber2",o.WindowNumber1="windowNumber1",o.WindowNumber2="windowNumber2",o.Joker="prop_joker",o.Refresh="prop_refresh",o.Hammer="prop_hammer",o.Clear2="prop_clear2",o.Clear4="prop_clear4",o.Lvup="level_up",o.TestPropA="prop_pop_a",o.TestPropB="prop_pop_b",o.TestvbA="prop_video_begin_a",o.TestvbB="prop_video_begin_b",o.TestveA="prop_video_end_a",o.TestveB="prop_video_end_b",o.ChallengeBtn="click_challenge",o.LoadError="load_error",o.ShowWxad="show_wxad",o.HideWxad="hide_wxad",o.TouchMove="new_user_slip",o.resource_redown_panel_show="resource_redown_panel_show",o.resource_redown_retry="resource_redown_retry",o.resource_redown_level="resource_redown_level",o.Loading_start="[first_login]Loading_start",o.Loading_100_reach="[first_login]Loading_100_reach",o.game_scene_enter="[first_login]game_scene_enter",o.unhide_before_first_tap="[first_login]unhide_before_first_tap",o.game_scene_enter_end="[first_login]game_scene_enter_end",o.fist_slide_shoot_line="[first_login]fist_slide_shoot_line",o.touch_screen_first_time="[level_1]touch_screen_first_time",o.slide_tutorial_show="[level_1]slide_tutorial_show",o.ball_1_shoot="[level_1]ball_1_shoot",o.ball_2_shoot="[level_1]ball_2_shoot",o.ball_5_shoot="[level_1]ball_5_shoot",o.goal_clear="[level_1]goal_clear",o.left_ball_ani_fin="[level_1]left_ball_ani_fin",o.win_panel_show="[level_1]win_panel_show",o.win_panel_next_tap="[level_2]win_panel_next_tap",o.pre_panel_show="[level_2]pre_panel_show",o.pre_panel_start_tap="[level_2]pre_panel_start_tap",o.ball_1_shoot2="[level_2]ball_1_shoot",o.ball_2_shoot2="[level_2]ball_2_shoot",o.ball_5_shoot2="[level_2]ball_5_shoot",o.left_ball_ani_fin2="[level_2]left_ball_ani_fin",o.win_panel_show2="[level_2]win_panel_show",o.props_tap_bomb="props_tap_bomb",o.props_tap_laser="props_tap_laser",o.props_tap_colorful="props_tap_colorful",o.props_tap_row="props_tap_row",o.sign_panel_tap_button="sign_panel_tap_button",o.sign_panel_show="sign_panel_show",o.sign_panel_close="sign_panel_close",o.ball_1_shoot3="[level_3]ball_1_shoot",o.ball_1_shoot4="[level_4]ball_1_shoot",o.ball_1_shoot5="[level_5]ball_1_shoot",o.ball_1_shoot6="[level_6]ball_1_shoot",o.ball_1_shoot7="[level_7]ball_1_shoot",o.ball_1_shoot8="[level_8]ball_1_shoot",o.invite_p2p_click="invite_p2p_click",o.invite_p2p_show="invite_p2p_show",o.grid_ad_show="grid_ad_show",o.state_task_none="state_task_none",o.button_show="[tutorial_build]button_show",o.button_tap="[tutorial_build]button_tap",o.scene_enter="[tutorial_build]scene_enter",o.dialog_01_00_001_show="[tutorial_build]dialog_01_00_001_show",o.dialog_01_00_001_tap="[tutorial_build]dialog_01_00_001_tap",o.dialog_01_00_002_show="[tutorial_build]dialog_01_00_002_show",o.dialog_01_00_003_show="[tutorial_build]dialog_01_00_003_show",o.dialog_01_00_004_show="[tutorial_build]dialog_01_00_004_show",o.dialog_01_01_002_show="[tutorial_build]dialog_01_01_002_show",o.panel_task_show="[tutorial_build]panel_task_show",o.panel_task_tap="[tutorial_build]panel_task_tap",o.panel_not_enough_stars_tap="[tutorial_build]panel_not_enough_stars_tap",o.bomb_use="bomb_use",o.shoot_use="shoot_use",o.color_ball_use="color_ball_use",o.lightening_use="lightening_use",o.gift_bomb_show="gift_bomb_show",o.gift_bomb_tap="gift_bomb_tap",o.gift_shoot_show="gift_shoot_show",o.gift_shoot_tap="gift_shoot_tap",o.gift_color_show="gift_color_show",o.gift_color_tap="gift_color_tap",o.gift_lightening_show="gift_lightening_show",o.gift_lightening_tap="gift_lightening_tap",o.gift_change_show="gift_change_show",o.gift_change_tap="gift_change_tap",o.red_packet_newbie_show="red_packet_newbie_show",o.red_packet_newbie_close="red_packet_newbie_close",o.red_packet_panel_show="red_packet_panel_show",o.red_packet_cash_panel_show="red_packet_cash_panel_show",o.ball_exchange_show="[tutorial]ball_exchange_show",o.ball_exchange_done="[tutorial]ball_exchange_done",o.metal_ball_show="[tutorial]metal_ball_show",o.metal_ball_done="[tutorial]metal_ball_done",o.colorful_ball_show="[tutorial]colorful_ball_show",o.colorful_ball_done="[tutorial]colorful_ball_done",(o=i.DotType||(i.DotType={}))[o.Share=1e3]="Share",(o=i.EventFrom||(i.EventFrom={})).Sign="\u6bcf\u65e5\u5956\u52b1",o.Over="\u7ed3\u7b97\u9875\u9762",o.Menu="\u4fa7\u8fb9\u680f\u83dc\u5355",o.Chest="\u5b9d\u7bb1\u9875\u9762",o.Reward="\u5956\u52b1\u9875\u9762",o.Revive="\u590d\u6d3b\u9875\u9762",o.Record="\u6700\u9ad8\u7eaa\u5f55",o.Shop="\u5546\u5e97",o.Invite="\u9080\u8bf7\u5956\u52b1",o.Rank="\u6392\u884c\u699c",o.Exchange="\u91d1\u5e01\u5151\u6362",o.load="\u52a0\u8f7d\u9875\u9762",o.game="\u6e38\u620f\u9875\u9762",o.teach="\u65b0\u624b\u5f15\u5bfc",o.sgin="\u6bcf\u65e5\u5956\u52b1",o.hints="\u840c\u65b0\u63d0\u793a",o.prop="\u9053\u5177\u5757\u5956\u52b1\u9875\u9762",o.super="\u8d85\u7ea7\u6d88\u9664\u5956\u52b1",(o=i.SDKBannerType||(i.SDKBannerType={}))[o.TYPE_WX_GAME_RESULT=0]="TYPE_WX_GAME_RESULT",o[o.TYPE_WX_GAME_ING=1]="TYPE_WX_GAME_ING",o[o.TYPE_BIG=10]="TYPE_BIG",o[o.TYPE_HEADER=20]="TYPE_HEADER",o[o.TYPE_CLICK_ME=30]="TYPE_CLICK_ME",o[o.TYPE_CROSS=40]="TYPE_CROSS",o[o.TYPE_LIKE=50]="TYPE_LIKE",o[o.TYPE_LIST=70]="TYPE_LIST",o[o.TYPE_WELFARE=80]="TYPE_WELFARE",o[o.TYPE_ACCOUNT=90]="TYPE_ACCOUNT",o[o.TYPE_GAMECENTER=100]="TYPE_GAMECENTER",(o=i.SDKBannerLocation||(i.SDKBannerLocation={}))[o.LOCATION_PAGE_RESULT=100]="LOCATION_PAGE_RESULT",o[o.LOCATION_PAGE_GAME=110]="LOCATION_PAGE_GAME",o[o.LOCATION_LEVEL_BOTTOM=120]="LOCATION_LEVEL_BOTTOM",o[o.LOCATION_PAGE_HOME=130]="LOCATION_PAGE_HOME",o[o.LOCATION_PAGE_SIGN=140]="LOCATION_PAGE_SIGN",o[o.LOCATION_PAGE_RELIVE=150]="LOCATION_PAGE_RELIVE",o[o.LOCATION_PAGE_LOTTERY=170]="LOCATION_PAGE_LOTTERY",(o=i.ShareVideoType||(i.ShareVideoType={}))[o.None=-1]="None",o[o.Share=0]="Share",o[o.ShareAysnc=1]="ShareAysnc",o[o.ShareIntegral=5]="ShareIntegral",o[o.Video=2]="Video",o[o.VideoToShare=3]="VideoToShare",o[o.VideoAndShare=4]="VideoAndShare",o[o.IntegralVideoToShare=6]="IntegralVideoToShare",o[o.Skip=999]="Skip",(o=i.ShareVideoFrom||(i.ShareVideoFrom={}))[o.None=0]="None",o[o.Share=1]="Share",o[o.ShareAysnc=2]="ShareAysnc",o[o.Video=3]="Video",(i=i.ShareVideoError||(i.ShareVideoError={}))[i.VideoQuit=1e3]="VideoQuit",i[i.VideoFail=1001]="VideoFail",i[i.VideoNotOpen=1002]="VideoNotOpen",i[i.VideoPlaying=1003]="VideoPlaying",i[i.VideoInvalid=999]="VideoInvalid",i[i.ShareFail=1004]="ShareFail",i[i.ShareSame=1005]="ShareSame",i[i.ShareNotGroup=1006]="ShareNotGroup",i[i.ShareAsyncNotGroup=1007]="ShareAsyncNotGroup",cc._RF.pop()},{}],SDKShareVideo:[function(e,t,n){"use strict";cc._RF.push(t,"681ddsF2mlIuJj27QAmM0Td","SDKShareVideo");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("SDKTools"),s=o("Display"),c=o("AudioMgr"),u=o("SDKEnums"),l=o("DataMgr"),d=o("EventMgr"),p=o("EventEnum");function h(){}Object.defineProperty(h,"IsShareIng",{get:function(){return this.isShareIng},enumerable:!0,configurable:!0}),h.getType=function(e){return PCSDK.shareVideo.getType(e.toString())},h.share=function(e,t,n){var o=this;this.isShareIng=!0,PCSDK.shareVideo.share(e.toString(),t,n).then(function(e){o.handleSuccess(u.ShareVideoFrom.Share,e),o.isShareIng=!1}).catch(function(){return o.isShareIng=!1})},h.dispatch=function(e,t){this.isShareIng=!0;var n=a.default.getParamsInt(u.OnlineKeys.words_before_video_ad_abtest,2);if(2==n||1==n&&l.DataMgr.UserBase.ID%2==0)switch(a.default.getType(e)){case u.ShareVideoType.Share:case u.ShareVideoType.ShareAysnc:case u.ShareVideoType.ShareIntegral:break;case u.ShareVideoType.Video:case u.ShareVideoType.VideoToShare:case u.ShareVideoType.IntegralVideoToShare:t&&null!=t.tips?s.default.showTip(t.tips):s.default.showTip("\u770b\u5b8c\u6574\u89c6\u9891\uff0c\u5f97\u4e30\u539a\u5956\u52b1\uff5e")}PCSDK.shareVideo.dispatch(e.toString(),this.buildParams(t,{shareKey:e}))},h.dispatchType=function(e,t,n){this.isShareIng=!0,PCSDK.shareVideo.dispatchType(e,t.toString(),this.buildParams(n,{shareKey:t}))},h.buildParams=function(e,t){var n=this;void 0===t&&(t={});var o=(e=void 0===e?{}:e).success,i=e.fail,a=e.context,s=e.isOveride;return e=r({},e,{success:function(e,t){o&&o.call(a,e,t),n.isShareIng=!1,n.handleSuccess(e,t)}}),r({},e,s?{fail:function(e,t){i&&i.call(a,e,t),n.isShareIng=!1,n.doOpenMusic(e)}}:{fail:function(o,s){n.handleError(o,s,r({},e,t)),i&&i.call(a,o,s),n.isShareIng=!1}})},h.handleSuccess=function(e){switch(e){case u.ShareVideoFrom.Share:case u.ShareVideoFrom.ShareAysnc:case u.ShareVideoFrom.Video:}d.EventMgr.emit(p.EventEnum.AddEventVideo),this.doOpenMusic(e)},h.handleError=function(e,t,n){var o=this;if(void 0===n&&(n={}),this.doOpenMusic(e),t)switch(t.code){case 0:break;default:if(e!=u.ShareVideoFrom.Video){var i,c=n.success,l=n.fail,d=n.context,p=n.shareKey,h=t.msg;h||(h=(i=["\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u4e0d\u8981\u6253\u6270\u540c\u4e00\u4e2a\u7fa4!","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u65b0\u7684\u7fa4!","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u523030\u4eba\u7fa4!"])[Math.floor(Math.random()*i.length)]),a.default.showModal({title:"\u63d0\u793a",content:h,cancelText:"\u53d6\u6d88",confirmText:"\u53bb\u5206\u4eab",showCancel:!0,success:function(n){var i;n.confirm?(i={success:function(e,t){o.handleSuccess(e,t),c&&c.call(d,e,t)},fail:function(e){l&&l.call(d,e,t)},context:d},a.default.dispatch(p,r({},i))):n.cancel&&l&&l.call(d,e,t)}});break}s.default.showTip(t.msg||"\u5206\u4eab\u5931\u8d25")}},h.doOpenMusic=function(e){try{e===u.ShareVideoFrom.Video&&c.AudioMgr.isMusicOpen()&&c.AudioMgr.resumeMusic()}catch(e){cc.error(e)}},h.isShareIng=!1,o=h,i.default=o,cc._RF.pop()},{}],SDKTools:[function(e,t,n){"use strict";cc._RF.push(t,"5bc77nZaCZI76JJ8sNwhir7","SDKTools");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("SDKBanner"),a=o("SDKShareVideo"),s=o("SDKEnums"),c=o("WXApi"),u=o("CheckTools"),l=o("SDKAnalytics");function d(){}Object.defineProperty(d,"isSupported",{get:function(){return"object"==typeof PCSDK},enumerable:!0,configurable:!0}),d.checkNormal=function(e,t){return this.isSupported?e():t},d.checkPromise=function(e,t){return void 0===t&&(t=Promise.resolve()),this.checkNormal(e,t)},d.env=function(e){return this.checkPromise(function(){return PCSDK.game.env(e)})},d.login=function(e){return this.checkPromise(function(){return PCSDK.game.login(e)})},d.setBaseData=function(e){return this.checkNormal(function(){return PCSDK.game.setBaseData(e)},null)},d.getAllData=function(){return this.checkPromise(function(){return PCSDK.game.getAllData()})},d.getGoldPool=function(){return this.checkPromise(function(){return PCSDK.game.getGoldPool()})},d.setInviteFriend=function(e){return this.checkPromise(function(){return PCSDK.game.setInviteFriend(e)})},d.setLookVideoToGold=function(){return this.checkPromise(function(){return PCSDK.game.setLookVideoToGold()})},d.getPoolGoldByType=function(e){return this.checkPromise(function(){return PCSDK.game.getPoolGoldByType(e)})},d.pay=function(e){return this.checkPromise(function(){return PCSDK.platform.pay(e)})},d.logPay=function(e){return this.checkPromise(function(){return PCSDK.platform.logPay(e)})},Object.defineProperty(d,"isVideoPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isVideoPlaying()},!1)},enumerable:!0,configurable:!0}),d.updateShareMenu=function(e){return this.checkNormal(function(){return PCSDK.platform.updateShareMenu(e)},null)},d.showModal=function(e){return this.checkNormal(function(){return PCSDK.platform.showModal(e)},null)},d.vibrateShort=function(){if(!d.SystemData||"devtools"!==d.SystemData.brand)return this.checkNormal(function(){return PCSDK.platform.vibrateShort()},null)},d.vibrateLong=function(){if(!d.SystemData||"devtools"!==d.SystemData.brand)return this.checkNormal(function(){return PCSDK.platform.vibrateLong()},null)},d.subScribe=function(e,t){return void 0===t&&(t=!1),this.checkPromise(function(){return PCSDK.platform.subScribe(e,t)})},d.checkUpdate=function(e){this.checkNormal(function(){return PCSDK.platform.checkUpdate(e)})},Object.defineProperty(d,"SystemData",{get:function(){return this.checkNormal(function(){return PCSDK.platform.getSystemData()},null)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"LaunchData",{get:function(){return this.checkNormal(function(){return PCSDK.platform.getLaunchData()},null)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"SystemModel",{get:function(){return this.SystemData&&this.SystemData.model,""},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Token",{get:function(){return this.checkNormal(function(){return PCSDK.data.Token},"opQ8ktNNvsVFYx9jbLcCVCGjk3QFw0JLNo0")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"EnvEnum",{get:function(){return this.checkNormal(function(){return PCSDK.data.EnvEnum},100)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Shield",{get:function(){return this.checkNormal(function(){return PCSDK.data.Shield},0)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"ChannelId",{get:function(){return this.checkNormal(function(){return PCSDK.data.ChannelId},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Scene",{get:function(){return this.checkNormal(function(){return PCSDK.data.Scene},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"UserId",{get:function(){return this.checkNormal(function(){return PCSDK.data.UserId},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Platform",{get:function(){return this.checkNormal(function(){return PCSDK.data.SystemId},0)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"CdnUrl",{get:function(){return this.checkNormal(function(){return PCSDK.data.CdnUrl},"https://xx/")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"GameApi",{get:function(){return this.checkNormal(function(){return PCSDK.data.GameApi},"https://xx/v1.0")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsCross",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsCross},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsDrawer",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsDrawer},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsGuessLike",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsGuessLike},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Authorize",{get:function(){return this.checkNormal(function(){return PCSDK.data.Authorize},!1)},enumerable:!0,configurable:!0}),d.setBannerWidth=function(){},d.show=function(e,t){return this.checkNormal(function(){return r.default.I.show(e,t)},null)},d.hide=function(e){return this.checkNormal(function(){return r.default.I.hide(e)},null)},d.destory=function(e){return this.checkNormal(function(){return r.default.I.destory(e)},null)},Object.defineProperty(d,"IsShareIng",{get:function(){return a.default.IsShareIng},enumerable:!0,configurable:!0}),d.getType=function(e){return this.checkNormal(function(){return a.default.getType(e)},s.ShareVideoType.Share)},d.share=function(e,t,n){return this.checkNormal(function(){return a.default.share(e,t,n)},null)},d.dispatch=function(e,t){return this.isSupported?this.checkNormal(function(){return a.default.dispatch(e,t)},null):t&&t.success&&t.success.call(t.context||this)},d.dispatchType=function(e,t,n){return this.isSupported?this.checkNormal(function(){return a.default.dispatchType(e,t,n)},null):n&&n.success&&n.success.call(n.context||this)},d.updateOnlineParams=function(){return this.checkPromise(function(){return PCSDK.online.updateOnlineConfig()})},d.getParamsInt=function(e,t){return void 0===t&&(t=0),this.checkNormal(function(){return PCSDK.online.getParamsInt(e.toString(),t)},t)},d.getParamsObj=function(e,t){return this.checkNormal(function(){return PCSDK.online.getParamsObj(e.toString(),t)},t)},d.getParamsString=function(e,t){return void 0===t&&(t=""),this.checkNormal(function(){return PCSDK.online.getParamsString(e.toString(),t)},t)},d.bindEvent=function(e,t,n){return this.checkNormal(function(){return PCSDK.event.add(e,t,n)},null)},d.removeEvent=function(e,t,n){return this.checkNormal(function(){return PCSDK.event.remove(e,t,n)},null)},d.createUserBtns=function(e,t,n){return this.checkNormal(function(){return PCSDK.platform.createUserBtn(e,t,n)},null)},d.showUserBtn=function(e){return this.checkNormal(function(){return PCSDK.platform.showUserBtn(e)},null)},d.hideUserBtn=function(e){return this.checkNormal(function(){return PCSDK.platform.hideUserBtn(e)},null)},d.destoryUserBtn=function(e){return this.checkNormal(function(){return PCSDK.platform.destoryUserBtn(e)},null)},d.destoryAllUserBtn=function(){return this.checkNormal(function(){return PCSDK.platform.destoryAllUserBtn()},null)},d.interstitialShow=function(e,t){return this.checkPromise(function(){l.default.event(s.EventKeys.inter_ad_request,""),u.default.ShowInterstialCustomAd?PCSDK.platform.interstitialShow(e,t).catch(function(){c.default.I.showGridadIntertial()}):c.default.I.showGridadIntertial().catch(function(){PCSDK.platform.interstitialShow(e,t)})})},Object.defineProperty(d,"isInterstitialPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isInterstitialPlaying()},!1)},enumerable:!0,configurable:!0}),d.gameIconShow=function(e,t){return this.checkPromise(function(){return PCSDK.platform.gameIconShow(e,t)})},d.gameIconDestroy=function(){return this.checkNormal(function(){return PCSDK.platform.gameIconDestroy()})},d.gamePortalShow=function(e,t){return this.checkPromise(function(){return PCSDK.platform.gamePortalShow(e,t)})},Object.defineProperty(d,"isGamePortalPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isGamePortalPlaying()},!1)},enumerable:!0,configurable:!0}),d.openCustomerServiceConversation=function(e){return void 0===e&&(e={}),this.checkPromise(function(){return PCSDK.platform.openCustomerServiceConversation(e)})},d.storgeGet=function(e){return this.checkNormal(function(){return PCSDK.storage.get(e)},null)},d.storgeSet=function(e,t){return this.checkNormal(function(){return PCSDK.storage.set(e,t)})},d.createFeedbackButton=function(e){return this.checkNormal(function(){return PCSDK.wxApi.createFeedbackButton(e)},null)},o=d,i.default=o,cc._RF.pop()},{}],SafeActionClick:[function(e,t,n){"use strict";cc._RF.push(t,"2162cUDWLhDSokOV/twxawZ","SafeActionClick");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.safeTime=.5,e}r(u,s=cc.Component),u.prototype.start=function(){var e=this,t=this.node.getComponent(cc.Button);t&&(this.clickEvents=t.clickEvents,this.node.on("click",function(){t.clickEvents=[],e.scheduleOnce(function(){t.clickEvents=e.clickEvents},e.safeTime)},this))},a([c],u.prototype,"safeTime",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],ScaleAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"268d62AQmBESJ7fSxeI9VpH","ScaleAnimation");var o=t,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var s,c=c.property;function u(){var e=null!==s&&s.apply(this,arguments)||this;return e.from=1.1,e.to=.9,e}r(u,s=cc.Component),u.prototype.start=function(){this.playAnim(),this.node.on(cc.Node.EventType.TOUCH_START,this.stop,this),this.node.on(cc.Node.EventType.TOUCH_END,this.playAnim,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.playAnim,this)},u.prototype.stop=function(){this.node.stopAllActions()},u.prototype.playAnim=function(){this.stop(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,this.from),cc.scaleTo(.3,this.to))))},a([c(cc.Float)],u.prototype,"from",void 0),a([c(cc.Float)],u.prototype,"to",void 0),o=a([o],u),i.default=o,cc._RF.pop()},{}],ServicePopwin:[function(e,t,n){"use strict";cc._RF.push(t,"349d2jZ2PpO/bsH5jRYdq/9","ServicePopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("SDKTools"),d=o("Display"),p=o("BasePopwin"),h=o("AudioMgr"),f=o("SDKEnums"),m=o("StarConfig"),g=o("Enum"),_=o("OnlineMgr"),y=o("DataMgr");function v(){var e=null!==c&&c.apply(this,arguments)||this;return e.txtStar=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(v,c=p.default),(u=v).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.initUI()},Object.defineProperty(v.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),v.prototype.initUI=function(){var e=l.default.getParamsInt(f.OnlineKeys.ServiceRewardNum,m.StarConfig.ServiceRewardNum);this.txtStar.string=""+10*e},v.prototype.onService=function(){var e=this;h.AudioMgr.button(),l.default.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u9886\u53d6\u91d1\u5e01\u5956\u52b1",sendMessagePath:"type=90&uid="+l.default.UserId+"&pf="+l.default.Platform,sendMessageImg:"https://res.quzz88.com/data_analysis/default_icon/paopaolong_reward.jpeg",success:function(){y.DataMgr.Local.ServiceState===g.RewardState.Not&&y.DataMgr.Local.saveServiceState(g.RewardState.Receive),e.doClose(!0)},fail:function(){return d.default.showTip("\u9700\u8981\u8fdb\u5165\u5ba2\u670d\uff0c\u5e76\u53d1\u9001\u4fe1\u606f\u54e6~",1.5)}})},v.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(u,!1)},v.prefabPath="prefab/popwin/popwin_service",s([i(cc.Label)],v.prototype,"txtStar",void 0),o=u=s([o],v),r.default=o,cc._RF.pop()},{}],SettingPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"dd5afNJQApIuaT3xHqcS+it","SettingPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l,d=o("AudioEnum"),p=o("AudioMgr"),h=o("Display"),f=o("Const"),m=o("Enum"),g=o("DataMgr"),_=o("OnlineMgr"),y=o("SDKAnalytics"),v=o("SDKEnums"),b=o("SDKTools"),S=o("WXApi"),w=o("BasePopwin");function A(){var e=null!==u&&u.apply(this,arguments)||this;return e.iconAudio=null,e.iconVibrate=null,e.txtUserId=null,e.txtVersion=null,e.nodeFeedback=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(A,u=w.default),(l=A).prototype.onOpen=function(e){u.prototype.onOpen.call(this,e),this.initUI(),S.default.I.showgrideadBottom(),this.wxBtnFeedback&&this.wxBtnFeedback.destroy()},A.prototype.onOpend=function(e){u.prototype.onOpend.call(this,e),this.doInitOpen()},A.prototype.onHide=function(){this.wxBtnFeedback&&this.wxBtnFeedback.hide()},A.prototype.onShow=function(){this.wxBtnFeedback&&this.wxBtnFeedback.show()},A.prototype.onClose=function(){S.default.I.hidegrideadBottom(),this.wxBtnFeedback&&this.wxBtnFeedback.destroy(),this.wxBtnFeedback=null,u.prototype.onClose.call(this)},A.prototype.oncopyid=function(){p.AudioMgr.button(),PCSDK.wxApi.copy((1e7+g.DataMgr.UserBase.ID).toString()).then(function(){return h.default.showTip("ID\u590d\u5236\u6210\u529f")})},A.prototype.onTouchMask=function(){this.onBack()},Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(l.prefabPath)},enumerable:!0,configurable:!0}),A.prototype.initUI=function(){this.initAudio(),this.initVibrate(),this.txtVersion.string="v:"+f.default.Version,this.txtUserId.string="ID: "+(1e7+g.DataMgr.UserBase.ID)},A.prototype.initAudio=function(){var e=this.iconAudio.node.getComponent(cc.Animation);g.DataMgr.User.Data.mute?e.play("state_music_off"):e.play("state_music_on")},A.prototype.initVibrate=function(e){void 0===e&&(e=!1);var t=this.iconVibrate.node.getComponent(cc.Animation);e&&g.DataMgr.User.Data.vibrate&&b.default.vibrateShort(),g.DataMgr.User.Data.vibrate?t.play("state_shanke_on"):t.play("state_shanke_off")},A.prototype.doInitOpen=function(){},A.prototype.initFeedback=function(e){e=h.default.getRectSize(e),e={type:"text",text:"",backgroundColor:"#ff0000",style:s({},e,{borderRadius:4})},this.wxBtnFeedback=b.default.createFeedbackButton(e)},A.prototype.onBack=function(){p.AudioMgr.button(),this.handleClose()},A.prototype.onSound=function(){var e=this;p.AudioMgr.button(),g.DataMgr.User.reqSwitchMute().then(function(){p.AudioMgr.musicMuted=g.DataMgr.User.Data.mute,p.AudioMgr.playMusic(d.AudioEnum.bubble_bgm1),e.initAudio()}),y.default.event(v.EventKeys.MenuAudio,v.EventFrom.Menu)},A.prototype.onVibrate=function(){var e=this;p.AudioMgr.button(),g.DataMgr.User.reqSwitchVibrate().then(function(){return e.initVibrate(!0)}),y.default.event(v.EventKeys.MenuVibrate,v.EventFrom.Menu)},A.prototype.onShare=function(){p.AudioMgr.button(),b.default.share(v.ShareKeys.Friends,{invite_type:m.InviteType.Net}),y.default.event(v.EventKeys.MenuShare,v.EventFrom.Menu)},A.prototype.handleClose=function(){this.wxBtnFeedback&&this.wxBtnFeedback.hide(),this.doClose(l)},A.prefabPath="prefab/popwin/popwin_setting",c([i(cc.Sprite)],A.prototype,"iconAudio",void 0),c([i(cc.Sprite)],A.prototype,"iconVibrate",void 0),c([i(cc.Label)],A.prototype,"txtUserId",void 0),c([i(cc.Label)],A.prototype,"txtVersion",void 0),c([i(cc.Node)],A.prototype,"nodeFeedback",void 0),o=l=c([o],A),r.default=o,cc._RF.pop()},{}],"ShareVideoBtn.ts":[function(e,t,n){"use strict";cc._RF.push(t,"366d9bzR4tIC4cdFFJoI+fy","ShareVideoBtn.ts");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("SDKTools"),l=i("SDKEnums");function d(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(d,c=cc.Component),d.prototype.onLoad=function(){this.node.getChildByName("free").on("click",this.onfree,this),this.node.getChildByName("share").on("click",this.onshare,this),this.node.getChildByName("video").on("click",this.onvideo,this)},d.prototype.onfree=function(){this.m_callback.call(this.tar)},d.prototype.onshare=function(){this.m_callback.call(this.tar)},d.prototype.onvideo=function(){this.m_callback.call(this.tar)},d.prototype.Init=function(e,t,n){this.m_shareKey=e,this.m_callback=t,this.tar=n,this.initUI()},d.prototype.initUI=function(){switch(u.default.getType(this.m_shareKey)){case l.ShareVideoType.Share:case l.ShareVideoType.ShareAysnc:case l.ShareVideoType.ShareIntegral:this.node.getChildByName("free").active=!1,this.node.getChildByName("share").active=!0,this.node.getChildByName("video").active=!1;break;case l.ShareVideoType.Video:case l.ShareVideoType.VideoToShare:this.node.getChildByName("free").active=!1,this.node.getChildByName("share").active=!1,this.node.getChildByName("video").active=!0;break;default:this.node.getChildByName("free").active=!0,this.node.getChildByName("share").active=!1,this.node.getChildByName("video").active=!1}},i=s([i],d),r.default=i,cc._RF.pop()},{}],ShareVideo:[function(e,t,n){"use strict";cc._RF.push(t,"4b42bdLqxtCX40ZaIV5r57c","ShareVideo");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("SDKTools"),d=o("SDKEnums");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.moduleName="common",e}o=(i=cc._decorator).ccclass,i=i.property,a(p,c=cc.Component),p.prototype.updateWith=function(e){this.init(e)},p.prototype.updateWithKey=function(e){this.initWithKey(e)},p.prototype.initWithKey=function(e){e=l.default.getType(e),this.initWithType(e)},p.prototype.updateWithType=function(e){this.initWithType(e)},p.prototype.init=function(e){this.shareKey=e,e=l.default.getType(this.shareKey),this.initWithType(e)},p.prototype.initWithType=function(e){switch(e){case d.ShareVideoType.Share:case d.ShareVideoType.ShareAysnc:case d.ShareVideoType.ShareIntegral:u.default.playAnim(this.node,"state_"+this.moduleName+"_share");break;case d.ShareVideoType.Video:case d.ShareVideoType.VideoToShare:u.default.playAnim(this.node,"state_"+this.moduleName+"_video");break;default:u.default.playAnim(this.node,"state_"+this.moduleName+"_free")}},s([i(cc.String)],p.prototype,"moduleName",void 0),o=s([o],p),r.default=o,cc._RF.pop()},{}],ShopPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"3444a34szBF57YA4Vj5oUoS","ShopPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var u,l,d=o("AudioMgr"),p=o("BubbleMgr"),h=o("Display"),f=o("Const"),m=o("Enum"),g=o("StarConfig"),_=o("DataMgr"),y=o("CommonMgr"),v=o("OnlineMgr"),b=o("SDKAnalytics"),S=o("SDKEnums"),w=o("SDKTools"),A=o("BasePopwin");function M(){var e=null!==u&&u.apply(this,arguments)||this;return e.txtCoin=null,e.freeGetNum=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(M,u=A.default),(l=M).prototype.onOpen=function(e){u.prototype.onOpen.call(this,e),this.initUI()},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(l.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.initUI=function(){this.txtCoin.string=""+10*_.DataMgr.User.Diamond;var e=_.DataMgr.User.getDayDataWithKey(m.DayKeys.ShopFreeStar,0),t=w.default.getParamsInt(S.OnlineKeys.ShopFreeStar,g.StarConfig.ShopFreeStar);this.freeGetNum.string="Free claim times\uff08"+Math.max(0,t-e)+"/"+t+"\uff09"},M.prototype.onReward=function(){d.AudioMgr.button(),javaCall.ShowReward(this,function(e){b.default.event(S.EventKeys.ShopFree,S.EventFrom.Shop),_.DataMgr.User.getDayDataWithKey(m.DayKeys.ShopFreeStar,0)>=w.default.getParamsInt(S.OnlineKeys.ShopFreeStar,g.StarConfig.ShopFreeStar)?h.default.showTip("The number of times today has been used up"):w.default.dispatch(S.ShareKeys.ShopReward,{success:e.handleStarSuccess,context:e})})},M.prototype.onBack=function(){d.AudioMgr.button(),this.doClose(l,!1),y.default.I.sdkEventWithStr("close_gold_shop")},M.prototype.handleStarSuccess=function(){_.DataMgr.User.reqDiamond(10,10),_.DataMgr.User.reqAddDayReward(m.DayKeys.ShopFreeStar,1),this.initUI(),p.default.I.InitDiamond(),b.default.addLogRes(s({},f.default.LogRes.Diamond,{type:1,cnum:10,onum:_.DataMgr.User.Diamond,reason:"Receive rewards",levelid:0})),this.doClose(l,!1)},M.prefabPath="prefab/popwin/popwin_shop",c([i(cc.Label)],M.prototype,"txtCoin",void 0),c([i(cc.Label)],M.prototype,"freeGetNum",void 0),o=l=c([o],M),r.default=o,cc._RF.pop()},{}],SignPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"f01135vcVJA94tUzok8YLKf","SignPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("ViewMgr"),h=o("SDKTools"),f=o("DataMgr"),m=o("ShareVideo"),g=o("AudioMgr"),_=o("EventEnum"),y=o("SDKAnalytics"),v=o("OnlineMgr"),b=o("SDKEnums"),S=o("Enum"),w=o("Display"),A=o("Const"),M=o("UserModel"),T=o("BaseAnimPopwin"),P=o("RandomUtils"),E=o("ImageLabelNew"),D=o("BubbleMgr"),I=o("Action"),C=o("CheckTools");function B(){var e=null!==l&&l.apply(this,arguments)||this;return e.shareVideo=null,e.shareVideo2=null,e.m_DayObjs=[],e.m_ItemsIcon=[],e.m_CoinIcon=null,e.m_LogoIcon=null,e.m_SkinIcon=null,e.m_done=null,e.m_abbtns=null,e.m_arrow=null,e.issubscribe=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(B,l=T.default),(d=B).canShow=function(){return f.DataMgr.User.CurLevel>=h.default.getParamsInt(b.OnlineKeys.sign_min_lv,2)&&0==f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySign,0)&&0==f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySignShow,0)},B.prototype.start=function(){var e=this;this.m_DayObjs.forEach(function(t,n){t.on(cc.Node.EventType.TOUCH_END,function(){return e.onClickItem(t,n)},e)})},B.prototype.onClickItem=function(e,t){t==M.default.I.SignDay&&0==f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySign,0)&&this.onsingleReward()},B.openSign=function(){0<f.DataMgr.User.getDayDataWithKey(S.DayKeys.SevenDaySign,0)||p.ViewMgr.openPopwin(d,{})},B.prototype.onOpen=function(e){return c(this,void 0,void 0,function(){return u(this,function(){return l.prototype.onOpen.call(this,e),f.DataMgr.User.reqDayDataWithKey(S.DayKeys.TodaySignShow,1,!0),this.nextLv=e.data?e.data.nextLv:0,w.default.s_isShowedReward=!0,this.issubscribe=w.default.s_issubscribeDailyReward,this.m_arrow.active=w.default.s_issubscribeDailyReward,1==f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySign,0)?(this.m_done.active=!0,this.shareVideo.node.active=!1,this.m_abbtns.active=!1):(this.m_done.active=!1,this.shareVideo.node.active=!C.default.SignDoubleRewardAB,this.m_abbtns.active=C.default.SignDoubleRewardAB),this.initUI(),this.initRewardUI(),y.default.event(b.EventKeys.sign_panel_show,""),[2]})})},B.prototype.initUI=function(){var e=this;this.currSignNode=null,this.m_DayObjs.forEach(function(t,n){t.on(cc.Node.EventType.TOUCH_END,e.onClickItem,e);var o=n+1;n<M.default.I.SignDay?t.getComponent(cc.Animation).play(7==o?"anim_daily_getted7":"anim_daily_getted"):n==M.default.I.SignDay&&0==f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySign,0)?(t.getComponent(cc.Animation).play(7==o?"anim_daily_on7":"anim_daily_on"),e.currSignNode=t):0===M.default.I.SignDay&&f.DataMgr.User.getDayDataWithKey(S.DayKeys.TodaySign,0)?t.getComponent(cc.Animation).play(7==o?"anim_daily_getted7":"anim_daily_getted"):t.getComponent(cc.Animation).play(7==o?"anim_daily_no7":"anim_daily_no"),n=e.getSignCfg(o),7==o||(201==n.props_reward[0]?(t.getChildByName("star").getComponent(cc.Animation).play("anim_reward_imgpattern"),t.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=e.m_LogoIcon):301==n.props_reward[0]?(t.getChildByName("star").getComponent(cc.Animation).play("anim_reward_skin"),t.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=e.m_SkinIcon):I.default.playAddAnim(t.getChildByName("star"),"anim_reward_num"),t.getChildByName("star").getChildByName("num").getComponent(E.default).setValue(n.props_reward[1],"+",!1),n.props_reward[0]<=2?t.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=e.m_ItemsIcon[n.props_reward[0]]:101==n.props_reward[0]&&(t.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=e.m_CoinIcon))})},B.prototype.setsubscribe=function(){this.issubscribe=!this.issubscribe,this.m_arrow.active=this.issubscribe,w.default.s_issubscribeDailyReward=this.issubscribe},B.prototype.getSignCfg=function(e){return f.DataMgr.Config.getSignDBById(e)},B.prototype.onBannerSuccess=function(e){l.prototype.onBannerSuccess.call(this,e)},B.prototype.onBannerFailure=function(e){l.prototype.onBannerFailure.call(this,e)},Object.defineProperty(B.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),B.prototype.addEvent=function(){l.prototype.addEvent.call(this),h.default.bindEvent(_.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},B.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),h.default.removeEvent(_.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},B.prototype.initRewardUI=function(){var e=this.ShareKey;this.shareVideo.updateWith(e),this.shareVideo2.updateWith(e)},Object.defineProperty(B.prototype,"ShareKey",{get:function(){return b.ShareKeys.DayReward},enumerable:!0,configurable:!0}),B.prototype.onDayReward=function(){g.AudioMgr.button(),javaCall.ShowReward(this,function(e){console.log("callback===============>SignPopwin.js"),h.default.dispatch(e.ShareKey,{success:e.handleDayReward,context:e}),y.default.event(b.EventKeys.sign_panel_tap_button,"")})},B.prototype.onsingleReward=function(){g.AudioMgr.button(),this.handleReward(),f.DataMgr.User.reqDayDataWithKey(S.DayKeys.TodaySign,1,!0),this.m_done.active=!0,this.m_abbtns.active=!1},B.prototype.handleDayReward=function(){this.handleReward(C.default.SignDoubleRewardAB),f.DataMgr.User.reqDayDataWithKey(S.DayKeys.TodaySign,1,!0),this.m_done.active=!0,this.shareVideo.node.active=!1,this.m_abbtns.active=!1},B.prototype.handleTacticUpdate=function(){this.initRewardUI()},B.prototype.onback=function(){g.AudioMgr.button(),this.ondoClose(!1)},B.prototype.handleReward=function(e){var t=this;void 0===e&&(e=!1);var n=M.default.I.SignDay+1,o=this.currSignNode;cc.isValid(o)&&o.getComponent(cc.Animation).play(7==n?"anim_daily_getted7":"anim_daily_getted"),this.currSignNode=null,M.default.I.reqSign(n).then(function(){t.initUI()}),101==(n=this.getSignCfg(n)).props_reward[0]?M.default.I.reqDiamond(e?n.props_reward[1]/10*2:n.props_reward[1]/10):n.props_reward[0]<=3?(f.DataMgr.User.reqProps(n.props_reward[0],e?2*n.props_reward[1]:n.props_reward[1]),D.default.I.doItemAnim(n.props_reward[0],null,!0),w.default.showProps([{type:n.props_reward[0],num:e?2*n.props_reward[1]:n.props_reward[1]}])):201==n.props_reward[0]||301==n.props_reward[0]||(n=n.props_reward[1],e&&(n*=2),D.default.I.doAddFourItem([0,n],[1,n],[2,n],[3,n]))},B.prototype.getSkin=function(){var e=[],t=M.default.I.HadSkins;if([1,2,3,4,5].forEach(function(n){t.indexOf(n)<0&&e.push(n)}),e.length<=0)return-1;var n=P.default.random(0,e.length);return e[n]},B.prototype.getLogo=function(){var e=[],t=M.default.I.HadLogos;if([0,1,2,3,4,5].forEach(function(n){t.indexOf(n)<0&&e.push(n)}),e.length<=0)return-1;var n=P.default.random(0,e.length);return e[n]},B.prototype.ondoClose=function(e){return void 0===e&&(e=!0),c(this,void 0,Promise,function(){var t=this;return u(this,function(){return this.issubscribe&&h.default.subScribe([A.default.SubscribeIds.Sign,A.default.SubscribeIds.Activity,A.default.SubscribeIds.Treasure],!0).then(function(){w.default.s_issubscribeDailyReward=!1}).catch(function(){w.default.s_issubscribeDailyReward=!1}),w.default.s_issubscribeDailyReward=!1,l.prototype.doClose.call(this,d,e).then(function(){D.default.I.removePopwinList(),t.nextLv&&(D.default.I.enterGame(t.nextLv),D.default.I.hideUILevel(),t.nextLv=0)}).catch(function(){t.nextLv&&(D.default.I.enterGame(t.nextLv),D.default.I.hideUILevel(),t.nextLv=0)}),y.default.event(b.EventKeys.sign_panel_close,""),[2]})})},B.prefabPath="prefab/popwin/popwin_daily",s([i(m.default)],B.prototype,"shareVideo",void 0),s([i(m.default)],B.prototype,"shareVideo2",void 0),s([i(cc.Node)],B.prototype,"m_DayObjs",void 0),s([i(cc.SpriteFrame)],B.prototype,"m_ItemsIcon",void 0),s([i(cc.SpriteFrame)],B.prototype,"m_CoinIcon",void 0),s([i(cc.SpriteFrame)],B.prototype,"m_LogoIcon",void 0),s([i(cc.SpriteFrame)],B.prototype,"m_SkinIcon",void 0),s([i(cc.Node)],B.prototype,"m_done",void 0),s([i(cc.Node)],B.prototype,"m_abbtns",void 0),s([i(cc.Node)],B.prototype,"m_arrow",void 0),o=d=s([o],B),r.default=o,cc._RF.pop()},{}],StarConfig:[function(e,t,n){"use strict";cc._RF.push(t,"4ba5ecM7XBKT6kz+uE4wocm","StarConfig");var o,i=e,r=n;Object.defineProperty(r,"__esModule",{value:!0}),o=i("Enum"),r.StarConfig={Row:10,Col:10,Width:74,Gap:0,StarColors:((i={})[o.ColorType.Red]=cc.color(246,32,15),i[o.ColorType.Yellow]=cc.color(245,255,79),i[o.ColorType.Blue]=cc.color(69,255,253),i[o.ColorType.Green]=cc.color(69,255,97),i[o.ColorType.Violet]=cc.color(238,69,255),i),LightColors:((i={})[o.ColorType.Red]=cc.color(255,94,94),i[o.ColorType.Yellow]=cc.color(255,248,105),i[o.ColorType.Blue]=cc.color(44,181,255),i[o.ColorType.Green]=cc.color(166,255,66),i[o.ColorType.Violet]=cc.color(240,82,255),i),Dir:[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}],Score:{Init:5,Inc:10,Ratio:8},ScoreRewardMax:10,BlockRewardLimit:[13,1.2,25],SuperRewardLimit:[6,13,2],ChestMax:20,ChestRewards:[[10,10],[1,1]],ReliveNumLimit:3,RecordNumLimit:10,InterstitialAdCd:1,CollectRewardNum:20,AddDeskRewardNum:20,FloatingRewardNum:40,ServiceRewardNum:20,ShopFreeStar:5,InviteRewards:[30,30,30,40,40,40,50,50,50,60,60,60,70,70,70],LvupP:[60,130,3],WinVideoAddCoin:10,LevelVideoAddCoin:10},r.RuleCfg={isOpenMoney:!0,isForceShare:!0,showCancel:!0,property_probability1:.2,property_probability2:2,eliminate_award:3,hint:5,wand:[4,8],free_star:2,eliminate_award2:1,redbag:20,extra_award:2e3,hint_cd:3,award_cd:2,dayShareTotal:5,interstitialAdRewardChapter:1,onShowInterstitial:!0,internal_ad:!0,banner_time:6e4},cc._RF.pop()},{}],StringUtils:[function(e,t,n){"use strict";cc._RF.push(t,"f8714F7VlpB9q6ElC03eLNK","StringUtils");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Const"),a=o("SDKEnums"),s=o("SDKTools");function c(){}c.trim=function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")},c.isEmpty=function(e){return!e||void 0===e||null==e||"string"==typeof e&&""===this.trim(e)||"null"===e},c.canIUse=function(e){var t=s.default.getParamsString(a.OnlineKeys.SDKVerssion,"0"),n=s.default.SystemData?s.default.SystemData.SDKVersion:"1.4.9";return t="0"===t?n:t,0<=this.compareVersion(t,e)},c.strCut=function(e,t){if(2*e.length<=t)return e;for(var n=0,o="",i=0;i<e.length;i++)if(o+=e.charAt(i),128<e.charCodeAt(i)){if((n+=2)>=t)return o.substring(0,o.length-1)+"..."}else if((n+=1)>=t)return o.substring(0,o.length-2)+"...";return o},c.toQueryPair=function(e,t,n){return e+"="+((n=void 0!==n&&n)?encodeURIComponent(t):t)},c.stringFormat=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(0===arguments.length)throw new Error("please give arg at least one !");if(2===arguments.length&&"object"==typeof arguments[1])for(var o in arguments[1]){var i=new RegExp("({"+o+"})","g");e=e.replace(i,arguments[1][o])}else for(var r=0;r<t.length;r++){if(null==t[r])return e;i=new RegExp("({["+r+"]})","g"),e=e.replace(i,t[r])}return e},c.parseJson2String=function(e,t){var n=null,o="",i=0;return(t=t||{}).newlineAfterColonIfBeforeBraceOrBracket=!0===t.newlineAfterColonIfBeforeBraceOrBracket,t.spaceAfterColon=!1!==t.spaceAfterColon,n=/([\{\}])/g,e=("string"!=typeof e||(e=JSON.parse(e)),e=JSON.stringify(e)).replace(n,"\r\n$1\r\n"),n=/([\[\]])/g,e=e.replace(n,"\r\n$1\r\n"),n=/(\,)/g,e=e.replace(n,"$1\r\n"),n=/(\r\n\r\n)/g,e=e.replace(n,"\r\n"),n=/\r\n\,/g,e=e.replace(n,","),t.newlineAfterColonIfBeforeBraceOrBracket||(n=/\:\r\n\{/g,e=e.replace(n,":{"),n=/\:\r\n\[/g,e=e.replace(n,":[")),t.spaceAfterColon&&(n=/\:/g,e=e.replace(n,":")),e.split("\r\n").forEach(function(e){var t=0,n=0,r="";for(e.match(/\{$/)||e.match(/\[$/)?n=1:e.match(/\}/)||e.match(/\]/)?0!==i&&--i:n=0,t=0;t<i;t++)r+="    ";o+=r+e+"\r\n",i+=n}),o},c.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var i=parseInt(e[o]),r=parseInt(t[o]);if(r<i)return 1;if(i<r)return-1}return 0},c.buildRandomCode=function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=e.length,n="",o=0;o<26;o++){var i=Math.floor(Math.random()*t);n+=e.charAt(i)}return(new Date).getTime()+"-"+n},c.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},c.getCDNUrl=function(){return""+s.default.CdnUrl+r.default.GameEnName},o=c,i.default=o,cc._RF.pop()},{}],TaskModel:[function(e,t,n){"use strict";cc._RF.push(t,"ce5fcvHGXZBW4amp2p6ozDO","TaskModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseModel"),c=o("DataMgr"),u=o("ABTools"),l=o("BubbleMgr"),d=o("Enum"),p=o("RandomUtils");function h(){var e=a.call(this)||this;return e.chestArr=[],e}(o=i.TaskTableKey||(i.TaskTableKey={})).MainTask="MainTask",o.DailyTask="DailyTask",o.Achievement="Achievement",o.AchievementType="AchievementType",r(h,a=s.default),h.prototype.clearData=function(){this.init()},h.prototype.loadDataFromLocalStorage=function(){},h.prototype.init=function(){this.chestArr=u.default.I.wxDailyTaskGoal},Object.defineProperty(h.prototype,"CollectTempNum",{get:function(){return l.default.I.collectTempNum||0},enumerable:!0,configurable:!0}),h.prototype.addCollectTempNum=function(e){e=e||0,this.setCollectTempNum(this.CollectTempNum+e)},h.prototype.setCollectTempNum=function(e){this.isChestFuncOpen&&(l.default.I.collectTempNum=e)},Object.defineProperty(h.prototype,"CollectNum",{get:function(){return c.DataMgr.User.TaskDaily.collectNum},enumerable:!0,configurable:!0}),h.prototype.getCollectSum=function(){return this.CollectNum+this.CollectTempNum},Object.defineProperty(h.prototype,"CollectTargets",{get:function(){var e=this.chestArr,t=c.DataMgr.User.TaskDaily.completes;if(e.length===t.length)return[];var n=t.map(function(t){return e[t]});return e.filter(function(e){return n.indexOf(e)<0})},enumerable:!0,configurable:!0}),h.prototype.getChestTarget=function(){return this.CollectTargets[0]},h.prototype.getTargetByIndex=function(e){return this.chestArr[e]},h.prototype.getChestIndex=function(){var e=this.CollectTargets[0];return this.chestArr.indexOf(e)},h.prototype.getShowChestIndex=function(){var e=this.chestArr,t=this.CollectTargets;return t.length?e.indexOf(t[0]):e.length-1},h.prototype.getRewardByIndex=function(e){var t=[d.PropsType.Boom,d.PropsType.Light,d.PropsType.Laser,d.PropsType.RainbowBall];if(u.default.I.wxDailyTaskReward)switch(e){case 0:return{diamond:10,props:[[p.default.randomArray(t),1]]};case 1:var n=p.default.randomArray(t),o=[n,1];return t=t.filter(function(e){return e!==n}),{diamond:25,props:[o,[n=p.default.randomArray(t),1]]};case 2:var i=p.default.randomArray(t);return{diamond:30,props:t.filter(function(e){return e!==i}).map(function(e){return[e,1]}).slice()}}else switch(e){case 0:return{diamond:20};case 1:return{diamond:30};case 2:return{diamond:40}}},Object.defineProperty(h.prototype,"isChestFuncOpen",{get:function(){var e=c.DataMgr.User.CurLevel+1;return u.default.I.wxDaliyTask&&e>=u.default.I.wxOpenChestLv},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isChestLight",{get:function(){return c.DataMgr.User.CurLevel+1>=u.default.I.wxOpenChestLv},enumerable:!0,configurable:!0}),h.prototype.checkChestReward=function(){if(!this.isChestFuncOpen)return[];for(var e=-1,t=this.CollectTargets,n=c.DataMgr.User.TaskDaily.collectNum,o=0;o<t.length;o++){var i=t[o];if(i<=n){e=i;break}}return-1===e?[]:[this.chestArr.indexOf(e),e]},h.prototype.checkChestOver=function(){var e=this.CollectTargets;if(0===e.length)return!0;var t=c.DataMgr.User.TaskDaily.collectNum;if(t>=this.chestArr[this.chestArr.length-1])return!0;for(var n=t+this.CollectTempNum,o=0;o<e.length;o++)if(e[o]<=n)return!0;return!1},h.prototype.reqChestAddNum=function(e){e<=0||this.isChestFuncOpen&&(c.DataMgr.User.reqChestAddNum(e),this.setCollectTempNum(0))},h.prototype.reqChestOpenReward=function(e){c.DataMgr.User.reqChestOpenReward(e),this.setCollectTempNum(0)},Object.defineProperty(h,"I",{get:function(){return this.instance||(this.instance=new h)},enumerable:!0,configurable:!0}),h.instance=null,r=h,i.default=r,cc._RF.pop()},{}],TipProps:[function(e,t,n){"use strict";cc._RF.push(t,"2ed03ZHuVdNqbQwCrpAwlaN","TipProps");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.nodeWrap=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),l.prototype.initWith=function(e){var t=this,n=this.nodeWrap.children;n.forEach(function(e){return e.active=!1}),e.forEach(function(e){var t=e.type;e=e.num,n[t].active=!0,n[t].getChildByName("num").getComponent(cc.Label).string="+"+e}),u.default.playAddAnim(this.nodeWrap).then(function(){t.node.destroy()})},s([i(cc.Node)],l.prototype,"nodeWrap",void 0),o=s([o],l),r.default=o,cc._RF.pop()},{}],TipsMgr:[function(e,t,n){"use strict";cc._RF.push(t,"955a5hSlYVEZ54HbLH8eBUt","TipsMgr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("PoolMgr"),a=o("LoaderMgr"),s=o("TipProps");function c(){}c.prototype.show=function(){console.log("-------------\x3e"+c.prefabPath);for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a.LoaderMgr.loadResWithUrl(c.prefabPath,cc.Prefab,{success:function(n){(n=r.PoolMgr.getPrefab(n,cc.director.getScene())).zIndex=1e3,e.doOpen.apply(e,[n].concat(t))},context:this})},c.prototype.showProps=function(e,t){console.log("-------------\x3e"+c.prefaPropbPath);var n=this;a.LoaderMgr.loadResWithUrl(c.prefaPropbPath,cc.Prefab,{success:function(o){(o=r.PoolMgr.getPrefab(o)).zIndex=1e3,t?(o.parent=t,o.position=cc.v2(0,0)):(o.parent=cc.director.getScene(),o.y=400),n.doPropOpen(o,e)},context:this})},c.prototype.doOpen=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t[0],i=t[1],r=t[2],a=(a=t[3])||{type:0};o.height=1===a.type?100:60,(a=o.getChildByName("msg").getComponent(cc.Label)).string=i,300<=a.node.width?a.overflow=cc.Label.Overflow.RESIZE_HEIGHT:a.overflow=cc.Label.Overflow.NONE,this.doAnim(o,r).then(function(){return e.doclose(o)})},c.prototype.doPropOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],o=e[1];n.getComponent(s.default).initWith(o)},c.prototype.doAnim=function(e,t){return void 0===t&&(t=1),new Promise(function(n){e.opacity=0,cc.tween(e).stop(),cc.tween(e).to(.2,{opacity:255},{easing:cc.easing.smooth}).delay(t).to(.2,{opacity:0},{easing:cc.easing.fade}).call(function(){return n()}).start()})},c.prototype.doclose=function(e){r.PoolMgr.putNode(e)},Object.defineProperty(c,"I",{get:function(){return this.__instance||(this.__instance=new c)},enumerable:!0,configurable:!0}),c.prefabPath="prefab/common/tip",c.prefaPropbPath="prefab/common/tip_prop",o=c,i.default=o,i.TipsMgr=o.I,cc._RF.pop()},{}],TopBar:[function(e,t,n){"use strict";cc._RF.push(t,"6c250oSHOpFJbl+rbB4QMdE","TopBar");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("SDKTools"),d=o("Display"),p=o("DataMgr"),h=o("Enum"),f=o("PoolMgr"),m=o("AudioMgr"),g=o("EventMgr"),_=o("ImageLabelNew"),y=o("EventEnum");function v(){var e=c.call(this)||this;return e.nodeHp=null,e.nodeCoin=null,e.nodeStar=null,e.nodeHpFull=null,e.iconCoin=null,e.iconStar=null,e.txtHp=null,e.txtHpTime=null,e.txtCoin=null,e.txtStar=null,e.particleLight=null,e.isInitial=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(v,c=cc.Component),Object.defineProperty(v.prototype,"IconCoin",{get:function(){return this.iconCoin},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"IconStar",{get:function(){return this.iconStar},enumerable:!0,configurable:!0}),v.prototype.onLoad=function(){g.EventMgr.on(y.EventEnum.UpdateStar,this.handleUpdateStar,this),g.EventMgr.on(y.EventEnum.UpdateDiamond,this.handleUpdateCoin,this),g.EventMgr.on(y.EventEnum.UpdateReduceStar,this.handleReduceStar,this)},v.prototype.onDestroy=function(){g.EventMgr.off(y.EventEnum.UpdateStar,this.handleUpdateStar,this),g.EventMgr.off(y.EventEnum.UpdateDiamond,this.handleUpdateCoin,this),g.EventMgr.off(y.EventEnum.UpdateReduceStar,this.handleReduceStar,this)},v.prototype.initWith=function(e){var t="anim_top_in",n="anim_top_out";this.data||this.initData();var o=this.data,i=this.getData(e),r=o.hp,a=(e=o.coin,o=o.star,i.hp),s=i.coin,c=i.star;switch(this.isInitial||(this.initCoin(),this.initStar(),this.isInitial=!0),r){case-1:case 0:1===a&&u.default.playAddAnim(this.nodeHp,t);break;case 1:0===a&&u.default.playAddAnim(this.nodeHp,n),a<0&&u.default.playAddAnim(this.nodeHp,n)}switch(e){case-2:1<=s&&u.default.playAddAnim(this.nodeCoin,t),1==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1");break;case-1:1<=s&&u.default.playAddAnim(this.nodeCoin,t),2==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin1-2");break;case 0:1<=s&&u.default.playAddAnim(this.nodeCoin,t),1==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1"),2==s&&u.default.playAddAnim(this.nodeCoin,"state_top_coin"),3==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-3");break;case 1:0===s?(i.coin=-1,u.default.playAddAnim(this.nodeCoin,n)):s<0&&u.default.playAddAnim(this.nodeCoin,n),2===s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin1-2");break;case 2:0===s?(i.coin=-2,u.default.playAddAnim(this.nodeCoin,n)):s<0&&u.default.playAddAnim(this.nodeCoin,n),1===s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1")}switch(o){case-3:1<=c&&u.default.playAddAnim(this.nodeStar,t),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2");break;case-2:1<=c&&u.default.playAddAnim(this.nodeStar,t),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-1"),3==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-3");break;case-1:1<=c&&u.default.playAddAnim(this.nodeStar,t),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-2"),3==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-3");break;case 0:1<=c&&u.default.playAddAnim(this.nodeStar,t),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2"),3==c&&u.default.playAddAnim(this.nodeStar,"state_top_star");break;case 1:0===c?(i.star=-1,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),2===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-2"),3===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-3");break;case 2:0===c?(i.star=-2,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),1===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-1"),3===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-3");break;case 3:0===c?(i.star=-3,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),1===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2")}this.data=i},v.prototype.animAddStar=function(){u.default.playAddAnim(this.nodeStar,"anim_top_staradd")},v.prototype.initData=function(){this.data={hp:0,coin:0,star:0}},v.prototype.initCoin=function(){this.nodeCoin.active=!0,this.coin=10*p.DataMgr.User.Diamond,this.txtCoin.setValue(this.coin)},v.prototype.initStar=function(){this.nodeStar.active=!0,this.txtStar.setValue(p.DataMgr.User.Star)},v.prototype.getData=function(e){var t=this.data?-Math.abs(this.data.hp):0,n=this.data?-Math.abs(this.data.coin):0,o=this.data?-Math.abs(this.data.star):0;switch(e){case h.TopBarType.Hp:return{hp:1,coin:0,star:o};case h.TopBarType.Coin:return{hp:t,coin:1,star:o};case h.TopBarType.Star:return{hp:t,coin:n,star:1};case h.TopBarType.HpAndCoin:return{hp:1,coin:2,star:o};case h.TopBarType.HpAndStar:return{hp:1,coin:n,star:2};case h.TopBarType.CoinAndStar:return{hp:t,coin:1,star:2};case h.TopBarType.Whole:return{hp:1,coin:2,star:3};case h.TopBarType.None:default:return{hp:t,coin:n,star:o}}},v.prototype.synchCoin=function(){var e=10*p.DataMgr.User.Diamond;this.coin!==e&&(this.coin=e,this.txtCoin.setText(e+""))},v.prototype.actionCoinFly=function(e){var t=this;this.coin+=10*e,this.txtCoin.setText(this.coin+""),cc.tween(this.nodeCoin.children[0]).to(2/60,{scale:.85}).to(5/60,{scale:1}).start();var n=f.PoolMgr.getPrefab(this.particleLight,this.nodeCoin.children[1]);n.children[0].getComponent(cc.ParticleSystem).resetSystem(),n.children[1].getComponent(cc.ParticleSystem).resetSystem(),this.scheduleOnce(function(){cc.isValid(n)&&f.PoolMgr.putNode(n),t.initWith(h.TopBarType.Star)},1),l.default.vibrateShort()},v.prototype.handleUpdateCoin=function(){this.initCoin()},v.prototype.handleUpdateStar=function(){this.initStar()},v.prototype.handleReduceStar=function(e){e=+e.detail||1,e=Math.max(p.DataMgr.User.Star-e,0),this.txtStar.setValue(e)},v.prototype.onCoin=function(){m.AudioMgr.button()},v.prototype.onStar=function(){m.AudioMgr.button(),d.default.showTip("Coming soon")},s([i(cc.Node)],v.prototype,"nodeHp",void 0),s([i(cc.Node)],v.prototype,"nodeCoin",void 0),s([i(cc.Node)],v.prototype,"nodeStar",void 0),s([i(cc.Node)],v.prototype,"nodeHpFull",void 0),s([i(cc.Node)],v.prototype,"iconCoin",void 0),s([i(cc.Node)],v.prototype,"iconStar",void 0),s([i(_.default)],v.prototype,"txtHp",void 0),s([i(_.default)],v.prototype,"txtHpTime",void 0),s([i(_.default)],v.prototype,"txtCoin",void 0),s([i(_.default)],v.prototype,"txtStar",void 0),s([i(cc.Prefab)],v.prototype,"particleLight",void 0),o=s([o],v),r.default=o,cc._RF.pop()},{}],TopMenu:[function(e,t,n){"use strict";cc._RF.push(t,"a72f08KjP5Eoohk6GsrAsED","TopMenu");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action"),l=o("Enum"),d=o("AudioMgr");function p(){var e=null!==c&&c.apply(this,arguments)||this;return e.nMail=null,e.nInvite=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(p,c=cc.Component),p.prototype.init=function(){this.animWith(l.ComAction.Init)},p.prototype.animWith=function(e){var t;switch(u.default.stopAnim(this.node),e){case l.ComAction.Init:t="init";break;case l.ComAction.Enter:t="in";break;case l.ComAction.Out:t="out"}return u.default.playAddAnim(this.node,"anim_btn_menu_"+t)},p.prototype.refreshWith=function(){},p.prototype.onMail=function(){d.AudioMgr.button()},s([i(cc.Node)],p.prototype,"nMail",void 0),s([i(cc.Node)],p.prototype,"nInvite",void 0),o=s([o],p),r.default=o,(r=r.TopMenuUI||(r.TopMenuUI={}))[r.Invite=0]="Invite",r[r.Mail=1]="Mail",cc._RF.pop()},{}],TouchBlock:[function(e,t,n){"use strict";cc._RF.push(t,"73b636glM1K37Jc+OEe8i/W","TouchBlock");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=o("Action");function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.loadingNode=null,e.txtDesc=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(l,c=cc.Component),l.prototype.onload=function(){this.loadingNode.active=!1,this.txtDesc.string=""},l.prototype.showLoading=function(e){this.loadingNode.active=e,u.default.playAddAnim(this.loadingNode)},l.prototype.showDesc=function(e){this.txtDesc.string=e},s([i(cc.Node)],l.prototype,"loadingNode",void 0),s([i(cc.Label)],l.prototype,"txtDesc",void 0),o=s([o],l),r.default=o,cc._RF.pop()},{}],TouchMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e6c08MS1fdLPpXVvn3ZlBEQ","TouchMgr");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("EventMgr"),h=o("EventEnum"),f=o("Water"),m=o("BubbleMgr"),g=o("Vector3Utils"),_=o("Display"),y=o("SDKAnalytics"),v=o("SDKEnums"),b=o("bubbleUtil"),S=o("CheckTools");function w(){var e=null!==l&&l.apply(this,arguments)||this;return e.shooter=null,e.line2=null,e.lines=[],e.m_points=[],e.ishaveend=!1,e.m_bubblesArray=[],e.istouching=!1,e.offecttop=0,e.m_d=0,e.m_Test=null,e.m_bottombally=0,e.flag=0,e.istouch=!1,e}o=(i=cc._decorator).ccclass,i=i.property,a(w,l=cc.Component),(d=w).prototype.onLoad=function(){(d.I=this).openTouch(),this.m_Test=this.node.parent.getChildByName("test")},w.prototype.start=function(){this.offecttop=m.default.I.node.parent.parent.getChildByName("topbar").getComponent(cc.Widget).top},w.prototype.hideline=function(){this.shooter.active=!1;for(var e=0;e<this.lines.length;e++)this.lines[e].active=!1},w.prototype.setLineColor2=function(){var e=this,t=null;if(this.shooter.children[0].active=!0,this.shooter.children[0].getComponent(cc.Animation).currentClip&&this.shooter.children[0].getComponent(cc.Animation).currentClip.name==this.getlineaniname(m.default.I.shootBubble.color)||this.shooter.children[0].getComponent(cc.Animation).play(this.getlineaniname(m.default.I.shootBubble.color)),11==m.default.I.shootBubble.color)return this.shooter.children[0].children[0].height=1150,this.shooter.children[0].children[1].height=1150,void(this.m_Test.active=!1);this.shooter.children.forEach(function(n,o){0!=o&&(n.opacity=0),0==n.active&&null==t&&(t=e.shooter.children[o-1],e.shooter.children[0].children[0].height=t.position.y+50,e.shooter.children[0].children[1].height=t.position.y+50)});for(var n=this,o=0;o<this.lines.length;o++)!function(o){var i,r,a;n.lines[o].children[0].active=!0,0!=n.lines[o].active&&(0==o&&(i=t.y+_.default.getTargetPos(n.lines[o].children[0],n.node).sub(_.default.getTargetPos(t,n.node)).mag(),n.shooter.children[0].children[0].height=i,n.shooter.children[0].children[1].height=i),r=null,(a=n.lines[o]).children[0].getComponent(cc.Animation).currentClip&&a.children[0].getComponent(cc.Animation).currentClip.name==n.getlineaniname(m.default.I.shootBubble.color)||a.children[0].getComponent(cc.Animation).play(n.getlineaniname(m.default.I.shootBubble.color)),a.children.forEach(function(t,n){0!=n&&(t.opacity=0),0==t.active&&null==r&&(r=a.children[n-1],n=50,o+1<e.lines.length&&e.lines[o+1].active&&(n=_.default.getTargetPos(e.lines[o+1].children[0],e.node).sub(_.default.getTargetPos(r,e.node)).mag()),a.children[0].children[0].height=r.position.y+n,a.children[0].children[1].height=r.position.y+n)}))}(o)},w.prototype.getlineaniname=function(e){return 1==e?"anim_game_line_purple":2==e?"anim_game_line_cyan":3==e?"anim_game_line_orange":4==e?"anim_game_line_blue":5==e?"anim_game_line_green":6==e?"anim_game_line_red":10==e?"anim_game_line_prop1":11==e?"anim_game_line_prop2":12==e?"anim_game_line_prop4":13==e?"anim_game_line_prop3":void 0},w.prototype.setLineColor=function(){this.shooter.children[0].active=!1,this.shooter.children.forEach(function(e,t){0!=t&&(e.getComponent(cc.Sprite).spriteFrame=m.default.I.getLine()),e.opacity=255});for(var e=0;e<this.lines.length;e++)this.lines[e].children[0].active=!1,0!=this.lines[e].active&&this.lines[e].children.forEach(function(e,t){e.opacity=255,0!=t&&(e.getComponent(cc.Sprite).spriteFrame=m.default.I.getLine())})},w.prototype.showline=function(e){(e=void 0!==e&&e)&&(this.m_bottombally=m.default.I.getBottomBubbleY(),this.m_bubblesArray=m.default.I.getBottomBubbleInView()),this.shooter.active=!0,this.setlines(),S.default.IsLine?(this.m_Test.getComponent(cc.Sprite).spriteFrame=m.default.I.getSkinByID(m.default.I.shootBubble.color),this.setLineColor2()):this.setLineColor()},w.prototype.openTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchsMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},w.prototype.closeTouch=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchsMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},w.prototype.touchStart=function(e){m.default.I.standTime=0,m.default.I.m_isstartani?m.default.I.checkMoveMap(!0,!0,!0):!m.default.I.isgameover&&m.default.I.m_isready&&m.default.I.isgameing&&!m.default.I.isguiding&&(this.istouching=!0,this.m_bottombally=m.default.I.getBottomBubbleY(),this.m_bubblesArray=m.default.I.getBottomBubbleInView(),this.m_d=this.convertToDegree(e),void 0!==this.m_d?(this.shooter.angle=this.m_d,m.default.I.HideTop(),!this.m_Test.active&&S.default.IsLine&&(this.m_Test.active=!0,this.m_Test.getComponent(cc.Sprite).spriteFrame=m.default.I.getSkinByID(m.default.I.shootBubble.color)),this.showline(!0),1==m.default.I.m_curLv&&y.default.event(v.EventKeys.touch_screen_first_time,"")):this.hideline())},w.prototype.touchsMove=function(e){if(m.default.I.standTime=0,!m.default.I.isgameover&&m.default.I.m_isready&&m.default.I.isgameing&&!m.default.I.isguiding){if(m.default.I.hideGuid(),this.m_d=this.convertToDegree(e),void 0===this.m_d)return this.hideline(),m.default.I.ShowTop(),m.default.I.clearAllpreview(),void(this.m_Test.active=!1);!this.m_Test.active&&S.default.IsLine&&(this.m_Test.active=!0,this.m_Test.getComponent(cc.Sprite).spriteFrame=m.default.I.getSkinByID(m.default.I.shootBubble.color)),0==this.shooter.active?this.showline():(10==m.default.I.shootBubble.color||12==m.default.I.shootBubble.color||m.default.I.shootBubble.color,this.setlines(!1),S.default.IsLine?this.setLineColor2():this.setLineColor()),this.istouch||(this.istouch=!0,y.default.event(v.EventKeys.fist_slide_shoot_line,"")),m.default.I.HideTop(),this.shooter.angle=this.m_d}},w.prototype.touchEnd=function(e){if(m.default.I.standTime=0,this.m_Test.active=!1,!m.default.I.isgameover&&m.default.I.m_isready&&m.default.I.isgameing&&!m.default.I.isguiding&&this.shooter.active){if(this.istouching=!1,this.m_d=this.convertToDegree(e),void 0===this.m_d)return this.hideline(),m.default.I.ShowTop(),void m.default.I.clearAllpreview();this.shooter.angle=this.m_d,m.default.I.ShowTop(),this.m_bubblesArray=[],1==m.default.I.m_curLv?0==m.default.I.ballindex?y.default.event(v.EventKeys.ball_1_shoot,""):1==m.default.I.ballindex?y.default.event(v.EventKeys.ball_2_shoot,""):4==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_5_shoot,""):2==m.default.I.m_curLv?0==m.default.I.ballindex?y.default.event(v.EventKeys.ball_1_shoot2,""):1==m.default.I.ballindex?y.default.event(v.EventKeys.ball_2_shoot2,""):4==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_5_shoot2,""):3==m.default.I.m_curLv?0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot3,""):4==m.default.I.m_curLv?0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot4,""):5==m.default.I.m_curLv?0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot5,""):6==m.default.I.m_curLv?0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot6,""):7==m.default.I.m_curLv?0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot7,""):8==m.default.I.m_curLv&&0==m.default.I.ballindex&&y.default.event(v.EventKeys.ball_1_shoot8,""),p.EventMgr.emit(h.EventEnum.TOUCHEND_SHOOT,this.m_d)}},w.prototype.setline=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),11!=m.default.I.shootBubble.color){var i,r=n||null;if(!n)for(var a=1;a<e.children.length;a++){var s=e.children[a],c=_.default.getTargetPos(s,this.shooter.parent),u=s.position;if(c.x<0+m.default.I.m_r||c.x>750-m.default.I.m_r){var l=0,d=90-Math.abs(this.m_d);d=Math.tan(Math.PI/180*d)*(375-m.default.I.m_r)*2,c.x<=0+m.default.I.m_r?l=0+m.default.I.m_r:c.x>=750-m.default.I.m_r&&(l=750-m.default.I.m_r),r||(r=cc.v2(l,d+this.lines[t-1].y),this.m_points.push(r.sub(m.default.I.node.position))),s.position=u;for(var p=a;p<e.children.length;p++)e.children[p].active=!1;break}if(s.active=!0,c.y>1226+(cc.winSize.height-1334)/2-this.offecttop){for(p=a;p<e.children.length;p++)e.children[p].active=!1;if(0==m.default.I.node.y){u=_.default.getTargetPos(s,m.default.I.node),(u=b.default.convertPosToRowCol(u.x,u.y,m.default.I.m_r)).x<=0&&(u.x=0);var h=b.default.convertRowColToPos(u.x,u.y,m.default.I.m_r);if(m.default.I.getIsPointHaveBall(u.x,u.y))return void(this.m_Test.active=!1);this.m_points.push(cc.v2(h.x,h.y)),this.ishaveend=!0,10==m.default.I.shootBubble.color?m.default.I.checkBoomPreview(u):12==m.default.I.shootBubble.color?m.default.I.checkLaserPreview(u):13==m.default.I.shootBubble.color&&m.default.I.checkRainbowBallPreview(u),S.default.IsLine&&(this.m_Test.position=cc.v2(h.x+m.default.I.node.x,h.y+m.default.I.node.y))}return void(this.m_Test.active=!1)}if(!(c.y<this.m_bottombally-m.default.I.m_r)&&s.active)for(var f=0;f<this.m_bubblesArray.length;f++)if((v=this.m_bubblesArray[f])&&v.node&&g.default.Distance(cc.v3(c.x,c.y,0),cc.v3(_.default.getTargetPos(v.node,this.shooter.parent).x,_.default.getTargetPos(v.node,this.shooter.parent).y,0))<=1.3*m.default.I.m_r){for(p=a;p<e.children.length;p++)e.children[p].active=!1;if(0!=a&&!o){var y=v.node.position,v=y.sub(_.default.getTargetPos(e.children[a-1],m.default.I.node)).normalize();if(y.x-=v.x*m.default.I.m_r*2,y.y-=v.y*m.default.I.m_r*2,(y=b.default.convertPosToRowCol(y.x,y.y,m.default.I.m_r)).x%2==1&&10==y.y)return void(this.m_Test.active=!1);if(m.default.I.getIsPointHaveBall(y.x,y.y))return void(this.m_Test.active=!1);h=b.default.convertRowColToPos(y.x,y.y,m.default.I.m_r),this.m_points.push(cc.v2(h.x,h.y)),this.ishaveend=!0,10==m.default.I.shootBubble.color?m.default.I.checkBoomPreview(y):12==m.default.I.shootBubble.color?m.default.I.checkLaserPreview(y):13==m.default.I.shootBubble.color&&m.default.I.checkRainbowBallPreview(y),S.default.IsLine&&(this.m_Test.position=cc.v2(h.x+m.default.I.node.x,h.y+m.default.I.node.y))}return}}0!=t||n?(t<this.lines.length?i=this.lines[t]:((i=cc.instantiate(this.line2)).parent=this.line2.parent,i.active=!1,this.lines.push(i)),r?(i.active=!0,0==t?(i.position=r,i.angle=-this.shooter.angle):(i.position=r,i.angle=-this.lines[t-1].angle)):i.active=!1,this.setline(i,t+1)):this.m_Test.active=!1}},w.prototype.setlines=function(e){void 0===e&&(e=!1),this.m_points=[],this.ishaveend=!1;for(var t=0;t<this.lines.length;t++)(o=this.lines[t]).active=!1;var n=null;for(11!=m.default.I.shootBubble.color&&10!=m.default.I.shootBubble.color&&12!=m.default.I.shootBubble.color&&13!=m.default.I.shootBubble.color||m.default.I.clearAllpreview(),t=0;t<this.shooter.children.length;t++){var o=this.shooter.children[t],i=_.default.getTargetPos(o,this.shooter.parent),r=o.position;if(11!=m.default.I.shootBubble.color&&(i.x<0+m.default.I.m_r||i.x>750-m.default.I.m_r)){var a=0,s=90-Math.abs(this.m_d);s=Math.tan(Math.PI/180*s)*(375-m.default.I.m_r),i.x<=0+m.default.I.m_r?a=0+m.default.I.m_r:i.x>=750-m.default.I.m_r&&(a=750-m.default.I.m_r),n||(n=cc.v2(a,s+m.default.I.shooter.y),this.m_points.push(n.sub(m.default.I.node.position))),o.position=r;for(var c=t;c<this.shooter.children.length;c++)this.shooter.children[c].active=!1;break}if(o.active=!0,11==m.default.I.shootBubble.color&&m.default.I.checkLightPreview(i),11!=m.default.I.shootBubble.color){if(i.y>1226+(cc.winSize.height-1334)/2-this.offecttop){for(c=t;c<this.shooter.children.length;c++)this.shooter.children[c].active=!1;if(0==m.default.I.node.y){r=_.default.getTargetPos(o,m.default.I.node),(d=b.default.convertPosToRowCol(r.x,r.y,m.default.I.m_r)).x<=0&&(d.x=0);var u=b.default.convertRowColToPos(d.x,d.y,m.default.I.m_r);if(m.default.I.getIsPointHaveBall(d.x,d.y))return void(this.m_Test.active=!1);this.m_points.push(cc.v2(u.x,u.y)),this.ishaveend=!0,10==m.default.I.shootBubble.color?m.default.I.checkBoomPreview(d):12==m.default.I.shootBubble.color?m.default.I.checkLaserPreview(d):13==m.default.I.shootBubble.color&&m.default.I.checkRainbowBallPreview(d),S.default.IsLine&&(this.m_Test.position=cc.v2(u.x+m.default.I.node.x,u.y+m.default.I.node.y))}return void(this.m_Test.active=!1)}if(!(i.y<this.m_bottombally-m.default.I.m_r)&&o.active)for(var l=0;l<this.m_bubblesArray.length;l++)if((h=this.m_bubblesArray[l])&&h.node&&g.default.Distance(cc.v3(i.x,i.y,0),cc.v3(_.default.getTargetPos(h.node,this.shooter.parent).x,_.default.getTargetPos(h.node,this.shooter.parent).y,0))<=1.3*m.default.I.m_r){for(c=t;c<this.shooter.children.length;c++)this.shooter.children[c].active=!1;if(this.line2.active=!1,0!=t&&!e){var d,p=h.node.position,h=p.sub(_.default.getTargetPos(this.shooter.children[t-1],m.default.I.node)).normalize();if(p.x-=h.x*m.default.I.m_r*2,p.y-=h.y*m.default.I.m_r*2,(d=b.default.convertPosToRowCol(p.x,p.y,m.default.I.m_r)).x%2==1&&10==d.y)return void(this.m_Test.active=!1);if(m.default.I.getIsPointHaveBall(d.x,d.y))return void(this.m_Test.active=!1);u=b.default.convertRowColToPos(d.x,d.y,m.default.I.m_r),this.m_points.push(cc.v2(u.x,u.y)),this.ishaveend=!0,10==m.default.I.shootBubble.color?m.default.I.checkBoomPreview(d):12==m.default.I.shootBubble.color?m.default.I.checkLaserPreview(d):13==m.default.I.shootBubble.color&&m.default.I.checkRainbowBallPreview(d),S.default.IsLine&&(this.m_Test.position=cc.v2(u.x+m.default.I.node.x,u.y+m.default.I.node.y))}return}}}this.setline(this.shooter,0,n,e),S.default.IsLine?this.setLineColor2():this.setLineColor()},w.prototype.setPointAnim=function(){return c(this,void 0,void 0,function(){var e,t,n,o;return u(this,function(i){switch(i.label){case 0:for(n=0;n<this.shooter.children.length;n++)o=this.shooter.children[n],(n+1)%2==1&&this.pointani1(o);for(e=0;e<this.lines.length;e++)for(t=this.lines[e],n=0;n<t.children.length;n++)o=t.children[n],(n+1)%2==1&&this.pointani1(o);return[4,f.default.wait(1e3)];case 1:for(i.sent(),n=0;n<this.shooter.children.length;n++)o=this.shooter.children[n],(n+1)%2==0&&this.pointani2(o);for(e=0;e<this.lines.length;e++)for(t=this.lines[e],n=0;n<t.children.length;n++)o=t.children[n],(n+1)%2==0&&this.pointani2(o);return[2]}})})},w.prototype.pointani1=function(e){var t=this;cc.tween(e).to(.5,{scale:1.4}).to(.5,{scale:1}).call(function(){t.pointani1(e)}).start()},w.prototype.pointani2=function(e){var t=this;cc.tween(e).to(.5,{scale:1}).to(.5,{scale:1.4}).call(function(){t.pointani2(e)}).start()},w.prototype.convertToDegree=function(e){e=(t=e.getLocation()).x-this.shooter.x;var t=t.y-(cc.winSize.height-1334)/2-this.shooter.y;return e=Math.atan2(t,e),e=cc.misc.radiansToDegrees(e),70<(e-=90)||e<-70?void 0:e},s([i(cc.Node)],w.prototype,"shooter",void 0),s([i(cc.Node)],w.prototype,"line2",void 0),o=d=s([o],w),r.default=o,cc._RF.pop()},{}],UILevel:[function(e,t,n){"use strict";cc._RF.push(t,"a7a0fzbgnNIUYFEs3wdW6QI","UILevel");var o=e,i=t,r=n,a=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,u=__AWAITER__,l=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var d,p,h,f=o("AudioEnum"),m=o("AudioMgr"),g=o("BubbleMgr"),_=o("ABTools"),y=o("Action"),v=o("Display"),b=o("Const"),S=o("StarConfig"),w=o("DataMgr"),A=o("UserModel"),M=o("EventEnum"),T=o("EventMgr"),P=o("LoaderMgr"),E=o("CommonMgr"),D=o("OnlineMgr"),I=o("PoolMgr"),C=o("SDKAnalytics"),B=o("SDKEnums"),k=o("SDKTools"),O=o("ADSide"),R=o("BasePopwin"),L=o("ExtScrollView"),N=o("ImageLabelNew"),x=o("NumberAddScore"),F=o("OpenContext"),G=o("RankEnum"),U=o("ViewMgr"),j=o("ChestListPopwin"),V=o("LvItem"),K=o("RankPopwin"),H=o("SettingPopwin"),W=o("ShopPopwin"),q=o("SignPopwin"),X=cc._decorator;function z(){var e=null!==p&&p.apply(this,arguments)||this;return e.isShowBg=!1,e.m_scrollview=null,e.m_items=[],e.m_LabCurlv=null,e.txtRankStar=null,e.m_CoinLab=null,e.adSide=null,e.nodeTop=null,e.nodeSign=null,e.nodeTreasure=null,e.imgColor=null,e.spriteColors=[],e.btnAdGrid=null,e.isshowtop=!0,e}i=X.ccclass,o=X.property,(X=d=d||{})[X.Default=0]="Default",X[X.OutSided=1]="OutSided",X[X.OutSiding=2]="OutSiding",X[X.InSided=3]="InSided",X[X.InSiding=4]="InSiding",a(z,p=R.default),(h=z).prototype.onLoad=function(){this.m_UIAni=this.node.getChildByName("ui").getComponent(cc.Animation),this.m_scrollview.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.m_scrollview.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchsMove,this),this.m_scrollview.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.m_scrollview.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),v.default.adjustIphoneX(this.node.getChildByName("ui").getChildByName("top")),v.default.adjustIphoneX(this.node.getChildByName("ui").getChildByName("left"),!1,122),v.default.adjustIphoneX(this.node.getChildByName("ui").getChildByName("right"),!1,122),this.initAdSide(),this.initAdItem(),g.default.I.setbubblebottomUI(),this.isConsole=1===D.OnlineMgr.getInt(B.OnlineKeys.UILevelConsole,0)},z.prototype.onOpen=function(e){p.prototype.onOpen.call(this,e),this.status=d.InSided,g.default.I.isautomove=!0,this.initUI(),this.initTreasureUI()},z.prototype.InitDiamond=function(){this.m_CoinLab.setValue(10*A.default.I.Diamond,"")},z.prototype.addEvent=function(){p.prototype.addEvent.call(this),T.EventMgr.on(M.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},z.prototype.removeEvent=function(){p.prototype.removeEvent.call(this),T.EventMgr.off(M.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},z.prototype.initAdSide=function(){this.adSide.getComponent(O.default).init(B.SDKBannerLocation.LOCATION_LEVEL_BOTTOM,1)},z.prototype.initAdItem=function(){this.adSide.getComponent(O.default).show()},z.prototype.handleUpdateDimamond=function(e){var t=this;e.detail?this.actionPlayDiamondAnim().then(function(){return t.InitDiamond()}):this.InitDiamond()},z.prototype.CoinUILayer2Top=function(){this.nodeTop.getChildByName("bg_game_gem").group="curtain"},z.prototype.CoinUILayer2UI=function(){this.nodeTop.getChildByName("bg_game_gem").group="Game",g.default.I.issmalladd=!1},z.prototype.actionPlayDiamondAnim=function(){var e=this;return m.AudioMgr.playSound(f.AudioEnum.coins_get),new Promise(function(t){e.CoinUILayer2Top(),P.LoaderMgr.loadPrefabWithUrl("prefab/common/diamond_fly").then(function(n){var o=I.PoolMgr.getPrefab(n);o.active=!0,o.y=-580,o.group="curtain",o.parent=e.nodeTop,y.default.playAnim(o,"anim_diamond_fly02").then(function(){I.PoolMgr.putNode(o),e.CoinUILayer2UI(),t(0)}).catch(function(){return e.CoinUILayer2UI()})}).catch(function(){return e.CoinUILayer2UI()})})},z.prototype.initTreasureUI=function(){var e,t;_.default.I.wxDaliyTask?(this.nodeSign.y=-70,this.nodeTreasure.y=106,this.nodeTreasure.active=!0,w.DataMgr.Task.isChestLight?w.DataMgr.Task.checkChestOver()?(y.default.playAnim(this.nodeTreasure,"anim_btn_got"),y.default.playAnim(this.nodeTreasure.children[0],"anim_lvchest_3")):(e=w.DataMgr.Task.getShowChestIndex(),y.default.playAnim(this.nodeTreasure.children[0],"anim_lvchest_"+(e+1)),t=w.DataMgr.Task.CollectNum,(e=this.nodeTreasure.children[2].children[0]).children[1].getComponent(N.default).setText(""+t),t=w.DataMgr.User.TaskDaily.collectColor,t=this.spriteColors[t-1],this.imgColor.spriteFrame=t,y.default.playAnim(this.nodeTreasure,"anim_btn_on")):(e=this.nodeTreasure.children[2].children[1],t=_.default.I.wxOpenChestLv,e.children[0].getComponent(N.default).setText(""+t),y.default.playAnim(this.nodeTreasure,"anim_btn_off"))):(this.nodeSign.y=106,this.nodeTreasure.active=!1)},z.prototype.onTouchStart=function(){this.isTouchUp=!1,this.unschedule(this.onMoveIn)},z.prototype.onTouchsMove=function(){},z.prototype.onTouchCancel=function(){this.isConsole,this.isTouchUp||(this.unschedule(this.onMoveIn),this.scheduleOnce(this.onMoveIn,.5))},z.prototype.onTouchEnd=function(){this.scheduleOnce(this.onMoveIn,1)},z.prototype.onScroll=function(e,t){this.isConsole,this.isTouchUp=!1,t===cc.ScrollView.EventType.AUTOSCROLL_ENDED_WITH_THRESHOLD?(this.isConsole,this.unschedule(this.onMoveIn),this.onMoveIn()):t===cc.ScrollView.EventType.SCROLL_BEGAN?(this.isConsole,this.isConsole,this.unschedule(this.onMoveIn),this.onMoveOut()):t===cc.ScrollView.EventType.TOUCH_UP||t===cc.ScrollView.EventType.SCROLL_TO_LEFT||t===cc.ScrollView.EventType.SCROLL_TO_RIGHT?(this.isConsole,this.isTouchUp=!0,this.unschedule(this.onMoveIn),this.scheduleOnce(this.onMoveIn,.65)):t!==cc.ScrollView.EventType.SCROLLING&&this.isConsole},z.prototype.onMoveIn=function(){var e=this;this.isConsole,this.status!==d.InSided&&this.status!==d.InSiding&&(y.default.playAddAnim(this.m_UIAni.node,"anim_checkpoint_Uiback").then(function(){return e.status=d.InSided}),this.status=d.InSiding)},z.prototype.onMoveOut=function(){var e=this;this.isConsole,this.status!==d.OutSided&&this.status!==d.OutSiding&&(y.default.playAddAnim(this.m_UIAni.node,"anim_checkpoint_Uimove").then(function(){return e.status=d.OutSided}),this.status=d.OutSiding)},z.prototype.initUI=function(){return u(this,void 0,void 0,function(){var e,t,n,o;return l(this,function(){for(this.m_CoinLab.setValue(10*A.default.I.Diamond,""),t=w.DataMgr.User.LevelStarNum,this.txtRankStar.value=t,e=Math.ceil(b.default.MaxLv/6),t=Math.round(A.default.I.CurLevel/6),n=[],this.setcurlv(),o=0;o<e;o++)n.push(0);return this.m_scrollview.content.childrenCount<=0?this.m_scrollview.loadData(n,e-t-1):this.m_scrollview.content.children.forEach(function(e){e.getComponent(V.default).Refresh()}),[2]})})},Object.defineProperty(z.prototype,"BannerOpen",{get:function(){return D.OnlineMgr.getBanner(h.prefabPath)},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"BannerUid",{get:function(){return this.BannerOpen?D.OnlineMgr.getAdByType(D.AdType.BannerCommon):null},enumerable:!0,configurable:!0}),z.prototype.onAddCoin=function(){m.AudioMgr.button(),console.log("callback===============>LEVELBEGIN"),javaCall.LEVELBEGIN(1),javaCall.ShowReward(this,function(e){console.log("callback===============>UILevel.js\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\u901a\u5173\uff1f\uff1f\uff1f\uff1f\uff1f"),k.default.dispatch(B.ShareKeys.LevelAddCoin,{success:e.handleAddCoin,context:e})})},z.prototype.onSetting=function(){m.AudioMgr.button(),F.default.I.post(G.RankEvent.Potential),U.ViewMgr.openPopwin(H.default)},z.prototype.onSign=function(){m.AudioMgr.button(),U.ViewMgr.openPopwin(q.default)},z.prototype.onChest=function(){m.AudioMgr.button(),w.DataMgr.Task.isChestLight&&U.ViewMgr.openPopwin(j.default,{anim:!1})},z.prototype.onRank=function(){m.AudioMgr.button(),U.ViewMgr.openPopwin(K.default)},z.prototype.handleAddCoin=function(){var e=S.StarConfig.LevelVideoAddCoin;w.DataMgr.User.reqDiamond(e,100),g.default.I.InitDiamond(),C.default.addLogRes(s({},b.default.LogRes.Diamond,{type:1,cnum:e,onum:w.DataMgr.User.Diamond,reason:"\u9886\u53d6\u5956\u52b1",levelid:0}))},z.prototype.setcurlv=function(){this.m_LabCurlv.string=Math.min(A.default.I.CurLevel+1,b.default.MaxLv).toString()},z.prototype.ongocurlv=function(){m.AudioMgr.button();var e=Math.min(A.default.I.CurLevel+1,b.default.MaxLv);g.default.I.enterGame(e),g.default.I.hideUILevel()},z.prototype.onOpenShop=function(){m.AudioMgr.button(),U.ViewMgr.openPopwin(W.default),E.default.I.sdkEventWithStr("gold_shop_open_click")},z.prefabPath="prefab/popwin/popwin_checkpoint",c([o(L.default)],z.prototype,"m_scrollview",void 0),c([o(cc.Label)],z.prototype,"m_LabCurlv",void 0),c([o(x.default)],z.prototype,"txtRankStar",void 0),c([o(N.default)],z.prototype,"m_CoinLab",void 0),c([o(cc.Node)],z.prototype,"adSide",void 0),c([o(cc.Node)],z.prototype,"nodeTop",void 0),c([o(cc.Node)],z.prototype,"nodeSign",void 0),c([o(cc.Node)],z.prototype,"nodeTreasure",void 0),c([o(cc.Sprite)],z.prototype,"imgColor",void 0),c([o(cc.SpriteFrame)],z.prototype,"spriteColors",void 0),c([o(cc.Node)],z.prototype,"btnAdGrid",void 0),i=h=c([i],z),r.default=i,cc._RF.pop()},{}],UIRevive:[function(e,t,n){"use strict";cc._RF.push(t,"7f38cc+4TFEcbqtU+21nkgB","UIRevive");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("ShareVideo"),p=o("SDKEnums"),h=o("SDKTools"),f=o("BasePopwin"),m=o("OnlineMgr"),g=o("EventEnum"),_=o("WXApi"),y=o("AudioMgr"),v=o("Display"),b=o("BubbleMgr"),S=o("Enum"),w=o("FailPopwin");function A(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_labtime=null,e.m_time=10,e.m_isstop=!1,e.m_btnback=null,e.m_sharebtn=null,e}o=(i=cc._decorator).ccclass,i=i.property,a(A,c=f.default),(u=A).OpenUIRevive=function(){l.ViewMgr.openPopwin(u)},Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return m.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),A.prototype.initvideoBtn=function(){this.m_sharebtn.updateWith(p.ShareKeys.Relive)},A.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.initvideoBtn(),this.m_time=10,this.m_isstop=!1,this.m_progress.fillRange=1,_.default.I.showsideAD()},A.prototype.onclickgraybtn=function(){y.AudioMgr.button(),v.default.showTip("\u91cd\u65b0\u6311\u6218\uff0c\u518d\u63a5\u518d\u5389~")},A.prototype.onLoad=function(){console.log("callback===============>OpenUIRevive.JS \u91cd\u73a9\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),javaCall.LEVELEND(1,!0);var e=this;this.m_btnback=this.node.getChildByName("content").getChildByName("btn_get"),this.m_btnback.active=!1,this.m_btnRevive=this.m_sharebtn.getComponent(cc.Button),this.m_progress=this.node.getChildByName("content").getChildByName("time").getChildByName("pro").getComponent(cc.Sprite),this.m_btnRevive.node.on("click",function(){e.m_isstop=!0,h.default.dispatch(p.ShareKeys.Relive,{success:function(){b.default.I.addBubble(5),b.default.I.isgameover=!1,b.default.I.setTimeProps(S.PropsType.Light,1),b.default.I.nextballAni(),l.ViewMgr.closePopwin(u)},fail:function(){e.m_isstop=!1},context:e})},this)},A.prototype.addEvent=function(){c.prototype.addEvent.call(this),h.default.bindEvent(g.EventEnum.TacticUpdate.toString(),this.initvideoBtn,this)},A.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),h.default.removeEvent(g.EventEnum.TacticUpdate.toString(),this.initvideoBtn,this)},A.prototype.setTime=function(){this.m_labtime&&(this.m_labtime.string=Math.round(this.m_time).toString()),this.m_progress&&(this.m_progress.fillRange=this.m_time/10)},A.prototype.start=function(){},A.prototype.back=function(){l.ViewMgr.closePopwin(u,{anim:!1}).then(function(){l.ViewMgr.openPopwin(w.default)})},A.prototype.onClose=function(){c.prototype.onClose.call(this)},A.prototype.update=function(e){this.m_isstop||(this.m_time-=e,this.m_time<=0?(this.m_isstop=!0,this.back()):(this.m_time<=5&&(this.m_btnback.active=!0),this.setTime()))},A.prefabPath="prefab/popwin/popwin_revive",s([i(cc.Label)],A.prototype,"m_labtime",void 0),s([i(d.default)],A.prototype,"m_sharebtn",void 0),o=u=s([o],A),r.default=o,cc._RF.pop()},{}],UITask:[function(e,t,n){"use strict";cc._RF.push(t,"6bc2eVykAdK4qZJmx+ei0Qx","UITask");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("BasePopwin"),d=o("ViewMgr"),p=o("OnlineMgr"),h=o("UserModel"),f=o("BubbleMgr"),m=o("SDKEnums"),g=o("SDKAnalytics"),_=o("WXApi"),y=o("DataMgr");function v(){var e=null!==c&&c.apply(this,arguments)||this;return e.m_LabLv=null,e.m_LabBallNum=null,e.m_Stars=[],e.m_lv=1,e}o=(i=cc._decorator).ccclass,i=i.property,a(v,c=l.default),(u=v).prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.m_lv=e.data.lv,1==h.default.I.CurLevel&&g.default.event(m.EventKeys.pre_panel_show,"");var t=0;(e=h.default.I.getLeveldataByLv(this.m_lv))&&(t=e.star);for(var n=0;n<this.m_Stars.length;n++){var o=this.m_Stars[n];n<t?o.getComponent(cc.Animation).play("state_task_star_on"):o.getComponent(cc.Animation).play("state_task_star_off")}this.m_LabLv.string="the"+this.m_lv+"level",e=y.DataMgr.Level.getData(this.m_lv),this.m_LabBallNum.string=e.bubble+f.default.I.getDiffABCTest()+"",_.default.I.showgrideadBottom()},v.prototype.onClose=function(){c.prototype.onClose.call(this),_.default.I.hidegrideadBottom()},Object.defineProperty(v.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),v.prototype.OnBack=function(){d.ViewMgr.closePopwin(u)},v.prototype.OnGo=function(){1==h.default.I.CurLevel&&g.default.event(m.EventKeys.pre_panel_start_tap,""),f.default.I.enterGame(this.m_lv),d.ViewMgr.closePopwin(u),f.default.I.hideUILevel()},v.prefabPath="prefab/popwin/popwin_task",s([i(cc.Label)],v.prototype,"m_LabLv",void 0),s([i(cc.Label)],v.prototype,"m_LabBallNum",void 0),s([i(cc.Node)],v.prototype,"m_Stars",void 0),o=u=s([o],v),r.default=o,cc._RF.pop()},{}],UITips:[function(e,t,n){"use strict";cc._RF.push(t,"9ecb2aDKS9Fm6BaccOFcxK8","UITips");var o=e,i=n,r=__EXTENDS__(),a=__DECORATE__;Object.defineProperty(i,"__esModule",{value:!0});var s,c,u=o("ViewMgr"),l=o("BaseView"),d=o("LayerMgr");function p(){var e=null!==s&&s.apply(this,arguments)||this;return e.isShowBg=!1,e.isModal=!0,e}o=cc._decorator.ccclass,r(p,s=l.default),(c=p).Show=function(e,t){void 0===t&&(t=1),u.ViewMgr.openPopwin(c,{data:{msg:e,delay:t},anim:!1})},p.prototype.onOpen=function(e){var t,n=this,o=(t=e.data).msg;e=t.delay,(t=this.node.getChildByName("msg").getComponent(cc.Label)).string=o,300<=t.node.width?t.overflow=cc.Label.Overflow.RESIZE_HEIGHT:t.overflow=cc.Label.Overflow.NONE,this.doAnim(e).then(function(){return n.doclose()})},p.prototype.getLayer=function(){return d.Layer.Tips},p.prototype.doAnim=function(e){var t=this;return void 0===e&&(e=1),new Promise(function(n){var o=t.node;o.opacity=0,cc.tween(o).stop(),cc.tween(o).to(.2,{opacity:255},{easing:cc.easing.smooth}).delay(e).to(.2,{opacity:0},{easing:cc.easing.fade}).call(function(){return n()}).start()})},p.prototype.doclose=function(){u.ViewMgr.closePopwin(c)},p.PREFAB_PATH="prefab/common/tip",o=c=a([o],p),i.default=o,cc._RF.pop()},{}],UIchooseItem:[function(e,t,n){"use strict";cc._RF.push(t,"bbc1e7QulZGh7CtECLohlYV","UIchooseItem");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u,l=o("ViewMgr"),d=o("ShareVideo"),p=o("SDKEnums"),h=o("SDKTools"),f=o("EventEnum"),m=o("OnlineMgr"),g=o("SDKAnalytics"),_=o("Display"),y=o("BaseAnimPopwin"),v=o("WXApi"),b=o("BubbleMgr"),S=o("GetRewardPopWin"),w=o("UserBaseModel"),A=o("Enum");function M(){var e=null!==c&&c.apply(this,arguments)||this;return e.typeani=null,e.m_namespr=null,e.m_iconspr=null,e.m_deslab=null,e.m_countlab=null,e.m_Icons=[],e.m_Names=[],e.m_sharebtns=[],e.time=0,e.testAB=0,e.m_ItemIds=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(M,c=y.default),(u=M).prototype.onLoad=function(){},M.prototype.start=function(){},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return m.OnlineMgr.getBanner(u.prefabPath)},enumerable:!0,configurable:!0}),M.prototype.update=function(e){0<=this.time&&(this.time+=e),2<=this.time&&(this.time=-1)},M.prototype.onOpen=function(e){c.prototype.onOpen.call(this,e),this.m_ItemIds=e.data.items,this.callback=e.data.callback,this.InitUI(),this.initReward(),v.default.I.showsideAD(),_.default.getViewOffset()},M.prototype.addEvent=function(){c.prototype.addEvent.call(this),h.default.bindEvent(f.EventEnum.TacticUpdate.toString(),this.initReward,this)},M.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),h.default.removeEvent(f.EventEnum.TacticUpdate.toString(),this.initReward,this)},M.prototype.itemShowevent=function(e){switch(e){case A.PropsType.Boom:g.default.event(p.EventKeys.gift_bomb_show,"");break;case A.PropsType.Light:g.default.event(p.EventKeys.gift_shoot_show,"");break;case A.PropsType.Laser:g.default.event(p.EventKeys.gift_lightening_show,"");break;case A.PropsType.RainbowBall:g.default.event(p.EventKeys.gift_color_show,"");break;case A.PropsType.Change:g.default.event(p.EventKeys.gift_change_show,"")}},M.prototype.itemGetevent=function(e){switch(e){case A.PropsType.Boom:g.default.event(p.EventKeys.gift_bomb_tap,"");break;case A.PropsType.Light:g.default.event(p.EventKeys.gift_shoot_tap,"");break;case A.PropsType.Laser:g.default.event(p.EventKeys.gift_lightening_tap,"");break;case A.PropsType.RainbowBall:g.default.event(p.EventKeys.gift_color_tap,"");break;case A.PropsType.Change:g.default.event(p.EventKeys.gift_change_tap,"")}},M.prototype.InitUI=function(){var e=this.m_ItemIds[0];this.m_deslab.string=this.getDes(e),this.m_namespr.spriteFrame=this.m_Names[e],this.itemShowevent(e);var t=h.default.getParamsInt(p.OnlineKeys.lucky_pop_double_abtest,0),n=0==t||1==t&&w.default.I.ID%2==1?1:2;e<=3?(this.m_countlab.string="+"+n,this.m_iconspr.spriteFrame=this.m_Icons[e],this.typeani.play("anim_random_prop")):this.typeani.play("anim_random_endless")},M.prototype.initReward=function(){this.m_sharebtns.forEach(function(e){e.updateWith(p.ShareKeys.BlockReward)})},M.prototype.getItem=function(){javaCall.ShowReward(this,function(e){console.log("callback===============>UIchooseItem.js");var t=e;i=e.m_ItemIds[0],0==e.testAB?g.default.event(p.EventKeys.TestvbA,p.EventFrom.prop):g.default.event(p.EventKeys.TestvbB,p.EventFrom.prop),h.default.dispatch(p.ShareKeys.BlockReward,{success:function(){t.onSuccess(i)},context:e})})},M.prototype.onSuccess=function(e){this.itemGetevent(e),_.default.s_closerewardtimes=0;var t,n=h.default.getParamsInt(p.OnlineKeys.lucky_pop_double_abtest,0),o=0==n||1==n&&w.default.I.ID%2==1?1:2;e<=3?(t={diamond:0,props:[e,o]},l.ViewMgr.closePopwin(u).then(function(){b.default.I.removePopwinList(S.default,t)}).then(function(){})):(b.default.I.doGetChangeAni(),l.ViewMgr.closePopwin(u).then(function(){b.default.I.removePopwinList()}).then(function(){}))},M.prototype.getDes=function(e){return 0==e?"Eliminate bubbles around the explosion at one time":1==e?"Eliminate all bubbles on the straight line at one time":2==e?"Eliminate all bubbles in a row":3==e?"Combine and eliminate bubbles of any color":4==e?"You can use exchange bubbles unlimited times in this level":""},M.prototype.onBack=function(){_.default.s_isshowcoingift=!0,_.default.s_closerewardtimes++,l.ViewMgr.closePopwin(u).then(function(){b.default.I.removePopwinList()})},M.prototype.onClose=function(){c.prototype.onClose.call(this),v.default.I.hidesideAD()},M.prefabPath="prefab/popwin/popwin_random",s([i(cc.Animation)],M.prototype,"typeani",void 0),s([i(cc.Sprite)],M.prototype,"m_namespr",void 0),s([i(cc.Sprite)],M.prototype,"m_iconspr",void 0),s([i(cc.Label)],M.prototype,"m_deslab",void 0),s([i(cc.Label)],M.prototype,"m_countlab",void 0),s([i(cc.SpriteFrame)],M.prototype,"m_Icons",void 0),s([i(cc.SpriteFrame)],M.prototype,"m_Names",void 0),s([i(d.default)],M.prototype,"m_sharebtns",void 0),o=u=s([o],M),r.default=o,cc._RF.pop()},{}],UserBaseData:[function(e,t,n){"use strict";cc._RF.push(t,"4f11bsrTXBHjbtKpkL18hQH","UserBaseData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){this.id=0,this.gender=0,this.token="",this.openid="",this.uniqueid="",this.nickname="",this.sharecode="",this.avatar_url="",this.wxacode_img=""},i.default=o,cc._RF.pop()},{}],UserBaseModel:[function(e,t,n){"use strict";cc._RF.push(t,"bfdacOQs5BDAJOcETM81b4K","UserBaseModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseModel"),c=o("LogUtils"),u=o("UserBaseData");function l(){return null!==a&&a.apply(this,arguments)||this}r(l,a=s.default),Object.defineProperty(l.prototype,"Data",{get:function(){return this.data||new u.default},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ID",{get:function(){return this.Data.id},enumerable:!0,configurable:!0}),l.prototype.setData=function(e){this.data||(this.data=new u.default);try{var t="string"==typeof e?JSON.stringify(e):e;t.hasOwnProperty("user_id")&&(this.data.id=t.user_id),t.hasOwnProperty("user_gender")&&(this.data.gender=t.user_gender),t.hasOwnProperty("user_uniqueid")&&(this.data.uniqueid=t.user_uniqueid),t.hasOwnProperty("user_nickname")&&(this.data.nickname=t.user_nickname),t.hasOwnProperty("user_openid")&&(this.data.openid=t.user_openid),t.hasOwnProperty("user_avatar_url")&&(this.data.avatar_url=t.user_avatar_url),t.hasOwnProperty("user_wxacode_img")&&(this.data.wxacode_img=t.user_wxacode_img),t.hasOwnProperty("user_token")&&(this.data.token=t.user_token)}catch(e){c.default.warn(JSON.stringify(e))}},Object.defineProperty(l.prototype,"UserOpenId",{get:function(){return this.Data.openid},enumerable:!0,configurable:!0}),l.prototype.clearData=function(){this.data=new u.default},l.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(l,"I",{get:function(){return this._instance||(this._instance=new l)},enumerable:!0,configurable:!0}),l._instance=null,r=l,i.default=r,cc._RF.pop()},{}],UserData:[function(e,t,n){"use strict";cc._RF.push(t,"880c23tFlREdbLaaFMUDQtn","UserData");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Const");o=function(){this.eventkeys=[],this.dataVersion=0,this.battleType=0,this.curskin=0,this.hadskins=[],this.curLogo=-1,this.hadLogos=[],this.usedseed=[],this.usedseed=[],this.redpacketdata={log:[],integral:0},this.homeguide=!1,this.lastTime=0,this.maxScore=0,this.maxLevel=1,this.rewardLevel={},this.historyData=null,this.homestar=0,this.eventkeys=[],this.maxRecordDatas=[],this.mute=!1,this.vibrate=!0,this.overTeach=!1,this.diamond=0,this.money=0,this.moneyIndex=0,this.hasMoney=!1,this.dayGetMoney=0,this.isVideoShop=0,this.grade=0,this.props={0:1,1:1,2:1,3:1},this.dayFreeDiamondCount=0,this.dayShareRuleIndex={maxRecord:0,propBrick:0,revive:0,freeStar:0,wipeReward:0,share:0},this.dayShareTotal=0,this.chestNum=0,this.dayMoneyTip=!1,this.dayData={},this.wheel={ticket:r.default.MaxTicket,turn:0},this.vitality={hp:r.default.MaxHp,start:0,end:0},this.bestScore=0,this.level=0,this.exp=0,this.curScore=0,this.teachball=0,this.chestbaselv=0,this.battleType=0,this.isunlocklvModel=!1,this.isTouch=!1,this.leveldata={},this.pigLevel=0,this.pig_skip_num=0,this.signday=0,this.curLogo=-1,this.hadLogos=[],this.curskin=0,this.hadskins=[0],this.guides=[0],this.plots=[]},i.default=o,cc._RF.pop()},{}],UserExtData:[function(e,t,n){"use strict";cc._RF.push(t,"88140cBUiBH8JNgsvjMRiZG","UserExtData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(){this.id=0,this.level_count=0,this.gold=0,this.guide=0,this.channel=0,this.invite_uid=0,this.login_days=0,this.sign_days=0,this.sign_reward_num=0,this.reg_time=0,this.turn_reward_endtime=0,this.rich_profit_multiple=0,this.invite_counter=0,this.share_num=0,this.resurgence_button=0,this.user_rank=0},i.default=o,cc._RF.pop()},{}],UserExtModel:[function(e,t,n){"use strict";cc._RF.push(t,"954d2p9efxCerjAQXYj6B5i","UserExtModel");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseModel"),c=o("LogUtils"),u=o("UserExtData");function l(){return null!==a&&a.apply(this,arguments)||this}r(l,a=s.default),Object.defineProperty(l.prototype,"Data",{get:function(){return this.data||new u.default},enumerable:!0,configurable:!0}),l.prototype.setData=function(e){this.data||(this.data=new u.default);try{var t="string"==typeof e?JSON.stringify(e):e;t.hasOwnProperty("user_id")&&(this.data.id=t.user_id),t.hasOwnProperty("user_gold")&&(t.user_gold,this.data.gold,this.data.gold=+t.user_gold),t.hasOwnProperty("user_guide")&&(this.data.guide=+t.user_guide),t.hasOwnProperty("user_channel")&&(this.data.channel=+t.user_channel),t.hasOwnProperty("user_invite_uid")&&(this.data.invite_uid=t.user_invite_uid),t.hasOwnProperty("user_sign_days")&&(this.data.sign_days=+t.user_sign_days),t.hasOwnProperty("user_share_num")&&(this.data.share_num=+t.user_share_num),t.hasOwnProperty("user_rank")&&(this.data.user_rank=+t.user_rank)}catch(e){c.default.warn(JSON.stringify(e))}},l.prototype.clearData=function(){this.data=new u.default},l.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(l,"I",{get:function(){return this._instance||(this._instance=new l)},enumerable:!0,configurable:!0}),l._instance=null,r=l,i.default=r,cc._RF.pop()},{}],UserLevelData:[function(e,t,n){"use strict";cc._RF.push(t,"db7e532UVtDdIcJWb6ifIkU","UserLevelData");var o,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(e,t){this.star=-1,this.score=0,this.score=e,this.star=t},i.default=o,cc._RF.pop()},{}],UserModel:[function(e,t,n){"use strict";cc._RF.push(t,"fbed8n070VBo4pk3LF8+KIE","UserModel");var o=e,i=n,r=__EXTENDS__(),a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)},s=__AWAITER__,c=__GENERATOR__;Object.defineProperty(i,"__esModule",{value:!0});var u,l=o("BaseModel"),d=o("DataMgr"),p=o("UserData"),h=o("Enum"),f=o("DateUtils"),m=o("EventEnum"),g=o("EventMgr"),_=o("RecordData"),y=o("Const"),v=o("SDKAnalytics"),b=o("UserLevelData"),S=o("MapConfig"),w=o("ArrayUtils"),A=o("Display"),M=o("SDKEnums");function T(){var e=u.call(this)||this;return e.onlinegiftindex=0,e.onlinegiftstime=[60,90,120,120,120,300,300,300,300,300],e.onlinetime=0,e.init(),e}r(T,u=l.default),T.prototype.init=function(){this.isFixed=!1,this.data=new p.default},T.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(T.prototype,"Data",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Star",{get:function(){return this.data.homestar||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"UserGuide",{get:function(){return this.data.guides||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"EventKeys",{get:function(){return this.data.eventkeys||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"UserPlot",{get:function(){return this.data.plots||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Furnitures",{get:function(){return this.data.furnitures},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Milestone",{get:function(){return this.data.milestones_new},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"IsTouch",{get:function(){return this.data.isTouch||!1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"IsVideoShop",{get:function(){return this.data.isVideoShop||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"IsUnlockLvModel",{get:function(){return this.data.isunlocklvModel||!1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"BattleType",{get:function(){return this.data.battleType||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"MaxLevel",{get:function(){return this.data.maxLevel||1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"MaxScore",{get:function(){return this.data.maxScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"HistoryData",{get:function(){return this.data.historyData||null},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Lv_HistoryData",{get:function(){return this.data.lvmodel_historyData||null},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"BestScore",{get:function(){return this.data.bestScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Lv_BestScore",{get:function(){return this.data.lvModel_bestScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"CurScore",{get:function(){return this.data.curScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Lv_CurScore",{get:function(){return this.data.lvModel_curSore||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Lv_CurTarBallLv",{get:function(){return this.data.lvModel_tarBalllv||y.default.MinTarBallLv},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"CurLevel",{get:function(){return this.data.level||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"HadSkins",{get:function(){return this.data.hadskins||[0]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"HadLogos",{get:function(){return this.data.hadLogos||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Exp",{get:function(){return this.data.exp||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"MaxRecordDatas",{get:function(){return this.data.maxRecordDatas||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Lv_MaxRecordDatas",{get:function(){return this.data.lvmodel_maxRecordDatas||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"RewardLevel",{get:function(){return this.data.rewardLevel||{}},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Diamond",{get:function(){return this.data.diamond||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"ChestNum",{get:function(){return this.data.chestNum||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"Vibrate",{get:function(){return this.data.vibrate},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"IsOverTeach",{get:function(){return this.data.overTeach||!1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"TeachBall",{get:function(){return this.data.teachball||y.default.InitTeachBall},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"ChestBaselv",{get:function(){return null==this.data.chestbaselv||this.data.chestbaselv<=0?(this.reqChestbaseLv(this.CurLevel,!0),this.CurLevel):(this.data.chestbaselv+5<this.CurLevel&&(e=(this.CurLevel-this.data.chestbaselv)%5,this.data.chestbaselv=this.CurLevel-e,this.reqChestbaseLv(this.CurLevel-e,!0)),this.data.chestbaselv);var e},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"DataVersion",{get:function(){return this.data.dataVersion||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"LevelData",{get:function(){return this.data.leveldata||{}},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"UserVitality",{get:function(){return this.data.vitality||{hp:y.default.MaxHp,start:0,end:0}},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"PigLevel",{get:function(){return this.data.pigLevel||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"SignDay",{get:function(){return this.data.signday||0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"StateTasks",{get:function(){var e=this.Milestone.state_tasks||[],t=(t=d.DataMgr.Milestone.Milestones)[t.length-1].scene_id,n=(t=(t=d.DataMgr.Milestone.getMilestoneById(t).taskgroup_ids)[t.length-1],(t=d.DataMgr.Milestone.getTaskListById(t))[t.length-1].id);return this.Milestone.state_tasks=e.map(function(e){return e.id===+n&&e.to===h.ActionFitTask.Out&&(e.to=0),e}),this.Milestone.state_tasks},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"CompleteTasks",{get:function(){return this.Milestone.complete_tasks||[]},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"TaskTreasures",{get:function(){return this.Milestone.treasures||{}},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"IsFinishHomeGuid",{get:function(){return this.data.homeguide||!1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"RedPocketData",{get:function(){return this.data.redpacketdata||{integral:0,log:[]}},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"CurOnlinegiftNeedTime",{get:function(){return this.onlinegiftindex<this.onlinegiftstime.length?this.onlinegiftstime[this.onlinegiftindex]:-1},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"OnlineGiftNowTime",{get:function(){return this.CurOnlinegiftNeedTime-this.onlinetime},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"UsedSeeds",{get:function(){return this.data.usedseed||[]},enumerable:!0,configurable:!0}),T.prototype.getRuningTasks=function(){var e=h.ActionFitTask.Out,t=this.StateTasks.filter(function(t){var n=t.from;return t=t.to,n!==e||t!==e});return 0===t.length&&(A.default.sdkEventWithKey(M.EventKeys.state_task_none),this.fixMilestonList(this.data),t=this.StateTasks.filter(function(t){var n=t.from;return t=t.to,n!==e||t!==e})),t},T.prototype.getFurnitureSkinById=function(e){return this.data.furnitures.skins[e]},T.prototype.getDayDataWithKey=function(e,t){var n=f.default.today,o=this.data.dayData;return o&&o[e]&&o[e][n]?o[e][n]:1===arguments.length?null:t},T.prototype.getMaxRecordDatas=function(e){var t;if(0==(e=void 0===e?0:e)){if((t=this.MaxRecordDatas).length)return t}else if((t=this.Lv_MaxRecordDatas).length)return t;return null},T.prototype.getPropNum=function(e){return this.data.props[e]||0},T.prototype.getChapterTypeById=function(e){return this.RewardLevel[e]||e<5||(e-1)%5!=0?h.ChapterType.Normal:h.ChapterType.Reward},T.prototype.getLeveldataByLv=function(e){return this.LevelData[e]?new b.default(this.LevelData[e][0],this.LevelData[e][1]):null},Object.defineProperty(T.prototype,"LevelStarNum",{get:function(){if(!this.LevelData)return 0;if(0===Object.keys(this.LevelData).length)return 0;var e,t=0;for(e in this.LevelData)Object.prototype.hasOwnProperty.call(this.LevelData,e)&&(t+=this.LevelData[e][1]);return t},enumerable:!0,configurable:!0}),T.prototype.clearData=function(){this.init()},T.prototype.setData=function(e){return this.data=a({},this.data,this.fixData(e)),this.data},T.prototype.reqSwitchMute=function(e){void 0===e&&(e=!1);var t=!this.Data.mute;return d.DataMgr.syncBaseUserData({mute:t},e)},T.prototype.reqSwitchVibrate=function(e){void 0===e&&(e=!1);var t=!this.Data.vibrate;return d.DataMgr.syncBaseUserData({vibrate:t},e)},T.prototype.reqGold=function(e,t){return void 0===t&&(t={}),s(this,void 0,Promise,function(){var n,o,i,r,a;return c(this,function(){return n=!t.hasOwnProperty("isAdd")||t.isAdd,o=!!t.hasOwnProperty("isSync")&&t.isSync,i=!t.hasOwnProperty("isUpdate")||t.isUpdate,r=this.data.money+(+e||0),n?a={money:r}:(a={money:r,spend_gold:e},o=!0),[2,d.DataMgr.syncBaseUserData(a,o).then(function(){return i&&g.EventMgr.emit(m.EventEnum.UpdateCoin)})]})})},T.prototype.reqStar=function(e,t){return void 0===t&&(t={}),s(this,void 0,Promise,function(){var n,o,i;return c(this,function(){return o=this.data.homestar||0,(n=o+e)<0?[2,Promise.reject(0)]:(o=!t.hasOwnProperty("isSync")||t.isSync,i=!t.hasOwnProperty("isUpdate")||t.isUpdate,[2,d.DataMgr.syncBaseUserData({homestar:n},o).then(function(){return i&&g.EventMgr.emit(m.EventEnum.UpdateStar)})])})})},T.prototype.reqDiamond=function(e,t,n){return void 0===t&&(t=110),void 0===n&&(n={}),s(this,void 0,Promise,function(){var t,o,i;return c(this,function(){return o=this.data.diamond,(t=o+e)<0?[2,Promise.reject(0)]:(o=!!n.hasOwnProperty("isSync")&&n.isSync,i=!n.hasOwnProperty("isUpdate")||n.isUpdate,e<0&&g.EventMgr.emit(m.EventEnum.AddEventUseCoin,-e),[2,d.DataMgr.syncBaseUserData({diamond:t},o).then(function(){return i&&g.EventMgr.emit(m.EventEnum.UpdateDiamond,0<e)})])})})},T.prototype.reqChest=function(e,t){return void 0===t&&(t=!1),s(this,void 0,Promise,function(){var n;return c(this,function(){return n=this.ChestNum||0,n=0<e?n+e:e<0?Math.max(0,n+e):e,[2,d.DataMgr.syncBaseUserData({chestNum:n},t).then(function(){g.EventMgr.emit(m.EventEnum.UpdateChest)})]})})},T.prototype.reqOverTeach=function(e){return void 0===e&&(e=!1),d.DataMgr.syncBaseUserData({overTeach:!0},e)},T.prototype.reqaddTeachBall=function(e){void 0===e&&(e=!1);var t=this.TeachBall;return 0==t&&v.default.addLogLevel({id:1,ptype:0}),d.DataMgr.syncBaseUserData({teachball:t+1},e)},T.prototype.reqLevel=function(e,t,n){return void 0===n&&(n=!1),d.DataMgr.syncBaseUserData({maxLevel:e,maxScore:t.score,addScore:t.addScore},n)},T.prototype.reqChestbaseLv=function(e,t){return void 0===t&&(t=!1),d.DataMgr.syncBaseUserData({chestbaselv:e},t)},T.prototype.reqRewardLevel=function(e,t){void 0===t&&(t=!1);var n=this.RewardLevel;return n[e]=1,d.DataMgr.syncBaseUserData({rewardLevel:n},t)},T.prototype.reqProps=function(e,t,n){return void 0===n&&(n=!1),s(this,void 0,Promise,function(){var o;return c(this,function(){return o=this.data.props[e]||0,o=0<t?o+t:t<0?Math.max(0,o+t):t,this.data.props[e]=o,[2,d.DataMgr.syncBaseUserData({props:a({},this.data.props)},n).then(function(){return g.EventMgr.emit(m.EventEnum.UpdateProps,{type:e,from:1,val:t})})]})})},T.prototype.reqAddDayReward=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);var o=this.getDayDataWithKey(e,0);o+=t,this.reqDayDataWithKey(e,o,n)},T.prototype.reqDayDataWithKey=function(e,t,n){void 0===n&&(n=!1);var o=f.default.today,i=this.data;return i.dayData=i.dayData||{},i.dayData[e]=i.dayData[e]||{},i.dayData[e]=((e={})[o]=t,e),d.DataMgr.syncBaseUserData(i,n)},T.prototype.reqMaxRecord=function(e,t){void 0===t&&(t=!1);var n=!0,o=e.score,i=this.MaxRecordDatas;if(i.forEach(function(e){e.score===o&&(n=!1)}),n)return i.length<3?(i.push(new _.default(o,e.balls,e.reviveTimes,e.props)),i.sort(function(e,t){return t.score-e.score})):(i.sort(function(e,t){return t.score-e.score}),i[2].score<o&&(i[2]=new _.default(o,e.balls,e.reviveTimes,e.props)),i.sort(function(e,t){return t.score-e.score})),d.DataMgr.syncBaseUserData({maxRecordDatas:i},t)},T.prototype.reqLvMaxRecord=function(e,t){void 0===t&&(t=!1);var n=!0,o=e.score,i=this.Lv_MaxRecordDatas;if(i.forEach(function(e){e.score===o&&(n=!1)}),n){var r=new _.default(o,e.balls,e.reviveTimes,e.props);return r.tarballlv=e.tarball,i.length<3?(i.push(r),i.sort(function(e,t){return t.score-e.score})):(i.sort(function(e,t){return t.score-e.score}),i[2].score<o&&(i[2]=r),i.sort(function(e,t){return t.score-e.score})),d.DataMgr.syncBaseUserData({lvmodel_maxRecordDatas:i},t)}},T.prototype.reqSign=function(e,t){return void 0===t&&(t=!1),7<=e&&(e=0),d.DataMgr.syncBaseUserData({signday:e},t),this.reqDayDataWithKey(h.DayKeys.SevenDaySign,1,t)},T.prototype.reqHistory=function(e,t,n){return void 0===n&&(n=!1),0==t?d.DataMgr.syncBaseUserData({historyData:e},n):d.DataMgr.syncBaseUserData({lvmodel_historyData:e},n)},T.prototype.reqPlayerData=function(e,t,n,o,i,r){return void 0===r&&(r=!1),0==e?d.DataMgr.syncBaseUserData({bestScore:o,level:t,exp:n,curScore:i},r):d.DataMgr.syncBaseUserData({lvModel_bestScore:o,level:t,exp:n,lvModel_curSore:i},r)},T.prototype.reqLvCurTarBall=function(e,t){return void 0===t&&(t=!1),d.DataMgr.syncBaseUserData({lvModel_tarBalllv:e},t)},T.prototype.reqDataVersion=function(){return d.DataMgr.syncBaseUserData({dataVersion:1},!0)},T.prototype.reqBattleType=function(e){return d.DataMgr.syncBaseUserData({battleType:e},!0)},T.prototype.reqUnlockLvModel=function(){return d.DataMgr.syncBaseUserData({isunlocklvModel:!0},!0)},T.prototype.reqTouch=function(){return d.DataMgr.syncBaseUserData({isTouch:!0},!0)},T.prototype.reqVideoShop=function(e){return d.DataMgr.syncBaseUserData({isVideoShop:e},!1)},T.prototype.reqBubbleLevel=function(e,t,n,o){var i=this.LevelData,r=(a=i[e])&&a[0]||0,a=(n=Math.max(r,n),a&&a[1]||0);return t=Math.max(a,t),t=new b.default(n,t),i[e]=[t.score,t.star],o&&this.data.level<=e?d.DataMgr.syncBaseUserData({leveldata:i,level:e},!1):d.DataMgr.syncBaseUserData({leveldata:i},!1)},T.prototype.reqHidePlayer=function(){var e=this.Diamond;return d.DataMgr.syncBaseUserData({diamond:e},!0)},T.prototype.reqAddPower=function(){var e=this.getDayDataWithKey(h.DayKeys.AddPowerTimes,0);e++,this.reqDayDataWithKey(h.DayKeys.AddPowerTimes,e,!0)},T.prototype.reqAysncVilality=function(e,t){return void 0===t&&(t=!1),this.UserVitality,new Promise(function(n){d.DataMgr.syncBaseUserData({vitality:e},t).then(function(e){n(e)})})},T.prototype.fixBallData=function(){var e=this.data;if(e&&this.DataVersion<1){if(e.historyData&&e.historyData.balls&&e.historyData.balls.forEach(function(e){e.y+=84.5}),e.maxRecordDatas&&0<e.maxRecordDatas.length)for(var t=0;t<e.maxRecordDatas.length;t++)e.maxRecordDatas[t].balls.forEach(function(e){e.y+=84.5});this.reqDataVersion()}},T.prototype.reqaddEventKey=function(e,t){void 0===t&&(t=!1);var n=this.EventKeys;return n.indexOf(e)<0&&n.push(e),d.DataMgr.syncBaseUserData({eventkeys:this.data.eventkeys},t)},T.prototype.isHadEventKey=function(e){return 0<this.EventKeys.indexOf(e)},T.prototype.fixData=function(e){return e&&(this.isFixed||(this.isFixed=!0,isNaN(+e.homestar)&&(e.homestar=0),isNaN(+e.money)&&(e.money=0),this.fixMilestoneData(e),this.fixFurnitureData(e),this.fixDailyTask(e),this.fixPlotData(e),this.fixlvdata(e)),e)},T.prototype.fixFurnitureData=function(e){e.furnitures||(e.furnitures=Object.create(null)),e.furnitures.skins||(e.furnitures.skins=Object.create(null));var t,n=e.milestones_new.complete_tasks||[],o=d.DataMgr.Milestone.Tasks,i=e.furnitures.skins;for(t in o)!function(e){var t,r;o.hasOwnProperty(e)&&(e=(t=o[e]).id,t=t.add_furnitures,r=0<=n.indexOf(e),t.forEach(function(e){i[e]?r&&0===i[e].opens.length&&(i[e].opens=[i[e].select]):i[e]=r?{select:1,opens:[1]}:{select:1,opens:[]}}))}(t)},T.prototype.fixMilestoneData=function(e){var t,n,o,i=h.ActionFitTask.Out;if(e.milestones&&!e.milestones_new){var r,s,c,u=(y=e.milestones).through_scenes,l=y.complete_tasks,p=y.curr_scene,f=d.DataMgr.Milestone.getMilestoneById(p),m=f.id,g=f.start_taskgroup,_=f.next_milestone,y=d.DataMgr.Milestone.getTaskGroupById(g).task_ids;1===p?(o={curr_scene:m,next_scene:_,curr_group:g,state_tasks:(s=y.slice(0,3).map(function(e,t){return{id:e,from:h.ActionFitTask.Out,to:t}})).slice(),treasures:{},complete_tasks:[],through_scenes:[]},(r=e.plots)&&r.length&&(r=[],e.plots=r)):(f=d.DataMgr.Milestone.getMilestoneById(p).start_taskgroup,s=y.slice(0,3).map(function(e,t){return{id:e,from:h.ActionFitTask.Out,to:t}}),c=[],(u=Array.from({length:p-1}).map(function(e,t){return t+1})).forEach(function(e){d.DataMgr.Milestone.getGroupTaskListById(e).forEach(function(e){c.push(e.id)})}),o={curr_scene:p,next_scene:_,curr_group:f,state_tasks:s.slice(),treasures:{},complete_tasks:c.slice(),through_scenes:u.slice()},(r=e.plots)&&r.length&&(r=r.map(function(e){return 120<e.id&&(e.state=h.PlotState.None),e}),e.plots=r));for(var v=d.DataMgr.Milestone.getTaskOldBySceneId(p),b={},S=0,w=0;w<v.length;w++){var A=v[w].id;b[A]=a({},v[w])}l.filter(function(e){return!(e=b[e])||(S+=e.cost_star,!1)}),e.homestar+=S,delete e.milestones}else o=e.milestones_new&&Object.keys(e.milestones_new).length?(n=(n=(l=e.milestones_new).treasures)||{},s=l.state_tasks,t=(t=l.complete_tasks)||[],(s=s||[]).filter(function(e){return e.to===i}).forEach(function(e){-1===t.indexOf(e.id)&&t.push(e.id)}),this.fixMilestonList(e),a({},e.milestones_new,{treasures:n,complete_tasks:t})):(m=(n=d.DataMgr.Milestone.Milestones[0]).id,g=n.start_taskgroup,{curr_scene:m,next_scene:_=n.next_milestone,curr_group:g,state_tasks:(s=(y=d.DataMgr.Milestone.getTaskGroupById(g).task_ids).slice(0,3).map(function(e,t){return{id:e,from:h.ActionFitTask.Out,to:t}})).slice(),treasures:{},complete_tasks:[],through_scenes:[]});e.milestones_new=o},T.prototype.fixMilestonList=function(e){var t,n,o,i,r,s,c;e.milestones_new&&Object.keys(e.milestones_new).length&&(t=h.ActionFitTask.Out,n=(i=e.milestones_new).state_tasks,o=i.complete_tasks,s=i.curr_group,0===n.filter(function(e){var n=e.from;return e=e.to,n!==t||e!==t}).length&&((r=d.DataMgr.Milestone.getTaskGroupById(s).task_ids).map(function(e){return 0<=o.indexOf(e)}).length!==r.length||(c=d.DataMgr.Milestone.getNextTaskGroupById(s))&&(i=c.curr_group,r=c.curr_scene,s=c.next_scene,c=c.task_list,e.milestones_new=a({},e.milestones_new,{curr_scene:r,next_scene:s,curr_group:i,state_tasks:n.concat(c.slice(0,3).map(function(e,n){return{id:e.id,from:t,to:n}}))}))))},Object.defineProperty(T.prototype,"TaskDaily",{get:function(){return this.data.task_daily||this.fixDailyTask(this.data),this.data.task_daily},enumerable:!0,configurable:!0}),T.prototype.reqChestAddNum=function(e,t){void 0===t&&(t=!1);var n=this.TaskDaily;return n.collectNum+=e,d.DataMgr.syncBaseUserData({task_daily:a({},n)},t)},T.prototype.reqChestOpenReward=function(e,t){void 0===t&&(t=!1);var n=this.TaskDaily;return 0<=n.completes.indexOf(e)?Promise.resolve(1):(n.completes.push(e),d.DataMgr.syncBaseUserData({task_daily:a({},n)},t))},T.prototype.fixDailyTask=function(e){var t,n,o;return e.task_daily?(t=(o=e.task_daily).startTime,n=o.endTime,((o=f.default.nowTime)<t||n<=o)&&this.setDailyTask(e)):this.setDailyTask(e),e},T.prototype.setDailyTask=function(e){var t,n,o=(new Date).getHours(),i=new Date((new Date).toLocaleDateString()).getTime();return 5<=o?(t=i+18e6,n=i+1044e5):(n=i+18e6,t=i+-684e5),i=h.BubbleColor.Red,e.task_daily={startTime:t,endTime:n,collectNum:0,collectColor:i,completes:[]},e},T.prototype.fixPlotData=function(e){var t=d.DataMgr.Plot.Plots.slice(0,2).map(function(e){return e.id}),n=e.plots&&0!==e.plots.length?e.plots.map(function(e){var n=e.id;return e=e.state,0<=t.indexOf(n)?e===h.PlotState.None&&(e=h.PlotState.Plan):e===h.PlotState.Plan&&(e=h.PlotState.None),{id:n,state:e}}):[{id:t[0],state:h.PlotState.Plan}];e.plots=n},T.prototype.fixlvdata=function(e){for(var t in e.leveldata){var n;!Object.prototype.hasOwnProperty.call(e.leveldata,t)||(n=e.leveldata[t])&&n.score&&(e.leveldata[t]=[n.score,n.star])}},T.prototype.getCurrPlot=function(){return this.UserPlot.filter(function(e){return(e=e.state)===h.PlotState.None||e===h.PlotState.Plan})[0]},T.prototype.isOverPlot=function(e){return!!this.UserPlot.filter(function(t){var n=t.id;return t=t.state,n===e&&t===h.PlotState.Over}).length},T.prototype.isPlanPlot=function(e){return!!this.UserPlot.filter(function(t){var n=t.id;return t=t.state,n===e&&t===h.PlotState.Plan}).length},T.prototype.isHadGuide=function(e){return!!this.UserGuide.filter(function(t){return t===e}).length},T.prototype.reqAysncGuide=function(e,t){return void 0===t&&(t=!1),this.isHadGuide(e)?Promise.resolve():(e={guides:this.UserGuide.concat([e])},d.DataMgr.syncBaseUserData(e,t))},T.prototype.reqTaskTreasure=function(e,t){void 0===t&&(t=!1);var n=this.Milestone,o=n.treasures||{};return o[e]=!0,d.DataMgr.syncBaseUserData({milestones_new:a({},n,{treasures:o})},t)},T.prototype.reqTaskComplete=function(e,t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){var n,o;return c(this,function(){return n=this.Milestone,0<=(o=n.complete_tasks||[]).indexOf(e)?[2,Promise.resolve()]:(o.push(e),[2,d.DataMgr.syncBaseUserData({milestones_new:a({},n,{complete_tasks:o})},t)])})})},T.prototype.reqUpdateTaskState=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),s(this,void 0,void 0,function(){var o,i,r;return c(this,function(){return o=this.Milestone,i=o.state_tasks,r=-1,i=i.map(function(o,i){return o.id===e&&(r=i,t.hasOwnProperty("from")&&(o.from=t.from),t.hasOwnProperty("to")&&(o.to=t.to)),n&&-1!==r&&o.to!==h.ActionFitTask.Out&&r<i&&--o.to,o}),[2,d.DataMgr.syncBaseUserData({milestones_new:a({},o,{state_tasks:i})},!1)]})})},T.prototype.reqNextAppearTask=function(e){return void 0===e&&(e=!1),s(this,void 0,Promise,function(){var t,n,o,i,r,s;return c(this,function(){return t=this.Milestone,i=t.curr_group,n=t.state_tasks||[],r=d.DataMgr.Milestone.getTaskGroupById(i).task_ids,(i=r.length)<=3||n.length===i?[2,Promise.resolve(null)]:(o=h.ActionFitTask.Out,i=r[n.length],r=n.filter(function(e){var t=e.from;return e=e.to,t!==o&&e!==o}).length,s={id:i,from:o,to:r},n.push(s),[2,new Promise(function(o){d.DataMgr.syncBaseUserData({milestones_new:a({},t,{state_tasks:n})},e).then(function(){return o(s)})})])})})},T.prototype.reqAsyncNextTask=function(e,t){void 0===t&&(t=!1);var n=e.id,o=this.Milestone,i=o.curr_group,r=o.curr_scene,s=o.complete_tasks||[];-1===s.indexOf(n)&&s.push(n);var c=d.DataMgr.Milestone.getMilestoneById(r),u=c.taskgroup_ids,l=(e=c.next_milestone,[]);return u.forEach(function(e){e=d.DataMgr.Milestone.getTaskGroupById(e),l=l.concat(e.task_ids)}),n=d.DataMgr.Milestone.getTaskGroupById(i).task_ids,c=w.default.isContained(s,n),w.default.isContained(s,l)||c&&i===u[u.length-1]?(u=(n=d.DataMgr.Milestone.getMilestoneById(e)).scene_id,e=n.start_taskgroup,n=n.next_milestone,o.curr_scene=u,o.next_scene=n,o.curr_group=e,-1===o.through_scenes.indexOf(r)&&o.through_scenes.push(r),r=d.DataMgr.Milestone.getTaskGroupById(o.curr_group).task_ids,o.state_tasks=r.map(function(e,t){return{id:e,from:h.ActionFitTask.Out,to:t}})):c&&(o.curr_group=i+1,i=d.DataMgr.Milestone.getTaskGroupById(o.curr_group).task_ids,o.state_tasks=o.state_tasks.concat(i.map(function(e,t){return{id:e,from:h.ActionFitTask.Out,to:t}}))),new Promise(function(e){d.DataMgr.syncBaseUserData({milestones_new:a({},o,{complete_tasks:s})},t).then(function(t){return e(t)})})},T.prototype.getRelatedFurniture=function(e){for(var t=S.MapConfig.FurnitureRelated,n=t.length,o=0;o<n;o++)if(0<=t[o].indexOf(e))return t[o];return[]},T.prototype.reqOpenFurnitureSkin=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);for(var i=t.slice(),r=i.length,a=i.slice(),s=0;s<r;s++)a=a.concat(this.getRelatedFurniture(i[s]));return a=1===a.length?a:Array.from(new Set(a)),this.reqSelectFurnitureSkin(e,a,n,o)},T.prototype.reqSelectFurnitureSkin=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=this.Furnitures.skins;return t.slice().forEach(function(t){var o=i[t].opens;-1===o.indexOf(1)&&i[t].opens.push(1),-1===o.indexOf(e)&&i[t].opens.push(e),n&&(i[t].select=e)}),d.DataMgr.syncBaseUserData({furnitures:a({},this.Furnitures,{skins:i})},o)},T.prototype.reqAysncPlot=function(e,t,n,o){return void 0===n&&(n=!1),!(o=void 0!==o&&o)&&this.isOverPlot(e)&&t===h.PlotState.Over?Promise.resolve():(o={plots:o=(o=this.UserPlot).filter(function(t){return t.id===e}).length?o.map(function(n){return n.id===e&&(n.state=t),n}):o.concat([{id:e,state:t}])},d.DataMgr.syncBaseUserData(o,n))},T.prototype.reqFinishHomeGuid=function(){return d.DataMgr.syncBaseUserData({homeguide:!0},!0)},T.prototype.reqOnlineReward=function(){this.onlinetime=0,this.onlinegiftindex++},T.prototype.reqAddRedPacket=function(e){for(var t=this.RedPocketData.integral,n=this.RedPocketData.log,o=e.length-1;0<=o;o--){var i=e[o];t+=i.v,n.length<10||n.splice(0,1),n.push({t:i.t,v:i.v})}if(t<=0)return Promise.resolve();var r={integral:t,log:n};return d.DataMgr.syncBaseUserData({redpacketdata:r},!1)},T.prototype.reqUseSeed=function(e){var t=this.UsedSeeds;if(t.indexOf(e)<0)return t.push(e),d.DataMgr.syncBaseUserData({usedseed:t},!1)},T.prototype.reqResetSeeds=function(){return d.DataMgr.syncBaseUserData({usedseed:[]},!1)},Object.defineProperty(T,"I",{get:function(){return this._instance||(this._instance=new T)},enumerable:!0,configurable:!0}),T._instance=null,r=T,i.default=r,cc._RF.pop()},{}],Vector3Utils:[function(e,t,n){"use strict";cc._RF.push(t,"15745HDgU1JLL/b82aCHvai","Vector3Utils");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),r.Add=function(e,t){return e.add(t)},r.Subtract=function(e,t){return e.sub(t)},r.Cross=function(e,t){return e.cross(t)},r.Dot=function(e,t){return e.dot(t)},r.Distance=function(e,t){return this.Subtract(e,t).mag()},r.Lerp=function(e,t,n){return e.lerp(t,n)},r.getAngle=function(e,t){return e.angle(t)},r.Normalize=function(e){return e.normalize()},r.Get=function(){return null},o=r,i.default=o,cc._RF.pop()},{}],Vector3:[function(e,t,n){"use strict";cc._RF.push(t,"9727bKul4hCzYy34n0EGhII","Vector3");var o,i=t,r=n;function a(e,t,n){return o.call(this,e,t,n)||this}i=__EXTENDS__(),Object.defineProperty(r,"__esModule",{value:!0}),i(a,o=cc.Vec3),i=a,r.default=i,cc._RF.pop()},{}],ViewBack:[function(e,t,n){"use strict";cc._RF.push(t,"610efwC4bJLxLZqjOnDy1KH","ViewBack");var o,i=e,r=n,a=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var c,u=i("Action"),l=i("AudioMgr"),d=i("EventMgr"),p=i("EventEnum");function h(){return null!==c&&c.apply(this,arguments)||this}i=(o=cc._decorator).ccclass,o.property,a(h,c=cc.Component),Object.defineProperty(h.prototype,"Data",{get:function(){return this.data},enumerable:!0,configurable:!0}),h.prototype.animIn=function(e){return this.data=e,this.node.active=!0,u.default.playAddAnim(this.node,"anim_back_in")},h.prototype.animOut=function(){return this.data=null,this.node.active=!1,u.default.playAddAnim(this.node,"anim_back_out")},h.prototype.onBack=function(){l.AudioMgr.button(),d.EventMgr.emit(p.EventEnum.ActionViewTemp,{type:3,data:null})},i=s([i],h),r.default=i,cc._RF.pop()},{}],ViewDelayShow:[function(e,t,n){"use strict";cc._RF.push(t,"155f9qqMo5J1q2OjALlT/5N","ViewDelayShow");var o,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__;function c(){return null!==o&&o.apply(this,arguments)||this}Object.defineProperty(r,"__esModule",{value:!0}),i=cc._decorator.ccclass,a(c,o=cc.Component),c.prototype.onLoad=function(){this.init()},c.prototype.onEnable=function(){this.init()},c.prototype.init=function(){var e=this;this.node.opacity=0,this.node.getComponent(cc.Button)&&(this.node.getComponent(cc.Button).enabled=!1),this.node.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.2,255),cc.callFunc(function(){e.node.getComponent(cc.Button)&&(e.node.getComponent(cc.Button).enabled=!0)})))},i=s([i],c),r.default=i,cc._RF.pop()},{}],ViewMgr:[function(e,t,n){"use strict";cc._RF.push(t,"0f341BQ1yREKLaserAfhpsS","ViewMgr");var o=e,i=n,r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var a=o("Debug"),s=o("TouchBlock"),c=o("ArrayUtils"),u=o("LayerMgr"),l=o("EventMgr"),d=o("PoolMgr"),p=o("EventEnum"),h=o("LoaderMgr"),f=o("SDKTools"),m=o("AudioMgr");function g(){this.touchLoading=null,this.clsList=[],this.viewList=[],this.maskNodes={}}g.prototype.init=function(){this.initTouchLoading()},g.prototype.initTouchLoading=function(){var e=this;h.LoaderMgr.loadPrefabWithUrl("prefab/common/black_bg").then(function(e){e=cc.instantiate(e),u.default.I.addTo(u.Layer.Guide,e),e.setPosition(cc.Vec2.ZERO),e.active=!1}),h.LoaderMgr.loadPrefabWithUrl("prefab/common/touch_loading").then(function(t){t=cc.instantiate(t),u.default.I.addTo(u.Layer.Mask,t),t.setPosition(cc.Vec2.ZERO),t.active=!1,e.touchLoading=t})},g.prototype.turnOffScreenClick=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=""),this.touchLoading&&(this.touchLoading.active=!0,this.touchLoading.getComponent(s.default).showLoading(e),this.touchLoading.getComponent(s.default).showDesc(t))},g.prototype.turnOnScreenClick=function(){null!=this.touchLoading&&(this.touchLoading.active=!1)},g.prototype.refreshTurnOffScreenClickTip=function(e){null!=this.touchLoading&&this.touchLoading.getComponent(s.default).showDesc(e)},g.prototype.sendMessage=function(e,t){for(var n=0,o=this.viewList;n<o.length;n++){var i=o[n];if(i instanceof e)return i.sendMessage(t),!0}return!1},g.prototype.getView=function(e){for(var t=0,n=this.viewList;t<n.length;t++){var o=n[t];if(o instanceof e)return o}return null},g.prototype.openPopwin=function(e,t){var n=this;t=r({mask:!0,anim:!0},t=void 0===t?{}:t);var o=this.getPopwin(e);if(o)return o.onRefresh(t),Promise.resolve();var i=e.prefabPath;return this.clsList.push(i),new Promise(function(o,r){h.LoaderMgr.loadResWithUrl(i,cc.Prefab,{prefix:function(){n.turnOffScreenClick(!0)},failure:function(){n.turnOnScreenClick(),c.default.removeFromArr(n.clsList,i),r(),f.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8bf7\u6c42\u8fde\u63a5",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){m.AudioMgr.button(),n.openPopwin(e,t)}})},success:function(s){try{n.turnOnScreenClick(),c.default.removeFromArr(n.clsList,i);for(var u=d.PoolMgr.getPrefab(s),h=u.getComponent(e),f=(h=null==h?u.addComponent(e):h).isFullScreen,m=0,g=n.viewList;m<g.length;m++){var _=g[m];_.isPaused||(_.pause(),a.default.warn(_.name+" onPause")),f&&(_.isHide||(_.hide(),a.default.warn(_.name+" onHide")))}n.viewList.push(h),1===n.viewList.length&&l.EventMgr.emit(p.EventEnum.SceneToHide,t.data),f||!t.mask?(a.default.warn(h.name+" onOpen -> onOpend"),h.open(t).then(function(){return o(h)}).catch(function(){return r(h)})):n.showMask(h).then(function(){a.default.warn(h.name+" onOpen -> onOpend"),h.open(t).then(function(){return o(h)}).catch(function(){return r(h)})})}catch(s){n.openPopwin(e,t)}},context:n})})},g.prototype.getPopwin=function(e){var t=this.viewList.filter(function(t){return t instanceof e});return 0<t.length?t[0]:null},g.prototype.isHadPopwin=function(e){if(0<this.viewList.filter(function(t){return t instanceof e}).length)return!0;var t=e.prefabPath;return 0<=this.clsList.indexOf(t)},g.prototype.closePopwin=function(e,t){var n=this;return void 0===t&&(t={}),a.default.warn("\u3010ViewMgr closePopwin\u3011",e),a.default.warn("\u3010ViewMgr closePopwin\u3011",t),a.default.warn("\u3010ViewMgr closePopwin\u3011",this.viewList),new Promise(function(o){for(var i=!1,r=n.viewList.length-1;0<=r;r--)!function(r){var s,c=n.viewList[r];c instanceof e&&(a.default.warn(c.name+" onClose"),s=n.getMaskNode(c.name),n.setMaskNode(c.name,null),c.close(t).then(function(){n.hideMask(c,s),n.showPrev(t),o(null)}).catch(function(){n.hideMask(c,s),o(null)}),n.viewList.splice(r,1),i=!0,0===n.viewList.length&&l.EventMgr.emit(p.EventEnum.SceneToShow,t.data))}(r);i||o(null)})},g.prototype.closeAllPopwin=function(e){var t=this;void 0===e&&(e={}),this.viewList.forEach(function(n){n.close(e);var o=t.getMaskNode(n.name);t.hideMask(n,o)}),this.viewList=[]},g.prototype.clearViewList=function(){this.viewList=[]},g.prototype.showPrev=function(){for(var e,t=this.viewList.length-1;0<=t;t--)if((e=this.viewList[t]).isPaused){e.resume(),a.default.warn(e.name+" onResume");break}},g.prototype.getMaskNode=function(e){return this.maskNodes[e]},g.prototype.setMaskNode=function(e,t){(this.maskNodes[e]=t)||delete this.maskNodes[e],a.default.warn("\u3010ViewMgr setMaskNode\u3011",e),a.default.warn("\u3010ViewMgr setMaskNode\u3011",t),a.default.warn("\u3010ViewMgr setMaskNode\u3011",this.maskNodes)},g.prototype.showMask=function(e){var t=this,n=e.isMaskShow,o=e.isMaskAnim,i=e.isMaskTransparent,r=u.default.I.getLayer(u.Layer.Popwin);return n&&cc.isValid(r)?new Promise(function(n){h.LoaderMgr.loadPrefabWithUrl("prefab/common/black_bg").then(function(a){return cc.isValid(r)?t.getMaskNode(e.name)?n(null):(a=cc.instantiate(a),o?(a.opacity=0,a.runAction(cc.fadeTo(.25,220))):i&&(a.opacity=0),a.setPosition(cc.Vec2.ZERO),r.addChild(a),a.children[0].on(cc.Node.EventType.TOUCH_START,e.onTouchMask,e),t.setMaskNode(e.name,a),void n(null)):n(null)}).catch(function(){return n(null)})}):Promise.resolve()},g.prototype.hideMask=function(e,t){e.name,cc.isValid(t)&&(t.children[0].off(cc.Node.EventType.TOUCH_START,e.onTouchMask,e),t.runAction(cc.sequence(cc.fadeTo(.125,0),cc.callFunc(function(){cc.isValid(t)&&t.removeFromParent()}))))},g.prototype.showTip=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=!0)},Object.defineProperty(g,"I",{get:function(){return this._instance||(this._instance=new g)},enumerable:!0,configurable:!0}),o=g,i.default=o,i.ViewMgr=o.I,cc._RF.pop()},{}],VitalityManager:[function(e,t,n){"use strict";cc._RF.push(t,"ac729MBB9VJXpXMnSba1055","VitalityManager");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("Const"),a=o("DateUtils"),s=o("EventEnum"),c=o("SDKTools"),u=o("SDKEnums"),l=o("UserModel"),d=o("CdManager"),p=o("EventMgr"),h=o("BubbleMgr");function f(){this.CD=c.default.getParamsInt(u.OnlineKeys.AddPowerTime,300),this.KEY="timer_vitality",this.isinit=!1,this.isstop=!1}Object.defineProperty(f.prototype,"UserVitality",{get:function(){return l.default.I.UserVitality},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Interval",{get:function(){return this.CD},enumerable:!0,configurable:!0}),f.prototype.init=function(){var e=this.UserVitality,t=e.hp,n=e.start,o=e.end,i=a.default.nowTime;if(t<r.default.MaxHp&&i<o){if(n&&n<i&&(e=Math.floor((i-n)/(1e3*this.CD))))return this.recover(e);this.addTimer(n,i,o)}else this.reset(t<r.default.MaxHp?r.default.MaxHp:t)},f.prototype.increase=function(e){var t=this,n=this.UserVitality,o=n.hp,i=n.start,s=n.end;if(o+=e,l.default.I.reqAddPower(),o>=r.default.MaxHp)return this.reset(o).then(function(){return t.removeTimer()});var c=a.default.nowTime;return i+=this.CD*e*1e3,s-=this.CD*e*1e3,o={hp:o,start:i,end:s},this.reqVilality(o,!1).then(function(){return t.addTimer(i,c,s)})},f.prototype.recover=function(e){var t=this,n=this.UserVitality,o=n.hp,i=n.start,s=n.end;if((o+=e)>=r.default.MaxHp)return this.reset(o).then(function(){return t.removeTimer()});this.isstop=!1;var c=a.default.nowTime;return e={hp:o,start:i+=this.CD*e*1e3,end:s},this.reqVilality(e,!1).then(function(){return t.addTimer(i,c,s)})},f.prototype.decrease=function(e){var t=this,n=this.UserVitality,o=n.hp,i=n.start,r=n.end,s=a.default.nowTime;return i=i||s,r=(r||s)+this.CD*e*1e3,e={hp:Math.max(0,o-e),start:i,end:r},this.reqVilality(e,!1).then(function(){return t.addTimer(i,s,r)})},f.prototype.removeTimer=function(){this.isstop=!0},f.prototype.checkTimer=function(e){0!==e&&e!==this.timerCount&&(e%this.CD||this.recover(1))},f.prototype.reset=function(e){return this.reqVilality({hp:e,start:0,end:0})},f.prototype.addTimer=function(e,t,n){var o=this;n=Math.max(0,n-t),t=Math.floor(n/1e3),this.timerCount=t,d.default.I.addCoolDown(this.KEY,n),this.onTimer(),this.isinit||(h.default.I.schedule(function(){o.onTimer()},1,cc.macro.REPEAT_FOREVER),this.isinit=!0)},f.prototype.onTimer=function(){var e;this.isstop||(d.default.I.isCoolDown(this.KEY)?(this.removeTimer(),this.recover(1),p.EventMgr.emit(s.EventEnum.MSG_VITALITY_TIMER,0)):(e=d.default.I.getProgress(this.KEY),e=Math.floor(e/1e3),this.checkTimer(e),p.EventMgr.emit(s.EventEnum.MSG_VITALITY_TIMER,e)))},f.prototype.reqVilality=function(e,t){return void 0===t&&(t=!1),l.default.I.reqAysncVilality(e,t).then(function(){return p.default.I.emit(s.EventEnum.MSG_VITALITY_UPDATE)})},Object.defineProperty(f,"I",{get:function(){return this._instance||(this._instance=new f)},enumerable:!0,configurable:!0}),f._instance=null,o=f,i.default=o,cc._RF.pop()},{}],WXApi:[function(e,t,n){"use strict";cc._RF.push(t,"b597ejPe5BDgIr2YnNGXUFM","WXApi");var o,i=e,r=n,a=__DECORATE__;Object.defineProperty(r,"__esModule",{value:!0});var s,c=i("PlatformUtils"),u=i("SDKTools"),l=i("BubbleMgr"),d=i("SDKEnums"),p=i("UserBaseModel"),h=i("OnlineMgr"),f=i("EventMgr"),m=i("EventEnum"),g=i("GridPopwin"),_=i("Api"),y=i("Display"),v=i("StringUtils");function b(){this.isshow_grideadbottom=!1,this.isshow_Sidead=!1}i=(o=cc._decorator).ccclass,o.property,(s=b).prototype.saveAppToDesktop=function(){return new Promise(function(e,t){if(!v.default.canIUse("1.7.1"))return t();wx.saveAppToDesktop({success:function(t){e(t)},fail:function(t){e(t)}})})},b.createGameCLubButton=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),t=cc.view.getVisibleSize(),e.x,n=0-e.y+t.height/2,e.x,t.width,n/=t.height,(t=wx.getSystemInfoSync()).windowWidth,n=t.windowHeight*n,wx.createGameClubButton({icon:"green",style:{left:12,top:n-20,width:32,height:32}})},b.prototype.creteSingleGridad=function(e){var t=this;if("object"!=typeof wx||!wx.createCustomAd)return Promise.reject();var n=((n=u.default.SystemData).screenWidth,n.screenHeight,cc.view.getVisibleSize()),o=(n=(0-e.y+n.height/2)/n.height,wx.getSystemInfoSync().windowHeight*n);return new Promise(function(e,n){t._singlegridad?t._singlegridad.show().then(function(){cc.error("show"),e(0)}).catch(function(e){n(e)}):(cc.winSize.height,t._singlegridad=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomSingle),left:10,top:o-80*cc.winSize.height/1624,fixed:!1}),t._singlegridad.onError(function(e){cc.error(e),t._singlegridad=null,n()}),t._singlegridad.onLoad(function(){}),t._singlegridad.show().then(function(){cc.error("show"),e(0)}).catch(function(e){n(e)}),t._singlegridad.onClose(function(){t._singlegridad=null}))})},b.prototype.showSinglegridad=function(e){c.default.Platform==c.Platform.WX&&this.creteSingleGridad(e)},b.prototype.hideSinglegridad=function(){this._singlegridad&&this._singlegridad.hide()},b.prototype.creteLevelGridead=function(e){var t=this;if("object"!=typeof wx||!wx.createCustomAd)return Promise.reject();var n=((n=u.default.SystemData).screenWidth,n.screenHeight,cc.view.getVisibleSize()),o=(n=(0-e.y+n.height/2)/n.height,wx.getSystemInfoSync().windowHeight*n);return new Promise(function(e,n){var i;t._grideadLevel?t._grideadLevel.show().then(function(){e(0)}).catch(function(e){n(e)}):(i=1334<cc.winSize.height?80:0,t._grideadLevel=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomSingle),left:10,top:o-i*cc.winSize.height/1624,fixed:!1}),t._grideadLevel.onError(function(e){cc.error(e),t._grideadleft=null,n()}),t._grideadLevel.onLoad(function(){}),t._grideadLevel.show().then(function(){cc.error("show"),e(0)}).catch(function(e){n(e)}),t._grideadLevel.onClose(function(){t._grideadLevel=null}))})},b.prototype.showgrideadLevel=function(e){c.default.Platform==c.Platform.WX&&this.creteLevelGridead(e)},b.prototype.hidegrideadLevel=function(){this._grideadLevel&&this._grideadLevel.hide()},b.prototype.creteGrideadBottom=function(){var e=this;if(c.default.isTecent){var t=u.default.SystemData,n=t.screenWidth,o=t.screenHeight;return this.isshow_grideadbottom=!0,new Promise(function(t,i){var r;wx.createCustomAd||i(),e._grideadbottom?e._grideadbottom.show().then(function(){t(0)}).catch(function(e){i(e)}):(r=h.OnlineMgr.getInt(d.OnlineKeys.GridBottomRatio,.8),l.default.I.node.isValid&&(e._grideadbottom=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomBottom),left:n/2-360*r/2,top:o-106-120,fixed:!1}),e._grideadbottom.onError(function(){e._grideadbottom=null,i()}),e._grideadbottom.onLoad(function(){}),e._grideadbottom.show().then(function(){e.isshow_grideadbottom||e.hidegrideadBottom(),t(0)}).catch(function(e){i(e)}),e._grideadbottom.onClose(function(){e._grideadbottom=null})))})}},b.prototype.showgrideadBottom=function(){var e=u.default.getParamsInt(d.OnlineKeys.grid_ad_all_abtest,2);if(0!=e&&(1!=e||p.default.I.ID%2!=1))return this.creteGrideadBottom()},b.prototype.hidegrideadBottom=function(){this.isshow_grideadbottom=!1,this._grideadbottom&&this._grideadbottom.hide()},b.prototype.creteGrideadleft=function(){var e=this;if(c.default.isTecent){var t=u.default.SystemData.screenHeight;return new Promise(function(n,o){wx.createCustomAd||o(),e._grideadleft?e._grideadleft.show().then(function(){n(0)}).catch(function(e){o(e)}):(e._grideadleft=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomLeft),left:1,top:t/2-164,fixed:!1}),e._grideadleft.onError(function(){e._grideadleft=null,o()}),e._grideadleft.onLoad(function(){}),e._grideadleft.show().then(function(){e.isshow_Sidead||e.hidesideAD(),n(0)}).catch(function(e){o(e)}),e._grideadleft.onClose(function(){e._grideadleft=null}))})}},b.prototype.showgrideadLeft=function(){return this.creteGrideadleft()},b.prototype.hidegrideadLeft=function(){this._grideadleft&&this._grideadleft.hide()},b.prototype.creteGrideadRight=function(){var e=this;if(c.default.isTecent){var t=u.default.SystemData,n=t.screenWidth,o=t.screenHeight;return new Promise(function(t,i){wx.createCustomAd||i(),e._grideadright?e._grideadright.show().then(function(){t(0)}).catch(function(e){i(e)}):(e._grideadright=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomRight),left:n-72,top:o/2-164,fixed:!1}),e._grideadright.onError(function(){e._grideadright=null,i()}),e._grideadright.onLoad(function(){}),e._grideadright.show().then(function(){e.isshow_Sidead||e.hidesideAD(),t(0)}).catch(function(e){i(e)}),e._grideadright.onClose(function(){e._grideadright=null}))})}},b.prototype.showgrideadRight=function(){return this.creteGrideadRight()},b.prototype.hidegrideadRight=function(){this._grideadright&&this._grideadright.hide()},b.prototype.showsideAD=function(){var e=u.default.getParamsInt(d.OnlineKeys.grid_ad_all_abtest,2);0==e||1==e&&p.default.I.ID%2==1||(this.isshow_Sidead=!0,this.showgrideadLeft(),this.showgrideadRight())},b.prototype.hidesideAD=function(){this.isshow_Sidead=!1,this.hidegrideadLeft(),this.hidegrideadRight()},b.prototype.creteGridad2=function(){var e=this;return new Promise(function(t,n){if(!c.default.isTecent||!wx.createCustomAd)return n();var o=((o=u.default.SystemData).screenWidth,o.screenHeight);e._gridad2?e._gridad2.show().then(function(){f.EventMgr.emit(m.EventEnum.Gride2AdSucc),cc.error("show"),t(0)}).catch(function(e){f.EventMgr.emit(m.EventEnum.Gride2AdFail),n(e)}):(e._gridad2=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomMatrix),left:1,top:o/2-250,fixed:!1}),e._gridad2.onError(function(t){f.EventMgr.emit(m.EventEnum.Gride2AdFail),cc.error(t),e._gridad2=null,n()}),e._gridad2.onLoad(function(){}),e._gridad2.show().then(function(){f.EventMgr.emit(m.EventEnum.Gride2AdSucc),t(0)}).catch(function(t){f.EventMgr.emit(m.EventEnum.Gride2AdFail),e._gridad2=null,n(t)}))})},b.prototype.showgridad2=function(){return this.creteGridad2()},b.prototype.hidegridad2=function(){this._gridad2&&this._gridad2.hide()},b.prototype.showallgridad=function(){g.default.isshow&&this.showgridad2()},b.prototype.hideallgridad=function(){this.hidegridad2()},b.prototype.showwxSinglegridad=function(e){return this.creteWXSingleGridad(e)},b.prototype.hidewxSinglegridad=function(){this._Wxsinglegridad&&this._Wxsinglegridad.hide()},b.prototype.creteWXSingleGridad=function(e){var t=this;if(c.default.isTecent){var n=u.default.SystemData,o=(n.screenWidth,n.screenHeight,cc.view.getVisibleSize());return new Promise(function(n,i){var r;wx.createCustomAd||i(),t._Wxsinglegridad?t._Wxsinglegridad.show().then(function(){_.default.reqAddWxADShowTimes(),n(0)}).catch(function(e){i(e)}):e.isValid&&(r=(0-e.y+o.height/2)/o.height,r=wx.getSystemInfoSync().windowHeight*r,t._Wxsinglegridad=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomSingleWx),left:1,top:r-30,fixed:!1}),t._Wxsinglegridad.onError(function(){t._Wxsinglegridad=null,i()}),t._Wxsinglegridad.onLoad(function(){}),t._Wxsinglegridad.show().then(function(){_.default.reqAddWxADShowTimes(),n(0)}).catch(function(e){i(e)}),t._Wxsinglegridad.onClose(function(){t._Wxsinglegridad=null}))})}},b.prototype.creteGridadIntertial=function(){var e=this,t=u.default.SystemData.screenHeight;return new Promise(function(n,o){wx.createCustomAd||o(),e._gridadIntertial?e._gridadIntertial.show().then(function(){n(0),e.handleGridSuccess()}).catch(function(t){o(t),e.handleGridFailure()}):(e._gridadIntertial=wx.createCustomAd({adUnitId:h.OnlineMgr.getAdByType(h.AdType.CustomMatrixInter),left:1,top:t/2-250,fixed:!1}),e._gridadIntertial.onError(function(){e.handleGridFailure(),o()}),e._gridadIntertial.onClose(function(){e.handleGridFailure()}),e._gridadIntertial.onHide(function(){e.handleGridFailure()}),e._gridadIntertial.show().then(function(){n(0),e.handleGridSuccess()}).catch(function(t){e.handleGridFailure(),o(t)}))})},b.prototype.handleGridFailure=function(){this._gridadIntertial=null,y.default.PersistNode.hideBlack()},b.prototype.handleGridSuccess=function(){y.default.PersistNode.showBlack()},b.prototype.showGridadIntertial=function(){return this.creteGridadIntertial()},b.prototype.hideGridadIntertial=function(){this._gridadIntertial&&this._gridadIntertial.hide()},b.StartRecord=function(){var e;!c.default.isTecent||u.default.SystemData&&"devtools"===u.default.SystemData.brand||(s.clipindexlist=[],(e=wx.getGameRecorderManager())&&(s.isRecording||(e.onStart(function(){s.isRecording=!0}),e.onError(function(){}),e.start({duration:300}))))},b.StopRecord=function(e){var t;void 0===e&&(e=!1),!c.default.isTecent||u.default.SystemData&&"devtools"===u.default.SystemData.brand||(cc.error("StopRecord",e),(t=wx.getGameRecorderManager())&&(s.isRecording?(t.onStop(function(e){s.isRecording=!1,e=e.videoPath,0<s.clipindexlist.length?t.clipVideo({path:e,success:function(e){s.videoPath=e.videoPath},fail:function(){}}):t.clipVideo({path:e,timeRange:[15,0],success:function(e){s.videoPath=e.videoPath},fail:function(){}})}),t.onError(function(){}),t.stop()):cc.error("!!WXapi.isRecording")))},b.RecordPause=function(){var e;!c.default.isTecent||u.default.SystemData&&"devtools"===u.default.SystemData.brand||(e=wx.getGameRecorderManager())&&(e.onPause(function(){}),e.onError(function(){}),e.pause())},b.RecordResume=function(){var e;u.default.SystemData&&"devtools"===u.default.SystemData.brand||(e=wx.getGameRecorderManager())&&(e.onResume(function(){}),e.onError(function(){}),e.resume())},b.RecordClip=function(e,t){var n;!c.default.isTecent||u.default.SystemData&&"devtools"===u.default.SystemData.brand||(n=wx.getGameRecorderManager())&&n.recordClip({timeRange:[e,t],success:function(e){e&&s.clipindexlist.push(e.index)}})},b.ShareVideo=function(e){wx.shareAppMessage?""!=s.videoPath?wx.shareAppMessage({channel:"video",title:"\u5929\u5929\u73a9\u6ce1\u6ce1\u9f99",desc:"\u4f60\u80fd\u51fb\u4e2d\u6211\u7684\u5fc3\u5417\uff1f",imageUrl:"",templateId:"",query:"",extra:{videoPath:s.videoPath,videoTopics:["\u5929\u5929\u73a9\u6ce1\u6ce1\u9f99"],withVideoId:!0},success:function(){e.call(this)},fail:function(){}}):y.default.showTip("\u6682\u65f6\u65e0\u53ef\u7528\u89c6\u9891,\u8bf7\u7a0d\u540e\u518d\u8bd5"):wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5ba2\u6237\u7aef\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5ba2\u6237\u7aef\u6216\u5173\u95ed\u540e\u91cd\u542f\u66f4\u65b0\u3002"})},Object.defineProperty(b,"I",{get:function(){return this.__instance||(this.__instance=new s)},enumerable:!0,configurable:!0}),b.isRecording=!1,b.clipindexlist=[],b.videoPath="",i=s=a([i],b),r.default=i,cc._RF.pop()},{}],Water:[function(e,t,n){"use strict";cc._RF.push(t,"c2d311/l4tMqbWSKMm21PXG","Water");var o,i=n;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),r.wait=function(e){var t=this;return new Promise(function(n){cc.tween(t).to(e/1e3,{}).call(function(){n()}).start()})},r.frame=function(){return new Promise(function(){})},o=r,i.default=o,cc._RF.pop()},{}],WinItemTipPopwin:[function(e,t,n){"use strict";cc._RF.push(t,"22eeazIs8JBaZZXQE1+ng+C","WinItemTipPopwin");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("SDKEnums"),h=o("ShareVideo"),f=o("SDKTools"),m=o("EventEnum"),g=o("ViewMgr"),_=o("OnlineMgr"),y=o("Display"),v=o("AudioMgr"),b=o("BaseAnimPopwin"),S=o("BubbleMgr"),w=o("WXApi");function A(){var e=null!==l&&l.apply(this,arguments)||this;return e.m_isreturnMain=!1,e.m_DesFrom="",e.m_Icons=[],e.m_ID=0,e.labdes=null,e.diamondobj=null,e.sharevideo1=null,e.img=null,e.isdouble=!1,e.time=0,e.Diamond=0,e.reward=[],e}o=(i=cc._decorator).ccclass,i=i.property,a(A,l=b.default),d=A,Object.defineProperty(A.prototype,"ShareKey",{get:function(){return p.ShareKeys.WinGetItem},enumerable:!0,configurable:!0}),A.openTip=function(){return this.isopen=!0},A.prototype.onTouchMask=function(){this.isHide||this.onback()},A.prototype.addEvent=function(){l.prototype.addEvent.call(this),f.default.bindEvent(m.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},A.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),f.default.removeEvent(m.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),A.prototype.onOpen=function(e){return c(this,void 0,void 0,function(){return u(this,function(){return l.prototype.onOpen.call(this,e),this.m_ID=e.data.id,this.img.spriteFrame=this.m_Icons[this.m_ID],this.labdes.string=this.getDes(this.m_ID),this.initRewardUI(),y.default.getViewOffset(),w.default.StopRecord(),[2]})})},A.prototype.handleTacticUpdate=function(){this.initRewardUI()},A.prototype.initRewardUI=function(){this.sharevideo1.updateWith(this.ShareKey)},A.prototype.onVideoUse=function(){v.AudioMgr.button(),f.default.dispatch(this.ShareKey,{success:this.handleReward,context:this})},A.prototype.getDes=function(e){return 0==e?"Eliminate bubbles around the explosion at one time":1==e?"Eliminate all bubbles on the straight line at one time":2==e?"Eliminate all bubbles in a row":3==e?"Combine and eliminate bubbles of any color":4==e?"You can use exchange bubbles unlimited times in this level":""},A.prototype.onuse=function(){v.AudioMgr.button(),javaCall.ShowReward(this,function(e){f.default.dispatch(this.ShareKey,{success:e.handleReward,context:e})})},A.prototype.handleReward=function(){S.default.I.doAddOneItem([this.m_ID,2]),this.handleClose(!1)},A.prototype.useitem=function(e){S.default.I.comGameUIWraps.actionItemUse(e)},A.prototype.onback=function(){v.AudioMgr.button(),this.handleClose(!1),y.default.s_CloseItemTipTimes++},A.prototype.handleClose=function(e){return void 0===e&&(e=!0),c(this,void 0,Promise,function(){return u(this,function(){return[2,g.ViewMgr.closePopwin(d,{anim:e}).then(function(){S.default.I.removePopwinList()})]})})},A.prototype.onShare=function(){var e=this;v.AudioMgr.button(),w.default.ShareVideo(function(){e.sharebtn.active=!1})},A.prefabPath="prefab/popwin/popwin_itemtip1",A.isopen=!1,s([i(cc.SpriteFrame)],A.prototype,"m_Icons",void 0),s([i(cc.Node)],A.prototype,"labdes",void 0),s([i(cc.Node)],A.prototype,"diamondobj",void 0),s([i(h.default)],A.prototype,"sharevideo1",void 0),s([i(cc.Sprite)],A.prototype,"img",void 0),o=d=s([o],A),r.default=o,cc._RF.pop()},{}],WinPopwin2:[function(e,t,n){"use strict";cc._RF.push(t,"c42a8BCzMtBtrRMoLlGoNV8","WinPopwin2");var o=e,i=t,r=n,a=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,u=__GENERATOR__;Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=o("BasePopwin"),h=o("OnlineMgr"),f=o("AudioMgr"),m=o("SDKTools"),g=o("SDKEnums"),_=o("Enum"),y=o("SDKAnalytics"),v=o("BubbleMgr"),b=o("EventMgr"),S=o("EventEnum"),w=o("DataMgr"),A=o("Display"),M=o("AudioEnum"),T=o("WXApi"),P=o("Water"),E=o("UserBaseModel"),D=o("ImageLabelNew");function I(){var e=null!==l&&l.apply(this,arguments)||this;return e.nodeBestScore=null,e.m_labscore=null,e.time=3,e}o=(i=cc._decorator).ccclass,i=i.property,a(I,l=p.default),(d=I).prototype.onOpen=function(e){l.prototype.onOpen.call(this,e),this.soundIndex=0,this.time=3,this.starnum=e.data.star,this.scorenum=v.default.I.m_curScore,this.addstar=e.data.addStar,this.currLevel=e.data.currLv,this.prevData=e.data.prevData,this.currData=w.DataMgr.User.getLeveldataByLv(this.currLevel),this.initBestScore(),this.node.children[0].getComponent(cc.Animation).play("anim_getstar_0"+this.starnum),b.EventMgr.emit(S.EventEnum.PauseMusic),this.initUI(),T.default.I.showgrideadBottom(),f.AudioMgr.playSound(M.AudioEnum.play_clear)},I.prototype.onOpend=function(){l.prototype.onOpend.call(this)},I.prototype.onClose=function(){l.prototype.onClose.call(this),b.EventMgr.emit(S.EventEnum.OpenMusic),v.default.I.removePopwinList(),T.default.I.hidegrideadBottom()},I.prototype.update=function(e){this.time-=e,this.time<=0&&this.onBack()},I.prototype.addEvent=function(){l.prototype.addEvent.call(this)},I.prototype.removeEvent=function(){l.prototype.removeEvent.call(this)},I.prototype.onClosed=function(){l.prototype.onClosed.call(this)},Object.defineProperty(I.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(d.prefabPath)},enumerable:!0,configurable:!0}),I.prototype.initUI=function(){var e=m.default.getParamsInt(g.OnlineKeys.insert_ad_win_panel_abtest,0);0==e||1==e&&E.default.I.ID%2==1||A.default.showFailInterstitial(),this.m_labscore.setValue(this.scorenum,"",!0)},I.prototype.starvib=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return 0==this.starnum?[2]:[4,P.default.wait(29/60*1e3)];case 1:return e.sent(),m.default.vibrateShort(),1==this.starnum?[2]:[4,P.default.wait(350)];case 2:return e.sent(),m.default.vibrateShort(),2==this.starnum?[2]:[4,P.default.wait(350)];case 3:return e.sent(),m.default.vibrateShort(),[2]}})})},I.prototype.initBestScore=function(){!this.prevData||this.currData.score>this.prevData.score?this.nodeBestScore.active=!0:this.nodeBestScore.active=!1},I.prototype.onWinSound=function(){switch(this.soundIndex++,this.soundIndex){case 1:f.AudioMgr.playSound(M.AudioEnum.clear_star1);break;case 2:f.AudioMgr.playSound(M.AudioEnum.clear_star2);break;case 3:f.AudioMgr.playSound(M.AudioEnum.clear_star3)}},I.prototype.onBack=function(){f.AudioMgr.button(),this.isLocked||(this.time=10,this.doClose(d,!0),v.default.I.showbottomUI(this.addstar,!0),b.EventMgr.emit(S.EventEnum.OpenMusic))},I.prototype.onInvite=function(){f.AudioMgr.button(),m.default.share(g.ShareKeys.Friends,{invite_type:_.InviteType.Net}),y.default.event(g.EventKeys.OverShare,g.EventFrom.Over)},I.prefabPath="prefab/popwin/popwin_star",s([i(cc.Node)],I.prototype,"nodeBestScore",void 0),s([i(D.default)],I.prototype,"m_labscore",void 0),o=d=s([o],I),r.default=o,cc._RF.pop()},{}],WxAudio:[function(e,t,n){"use strict";cc._RF.push(t,"682c7P3Yu9IXbRakxZyrBVB","WxAudio");var o=e,i=n,r=__EXTENDS__();Object.defineProperty(i,"__esModule",{value:!0});var a,s=o("BaseAudio"),c=o("Const"),u=o("SDKTools");function l(){var e=a.call(this)||this;return e._musicVolume=1,e._soundVolume=1,e._muted=!1,e._musicMuted=!1,e._soundMuted=!1,e.audioPool=[],e.sounds={},e}r(l,a=s.default),l.prototype.getPath=function(e){var t=cc.url.raw("resources/"+a.prototype.getPath.call(this,e)+".mp3");return(e=u.default.CdnUrl)&&(t=""+e+c.default.GameEnName+"/"+t),cc.loader.md5Pipe.transformURL(t)},Object.defineProperty(l.prototype,"muted",{get:function(){return this._muted},set:function(e){this._muted=e,this.musicMuted=e,this.soundMuted=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){this._musicVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"musicMuted",{get:function(){return this._musicMuted},set:function(e){this._musicMuted=e,this.music&&(this.music.volume=e?0:this.musicVolume)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){this._soundVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"soundMuted",{get:function(){return this._soundMuted},set:function(e){var t,n=this;for(t in this._soundMuted=e,this.sounds){var o=this.sounds[t]||[];o.length&&o.forEach(function(t){return t.volume=e?0:n.soundVolume})}},enumerable:!0,configurable:!0}),l.prototype.playMusic=function(e,t){void 0===t&&(t=!0),this.musicName!==e&&(this.music||(this.music=this.getAudio()),this.music&&(this.musicName=e,this.music.stop(),this.music.src=this.getPath(e),this.music.loop=t,this.music.volume=this.muted?0:this.musicVolume,this.music.play()))},l.prototype.pauseMusic=function(){this.music&&this.music.pause()},l.prototype.stopMusic=function(){this.musicName=null,this.music&&this.music.stop()},l.prototype.resumeMusic=function(){this.music&&this.music.play()},l.prototype.playSound=function(e,t){var n=this;void 0===t&&(t=!1);var o=this.getAudio();o&&(o.src=this.getPath(e),o.loop=t,o.volume=this.muted?0:this.soundVolume,o.play(),this.sounds[e]=this.sounds[e]||[],this.sounds[e].push(o),t||o.onEnded(function(){return n.onEnded(e,o)}))},l.prototype.stopSound=function(e){var t=this,n=this.sounds[e];n&&(n.forEach(function(e){return t.recoverAudio(e)}),this.sounds[e]=[])},l.prototype.onEnded=function(e,t){var n=this.sounds[e].indexOf(t);this.sounds[e].splice(n,1),this.recoverAudio(t)},l.prototype.createAudio=function(){var e=wx.createInnerAudioContext();return e.autoplay=!1,e.obeyMuteSwitch=!1,e},l.prototype.getAudio=function(){return this.audioPool.length?this.audioPool.pop():this.createAudio()},l.prototype.recoverAudio=function(e){e.stop(),e.offEnded(null),this.audioPool.push(e)},r=l,i.default=r,cc._RF.pop()},{}],bubbleUtil:[function(e,t,n){"use strict";cc._RF.push(t,"0376fGSkjdEd6XqIuNEAeRp","bubbleUtil");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("BubbleMgr"),a=o("CheckTools");function s(){}Object.defineProperty(s,"SCREEN_H",{get:function(){return 1234+(cc.winSize.height-1334)/2-r.default.I.node.parent.parent.getChildByName("topbar").getComponent(cc.Widget).top-(a.default.IsNewPassModel?84:0)},enumerable:!0,configurable:!0}),s.randNum=function(e,t){return e+Math.floor((t-e+1)*Math.random())},s.convertRowColToPos2=function(e,t,n,o){var i=r.default.I.m_mapdata[e].length;return o&&(i=o),o=n*Math.sqrt(3),t=n*(i%2+1)+t*n*2,o=this.SCREEN_H-(n+e*o),cc.v2(t,o)},s.convertPosToRowCol2=function(e,t,n,o){var i=n*Math.sqrt(3);return t=Math.round((this.SCREEN_H-t-n)/i),i=r.default.I.m_mapdata[t].length,o&&(i=o),n=Math.round((e-n*(i%2+1))/(2*n)),cc.v2(t,n)},s.convertRowColToPos=function(e,t,n){var o=n*Math.sqrt(3);return t=n*(e%2+1)+t*n*2,o=this.SCREEN_H-(n+e*o),cc.v2(t,o)},s.convertPosToRowCol=function(e,t,n){var o=n*Math.sqrt(3);return o=Math.round((this.SCREEN_H-t-n)/o),n=Math.round((e-n*(o%2+1))/(2*n)),o<=0&&(o=0),n<=0?n=0:10<=n&&(n=o%2==0?10:9),cc.v2(o,n)},s.SCREEN_W=750,o=s,i.default=o,cc._RF.pop()},{}],cookie:[function(e,t,n){"use strict";cc._RF.push(t,"421f8fSQqxPK79an1Rk8MEw","cookie");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("LocalMgr");o={read:function(e){return r.LocalMgr.get(e)||null}},i.default=o,cc._RF.pop()},{}],data:[function(e,t,n){"use strict";cc._RF.push(t,"d1364I7rytKnbOk+7j+WLm4","data");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("util");i.transformRequest=function(e){return r.isPlainObject(e)?r.qsStringfy(e):e},i.transformResponse=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e},cc._RF.pop()},{}],defaults:[function(e,t,n){"use strict";cc._RF.push(t,"87436n3p9tBdKssOj7RRBrj","defaults");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("headers"),a=o("data"),s={method:"get",timeout:0,headers:{common:{Accept:"application/json, text/plain, */*"}},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",transformRequest:[function(e,t){return r.processHeaders(t,e),a.transformRequest(e)}],transformResponse:[function(e){return a.transformResponse(e)}],validateStatus:function(e){return 200<=e&&e<300}};["delete","get","head","options"].forEach(function(e){s.headers[e]={}}),["post","put","patch"].forEach(function(e){s.headers[e]={"Content-Type":"application/x-www-form-urlencoded"}}),i.default=s,cc._RF.pop()},{}],dispatchRequest:[function(e,t,n){"use strict";cc._RF.push(t,"b84d5ux7DBOAYS8VBVJOOB6","dispatchRequest");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("url"),a=o("headers"),s=o("transform"),c=o("xhr");function u(e){var t=e.url,n=e.params,o=e.paramsSerializer;return(e=e.baseURL)&&!r.isAbsoluteURL(t)&&(t=r.combineURL(e,t)),r.buildURL(t,n,o)}i.default=function(e){return(t=e).cancelToken&&t.cancelToken.throwIfRequested(),(t=e).url=u(t),t.data=s.default(t.data,t.headers,t.transformRequest),t.headers=a.flattenHeaders(t.headers,t.method),c.default(e).then(function(e){return(e=e).data=s.default(e.data,e.headers,e.config.transformResponse),e});var t},i.transformURL=u,cc._RF.pop()},{}],entry:[function(e,t,n){"use strict";cc._RF.push(t,"14f77VIAdVCJIrqN9TevgZA","entry");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("defaults"),a=o("mergeConfig"),s=o("Axios"),c=o("util");function u(e){var t=new s.default(e);return e=s.default.prototype.request.bind(t),c.extend(e,t),e}(o=u(r.default)).create=function(e){return u(a.default(r.default,e))},o.all=function(e){return Promise.all(e)},o.spread=function(e){return function(t){return e.apply(null,t)}},o.Axios=s.default,i.default=o,cc._RF.pop()},{}],error:[function(e,t,n){"use strict";cc._RF.push(t,"c1312webG5BGIr9YQLzeeRG","error");var o=t,i=n;o=__EXTENDS__(),Object.defineProperty(i,"__esModule",{value:!0});var r,a=(o(s,r=Error),s);function s(e,t,n,o,i){return(e=r.call(this,e)||this).config=t,e.code=n,e.request=o,e.response=i,e.isAxiosError=!0,Object.setPrototypeOf(e,s.prototype),e}i.AxiosError=a,i.createError=function(e,t,n,o,i){return new a(e,t,n,o,i)},cc._RF.pop()},{}],headers:[function(e,t,n){"use strict";cc._RF.push(t,"309d6z8Fa1M8IcPdcqMlveY","headers");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("util");i.processHeaders=function(e,t){return o="Content-Type",(n=e)&&Object.keys(n).forEach(function(e){e!==o&&e.toUpperCase()===o.toUpperCase()&&(n[o]=n[e],delete n[e])}),r.isPlainObject(t)&&e&&!e["Content-Type"]&&(e["Content-Type"]="application/json;charset=utf-8"),e;var n,o},i.parseHeaders=function(e){var t=Object.create(null);return e&&e.split("\r\n").forEach(function(e){e=(n=e.split(":"))[0];var n=n.slice(1);(e=e.trim().toLowerCase())&&(t[e]=n.join(":").trim())}),t},i.flattenHeaders=function(e,t){return e&&(e=r.deepMerge(e.common,e[t],e),["delete","get","head","options","post","put","patch","common"].forEach(function(t){delete e[t]}),e)},cc._RF.pop()},{}],interceptorManager:[function(e,t,n){"use strict";cc._RF.push(t,"4a81bL8zGtJIrEy5Atu1mcl","interceptorManager");var o,i=n;function r(){this.interceptors=[]}Object.defineProperty(i,"__esModule",{value:!0}),r.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},r.prototype.forEach=function(e){this.interceptors.forEach(function(t){null!=t&&e(t)})},r.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},o=r,i.default=o,cc._RF.pop()},{}],javaCall:[function(e,t){"use strict";cc._RF.push(t,"2fec6yPqPpP4raowsnGIGbm","javaCall"),cc.javaCall={callBack:null,sendJs:null,init:function(){window.javaCall=this,console.log("###########################JavaCall.init")},ShowInterstitial:function(e,t){if(console.log(e.name+"--------------------\x3eShowInterstitial"),this.callBack=t,this.sendJs=e,cc.sys.isNative)console.log("Cooooo: =>ShowInterstitial"+e),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","ShowInterstitial","(Ljava/lang/String;)V","ShowInterstitial");else{if(null==this.callBack)return;this.onMsgFromAndroid("ShowInterstitialfail")}},ShowReward:function(e,t){if(console.log(e.name+"--------------------\x3eShowReward"),this.callBack=t,this.sendJs=e,cc.sys.isNative)console.log("Cooooo: =>ShowReward"+e),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","ShowReward","(Ljava/lang/String;)V","ShowReward");else{if(null==this.callBack)return;this.onMsgFromAndroid("ShowRewardfail")}},onMsgFromAndroid:function(e){console.error("=====================>onMsgFromAndroid<----"+e),-1!=e.indexOf("success")?null!=this.callBack&&(this.callBack(this.sendJs),this.callBack=null):console.log("!!!!Fail!!!!")},onCheckYinsi:function(e){null!=this.callBack&&(console.log("=====================>onCheckYinsi<----"+e),this.callBack(this.sendJs,e))},CheckYinsi:function(e,t){if(this.callBack=t,this.sendJs=e,cc.sys.isNative)console.log("Cooooo:CheckYinsi:::"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","CheckYinsi","()V");else{if(null==this.callBack)return;console.log("@@@@@@@@@@@<----onCheckYinsi-----\x3e@@@@@@@@@@"),this.onCheckYinsi("false")}},LOGINUI:function(){console.log("Cooooo:\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1aLOGINUI:::"),cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AhaAnalytics","LOGINUI","()V")},LEVELBEGIN:function(e){console.log("Cooooo:\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1aLEVELBEGIN:::"+e),cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AhaAnalytics","LEVELBEGIN","(Ljava/lang/String;)V",e)},LEVELEND:function(e,t){console.log("Cooooo:\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1aLEVELEND:::"+e+" suc::"+t),cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AhaAnalytics","LEVELEND","(Ljava/lang/String;Ljava/lang/String;)V",e,t)}},cc.javaCall.init(),cc._RF.pop()},{}],mergeConfig:[function(e,t,n){"use strict";cc._RF.push(t,"d73d2Dk9OJCeIbo3m04pMuD","mergeConfig");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("util"),a=Object.create(null);function s(e,t){return void 0!==t?t:e}function c(e,t){if(void 0!==t)return t}function u(e,t){return r.isPlainObject(t)?r.deepMerge(e,t):void 0!==t?t:r.isPlainObject(e)?r.deepMerge(e):void 0!==e?e:void 0}["url","params","data"].forEach(function(e){a[e]=c}),["headers","auth"].forEach(function(e){a[e]=u}),i.default=function(e,t){t=t||{};var n,o=Object.create(null);for(n in t)i(n);for(n in e)t[n]||i(n);function i(n){var i=a[n]||s;o[n]=i(e[n],t[n])}return o},cc._RF.pop()},{}],plguins:[function(e,t){"use strict";cc._RF.push(t,"339449mMd5AHKJy1+lvqGDY","plguins"),window.__ASSIGN__=function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},window.__EXTENDS__=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}},window.__AWAITER__=function(e,t,n,o){return new(n=n||Promise)(function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},window.__DECORATE__=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(r<3?i(a):3<r?i(t,n,a):i(t,n))||a);return 3<r&&a&&Object.defineProperty(t,n,a),a},window.__GENERATOR__=function(e,t){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=0<(i=r.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cc._RF.pop()},{}],transform:[function(e,t,n){"use strict";cc._RF.push(t,"5a00596FdBJJrZ70NvQjkMZ","transform");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,n){return n&&(n=Array.isArray(n)?n:[n]).forEach(function(n){e=n(e,t)}),e},cc._RF.pop()},{}],types:[function(e,t,n){"use strict";cc._RF.push(t,"833eeXFnBVKUZdqlFpIgVOg","types");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],url:[function(e,t,n){"use strict";cc._RF.push(t,"26bdbDBNhtJEb+Z+SVw9MES","url");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("util");i.buildURL=function(e,t,n){return t&&(n=n?n(t):r.isURLSearchParams(t)?t.toString():r.qsStringfy(t))&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e},i.isAbsoluteURL=function(e){return/(^[a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},i.combineURL=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},i.isURLSameOrigin=function(e){return(e=c(e)).protocol===s.protocol&&e.host===s.host};var a=document.createElement("a"),s=c(window.location.href);function c(e){return a.setAttribute("href",e),{protocol:a.protocol,host:a.host}}cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t){"use strict";cc._RF.push(t,"a8488IP9C5BiJgApgshEUu/","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],util:[function(e,t,n){"use strict";cc._RF.push(t,"1f4acOhM5FPFqpEPEss4AnR","util");var o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=Object.prototype.toString;function r(e){return"[object Date]"===i.call(e)}function a(e){return"[object Object]"===i.call(e)}function s(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}o.isDate=r,o.isPlainObject=a,o.isFormData=function(e){return void 0!==e&&e instanceof FormData},o.isURLSearchParams=function(e){return void 0!==e&&e instanceof URLSearchParams},o.extend=function(e,t){for(var n in t)e[n]=t[n];return e},o.encode=s,o.qsStringfy=function(e){var t=[];return Object.keys(e).forEach(function(n){var o,i=e[n];null!=i&&(o=[],Array.isArray(i)?(o=i,n+="[]"):o=[i],o.forEach(function(e){r(e)?e=e.toISOString():a(e)&&(e=JSON.stringify(e)),t.push(s(n)+"="+s(e))}))}),t.join("&")},o.deepMerge=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Object.create(null);return t.forEach(function(t){t&&Object.keys(t).forEach(function(n){var i=t[n];a(i)?a(o[n])?o[n]=e(o[n],i):o[n]=e(i):o[n]=i})}),o},cc._RF.pop()},{}],xhr:[function(e,t,n){"use strict";cc._RF.push(t,"f40f12SSA5AvoP3QDUyZdkr","xhr");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var r=o("headers"),a=o("error"),s=o("url"),c=o("cookie");i.default=function(e){return new Promise(function(t,n){var o=void 0===(y=e.data)?null:y,i=e.url,u=void 0===(v=e.method)?"get":v,l=e.headers,d=e.responseType,p=e.timeout,h=e.cancelToken,f=e.withCredentials,m=e.xsrfCookieName,g=e.xsrfHeaderName,_=e.onDownloadProgress,y=e.onUploadProgress,v=e.auth,b=e.validateStatus,S=new XMLHttpRequest;S.open(u.toUpperCase(),i,!0),S.onreadystatechange=function(){var o;4===S.readyState&&0!==S.status&&(o=r.parseHeaders(S.getAllResponseHeaders()),o={data:"text"!==d?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:o,config:e,request:S},!b||b(o.status)?t(o):n(a.createError("Request failed with status code "+o.status,e,-100,S,o)))},d&&(S.responseType=d),p&&(S.timeout=p),f&&(S.withCredentials=f),S.onerror=function(){n(a.createError("Network Error",e,-1,S))},S.ontimeout=function(){n(a.createError("Timeout of "+p+" ms exceed",e,-10,S))},_&&(S.onprogress=_),y&&(S.upload.onprogress=y),!f&&!s.isURLSameOrigin(i)||!m||(m=c.default.read(m))&&g&&(l[g]=m),v&&(l.Authorization="Basic "+btoa(v.username+":"+v.password)),Object.keys(l).forEach(function(e){null===o&&"content-type"===e.toLowerCase()?delete l[e]:S.setRequestHeader(e,l[e])}),h&&h.promise.then(function(e){S.abort(),n(e)}),S.send(o)})},cc._RF.pop()},{}]},{},["HelloWorld","use_reversed_rotateTo","plguins","Const","FullScreenAdapter","ABTools","ADCell","ADCell2","ADCrossItem","ADData","ADGrid","ADLike","ADLike2","ADLikeGrid","ADMgr","ADSide","ADSmallLike","Action","AddBubblePopwin","AddDeskPopwin","AldTools","Api","AppDataMgr","ArrayUtils","AudioEnum","AudioMgr","AutoScroll","Axios","BaseAnimPopwin","BaseAudio","BaseModel","BasePopwin","BaseRank","BaseScene","BaseView","BgCtr","BlockParams","BottomBar","BtnLike","BtnStart","Bubble","BubbleMgr","BuildingItem","CCAudio","CashPopwin","CdManager","ChapterCfg","CheckTools","ChestCoinGiftPopwin","ChestListPopwin","ChestOpenPopwin","ChestOverPopwin","ChestRewardPopwin","CoinFly","CoinGiftPopwin","CollectPopwin","ColorListener","ComPointTip","CommonMgr","ConfigModel","CoordData","CubeParams","DataMgr","DateUtils","Debug","Declare","DelayBone","Display","DropCtr","EditorMgr","Enum","EventEnum","EventMgr","ExchangeData","ExchangePopwin","ExtScrollView","FailPopwin","FileUtils","FitTaskItem","FloatingPopwin","FrameListener","Friends","FurnitureItem","GameAddBubble","GameAddChange","GameBigScore","GameCombo","GameFitTask","GameFitUp","GameFitUpGift","GameGM","GameGuideBlack","GameHome","GameImgTxt","GameItems","GameLoad","GameNewDay","GameNoStar","GamePageGM","GameStory","GameTaskChest","GameUIWraps","GameUpBubble","Garbage","GetCashPopwin","GetRewardPopWin","GiftPopwin2","GridPopwin","GuideDatas","GuideDeclare","GuideHand","GuideMgr","GuidePopwin","H5","HandleData","Helper","HistoryData","HomeScene","Http","ImageLabelNew","InviteData","InviteItem","InvitePopwin","InvitefirendPopwin","ItemTipPopwin","LayerCtr","LayerMgr","LevelData","LevelModel","LoadGame","LoadHDImage","LoadHome","LoadPlist","LoadScene","LoaderCfg","LoaderMgr","LocalMgr","LocalModel","LogUtils","LvItem","Main","MapConfig","MapView","MapsModel","MilestoneModel","MoneyCfg","NumberAddScore","OnlineGiftPopwin","OnlineMgr","OpenContext","PausePopwin","PersistNode","PlatformAd","PlatformUtils","PlotMgr","PlotModel","PointData","PointMgr","PointModel","PoolMgr","QueuePopMgr","RandomUtils","RankEnum","RankItem","RankPopwin","RecordData","RedPacketCtr","RedPacketPopwin","ResLoader","RewardCfg","RoomItem","RulePopwin","SDKAnalytics","SDKBanner","SDKEnums","SDKShareVideo","SDKTools","SafeActionClick","ScaleAnimation","ServicePopwin","SettingPopwin","ShareVideo","ShareVideoBtn.ts","ShopPopwin","SignPopwin","StarConfig","StringUtils","TaskModel","TipProps","TipsMgr","TopBar","TopMenu","TouchBlock","TouchMgr","UILevel","UIRevive","UITask","UITips","UIchooseItem","UserBaseData","UserBaseModel","UserData","UserExtData","UserExtModel","UserLevelData","UserModel","Vector3","Vector3Utils","ViewBack","ViewDelayShow","ViewMgr","VitalityManager","WXApi","Water","WinItemTipPopwin","WinPopwin2","WxAudio","bubbleUtil","cookie","data","defaults","dispatchRequest","entry","error","headers","interceptorManager","javaCall","mergeConfig","transform","types","url","util","xhr"]);