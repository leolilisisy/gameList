System.register("chunks:///_virtual/csvManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,n,i;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){n=e.defineProperty,i=e.createClass}],execute:function(){var s,u,a;t._RF.push({},"0f6730qIuVM+qjWAIfum3Hv","csvManager",void 0);var o=r.ccclass,l=(r.property,[",",";","\t","|","^"]),c=["\r\n","\r","\n"],h=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},f={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:l[0],newline:c[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,l,i),t.newline=t.newline||this.mostFrequent(e,c,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",o("CSVManager")((a=u=function(){function e(){n(this,"_csvTables",{}),n(this,"_csvTableForArr",{}),n(this,"_tableCast",{}),n(this,"_tableComment",{})}var t=e.prototype;return t.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];f.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=f.opts.cast,this._tableComment[e]=f.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},t.getTableArr=function(e){return this._csvTableForArr[e]},t.getTable=function(e){return this._csvTables[e]},t.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},t.queryByID=function(e,t){return this.queryOne(e,null,t)},t.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},t.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},t.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},t.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},i(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),n(u,"_instance",void 0),s=a))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/wxAdapter.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var a;t._RF.push({},"1610cSgeCdNOa1GP4/5VOz+","wxAdapter",void 0);var r=n.ccclass;n.property,e("wxAdapter",r("wxAdapter")(a=function(){function e(){}return e.start=function(){this._checkUpdate()},e.shareGame=function(e,t){window.wx&&(wx.showShareMenu({withShareTicket:!0,complete:function(){}}),wx.aldOnShareAppMessage?wx.aldOnShareAppMessage((function(){return{title:e,imageUrl:t}})):wx.onShareAppMessage((function(){return{title:e,imageUrl:t}})))},e._checkUpdate=function(){if(window.wx&&wx.getUpdateManager){var e=wx.getUpdateManager();e.onUpdateReady((function(){wx.showModal({title:"温馨提示",content:"新版本已经准备好，需重启应用",confirmText:"重启更新",success:function(t){t.confirm&&e.applyUpdate()}})}))}},e}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./util.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./effectManager.ts","./clientEvent.ts","./uiManager.ts"],(function(e){"use strict";var t,i,n,a,s,o,r,h,_,u,l,c,m,E,p,g,T,f,d,M,S,N,I,C,O,G,b,A;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.SpriteFrame,a=e.Node,s=e.LabelComponent,o=e.Prefab,r=e.SpriteComponent,h=e.AnimationComponent,_=e.UIOpacityComponent,u=e.find,l=e.UITransformComponent,c=e.view,m=e.ParticleSystemComponent,E=e.profiler,p=e.Component},function(e){g=e.applyDecoratedDescriptor,T=e.inheritsLoose,f=e.initializerDefineProperty,d=e.assertThisInitialized,M=e.defineProperty},function(e){S=e.PoolManager},function(e){N=e.Util},function(e){I=e.resourceUtil},function(e){C=e.AudioManager},function(e){O=e.constant},function(e){G=e.EffectManager},function(e){b=e.ClientEvent},function(e){A=e.UIManager}],execute:function(){var v,D,P,y,w,B,H,U,R,F,L,k,V,Y,z,x,W,j,X,J,q,K,Q;t._RF.push({},"1b432mxIV5JjYmyA05APPcw","fightUI",void 0);var Z=i.ccclass,$=i.property;e("FightUI",(v=Z("FightUI"),D=$(n),P=$(n),y=$(a),w=$(a),B=$(s),H=$(s),U=$(o),R=$(r),F=$([n]),L=$(a),v((Y=g((V=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,f(d(t),"sfHeartActive",Y,d(t)),f(d(t),"sfHeartDisable",z,d(t)),f(d(t),"ndTimer",x,d(t)),f(d(t),"ndHeart",W,d(t)),f(d(t),"lbScore",j,d(t)),f(d(t),"lbTime",X,d(t)),f(d(t),"pfHeartBreak",J,d(t)),f(d(t),"spCountdown",q,d(t)),f(d(t),"sfCountdown",K,d(t)),f(d(t),"ndBtnPause",Q,d(t)),M(d(t),"_gameScore",0),M(d(t),"_raiseTime",0),M(d(t),"_updateInterval",1),M(d(t),"_gameTime",0),M(d(t),"_gameMode",O.GAME_MODE.ENDLESS),M(d(t),"_isGameStart",!1),M(d(t),"_isGamePause",!1),M(d(t),"_isGameStop",!1),M(d(t),"_isGameEnd",!1),M(d(t),"_heartNum",5),M(d(t),"_scriptFightManager",null),M(d(t),"_durianEnterTime",0),M(d(t),"_arrNdHeartBreak",[]),M(d(t),"_debugClickTimes",0),M(d(t),"_debugTimer",null),t}T(t,e);var i=t.prototype;return i.start=function(){},i.onEnable=function(){b.on(O.EVENT_NAME.ON_SETTLEMENT_SHOW,this._onSettlementShow,this),b.on(O.EVENT_NAME.ON_GET_SCORE,this._onGetScore,this),b.on(O.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),b.on(O.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),b.on(O.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this)},i.onDisable=function(){for(;this._arrNdHeartBreak.length;){var e=this._arrNdHeartBreak.shift();S.instance.putNode(e)}b.off(O.EVENT_NAME.ON_SETTLEMENT_SHOW,this._onSettlementShow,this),b.off(O.EVENT_NAME.ON_GET_SCORE,this._onGetScore,this),b.off(O.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),b.off(O.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),b.off(O.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this)},i.show=function(e,t){var i;(this._scriptFightManager=e,this._isGameStart=!1,this._isGamePause=!1,this._isGameStop=!1,this._durianEnterTime=O.DURIAN_FIRST_TIME,this._gameMode=t,this.ndBtnPause.active=!0,t==O.GAME_MODE.ENDLESS)?(this.ndHeart.active=!0,this.ndHeart.children.forEach((function(e){var t=e.getChildByName("heart");t.getComponent(h).stop(),t.getComponent(_).opacity=255,e.getChildByName("heartHide").active=!1})),this._heartNum=5,this.ndTimer.active=!1):t===O.GAME_MODE.LIMIT_TIME&&(this.ndHeart.active=!1,this.ndTimer.active=!0);this._gameScore=0,this._gameTime=-3,this.spCountdown.node.parent.active=!0,this.spCountdown.spriteFrame=this.sfCountdown[-this._gameTime-1],null===(i=this.spCountdown.node.getComponent(h))||void 0===i||i.play(),this._isGameStart=!0,this.lbScore.string=this._gameScore+"",this.lbTime.string=N.formatDate(new Date(1e3*O.LIMIT_TIME),"mm:ss"),C.instance.stopAll(),C.instance.playMusic(O.AUDIO_SOUND.GAME_BGM,!0)},i._onSettlementShow=function(){this._isGameStop?A.instance.showDialog("choose/choose"):this._isGameEnd&&A.instance.showDialog("settlement/settlement",[this._gameScore]),A.instance.hideDialog("pause/pause"),A.instance.hideDialog("fightUI/fightUI")},i._onGetScore=function(e,t,i){var n=this;if(t!==O.SCORE_TYPE.HIT_SPECIAL){if(this._gameMode===O.GAME_MODE.ENDLESS&&t===O.SCORE_TYPE.BOMB||(this._gameScore+=e),this._gameScore<0&&(this._gameScore=0),this.lbScore.string=this._gameScore+"",this._gameMode===O.GAME_MODE.ENDLESS&&(t===O.SCORE_TYPE.NO_HIT_FRUIT||t===O.SCORE_TYPE.BOMB)&&this._heartNum>0){this._heartNum--;var a=this.ndHeart.children[this._heartNum].getChildByName("heart"),s=this.ndHeart.children[this._heartNum].getChildByName("heartHide"),o=a.getComponent(h);if(null==o||o.play(),s.active=!0,this._heartNum<1&&this._playBoom("heartBoom/heartBoom01",(function(){b.dispatchEvent(O.EVENT_NAME.ON_GAME_END)})),t===O.SCORE_TYPE.BOMB)return;var r=S.instance.getNode(this.pfHeartBreak,u("Canvas"));this._arrNdHeartBreak.push(r);var _=r.getComponent(l);r.setPosition(i.x,-c.getDesignResolutionSize().height/2+_.height/2,0),this.scheduleOnce((function(){S.instance.putNode(r),n._arrNdHeartBreak.shift()}),1)}if(t===O.SCORE_TYPE.HIT_COMBO){if(G.instance.showFightTips(O.TIP_TYPE.MORE_HIT,e,i),e>=3){var m=e<6?e:e>=6?6:e;C.instance.playSound(""+O.AUDIO_SOUND.HIT+m,!1)}}else t===O.SCORE_TYPE.PRECISE_HIT?G.instance.showFightTips(O.TIP_TYPE.ACCURATE_HIT,e,i):t===O.SCORE_TYPE.BOMB&&this._gameMode===O.GAME_MODE.LIMIT_TIME&&G.instance.showFightTips(O.TIP_TYPE.BOMB_HIT,e,i)}else G.instance.showFightTips(O.TIP_TYPE.SPECIAL_HIT_EXPLODE,e,i)},i._onGameEnd=function(){this._isGameStart=!1,this._isGamePause=!1,this._isGameEnd=!0},i._onGameResume=function(){this._isGamePause=!1,this.ndBtnPause.active||(this.ndBtnPause.active=!0)},i._onGameStop=function(){this._isGameStart=!1,this._isGamePause=!1,this._isGameStop=!0},i.onPauseBtnClick=function(){this._isGamePause||!this._isGameStart||this._isGameStop||(this._isGamePause=!0,this.ndBtnPause.active=!1,b.dispatchEvent(O.EVENT_NAME.ON_GAME_PAUSE),A.instance.showDialog("pause/pause"))},i._playBoom=function(e,t){var i=this;I.getEffect(e,(function(e,n){var a=S.instance.getNode(n,u("fightManager"));t&&t();var s=a.getComponent(h);null==s||s.play(),null==s||s.once(h.EventType.FINISHED,(function(){S.instance.putNode(a);for(var e=u("fightManager");e.children.length;)S.instance.putNode(null==e?void 0:e.children[0])})),a.getComponentsInChildren(m).forEach((function(e){null==e||e.clear(),null==e||e.stop(),null==e||e.play(),e.simulationSpeed=i._scriptFightManager.gameSpeed}))}))},i.onBtnDebugClick=function(){var e=this,t=function(){e._debugClickTimes=0,clearTimeout(e._debugTimer),e._debugTimer=null};this._debugTimer||(this._debugTimer=setTimeout((function(){t()}),1e3)),this._debugClickTimes+=1,this._debugClickTimes>2&&!E.isShowingStats()?(E.showStats(),t()):E.isShowingStats()&&E.hideStats()},i.update=function(e){if(this._isGameStart&&!this._isGamePause&&(this._raiseTime+=e*this._scriptFightManager.gameSpeed,!(this._raiseTime<this._updateInterval))){this._raiseTime=0,this._gameTime++,this._durianEnterTime<this._gameTime&&(this._durianEnterTime+=O.DURIAN_NEXT_TIME,b.dispatchEvent(O.EVENT_NAME.ON_DURIAN_ENTER)),this._scriptFightManager.difficulty<=O.GAME_DIFFICULTY.length&&O.GAME_DIFFICULTY[this._scriptFightManager.difficulty-1]<this._gameTime&&this._scriptFightManager.difficulty++;var t,i=this.spCountdown.node.parent;if(this._gameTime<0)i.active=!0,this.spCountdown.spriteFrame=this.sfCountdown[-this._gameTime-1],null===(t=this.spCountdown.node.getComponent(h))||void 0===t||t.play();else 0===this._gameTime&&(i.active=!1);if(this._gameMode===O.GAME_MODE.LIMIT_TIME){var n=this._gameTime>0?this._gameTime:0;this.lbTime.string=N.formatDate(new Date(1e3*(O.LIMIT_TIME-n)),"mm:ss");var a=O.LIMIT_TIME-this._gameTime;3===a||2===a||1===a?C.instance.playSound(O.AUDIO_SOUND.COUNTDOWN):0===a&&C.instance.playSound(O.AUDIO_SOUND.TIME_OVER),this._gameTime>=O.LIMIT_TIME&&this._playBoom("clockBoom/clockBoom01",(function(){b.dispatchEvent(O.EVENT_NAME.ON_GAME_END)}))}}},t}(p)).prototype,"sfHeartActive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=g(V.prototype,"sfHeartDisable",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=g(V.prototype,"ndTimer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=g(V.prototype,"ndHeart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=g(V.prototype,"lbScore",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=g(V.prototype,"lbTime",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=g(V.prototype,"pfHeartBreak",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=g(V.prototype,"spCountdown",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=g(V.prototype,"sfCountdown",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=g(V.prototype,"ndBtnPause",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=V))||k));t._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"228dd1bExdFqIscc69mYjFy","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null===(n=e.getScene())||void 0===n?void 0:n.children,v=null===(t=e.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(n){return!!n.cameraComponent}));var m=null===(l=e.getScene())||void 0===l?void 0:l.getComponentsInChildren(r),u=0;m.forEach((function(n){return u|=n.visibility&a}));for(var p=[],d=0,f=s.length;d<f;d++){var C=s[d];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(v.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~u,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),u|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/numItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var n,e,o,r,u;return{setters:[function(t){n=t.cclegacy,e=t._decorator,o=t.LabelComponent,r=t.Component},function(t){u=t.inheritsLoose}],execute:function(){var i;n._RF.push({},"2f418aVQoNGmpQuWcTOnOdo","numItem",void 0);var c=e.ccclass;e.property,t("NumItem",c("NumItem")(i=function(t){function n(){return t.apply(this,arguments)||this}u(n,t);var e=n.prototype;return e.start=function(){},e.init=function(t){this.node.getComponent(o).string=String(t%10)},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var r,n,t;return{setters:[function(e){r=e.cclegacy,n=e._decorator},function(e){t=e.defineProperty}],execute:function(){var a,l,c;r._RF.push({},"479c11i9b5J/KZjUPhmfv/R","clientEvent",void 0);var i=n.ccclass;n.property,e("ClientEvent",i("ClientEvent")((c=l=function(){function e(){}return e.on=function(r,n,t){var a={handler:n,target:t},l=e._handlers[r];l||(l=[],e._handlers[r]=l);for(var c=0;c<l.length;c++)if(!l[c])return l[c]=a,c;return l.push(a),l.length},e.off=function(r,n,t){var a=e._handlers[r];if(a)for(var l=0;l<a.length;l++){var c=a[l];if(c.handler===n&&(!t||t===c.target)){a.splice(l,1);break}}},e.dispatchEvent=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var l,c=e._handlers[r],i=[];for(l=1;l<arguments.length;l++)i.push(arguments[l]);if(c)for(l=0;l<c.length;l++){var o=c[l];o.handler&&o.handler.apply(o.target,i)}},e}(),t(l,"_handlers",{}),a=c))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/numScroll.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./numItem.ts"],(function(t){"use strict";var n,e,i,o,r,s,u,l,c,h,a,d,m,p,f;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Node,o=t.Prefab,r=t.Vec3,s=t.UITransformComponent,u=t.tween,l=t.Component},function(t){c=t.applyDecoratedDescriptor,h=t.inheritsLoose,a=t.initializerDefineProperty,d=t.assertThisInitialized,m=t.defineProperty},function(t){p=t.PoolManager},function(t){f=t.NumItem}],execute:function(){var g,_,N,C,v,y,w;n._RF.push({},"486dcmstW5IQqEUPDgOvllC","numScroll",void 0);var P=e.ccclass,I=e.property;t("NumScroll",(g=P("NumScroll"),_=I(i),N=I(o),g((y=c((v=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i))||this,a(d(n),"ndContent",y,d(n)),a(d(n),"pfNumItem",w,d(n)),m(d(n),"_tweenNum",null),m(d(n),"_unitHeight",0),m(d(n),"_targetNum",0),m(d(n),"_curNum",0),m(d(n),"_targetPos",new r),n}h(n,t);var e=n.prototype;return e.start=function(){},e.onDisable=function(){this._recycle()},e.startScroll=function(t,n,e){var i,o=this;this._curNum=1,this._targetNum=t;var r=p.instance.getNode(this.pfNumItem,this.ndContent),l=r.getComponent(f);null==l||l.init(this._curNum);var c=null===(i=r.getComponent(s))||void 0===i?void 0:i.contentSize.height;c&&(this._unitHeight=c),this.ndContent.setPosition(0,0,0);var h=10*(2+n)+this._targetNum+1,a=(h-.5)*this._unitHeight,d=.1*h;this._closeTween();var m=this.ndContent.position;this.ndContent.setPosition(m.x,.5*c,m.z),this._targetPos.set(m.x,a,m.z),this._tweenNum=u(this.ndContent).delay(.2*n).to(d,{position:this._targetPos},{easing:"quadInOut"}).call((function(){e&&e(),o._closeTween(),o._unitHeight=0})).start()},e._closeTween=function(){this._tweenNum&&(this._tweenNum.stop(),this._tweenNum=null)},e._recycle=function(){for(var t=this.ndContent.children.length-1;t>=0;t--)if(this.ndContent.children.length>=2){var n=this.ndContent.children[t-1];n&&p.instance.putNode(n)}this.ndContent.children[0].setPosition(0,0,0),this.ndContent.setPosition(0,0,0)},e.update=function(t){if(this.ndContent.children.length&&this._unitHeight&&this.ndContent.children[this.ndContent.children.length-1].worldPosition.y>=this.node.worldPosition.y){this._curNum+=1;var n=p.instance.getNode(this.pfNumItem,this.ndContent).getComponent(f);null==n||n.init(this._curNum)}},n}(l)).prototype,"ndContent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=c(v.prototype,"pfNumItem",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/choose.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./audioManager.ts","./constant.ts","./clientEvent.ts","./uiManager.ts"],(function(i){"use strict";var n,e,t,o,s,l,r,a,c,u,d,h,p,f,m,_,E,g,T;return{setters:[function(i){n=i.cclegacy,e=i._decorator,t=i.Prefab,o=i.SpriteFrame,s=i.SpriteComponent,l=i.AnimationComponent,r=i.find,a=i.ColliderComponent,c=i.Component},function(i){u=i.applyDecoratedDescriptor,d=i.inheritsLoose,h=i.initializerDefineProperty,p=i.assertThisInitialized,f=i.defineProperty},function(i){m=i.PoolManager},function(i){_=i.AudioManager},function(i){E=i.constant},function(i){g=i.ClientEvent},function(i){T=i.UIManager}],execute:function(){var A,b,M,S,y,C,L,O,N,D,I,w,v,B,F,z,U,k,P,R,G;n._RF.push({},"4daa4LnLMZJ97/46rPGrVpI","choose",void 0);var H=e.ccclass,V=e.property;i("Choose",(A=H("Choose"),b=V(t),M=V(t),S=V(o),y=V(o),C=V(s),L=V(l),O=V(l),N=V(l),D=V(l),A((v=u((w=function(i){function n(){for(var n,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n=i.call.apply(i,[this].concat(t))||this,h(p(n),"pfEndless",v,p(n)),h(p(n),"pfLimitTime",B,p(n)),h(p(n),"sfCloseAudio",F,p(n)),h(p(n),"sfOpenAudio",z,p(n)),h(p(n),"spIcon",U,p(n)),h(p(n),"aniChoose",k,p(n)),h(p(n),"aniEndless",P,p(n)),h(p(n),"aniLimitTime",R,p(n)),h(p(n),"aniSwitch",G,p(n)),f(p(n),"_ndEndless",null),f(p(n),"_ndLimitTime",null),f(p(n),"_colliderEndless",null),f(p(n),"_colliderLimitTime",null),f(p(n),"_isMusicOpen",!1),n}d(n,i);var e=n.prototype;return e.onEnable=function(){g.on(E.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},e.onDisable=function(){g.off(E.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},e.start=function(){},e.show=function(){var i=this;this.aniChoose.play(),this.aniChoose.once(l.EventType.FINISHED,(function(){i._ndEndless=m.instance.getNode(i.pfEndless,r("fightManager")),i._ndLimitTime=m.instance.getNode(i.pfLimitTime,r("fightManager")),i._ndEndless.setWorldPosition(-.65,.1,0),i._ndLimitTime.setWorldPosition(.65,.1,0),i._ndEndless.on("onTrigger",i._onTrigger,i),i._ndLimitTime.on("onTrigger",i._onTrigger,i),i._colliderEndless=i._ndEndless.getComponent(a),i._colliderLimitTime=i._ndLimitTime.getComponent(a),i._colliderLimitTime.enabled=!0,i._colliderEndless.enabled=!0})),this.aniLimitTime.play(),this.aniEndless.play(),this.aniSwitch.play(),_.instance.stopAll(),_.instance.playMusic(E.AUDIO_SOUND.MAIN_PANEL_BGM,!0),this._isMusicOpen=_.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},e.onBtnEndlessClick=function(){this._hideDialog((function(){T.instance.hideDialog("choose/choose"),g.dispatchEvent(E.EVENT_NAME.ON_GAME_START,E.GAME_MODE.ENDLESS)})),_.instance.playSound(E.AUDIO_SOUND.BTN,!1)},e.onBtnLimitTimeClick=function(){this._hideDialog((function(){T.instance.hideDialog("choose/choose"),g.dispatchEvent(E.EVENT_NAME.ON_GAME_START,E.GAME_MODE.LIMIT_TIME)})),_.instance.playSound(E.AUDIO_SOUND.BTN,!1)},e._hideDialog=function(i){this._ndEndless.off("onTrigger",this._onTrigger,this),this._ndLimitTime.off("onTrigger",this._onTrigger,this),m.instance.putNode(this._ndEndless),m.instance.putNode(this._ndLimitTime),this.aniChoose.play("chooseNewOut"),this.aniChoose.once(l.EventType.FINISHED,(function(){T.instance.hideDialog("choose/choose"),i()}))},e._onTrigger=function(i){var n=this,e=this._colliderEndless,t="chooseBtn07Click",o=this.aniEndless,s=this.onBtnEndlessClick.bind(this);i.name===this._ndLimitTime.name&&(t="chooseBtn08Click",o=this.aniLimitTime,s=this.onBtnLimitTimeClick.bind(this),e=this._colliderLimitTime),e.enabled&&(this._colliderLimitTime.enabled=!1,this._colliderEndless.enabled=!1,o.play(t),o.once(l.EventType.FINISHED,(function(){n.aniSwitch.play("btnAnimationOut")})),s())},e.onSwitchBtnClick=function(){this.aniSwitch.play("btnAnimationClick"),_.instance.playSound(E.AUDIO_SOUND.BTN,!1),this._isMusicOpen=!this._isMusicOpen,this._isMusicOpen?(this.spIcon.spriteFrame=this.sfOpenAudio,_.instance.openMusic(),_.instance.openSound()):(_.instance.closeMusic(),_.instance.closeSound(),this.spIcon.spriteFrame=this.sfCloseAudio)},e._refreshAudioState=function(){this._isMusicOpen=_.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},n}(c)).prototype,"pfEndless",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=u(w.prototype,"pfLimitTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=u(w.prototype,"sfCloseAudio",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=u(w.prototype,"sfOpenAudio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=u(w.prototype,"spIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=u(w.prototype,"aniChoose",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=u(w.prototype,"aniEndless",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=u(w.prototype,"aniLimitTime",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=u(w.prototype,"aniSwitch",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=w))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(E){"use strict";var _,T;return{setters:[function(E){_=E.cclegacy},function(E){T=E.defineProperty}],execute:function(){_._RF.push({},"56aa7GsRf1HKZBMRHWbrpU8","constant",void 0);var I=E("constant",(function(){}));T(I,"GAME_NAME","fruit"),T(I,"GAME_VERSION","1.0.1"),T(I,"GAME_FRAME",60),T(I,"GAME_INIT_FRAME",60),T(I,"GAME_NAME_CH","切水果"),T(I,"LOCAL_CACHE",{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"}),T(I,"ZORDER",{DIALOG:100,REWARD:900,WAITING:998,TIPS:999}),T(I,"AUDIO_SOUND",{GAME_BGM:"gameBGM",MAIN_PANEL_BGM:"mainPanelBGM",DURIAN_FLY:"durianFly",DURIAN_EXPLODE:"durianExplode",BOMB_FLY:"bombFly",BOMB_EXPLODE:"bombExplode",LAUNCH_FRUIT:"launchFruit",FRUIT_DROP:"fruitDrop",BTN:"btn",COUNTDOWN:"countdown",HIT:"hit",TIME_OVER:"timeOver",SETTLEMENT:"settlement",SETTLEMENT_SCORE:"settlementScore",LINE:"line",CUT_FRUIT_1:"cutFruit1",CUT_FRUIT_2:"cutFruit2"}),T(I,"GAME_MODE",{LIMIT_TIME:0,ENDLESS:1}),T(I,"LIMIT_TIME",60),T(I,"SCORE_TYPE",{NORMAL:0,HIT_COMBO:1,BOMB:2,PRECISE_HIT:3,HIT_SPECIAL:4,NO_HIT_FRUIT:5}),T(I,"DURIAN_FIRST_TIME",50),T(I,"DURIAN_NEXT_TIME",60),T(I,"FRUIT_TYPE",{NORMAL:0,BOMB:1,SPECIAL:2}),T(I,"TIP_TYPE",{MORE_HIT:0,ACCURATE_HIT:1,SPECIAL_HIT_EXPLODE:2,BOMB_HIT:3}),T(I,"GAME_DIFFICULTY",[5,15,35,60]),T(I,"DESIGN_RESOLUTION",{WIDTH:1280,HEIGHT:720}),T(I,"EVENT_NAME",{ON_GAME_START:"onGameStart",ON_GAME_END:"onGameEnd",ON_GAME_PAUSE:"onGamePause",ON_GAME_RESUME:"onGameResume",ON_GAME_STOP:"onGameStop",ON_GAME_SPEED_CHANGE:"onGameSpeedChange",ON_SETTLEMENT_SHOW:"onSettlementShow",ON_GET_SCORE:"onGetScore",ON_DURIAN_ENTER:"onDurianEnter",REFRESH_AUDIO_STATE:"refreshAudioState"}),T(I,"INTERVAL_PER_LAYER_DISTANCE",.4),T(I,"INTERVAL_PER_LAYER_FORCE",15),T(I,"LOGIN_TIME",0),_._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var o,e,n,i,r,a;return{setters:[function(t){o=t.cclegacy,e=t._decorator,n=t.instantiate,i=t.NodePool},function(t){r=t.defineProperty,a=t.createClass}],execute:function(){var c,s,l;o._RF.push({},"6556f9eR7lI/JstC+lShrGe","poolManager",void 0);var u=e.ccclass;e.property,t("PoolManager",u("PoolManager")((l=s=function(){function t(){r(this,"_dictPool",{}),r(this,"_dictPrefab",{})}var o=t.prototype;return o.getNode=function(t,o){var e=t.name;t.position||(e=t.data.name),this._dictPrefab[e]=t;var r=null;if(this._dictPool.hasOwnProperty(e)){var a=this._dictPool[e];r=a.size()>0?a.get():n(t)}else{var c=new i;this._dictPool[e]=c,r=n(t)}return r.parent=o,r.active=!0,r},o.putNode=function(t){if(t){var o=t.name,e=null;this._dictPool.hasOwnProperty(o)?e=this._dictPool[o]:(e=new i,this._dictPool[o]=e),e.put(t)}},o.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},o.prePool=function(t,o){var e=t.name,r=new i;this._dictPool[e]=r;for(var a=0;a<o;a++){var c=n(t);r.put(c)}},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(),r(s,"_instance",void 0),c=l))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/specialHit.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,i,n,s,o,a,l,c,r,h,p,u,w,_;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.LabelComponent,s=e.Vec3,o=e.math,a=e.tween,l=e.UITransformComponent,c=e.screen,r=e.Component},function(e){h=e.applyDecoratedDescriptor,p=e.inheritsLoose,u=e.initializerDefineProperty,w=e.assertThisInitialized,_=e.defineProperty}],execute:function(){var d,f,g,v,T;t._RF.push({},"6c32caYQA5IMKKRvDYX4Xhv","specialHit",void 0);var m=i.ccclass,y=i.property;e("SpecialHit",(d=m("SpecialHit"),f=y(n),d((T=h((v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,u(w(t),"lbHitNum",T,w(t)),_(w(t),"_tweenTip",null),_(w(t),"_scale1",new s),_(w(t),"_scale2",new s),_(w(t),"_scale3",new s),t}p(t,e);var i=t.prototype;return i.start=function(){},i.show=function(e){var t,i,n=this;if(this._closeTweenTip(),2===e){var s=o.randomRange(.6,1.5),r=o.randomRange(.6,1.5);this._scale1.set(s,s,s),this._scale2.set(r,r,r),this.lbHitNum.string=String(e),this._tweenTip=a(this.node).to(.05,{scale:this._scale1},{easing:"backOutIn"}).to(.05,{scale:this._scale2}).call((function(){n._closeTweenTip()})).start()}else{var h=o.randomRange(.6,1.5),p=o.randomRange(.6,1.5),u=o.randomRange(.6,1.5);this._scale1.set(h,h,h),this._scale2.set(p,p,p),this._scale3.set(u,u,u),this._tweenTip=a(this.node).to(.05,{scale:this._scale1}).call((function(){n._closeTweenTip(),n.lbHitNum.string=String(e),n._tweenTip=a(n.node).to(.05,{scale:n._scale2}).to(.05,{scale:n._scale3}).call((function(){n._closeTweenTip()})).start()})).start()}var w=this.node.getPosition(),_=null===(t=this.node.getComponent(l))||void 0===t?void 0:t.width,d=null===(i=this.node.getComponent(l))||void 0===i?void 0:i.height;if(Math.abs(w.x)+_/2>c.windowSize.width/2){var f=c.windowSize.width/2-_/2;w.x=w.x>0?f:-f}if(Math.abs(w.y)+d/2>c.windowSize.height/2){var g=c.windowSize.height/2-d/2;w.y=w.y>0?g:-g}this.node.setPosition(w)},i._closeTweenTip=function(){this._tweenTip&&(this._tweenTip.stop(),this._tweenTip=null)},t}(r)).prototype,"lbHitNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));t._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(r){"use strict";var n,t,e;return{setters:[function(r){n=r.cclegacy,t=r._decorator},function(r){e=r.defineProperty}],execute:function(){var u,i,o;n._RF.push({},"73cbciKsBZNKoNVI2fRrdw4","lodash",void 0);var f=t.ccclass;r("Lodash",f("Lodash")((o=i=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}(),e(i,"MAX_SAFE_INTEGER",9007199254740991),u=o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/login.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constant.ts"],(function(n){"use strict";var o,t,e,i,r,c,s,u;return{setters:[function(n){o=n.cclegacy,t=n._decorator,e=n.game,i=n.assetManager,r=n.director,c=n.Component},function(n){s=n.inheritsLoose},function(n){u=n.constant}],execute:function(){var a;o._RF.push({},"74fean0Wn1I8JsuDrqOYuhh","login",void 0);var l=t.ccclass;t.property,n("login",l("login")(a=function(n){function o(){return n.apply(this,arguments)||this}return s(o,n),o.prototype.start=function(){console.log("login"),e.addPersistRootNode(this.node),u.LOGIN_TIME=Date.now();var n=[];window.wx?(["resources","main"].forEach((function(o){var t=new Promise((function(n,t){i.loadBundle(o,(function(o,e){if(o)return t(o);n(e)}))}));n.push(t)})),Promise.all(n).then((function(){r.loadScene("main",(function(){}),(function(){}))}))):r.loadScene("main",(function(){}),(function(){}))},o}(c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(e){"use strict";var r,t;return{setters:[function(e){r=e.cclegacy,t=e._decorator}],execute:function(){var n;r._RF.push({},"79f3dEUTIpMcb18aZgP4HrM","util",void 0);var o=t.ccclass;e("Util",o("Util")(n=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var r={};for(var t in e.constructor===Array&&(r=[]),e)e.hasOwnProperty(t)&&(r[t]=this.clone(e[t]));return r},e.objectToArray=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r},e.arrayToObject=function(e,r){var t={};for(var n in e)e.hasOwnProperty(n)&&e[n][r]&&(t[e[n][r]]=e[n]);return t},e.getWeightRandIndex=function(e,r){for(var t=Math.floor(Math.random()*r),n=0,o=0;o<e.length&&!(t<(n+=e[o]));o++);return o},e.getRandomNFromM=function(e,r){for(var t=[],n=0,o=0;o<r&&!(o>=e+1);){n=this.getRandomInt(0,e);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},e.getRandomInt=function(e,r){var t=Math.random()*(r-e+1)+e;return Math.floor(t)},e.getStringLength=function(e){for(var r=e,t=0,n=0,o=r.length;n<o;n++){t+=r.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},e.isEmptyObject=function(e){var r=!0;if(e&&e.constructor===Object){for(var t in e)if(e.hasOwnProperty(t)){r=!1;break}}else r=!1;return r},e.isNewDay=function(e){var r=new Date(e),t=new Date,n=r.getYear(),o=r.getMonth(),a=r.getDate(),i=t.getYear(),f=t.getMonth(),u=t.getDate();return i>n||(f>o||u>a)},e.getPropertyCount=function(e){var r,t=0;for(r in e)e.hasOwnProperty(r)&&t++;return t},e.difference=function(e,r){var t=[];if(e.constructor!==Array||r.constructor!==Array)return t;for(var n=e.length,o=0;o<n;o++)-1===r.indexOf(e[o])&&t.push(e[o]);return t},e._stringToArray=function(e){var r,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",l=i+u+("(?:\\u200d(?:"+[c,g,d].join("|")+")"+i+u+")*"),s="(?:"+[c+f+"?",f,g,d,h].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+l,"g");return r=e,o.test(r)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,r){var t=new Date(e),n=new Date(r),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},e.getDeltaDays=function(e,r){e=new Date(e),r=new Date(r);var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),a=r.getFullYear(),i=r.getMonth()+1,f=r.getDate();e=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var u=(r=new Date(a+"/"+i+"/"+f+" GMT+0800").getTime())-e;return Math.floor(u/864e5)},e.getMin=function(e){var r=null;if(e.constructor===Array)for(var t=e.length,n=0;n<t;n++)r=0===n?Number(e[0]):r>Number(e[n])?Number(e[n]):r;return r},e.formatTwoDigits=function(e){return(Array(2).join(0)+e).slice(-2)},e.formatDate=function(e,r){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return r},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatName=function(e,r){r=r||6;var t=this._stringToArray(e),n="";if(t.length>r){for(var o=0;o<r;o++)n+=t[o];n+="..."}else n=e;return n},e.formatMoney=function(e){for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<r.length;n++){if(!(e>=1e4)){t=Math.floor(e)+r[n];break}e/=1e3}return""===t&&(t=Math.floor(e)+"U"),t},e.formatValue=function(e){for(var r=[],t="",n=0;n<26;n++)r.push(String.fromCharCode(97+n));for(var o=0;o<r.length;o++){if(!(e>=1e4)){t=Math.floor(e)+r[o];break}e/=1e3}return t},e.formatTimeForSecond=function(e,r){void 0===r&&(r=!1);var t="",n=e%60,o=Math.floor(e/60);o=o<0?0:o;var a=Math.floor(o/60),i=o%60;return a>0?(t+=a>9?a.toString():"0"+a,t+=":"):t+="00:",t+=i>9?i.toString():"0"+i,r||(t+=":",t+=n>9?n.toString():"0"+n),t},e.formatTimeForMillisecond=function(e){var r=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60);return{hour:Math.floor(e/1e3/60/60),minute:t,second:r}},e.rand=function(e){for(var r=this.clone(e),t=r.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=r[n];r[n]=r[t],r[t]=o}return r},e.getOffsetMimutes=function(e,r){var t=r-e;return Math.floor(t%36e5/6e4)},e.formatNumToFixed=function(e,r){return void 0===r&&(r=0),Number(e.toFixed(r))},e.lerp=function(e,r,t){void 0===t&&(t=.25);var n=r;return e>r?n=r+(e-r)*t:e<r&&(n=r-(r-e)*t),n},e.decrypt=function(e){var r=6;e.length%2==0&&(r=7);for(var t="",n=0;n<e.length-r;n+=2)t+=e[n+1],t+=e[n];return t+=e.slice(e.length-r+1),t=this._base64Decode(t)},e.encrypt=function(e){var r=this._base64encode(e),t=6;r.length%2==0&&(t=7);for(var n="",o=0;o<(r.length-t+1)/2;o++)n+=r[2*o+1],n+=r[2*o];return n+=r.slice(r.length-t+1)},e._base64encode=function(e){var r,t,n,o,a,i,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(e=this._utf8Encode(e);c<e.length;)o=(r=e.charCodeAt(c++))>>2,a=(3&r)<<4|(t=e.charCodeAt(c++))>>4,i=(15&t)<<2|(n=e.charCodeAt(c++))>>6,f=63&n,isNaN(t)?i=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(a)+u.charAt(i)+u.charAt(f);return h},e._utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?r+=String.fromCharCode(n):n>127&&n<2048?(r+=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128))}return r},e._utf8Decode=function(e){for(var r="",t=0,n=0,o=0,a=0;t<e.length;)(n=e.charCodeAt(t))<128?(r+=String.fromCharCode(n),t++):n>191&&n<224?(o=e.charCodeAt(t+1),r+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),a=e.charCodeAt(t+2),r+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return r},e._base64Decode=function(e){var r,t,n,o,a,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)r=f.indexOf(e.charAt(h++))<<2|(o=f.indexOf(e.charAt(h++)))>>4,t=(15&o)<<4|(a=f.indexOf(e.charAt(h++)))>>2,n=(3&a)<<6|(i=f.indexOf(e.charAt(h++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(t)),64!=i&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},e.checkIsLowPhone=function(){if(window.wx){var e=-1,r=window.wx.getSystemInfoSync();if(r.system.indexOf("iOS")>=0){for(var t=r.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8","iPhone 13"],f=0;f<n.length;f++)t.indexOf(n[f])>=0&&(e=5);for(var u=0;u<o.length;u++)t.indexOf(o[u])>=0&&(e=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(e=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(e=30)}else e=r.benchmarkLevel;return e<20}return!1},e.numToArray=function(e){for(var r=e+"",t=[],n=0;n<r.length;n++)t.push(parseInt(r[n]));return t},e}())||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/btnAdapter.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./audioManager.ts"],(function(e){"use strict";var t,n,i,r,o,a,c,l,u;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.ButtonComponent,r=e.Component},function(e){o=e.applyDecoratedDescriptor,a=e.inheritsLoose,c=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){u=e.AudioManager}],execute:function(){var p,s,d,f,b,m,y,v,S,h,g,k,C;t._RF.push({},"7c544DOUeVDCI5/EjSEfHhm","btnAdapter",void 0);var P=n.ccclass,A=n.property,w=n.menu,z=n.requireComponent,D=n.disallowMultiple;e("btnAdapter",(p=P("btnAdapter"),s=w("自定义组件/btnAdapter"),d=z(i),f=A({tooltip:"点击后是否播放点击音效"}),b=A({tooltip:"点击音效名"}),m=A({tooltip:"是否禁止快速二次点击"}),y=A({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效"}),p(v=s(v=d(v=D((h=o((S=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,c(l(t),"isPlaySound",h,l(t)),c(l(t),"clickSoundName",g,l(t)),c(l(t),"isPreventSecondClick",k,l(t)),c(l(t),"preventTime",C,l(t)),t}return a(t,e),t.prototype.start=function(){var e=this,t=this.node.getComponent(i);this.node.on("click",(function(){e.isPreventSecondClick&&(t.interactable=!1,e.scheduleOnce((function(){t.node&&(t.interactable=!0)}),e.preventTime)),e.isPlaySound&&u.instance.playSound(e.clickSoundName,!1)}))},t}(r)).prototype,"isPlaySound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=o(S.prototype,"clickSoundName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),k=o(S.prototype,"isPreventSecondClick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=o(S.prototype,"preventTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=S))||v)||v)||v)||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./wxAdapter.ts","./util.ts","./storageManager.ts","./audioManager.ts","./constant.ts","./uiManager.ts","./localConfig.ts","./LanguageData.ts","./fightManager.ts"],(function(n){"use strict";var t,i,o,e,a,s,r,c,u,l,f,d,g,p,h,m,y,M,w,_,v,D;return{setters:[function(n){t=n.cclegacy,i=n._decorator,o=n.Node,e=n.game,a=n.PhysicsSystem,s=n.sys,r=n.find,c=n.Component},function(n){u=n.applyDecoratedDescriptor,l=n.inheritsLoose,f=n.initializerDefineProperty,d=n.assertThisInitialized,g=n.defineProperty},function(n){p=n.wxAdapter},function(n){h=n.Util},function(n){m=n.StorageManager},function(n){y=n.AudioManager},function(n){M=n.constant},function(n){w=n.UIManager},function(n){_=n.LocalConfig},function(n){v=n.init},function(n){D=n.FightManager}],execute:function(){var A,R,I,L,G;t._RF.push({},"7e3c4eFIf5GSJUWiqOQRzRd","main",void 0);var N=i.ccclass,b=i.property;v("zh");n("Main",(A=N("Main"),R=b(o),A((G=u((L=function(n){function t(){for(var t,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return t=n.call.apply(n,[this].concat(o))||this,f(d(t),"audioNode",G,d(t)),g(d(t),"_minLoadDuration",4),t}l(t,n);var i=t.prototype;return i.start=function(){var n=this,t=m.instance.getGlobalData("frameRate");"number"!=typeof t&&(t=M.GAME_FRAME,window.wx&&h.checkIsLowPhone()&&(t=30),m.instance.setGlobalData("frameRate",t)),console.log("###frameRate",t),e.frameRate=t,a.instance.fixedTimeStep=1/t,window.cocosAnalytics&&window.cocosAnalytics.init({appID:"699861599",version:"1.0.0",storeID:s.platform.toString(),engine:"cocos"}),_.instance.loadConfig((function(){p.shareGame(M.GAME_NAME_CH,""),n._loadFinish()})),e.addPersistRootNode(this.audioNode),y.instance.init(this.audioNode)},i._loadFinish=function(){this.scheduleOnce((function(){w.instance.showDialog("choose/choose",[],(function(){var n;D.isGameInit=!0,null===(n=r("CanvasLogin"))||void 0===n||n.destroy(),console.log("###开屏界面展示时长",Date.now()-M.LOGIN_TIME)}))}),this._minLoadDuration)},t}(c)).prototype,"audioNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));t._RF.pop()}}}));

System.register("chunks:///_virtual/mouseControl.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./clientEvent.ts","./fruit.ts","./fightManager.ts"],(function(e){"use strict";var t,i,s,o,n,h,r,c,_,a,l,u,d,P,g,T,f,v,p,C,m,M,S,y,O;return{setters:[function(e){t=e.cclegacy,i=e._decorator,s=e.Vec3,o=e.geometry,n=e.Vec2,h=e.Color,r=e.GradientRange,c=e.find,_=e.Line,a=e.director,l=e.CameraComponent,u=e.Node,d=e.screen,P=e.PhysicsSystem,g=e.Component},function(e){T=e.inheritsLoose,f=e.defineProperty,v=e.assertThisInitialized},function(e){p=e.PoolManager},function(e){C=e.resourceUtil},function(e){m=e.AudioManager},function(e){M=e.constant},function(e){S=e.ClientEvent},function(e){y=e.Fruit},function(e){O=e.FightManager}],execute:function(){var w;t._RF.push({},"8925bmVgRpCS4e3E5PTELLZ","mouseControl",void 0);var E=i.ccclass,L=(i.property,new s),A=new o.Ray;e("MouseControl",E("MouseControl")(w=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,f(v(t),"_score",0),f(v(t),"_previousPos",new n),f(v(t),"_hitPoint",new s),f(v(t),"_needOneCut",!1),f(v(t),"_startTouchPos",null),f(v(t),"_endTouchPos",null),f(v(t),"_isMove",!1),f(v(t),"_curMoveDistance",0),f(v(t),"_isAchieveSpeed",!1),f(v(t),"_lineCom",null),f(v(t),"_linePosList",new Array),f(v(t),"_linePosIndex",0),f(v(t),"_trailAlpha",0),f(v(t),"_camera",null),f(v(t),"_lineCamera",null),f(v(t),"_startPos",new n),f(v(t),"_endPos",new n),f(v(t),"_zOrder",.3/999),f(v(t),"_offsetDir",new n),f(v(t),"_uiPos",new s),f(v(t),"_colorMax",new h(255,255,255,0)),f(v(t),"_colorMin",new h(0,0,0,0)),f(v(t),"_screenPos",new s),f(v(t),"_gradientRange",new r),f(v(t),"_offsetPoints",[new n(-.2,.2),new n(0,.2),new n(.2,.2),new n(-.2,0),new n(0,0),new n(.2,0),new n(-.2,-.2),new n(0,-.2),new n(.2,-.2)]),t}T(t,e);var i=t.prototype;return i.onLoad=function(){var e,t,i,s=this;C.loadEffectRes("line/line").then((function(e){var t=p.instance.getNode(e,c("lineCamera"));s._lineCom=t.getComponent(_)})),this._camera=null===(e=a.getScene())||void 0===e?void 0:e.getComponentInChildren(l),this._lineCamera=null===(t=a.getScene())||void 0===t||null===(i=t.getChildByName("lineCamera"))||void 0===i?void 0:i.getComponent(l)},i.start=function(){this.node.on(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},i._onTouchStart=function(e){var t=e.getTouches()[0].getLocation();this._startPos.set(t),this._endPos.set(t),this._linePosIndex=0,this._trailAlpha=1,this._updateTrailPoint(),this._resetScore(),this._needOneCut=!1,this._previousPos.set(t)},i._onTouchMove=function(e){var t=e.getTouches();null==this._startTouchPos?this._startTouchPos=t[0].getStartLocation():this._startTouchPos=t[0].getPreviousLocation(),this._endTouchPos=t[0].getLocation();var i=d.windowSize;this._endTouchPos.x>i.width||this._endTouchPos.x<0||this._endTouchPos.y<0||this._endTouchPos.y>i.height||(this._isMove=!0,n.subtract(this._offsetDir,this._endTouchPos,this._startTouchPos),this._curMoveDistance=this._offsetDir.length(),this._endPos.set(this._endTouchPos),n.distance(this._startPos,this._endPos)>=.1&&(this._trailAlpha=1,++this._linePosIndex,this._updateTrailPoint()),this._startPos.set(this._endTouchPos),!this._needOneCut&&this._offsetDir.length()>5&&(this._trigger(this._endTouchPos),this._previousPos.set(this._endTouchPos)))},i._onTouchEnd=function(e){this._endScore(),this._isMove=!1,this._curMoveDistance=0,this._startTouchPos=null,this._endTouchPos=null},i._onTouchCancel=function(e){this._endScore(),this._isMove=!1,this._curMoveDistance=0,this._startTouchPos=null,this._endTouchPos=null},i._endScore=function(){this._hitCombo(),this._score=0,this.unschedule(this._callbackFun),this.unschedule(this._resetScore)},i._resetScore=function(){this._hitCombo(),this._score=0},i._callbackFun=function(){this._hitCombo(),this._score=0},i._hitCombo=function(){this._score>=3&&(this._camera.convertToUINode(this._hitPoint,c("Canvas"),this._uiPos),S.dispatchEvent(M.EVENT_NAME.ON_GET_SCORE,this._score,M.SCORE_TYPE.HIT_COMBO,this._uiPos))},i._getScore=function(){this._score++,this.unschedule(this._callbackFun),this.unschedule(this._resetScore),this.scheduleOnce(this._callbackFun,.3),this.scheduleOnce(this._resetScore,1)},i._trigger=function(e){var t=this;this._offsetPoints.forEach((function(i){t._camera.screenPointToRay(e.x+i.x,e.y+i.y,A);P.instance.raycast(A,4294967295,100,!0)&&P.instance.raycastResults.forEach((function(i){var s,o,n=i.collider.node,h=null===(s=n.parent)||void 0===s||null===(o=s.parent)||void 0===o?void 0:o.getComponent(y);h&&h.fruitInfo.type===M.FRUIT_TYPE.SPECIAL?t._needOneCut||(t._needOneCut=!0,t.scheduleOnce((function(){t._needOneCut=!1}),.2),h.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos)):h&&h.colliderOne.enabled&&h.fruitInfo.type===M.FRUIT_TYPE.BOMB?(h.colliderOne.enabled=!1,h.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos)):h&&h.colliderOne.enabled?(h.colliderOne.enabled=!1,h.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos.clone()),t._getScore()):n.emit("onTrigger",n),t._hitPoint.set(n.worldPosition)}))}))},i._setLineColor=function(e){this._trailAlpha>0&&(this._gradientRange.mode=r.Mode.TwoColors,this._colorMax.set(255,255,255,255*this._trailAlpha),this._colorMin.set(0,0,0,255*this._trailAlpha),this._gradientRange.colorMax=this._colorMax,this._gradientRange.colorMin=this._colorMin,this._lineCom.color=this._gradientRange,this._trailAlpha-=6*e,this._trailAlpha<0&&(this._colorMax.set(255,255,255,0),this._colorMin.set(0,0,0,0),this._gradientRange.colorMax=this._colorMax,this._gradientRange.colorMin=this._colorMin,this._lineCom.color=this._gradientRange))},i._updateTrailPoint=function(){if(this._linePosIndex<10)for(var e=this._linePosIndex;e<10;++e)this._screenPos.set(this._endPos.x,this._endPos.y,this._zOrder),this._lineCamera.screenToWorld(this._screenPos,L),this._linePosList[e]?this._linePosList[e].set(L):this._linePosList[e]=s.clone(L);else{for(var t=0;t<9;++t)this._linePosList[t]=this._linePosList[t+1];this._screenPos.set(this._endPos.x,this._endPos.y,this._zOrder),this._lineCamera.screenToWorld(this._screenPos,L),this._linePosList[9]=s.clone(L)}},i._setLinePos=function(){this._lineCom.positions=this._linePosList},i.update=function(e){if(this._lineCom){if(this._setLinePos(),this._setLineColor(e),this._curMoveDistance/(60*e)>=10){if(this._isAchieveSpeed)return;this._isAchieveSpeed=!0}else this._isAchieveSpeed=!1;this._isMove&&this._isAchieveSpeed&&O.isGameInit&&m.instance.playSound(M.AUDIO_SOUND.LINE)}},t}(g))||w);t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,n,r,a,o,l,c,s,u,p;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Component},function(e){r=e.applyDecoratedDescriptor,a=e.inheritsLoose,o=e.defineProperty,l=e.assertThisInitialized,c=e.initializerDefineProperty},function(e){s=e.ready,u=e.init,p=e.t}],execute:function(){var d,f,h;t._RF.push({},"8d5b67KfodCyYHzy6SA6qCc","LocalizedLabel",void 0);var b=i.ccclass,y=i.property,L=i.executeInEditMode;e("LocalizedLabel",b("LocalizedLabel")(d=L((h=r((f=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,o(l(t),"label",null),c(l(t),"key",h,l(t)),t}a(t,e);var i=t.prototype;return i.onLoad=function(){s||u("zh"),this.fetchRender()},i.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},i.updateLabel=function(){this.label&&(this.label.string=p(this.key))},t}(n)).prototype,"key",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=f))||d)||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/fruit.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./util.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./effectManager.ts","./clientEvent.ts"],(function(e){"use strict";var i,t,o,n,s,r,a,c,h,l,_,d,g,u,p,f,P,N,m,E,v,S,y,T,O,C,I,R,M,F,A,w,U;return{setters:[function(e){i=e.cclegacy,t=e._decorator,o=e.Quat,n=e.Vec2,s=e.Vec3,r=e.Node,a=e.Prefab,c=e.ModelComponent,h=e.director,l=e.CameraComponent,_=e.RigidBodyComponent,d=e.ColliderComponent,g=e.screen,u=e.game,p=e.ParticleSystemComponent,f=e.find,P=e.AnimationComponent,N=e.AnimationClip,m=e.math,E=e.toDegree,v=e.Component},function(e){S=e.applyDecoratedDescriptor,y=e.inheritsLoose,T=e.initializerDefineProperty,O=e.assertThisInitialized,C=e.defineProperty},function(e){I=e.PoolManager},function(e){R=e.Util},function(e){M=e.resourceUtil},function(e){F=e.AudioManager},function(e){A=e.constant},function(e){w=e.EffectManager},function(e){U=e.ClientEvent}],execute:function(){var B,D,L,b,Y,G,H,x,V,z,W;i._RF.push({},"929b2OFUe5KerXUYCyETkcy","fruit",void 0);var X=t.ccclass,Z=t.property,k=new o,j=new n,K=new n,Q=new n,q=new s;e("Fruit",(B=X("Fruit"),D=Z(r),L=Z(r),b=Z(r),Y=Z(a),B((x=S((H=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i=e.call.apply(e,[this].concat(n))||this,T(O(i),"onePieceNode",x,O(i)),T(O(i),"leftPieceNode",V,O(i)),T(O(i),"rightPieceNode",z,O(i)),T(O(i),"effectPrefabArray",W,O(i)),C(O(i),"colliderOne",null),C(O(i),"fruitInfo",null),C(O(i),"isTriggered",!1),C(O(i),"_rigidBodyOne",null),C(O(i),"_rigidBodyLeft",null),C(O(i),"_rigidBodyRight",null),C(O(i),"_rotationOne",new o),C(O(i),"_rotationLeft",new o),C(O(i),"_rotationRight",new o),C(O(i),"_positionOne",new s),C(O(i),"_positionLeft",new s),C(O(i),"_positionRight",new s),C(O(i),"_scaleOne",new s),C(O(i),"_ndTrail",null),C(O(i),"_gameCamera",null),C(O(i),"_scriptFightManager",null),C(O(i),"_triggerNum",0),C(O(i),"_ndSuperCut",null),C(O(i),"_ndBoomEffect",null),C(O(i),"_timeTrigger",0),C(O(i),"_hitPoint",new s),C(O(i),"_endTouchPos",null),C(O(i),"_previousPos",null),C(O(i),"_scriptSpecialHit",null),C(O(i),"_screenPos",new s),C(O(i),"_forcePoint",new s(1,0,0)),C(O(i),"_forcePoint1",new s(1,0,0)),C(O(i),"_forcePoint2",new s(1,0,0)),C(O(i),"_force",new s),C(O(i),"_force1",new s),C(O(i),"_force2",new s),C(O(i),"_rotateCenterPoint",new s),C(O(i),"_forceOne",new s),C(O(i),"_forceLeft",new s),C(O(i),"_forceRight",new s),C(O(i),"_uiPoint1",new s),C(O(i),"_uiPoint2",new s),C(O(i),"_uiPoint3",new s),C(O(i),"_velocity",new s),C(O(i),"_scale",new s),i}y(i,e);var t=i.prototype;return t.onLoad=function(){var e;this.node.getComponentsInChildren(c).forEach((function(e){var i;null===(i=e.mesh)||void 0===i||i._nativeAsset.slice(0,0)})),this._gameCamera=null===(e=h.getScene())||void 0===e?void 0:e.getComponentInChildren(l),this.onePieceNode.active=!0,this.leftPieceNode&&(this.leftPieceNode.active=!1),this.rightPieceNode&&(this.rightPieceNode.active=!1),this._rigidBodyOne=this.onePieceNode.getComponent(_),this.leftPieceNode&&(this._rigidBodyLeft=this.leftPieceNode.getComponent(_)),this.rightPieceNode&&(this._rigidBodyRight=this.rightPieceNode.getComponent(_)),this.colliderOne=this.onePieceNode.getComponent(d),this._rotationOne=this.onePieceNode.getRotation(),this.leftPieceNode&&(this._rotationLeft=this.leftPieceNode.getRotation()),this.rightPieceNode&&(this._rotationRight=this.rightPieceNode.getRotation()),this._positionOne=this.onePieceNode.getPosition(),this.leftPieceNode&&(this._positionLeft=this.leftPieceNode.getPosition()),this.rightPieceNode&&(this._positionRight=this.rightPieceNode.getPosition()),this._scaleOne.set(this.node.scale)},t.onEnable=function(){this.isTriggered=!1,this.onePieceNode.on("onTrigger",this._onTrigger,this),U.on(A.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},t.onDisable=function(){this.onePieceNode.off("onTrigger",this._onTrigger,this),U.off(A.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},t.start=function(){},t.show=function(e,i,t){var o,n=this;this._scriptFightManager=e,this._triggerNum=0,this.fruitInfo=t,this.colliderOne.enabled=!0,this.onePieceNode.active=!0,this.leftPieceNode&&(this.leftPieceNode.active=!1),this.rightPieceNode&&(this.rightPieceNode.active=!1),this.onePieceNode.setRotation(this._rotationOne),this.leftPieceNode&&this.leftPieceNode.setRotation(this._rotationLeft),this.rightPieceNode&&this.rightPieceNode.setRotation(this._rotationRight),this.onePieceNode.setPosition(this._positionOne),this.leftPieceNode&&this.leftPieceNode.setPosition(this._positionLeft),this.rightPieceNode&&this.rightPieceNode.setPosition(this._positionRight),this._rigidBodyOne.clearState(),this.rightPieceNode&&this._rigidBodyRight.clearState(),this.leftPieceNode&&this._rigidBodyLeft.clearState();var s=(0-this.node.position.z)/A.INTERVAL_PER_LAYER_DISTANCE*this.fruitInfo.scale;this.node.setScale(this._scaleOne.x+s,this._scaleOne.y+s,this._scaleOne.z+s);var r=i.forceX;null===(o=this._gameCamera)||void 0===o||o.worldToScreen(this.node.position,this._screenPos),this._screenPos.x>g.windowSize.width/2&&(r=-r);var a=(0-this.node.position.z)/A.INTERVAL_PER_LAYER_DISTANCE*A.INTERVAL_PER_LAYER_FORCE+i.forceY+15,c=Number(u.frameRate)/A.GAME_INIT_FRAME;if(this._force.set(r*this._scriptFightManager.gameSpeed*c,a*this._scriptFightManager.gameSpeed*c,0),this._rigidBodyOne.applyForce(this._force,this._forcePoint),this.fruitInfo.type===A.FRUIT_TYPE.SPECIAL?(F.instance.playSound(A.AUDIO_SOUND.DURIAN_FLY,!0),F.instance.pauseSingleSound(A.AUDIO_SOUND.BOMB_FLY)):this.fruitInfo.type===A.FRUIT_TYPE.BOMB?F.instance.playSound(A.AUDIO_SOUND.BOMB_FLY,!0):F.instance.playSound(A.AUDIO_SOUND.LAUNCH_FRUIT,!1),this.fruitInfo.trailPath&&this.fruitInfo.type===A.FRUIT_TYPE.BOMB){var h=this.onePieceNode.getChildByName("detonator");M.getEffect(this.fruitInfo.trailPath,(function(e,i){n._ndTrail=I.instance.getNode(i,h);var t=n._ndTrail.getComponent(p);n.fruitInfo.type===A.FRUIT_TYPE.BOMB&&(t=n._ndTrail.getComponentInChildren(p)),t.simulationSpeed=n._scriptFightManager.gameSpeed,t.clear(),t.stop(),t.play(),n._ndTrail.setScale(Number(n.fruitInfo.trailScale),Number(n.fruitInfo.trailScale),Number(n.fruitInfo.trailScale))}))}},t._onTrigger=function(e,i,t){var o,n=this;if(this._scriptFightManager.isGameStart&&!this._scriptFightManager.isGamePause&&this.isTriggered&&!(this._gameCamera.worldToScreen(this.onePieceNode.worldPosition).y<-400))if(this._hitPoint=e,this._endTouchPos=i.clone(),this._previousPos=t.clone(),null===(o=this._gameCamera)||void 0===o||o.convertToUINode(this.onePieceNode.worldPosition,f("Canvas"),this._uiPoint1),this.fruitInfo.type===A.FRUIT_TYPE.SPECIAL&&this.onePieceNode.active){if(!this._triggerNum){var s,r,a,c,h;this._scriptFightManager.gameSpeed=.001,U.dispatchEvent(A.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._scriptFightManager.gameSpeed);var l=null===(s=this._gameCamera)||void 0===s||null===(r=s.node.parent)||void 0===r?void 0:r.worldPosition;null===(a=this._gameCamera)||void 0===a||null===(c=a.node.parent)||void 0===c||c.setWorldPosition(this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y,null==l?void 0:l.z);var _=null===(h=this._gameCamera)||void 0===h?void 0:h.node.getComponent(P);(null==_?void 0:_.getState("camera01")).wrapMode=N.WrapMode.Normal,null==_||_.play(),this._timeTrigger=5}if(this._triggerNum++,this._triggerNum>1){var d;this._scriptSpecialHit?this._scriptSpecialHit.show(this._triggerNum):this._playSpecialHit(this._uiPoint1);var g=null===(d=this._gameCamera)||void 0===d?void 0:d.node.getComponent(P);if(null==g||g.play("camera02"),this._triggerNum%10==0){var u,p,E,v,S=null===(u=this._gameCamera)||void 0===u||null===(p=u.node.parent)||void 0===p?void 0:p.worldPosition,y=S.x+(m.random()>.5?m.randomRange(.1,.2):-m.randomRange(.1,.2)),T=S.y+(m.random()>.5?m.randomRange(.1,.2):-m.randomRange(.1,.2));console.log("camera",y-S.x+":"+(T-S.y)),null===(E=this._gameCamera)||void 0===E||null===(v=E.node.parent)||void 0===v||v.setWorldPosition(y,T,S.z)}}this._playSuperCut(),U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,1,A.SCORE_TYPE.NORMAL,this._uiPoint1),F.instance.playSound(Math.random()>=.5?A.AUDIO_SOUND.CUT_FRUIT_1:A.AUDIO_SOUND.CUT_FRUIT_2,!1)}else this.fruitInfo.type===A.FRUIT_TYPE.BOMB?(this.colliderOne.enabled=!1,this._playBoom((function(){U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,-10,A.SCORE_TYPE.BOMB,n._uiPoint1)}))):(this.colliderOne.enabled=!1,U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,1,A.SCORE_TYPE.NORMAL,this._uiPoint1),this._hitCenter(i,t)&&U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,10,A.SCORE_TYPE.PRECISE_HIT,this._uiPoint1),this._playBoom(),F.instance.playSound(Math.random()>=.5?A.AUDIO_SOUND.CUT_FRUIT_1:A.AUDIO_SOUND.CUT_FRUIT_2,!1),this._explode(e,1))},t._offScreen=function(e){return e&&e.active&&this._gameCamera.worldToScreen(e.worldPosition).y<-200/720*g.windowSize.height},t._explode=function(e,i){I.instance.putNode(this._ndTrail),this.onePieceNode.active=!1,this.leftPieceNode.active=!0,this.rightPieceNode.active=!0,this.leftPieceNode.setPosition(this.onePieceNode.getPosition()),this.rightPieceNode.setPosition(this.onePieceNode.getPosition()),n.subtract(j,this._previousPos,this._endTouchPos);var t=new n(0,1).signAngle(n.normalize(j,j));o.rotateZ(k,this.leftPieceNode.rotation,t),q.set(j.x,j.y,0),this.leftPieceNode.setRotation(k),this.rightPieceNode.setRotation(k),s.multiplyScalar(this._scale,this._scaleOne,1/this.fruitInfo.scale);var r=Number(u.frameRate)/A.GAME_INIT_FRAME,a=m.toRadian(90);s.rotateZ(this._force1,q,this._rotateCenterPoint,a),s.multiplyScalar(this._force1,this._force1,R.getRandomInt(30,40)*this._scriptFightManager.gameSpeed*i*r),this._force1.z=0,this._forcePoint1.set(t>0?-this._scale.x:this._scale.x,t>0?-this._scale.y:this._scale.y,this._scale.z),this._rigidBodyLeft.applyForce(this._force1,this._forcePoint1),a=m.toRadian(-90),s.rotateZ(this._force2,q,this._rotateCenterPoint,a),s.multiplyScalar(this._force2,this._force2,R.getRandomInt(30,40)*this._scriptFightManager.gameSpeed*i*r),this._force2.z=0,this._forcePoint2.set(t>0?-this._scale.x:this._scale.x,t>0?-this._scale.y:this._scale.y,this._scale.z),this._rigidBodyRight.applyForce(this._force2,this._forcePoint2)},t._playBoom=function(e){var i=R.getRandomInt(0,this.effectPrefabArray.length-1);if(this._ndBoomEffect=I.instance.getNode(this.effectPrefabArray[i],this.node.parent),this.fruitInfo.type===A.FRUIT_TYPE.BOMB){var t;I.instance.putNode(this.node),I.instance.putNode(this._ndTrail);var o=null===(t=this._gameCamera)||void 0===t?void 0:t.node.getComponent(P);null==o||o.play("cameraBomb"),F.instance.stopSingleSound(A.AUDIO_SOUND.BOMB_FLY),F.instance.playSound(A.AUDIO_SOUND.BOMB_EXPLODE,!1)}if(this.leftPieceNode){var s=new n;n.subtract(s,this._endTouchPos,this._previousPos);var r=n.angle(new n(0,1),n.normalize(s,s)),a=m.toDegree(r),c=0;0===s.x?c=a:s.x>0&&s.y>0||s.x>0&&s.y<=0?c=-a:(s.x<0&&s.y>=0||s.x<0&&s.y<0)&&(c=a),this._ndBoomEffect.setRotationFromEuler(90,0,c)}var h=(3+this.onePieceNode.worldPosition.z)/3;this._ndBoomEffect.setWorldPosition(this.onePieceNode.worldPosition.x+1.7*h*this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y-.05*h*this.onePieceNode.worldPosition.y,-3);var l=this.fruitInfo.particleScale+1.5;if(this._ndBoomEffect.setScale(l,l,l),this.fruitInfo.type!==A.FRUIT_TYPE.BOMB){var _,d=null===(_=this._ndBoomEffect.getComponentInChildren(p))||void 0===_?void 0:_.node;d.setWorldPosition(this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y,this.onePieceNode.worldPosition.z);var g=this.fruitInfo.particleScale+(0-this.node.position.z)/1.5*this.fruitInfo.particleScale;d.setWorldScale(g,g,g)}w.instance.playEffect(this._ndBoomEffect,!0,!0,this._scriptFightManager.gameSpeed,!0,null,(function(){e&&e()}))},t._hitCenter=function(e,i){var t,o=null===(t=this._gameCamera)||void 0===t?void 0:t.worldToScreen(this.node.worldPosition);n.subtract(K,e,i),n.subtract(Q,e,new n(o.x,o.y));var s=n.angle(K,Q);return 180-Math.abs(E(s))<5},t._onGameSpeedChange=function(e,i,t,o,n){this.fruitInfo.type===A.FRUIT_TYPE.SPECIAL&&i||(this.onePieceNode.active&&i&&this.fruitInfo.type===A.FRUIT_TYPE.NORMAL?this._onTrigger(t,o,n):(this.rightPieceNode&&this.rightPieceNode.active&&this._setVelocity(this._rigidBodyRight,e),this.leftPieceNode&&this.leftPieceNode.active&&this._setVelocity(this._rigidBodyLeft,e),this.onePieceNode.active&&this._setVelocity(this._rigidBodyOne,e)))},t._setVelocity=function(e,i){e.getAngularVelocity(this._velocity),s.multiplyScalar(this._velocity,this._velocity,i),e.setAngularVelocity(this._velocity),e.getLinearVelocity(this._velocity),s.multiplyScalar(this._velocity,this._velocity,i),e.setLinearVelocity(this._velocity)},t._playSuperCut=function(){var e=this;M.getEffect("superCut/superCut",(function(i,t){I.instance.putNode(e._ndSuperCut);var o=I.instance.getNode(t,e.node.parent);o.setWorldPosition(e.onePieceNode.worldPosition);var n=o.getComponentInChildren(p);null==n||n.clear(),null==n||n.stop(),null==n||n.play();var s=o.getComponent(P);e._triggerNum<8?(null==s||s.play("superCut0"+e._triggerNum),null==s||s.once(P.EventType.FINISHED,(function(){I.instance.putNode(o)}))):(null==s||s.play("superCut08"),e._ndSuperCut=o)}))},t._playSuperBoom=function(){var e=this;M.getEffect("superBomb/superBombAll",(function(i,t){var o=I.instance.getNode(t,e.node.parent);o.setWorldPosition(e.onePieceNode.worldPosition),w.instance.playEffect(o,!0,!0,e._scriptFightManager.gameSpeed,!0,null,null)}))},t._playSpecialHit=function(e){var i=this;M.getUIPrefabRes("common/specialHit",(function(t,o){if(!i._scriptSpecialHit){var n=I.instance.getNode(o,f("Canvas"));n.setPosition(e),i._scriptSpecialHit=n.getComponent("SpecialHit")}i._scriptSpecialHit.show(i._triggerNum)}))},t.update=function(e){var i=this;if(this._offScreen(this.onePieceNode)||this._offScreen(this.rightPieceNode)&&this._offScreen(this.leftPieceNode)){var t;if(this._offScreen(this.onePieceNode)&&this.fruitInfo.type===A.FRUIT_TYPE.NORMAL&&1===this._scriptFightManager.gameSpeed)null===(t=this._gameCamera)||void 0===t||t.convertToUINode(this.onePieceNode.worldPosition,f("Canvas"),this._uiPoint2),U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,0,A.SCORE_TYPE.NO_HIT_FRUIT,this._uiPoint2),F.instance.playSound(A.AUDIO_SOUND.FRUIT_DROP,!1);I.instance.putNode(this.node),this._ndTrail&&this._ndTrail.parent&&I.instance.putNode(this._ndTrail),this.fruitInfo.type===A.FRUIT_TYPE.BOMB&&F.instance.stopSingleSound(A.AUDIO_SOUND.BOMB_FLY),this.fruitInfo.type===A.FRUIT_TYPE.SPECIAL&&F.instance.stopSingleSound(A.AUDIO_SOUND.DURIAN_FLY)}if(this.rightPieceNode&&this.rightPieceNode.active&&this._scriptFightManager){var o=-3*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(o=-10*this._scriptFightManager.gameSpeed),this._forceRight.set(0,o,0),this._rigidBodyRight.applyForce(this._forceRight)}if(this.leftPieceNode&&this.leftPieceNode.active&&this._scriptFightManager){var n=-3*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(n=-10*this._scriptFightManager.gameSpeed),this._forceLeft.set(0,n,0),this._rigidBodyLeft.applyForce(this._forceLeft)}if(this.onePieceNode.active&&this._scriptFightManager){var s=-2*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(s=-10*this._scriptFightManager.gameSpeed),this._forceOne.set(0,s,0),this._rigidBodyOne.applyForce(this._forceOne)}if(this._triggerNum>0&&!this._scriptFightManager.isGamePause&&(this._timeTrigger-=e,this._timeTrigger<0||this._scriptFightManager.isGameEnd)){var r;this._scriptSpecialHit&&(I.instance.putNode(this._scriptSpecialHit.node),this._scriptSpecialHit=null),this.colliderOne.enabled=!1;var a=this._triggerNum;this._triggerNum=0;var c=null===(r=this._gameCamera)||void 0===r?void 0:r.node.getComponent(P);null==c||c.stop(),(null==c?void 0:c.getState("camera01")).wrapMode=N.WrapMode.Reverse,null==c||c.play(),null==c||c.once(P.EventType.FINISHED,(function(){var e,t,o;null===(e=i._gameCamera)||void 0===e||null===(t=e.node.parent)||void 0===t||t.setWorldPosition(0,0,0),I.instance.putNode(i._ndSuperCut),i._scriptFightManager.gameSpeed=1,i._explode(i._hitPoint,10),U.dispatchEvent(A.EVENT_NAME.ON_GAME_SPEED_CHANGE,1e3,!0,i._hitPoint,i._endTouchPos,i._previousPos),i._playSuperBoom(),null===(o=i._gameCamera)||void 0===o||o.convertToUINode(i._hitPoint,f("Canvas"),i._uiPoint3),U.dispatchEvent(A.EVENT_NAME.ON_GET_SCORE,a,A.SCORE_TYPE.HIT_SPECIAL,i._uiPoint3),F.instance.stopSingleSound(A.AUDIO_SOUND.DURIAN_FLY),F.instance.playSound(A.AUDIO_SOUND.DURIAN_EXPLODE,!1),F.instance.resumeSingleSound(A.AUDIO_SOUND.BOMB_FLY)}))}},i}(v)).prototype,"onePieceNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=S(H.prototype,"leftPieceNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S(H.prototype,"rightPieceNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=S(H.prototype,"effectPrefabArray",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=H))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./csvManager.ts","./resourceUtil.ts"],(function(n){"use strict";var t,e,r,i,a,c,o;return{setters:[function(n){t=n.cclegacy,e=n._decorator,r=n.resources},function(n){i=n.defineProperty,a=n.createClass},function(n){c=n.CSVManager},function(n){o=n.resourceUtil}],execute:function(){var u,s,l;t._RF.push({},"967c1LcT4hFtIZ/lOytluxE","localConfig",void 0);var f=e.ccclass;e.property,n("LocalConfig",f("LocalConfig")((l=s=function(){function n(){i(this,"_csvManager",new c),i(this,"_callback",null),i(this,"_currentLoad",0),i(this,"_cntLoad",0)}var t=n.prototype;return t.loadConfig=function(n){this._callback=n,this._loadCSV()},t._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var r=e.filter((function(n){return".md"!==n._native}));n._cntLoad=r.length,r.length?r.forEach((function(t,e,r){o.getTextData(t.name,(function(e,r){n._csvManager.addTable(t.name,r),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},t.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},t.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},t.getTable=function(n){return this._csvManager.getTable(n)},t.getTableArr=function(n){return this._csvManager.getTableArr(n)},t.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},t.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},t.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},t.queryOneByCondition=function(n,t){return this._csvManager.queryOneByCondition(n,t)},t._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t.getAllFragmentByDifficulty=function(n){var t={},e=this.getTable("fragment");for(var r in e)if(e[r].difficulty===n){var i=r.substring(1,4);t[i]||(t[i]=[]),t[i].push(e[r])}return t},a(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}(),i(s,"_instance",void 0),u=l))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./storageManager.ts","./constant.ts"],(function(t){"use strict";var e,n,a,i,s,o,r,l,c;return{setters:[function(t){e=t.cclegacy,n=t._decorator,a=t.Component},function(t){i=t.defineProperty,s=t.inheritsLoose,o=t.assertThisInitialized,r=t.createClass},function(t){l=t.StorageManager},function(t){c=t.constant}],execute:function(){var f,h,y;e._RF.push({},"98a07c7835JX7ic6+JOh45v","playerData",void 0);var u=n.ccclass;n.property,t("playerData",u("playerData")((y=h=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(o(e),"userId",""),i(o(e),"playerInfo",null),i(o(e),"history",null),i(o(e),"settings",null),i(o(e),"isNewBee",!1),i(o(e),"dataVersion",""),i(o(e),"signInInfo",null),i(o(e),"isLoadFinished",!1),i(o(e),"serverTime",0),i(o(e),"localTime",0),i(o(e),"showCar",0),i(o(e),"isComeFromBalance",!1),e}s(e,t);var n=e.prototype;return n.loadGlobalCache=function(){var t=l.instance.getUserId();t&&(this.userId=t)},n.loadFromCache=function(){this.playerInfo=this.loadDataByKey(c.LOCAL_CACHE.PLAYER),this.history=this.loadDataByKey(c.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(c.LOCAL_CACHE.SETTINGS)},n.loadDataByKey=function(t){var e={},n=l.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},n.createPlayerInfo=function(t){if(this.playerInfo={},this.playerInfo.diamond=0,this.playerInfo.gold=0,this.playerInfo.heart=0,this.playerInfo.level=1,this.playerInfo.fishingLevel=1,this.playerInfo.gardenLevel=1,this.playerInfo.farmlandLevel=1,this.playerInfo.createDate=new Date,this.playerInfo.dictBuyTask={},this.playerInfo.signInInfo={},this.isNewBee=!0,t)for(var e in t)this.playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},n.generateRandomAccount=function(){this.userId=""+Date.now()+10,l.instance.setUserId(this.userId)},n.saveAccount=function(t){this.userId=t,l.instance.setUserId(t)},n.savePlayerInfoToLocalCache=function(){l.instance.setConfigData(c.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},n.saveAll=function(){l.instance.setConfigDataWithoutSave(c.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),l.instance.setConfigDataWithoutSave(c.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),l.instance.setConfigDataWithoutSave(c.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),l.instance.setConfigData(c.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},n.updatePlayerInfo=function(t,e){var n=!1;this.playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this.playerInfo[t]+=e,this.playerInfo[t]<0&&(this.playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this.playerInfo[t]=e)),n&&l.instance.setConfigData(c.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},n.clear=function(){this.playerInfo={},this.settings={},this.saveAll()},r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(a),i(h,"_instance",void 0),f=y))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/fightManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./util.ts","./resourceUtil.ts","./constant.ts","./clientEvent.ts","./uiManager.ts","./localConfig.ts","./fruit.ts"],(function(e){"use strict";var t,i,n,a,s,o,r,h,u,E,_,m,c,l,d,f,p,g,N,S,G,I,A,v,T;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.CameraComponent,a=e.Vec3,s=e.director,o=e.AnimationComponent,r=e.ParticleSystemComponent,h=e.AnimationClip,u=e.find,E=e.screen,_=e.math,m=e.Component},function(e){c=e.defineProperty,l=e.applyDecoratedDescriptor,d=e.inheritsLoose,f=e.initializerDefineProperty,p=e.assertThisInitialized},function(e){g=e.PoolManager},function(e){N=e.Util},function(e){S=e.resourceUtil},function(e){G=e.constant},function(e){I=e.ClientEvent},function(e){A=e.UIManager},function(e){v=e.LocalConfig},function(e){T=e.Fruit}],execute:function(){var M,C,D,O,P,y,R;t._RF.push({},"a324abLZD1K75gGUXdHlsNX","fightManager",void 0);var F=i.ccclass,V=i.property;e("FightManager",(M=F("FightManager"),C=V(n),M((R=y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,f(p(t),"cameraCom",P,p(t)),c(p(t),"isGameEnd",!1),c(p(t),"isGameStart",!1),c(p(t),"isGamePause",!1),c(p(t),"gameSpeed",1),c(p(t),"fruitZ",{}),c(p(t),"difficulty",0),c(p(t),"_updateInterval",0),c(p(t),"_queue",[]),c(p(t),"_currentFragmentInfo",null),c(p(t),"_gameType",G.GAME_MODE.ENDLESS),c(p(t),"_lastGameSpeed",0),c(p(t),"_updateTimer",0),c(p(t),"_screenPos",new a),t}d(t,e);var i=t.prototype;return i.start=function(){},i.onEnable=function(){I.on(G.EVENT_NAME.ON_GAME_START,this._gameStart,this),I.on(G.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),I.on(G.EVENT_NAME.ON_GAME_PAUSE,this._onGamePause,this),I.on(G.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),I.on(G.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this),I.on(G.EVENT_NAME.ON_DURIAN_ENTER,this._onDurianEnter,this),I.on(G.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},i.onDisable=function(){I.off(G.EVENT_NAME.ON_GAME_START,this._gameStart,this),I.off(G.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),I.off(G.EVENT_NAME.ON_GAME_PAUSE,this._onGamePause,this),I.off(G.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),I.off(G.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this),I.off(G.EVENT_NAME.ON_DURIAN_ENTER,this._onDurianEnter,this),I.off(G.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},i._gameStart=function(e){this._gameType=e,this.gameSpeed=1,this.isGamePause=!1,this.isGameStart=!0,this.isGameEnd=!1,A.instance.showDialog("fightUI/fightUI",[this,this._gameType]),this.difficulty=1,this._getFragment()},i._getFragment=function(){this._updateTimer=0,this._updateInterval=0;var e=v.instance.getAllFragmentByDifficulty(this.difficulty),t=Object.keys(e);if(!t.length)return this.difficulty--,void this._getFragment();var i=N.getRandomInt(0,t.length-1);this._queue=e[t[i]],this._queue.sort((function(e,t){return parseInt(e.ID)-parseInt(t.ID)})),this._getFragmentItem()},i._getFragmentItem=function(){this._currentFragmentInfo=this._queue[0],this._updateInterval=this._currentFragmentInfo.time},i._throwFragmentItem=function(){this._queue.length?(this._createItem(this._currentFragmentInfo),this._queue.shift(),this._queue.length&&this._getFragmentItem()):this._getFragment()},i._onGameEnd=function(){this.isGameStart=!1,this.isGamePause=!1,this.isGameEnd=!0},i._onGamePause=function(){var e,t,i=this;this.isGameStart&&(this.isGamePause=!0,this._lastGameSpeed=this.gameSpeed,this.gameSpeed=1e-8,I.dispatchEvent(G.EVENT_NAME.ON_GAME_SPEED_CHANGE,this.gameSpeed),(null===(e=s.getScene())||void 0===e?void 0:e.getComponentsInChildren(o)).forEach((function(e){e.pause()})),(null===(t=s.getScene())||void 0===t?void 0:t.getComponentsInChildren(r)).forEach((function(e){e.simulationSpeed=i.gameSpeed})))},i._onGameResume=function(){var e,t,i=this;this.isGamePause&&(this.isGamePause=!1,this.gameSpeed=this._lastGameSpeed,I.dispatchEvent(G.EVENT_NAME.ON_GAME_SPEED_CHANGE,1/this._lastGameSpeed),(null===(e=s.getScene())||void 0===e?void 0:e.getComponentsInChildren(o)).forEach((function(e){e.resume()})),(null===(t=s.getScene())||void 0===t?void 0:t.getComponentsInChildren(r)).forEach((function(e){e.simulationSpeed=i.gameSpeed})))},i._onGameStop=function(){var e,t,i;for(this._onGameResume(),this._onGameEnd();this.node.children.length;)g.instance.putNode(this.node.children[0]);if(null===(e=this.cameraCom)||void 0===e||null===(t=e.node.parent)||void 0===t||t.setWorldPosition(0,0,0),30===this.cameraCom.fov){var n,a=null===(n=this.cameraCom)||void 0===n?void 0:n.node.getComponent(o);null==a||a.stop(),(null==a?void 0:a.getState("camera01")).wrapMode=h.WrapMode.Reverse,null==a||a.play()}g.instance.putNode(null===(i=u("Canvas"))||void 0===i?void 0:i.getChildByName("specialHit"))},i._onDurianEnter=function(){var e={positionX:-500,forceX:100,forceY:160,fruitId:1007},t=E.windowSize.width/G.DESIGN_RESOLUTION.WIDTH>3?3:E.windowSize.width/G.DESIGN_RESOLUTION.WIDTH;e.forceX=100*t,_.random()>.5&&(e.positionX=G.DESIGN_RESOLUTION.WIDTH-e.positionX),this._createItem(e)},i._createItem=function(e){var t,i=this;if(-1===e.fruitId){var n=v.instance.queryAll("fruit","type",0),s=N.getRandomInt(0,Object.keys(n).length-1);t=n[Object.keys(n)[s]]}else t=v.instance.queryByID("fruit",e.fruitId);for(var o=G.DESIGN_RESOLUTION.WIDTH/E.windowSize.width,r=e.positionX/o,h=0;!(void 0===this.fruitZ[h]||null==this.fruitZ[h]||this.fruitZ[h].name&&null===this.fruitZ[h].parent);)h+=G.INTERVAL_PER_LAYER_DISTANCE;t.type===G.FRUIT_TYPE.SPECIAL&&(h=-G.INTERVAL_PER_LAYER_DISTANCE),this._screenPos.set(r,-100/o,(1+h)/(this.cameraCom.far-this.cameraCom.near));var u=new a;this.cameraCom.screenToWorld(this._screenPos,u),this.fruitZ[h]=1,S.getFruit(t.prefab,(function(n,a){var s=g.instance.getNode(a,i.node);i.fruitZ[h]=s,s.setWorldPosition(u),s.getComponent(T).show(i,e,t)}))},i._onGameSpeedChange=function(e){this.node.getComponentsInChildren(o).forEach((function(t){var i,n=null==t||null===(i=t.defaultClip)||void 0===i?void 0:i.name;n&&(t.getState(n).speed=e)})),this.node.getComponentsInChildren(r).forEach((function(t){t.simulationSpeed=e}))},i.update=function(e){this.isGameStart?this.isGamePause||(this._updateTimer+=e*this.gameSpeed,this._updateTimer<this._updateInterval||this._throwFragmentItem()):this.isGameEnd&&this.node.children.length<1&&(this.isGameEnd=!1,I.dispatchEvent(G.EVENT_NAME.ON_SETTLEMENT_SHOW))},t}(m),c(y,"isGameInit",!1),P=l((O=R).prototype,"cameraCom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=O))||D));t._RF.pop()}}}));

System.register("chunks:///_virtual/fightTip.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./constant.ts"],(function(t){"use strict";var e,i,n,o,s,r,a,c,l,h,u,p,d;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Vec3,o=t.LabelComponent,s=t.UITransformComponent,r=t.screen,a=t.tween,c=t.Component},function(t){l=t.inheritsLoose,h=t.defineProperty,u=t.assertThisInitialized},function(t){p=t.PoolManager},function(t){d=t.constant}],execute:function(){var _;e._RF.push({},"a40a7IoP99BQpnL1VHiLpfx","fightTip",void 0);var g=i.ccclass;i.property,t("FightTip",g("FightTip")(_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,h(u(e),"_tweenTip",null),h(u(e),"_costTime",1.5),h(u(e),"_oriEuler",new n),h(u(e),"_scale1",new n),h(u(e),"_scale2",new n),e}l(e,t);var i=e.prototype;return i.start=function(){},i.show=function(t,e,i){var n,c,l,h=this;this._closeTweenTip(),this._oriEuler.set(0,0,0),this.node.eulerAngles=this._oriEuler,this.node.setScale(.7,.7,.7);var u,_,g,w,v=this.node.children;(v.forEach((function(t){t.active=!1})),v[t].active=!0,(u=null===(n=v[t].getChildByName("hitNum"))||void 0===n?void 0:n.getComponent(o))&&(u.string=String(e)),t===d.TIP_TYPE.SPECIAL_HIT_EXPLODE)&&((_=null===(g=v[t].getChildByName("score"))||void 0===g||null===(w=g.getChildByName("scoreNum"))||void 0===w?void 0:w.getComponent(o))&&(_.string=String(e)));var T=this.node.getPosition(),f=null===(c=v[t].getComponent(s))||void 0===c?void 0:c.width,m=null===(l=v[t].getComponent(s))||void 0===l?void 0:l.height;if(Math.abs(T.x)+f/2>r.windowSize.width/2){var y=r.windowSize.width/2-f/2;T.x=T.x>0?y:-y}if(Math.abs(T.y)+m/2>r.windowSize.height/2){var C=r.windowSize.height/2-m/2;T.y=T.y>0?C:-C}this.node.setPosition(T),this._scale1.set(1,1,1),this._scale2.set(1,1,1),this._tweenTip=a(this.node).to(.4*this._costTime,{scale:this._scale1},{easing:"backOutIn"}).to(.2*this._costTime,{scale:this._scale2}).call((function(){h._closeTweenTip(),p.instance.putNode(h.node),i&&i()})).start()},i._closeTweenTip=function(){this._tweenTip&&(this._tweenTip.stop(),this._tweenTip=null)},e}(c))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/pause.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./audioManager.ts","./constant.ts","./clientEvent.ts","./uiManager.ts"],(function(n){"use strict";var t,e,a,c,i,s,o,u;return{setters:[function(n){t=n.cclegacy,e=n._decorator,a=n.Component},function(n){c=n.inheritsLoose},function(n){i=n.AudioManager},function(n){s=n.constant},function(n){o=n.ClientEvent},function(n){u=n.UIManager}],execute:function(){var r;t._RF.push({},"a4c06Cq159Gm6OXSOlc7geL","pause",void 0);var p=e.ccclass;e.property,n("Pause",p("Pause")(r=function(n){function t(){return n.apply(this,arguments)||this}c(t,n);var e=t.prototype;return e.start=function(){},e.show=function(){i.instance.stopAll()},e.onBtnBackClick=function(){o.dispatchEvent(s.EVENT_NAME.ON_GAME_STOP),u.instance.hideDialog("pause/pause")},e.onBtnPlayClick=function(){o.dispatchEvent(s.EVENT_NAME.ON_GAME_RESUME),u.instance.hideDialog("pause/pause")},t}(a))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){"use strict";var t,a;return{setters:[function(e){t=e.cclegacy,a=e.director}],execute:function(){e({init:function(t){e("ready",!0),n=e("_language",t)},t:function(e){if(!window.languages)return e;for(var t=e.split("."),a=window.languages[n],r=0;r<t.length;r++)if(!(a=a[t[r]]))return"";return a||""},updateSceneRenderers:function(){for(var e=a.getScene().children,t=[],n=0;n<e.length;++n){var r=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,r)}for(var i=0;i<t.length;++i){var o=t[i];o.node.active&&o.updateLabel()}for(var u=[],c=0;c<e.length;++c){var g=e[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(u,g)}for(var l=0;l<u.length;++l){var p=u[l];p.node.active&&p.updateSprite()}}}),t._RF.push({},"a72c7tbaiFB7JT8eYWzAnFe","LanguageData",void 0);var n=e("_language","zh");e("ready",!1);t._RF.pop()}}}));

System.register("chunks:///_virtual/bg.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts"],(function(e){"use strict";var t,o,n,r,i,c,s,a,u,l;return{setters:[function(e){t=e.cclegacy,o=e._decorator,n=e.Node,r=e.instantiate,i=e.Component},function(e){c=e.applyDecoratedDescriptor,s=e.inheritsLoose,a=e.initializerDefineProperty,u=e.assertThisInitialized},function(e){l=e.resourceUtil}],execute:function(){var p,f,h,g,d;t._RF.push({},"adbd78xyv1PoKOhimL/au7s","bg",void 0);var y=o.ccclass,b=o.property;e("bg",(p=y("bg"),f=b(n),p((d=c((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,a(u(t),"ndChooseBg",d,u(t)),t}return s(t,e),t.prototype.start=function(){var e=this;l.loadEffectRes("chooseBgBox/chooseBgBox").then((function(t){r(t).parent=e.node,e.ndChooseBg.active=!1}))},t}(i)).prototype,"ndChooseBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));t._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var t,n,i,r,o,s,a,f,c;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.resources,r=e.error,o=e.Prefab,s=e.instantiate,a=e.find,f=e.SpriteFrame,c=e.isValid}],execute:function(){var u;t._RF.push({},"ae83aVxL39PnZdrO90+LiwZ","resourceUtil",void 0);var l=n.ccclass;e("resourceUtil",l("resourceUtil")(u=function(){function e(){}return e.loadRes=function(e,t,n){i.load(e,(function(e,t){if(e)return r(e.message||e),void n(e,t);n(null,t)}))},e.loadEffectRes=function(e){var t=this;return new Promise((function(n,i){t.loadRes("prefab/effect/"+e,o,(function(e,t){e||n&&n(t)}))}))},e.loadModelRes=function(e){var t=this;return new Promise((function(n,i){t.loadRes("prefab/model/"+e,o,(function(e,t){e||n&&n(t)}))}))},e.getMap=function(e,t){var n="map";n+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+n,null,(function(e,n){if(e)t(e,n);else{var i="";if(n._file){window.LZString&&(i=window.LZString.decompressFromEncodedURIComponent(n._file));var r=JSON.parse(i);t(null,r)}else if(n.text){window.LZString&&(i=window.LZString.decompressFromEncodedURIComponent(n.text));var o=JSON.parse(i);t(null,o)}else n.json?t(null,n.json):t("failed")}}))},e.getMapObj=function(e,t,n,r){for(var s=[],a=0;a<t.length;a++)s.push("map/"+e+"/"+t[a]);i.load(s,o,n,r)},e.getUIPrefabRes=function(e,t){void 0===t&&(t=function(){}),this.loadRes("prefab/ui/"+e,o,t)},e.createUI=function(e,t,n){this.getUIPrefabRes(e,(function(e,i){if(!e){var r=s(i);r.setPosition(0,0,0),n||(n=a("Canvas")),n.addChild(r),t&&t(null,r)}}))},e.getTextData=function(e,t){this.loadRes("datas/"+e,null,(function(e,n){if(e)r(e.message||e);else{var i=n.text;t(e,i)}}))},e.setSpriteFrame=function(e,t,n){this.loadRes(e+"/spriteFrame",f,(function(i,r){if(i)return console.error("set sprite frame failed! err:",e,i),void n(i);t&&c(t)&&(t.spriteFrame=r,n(null))}))},e.getEffect=function(e,t){this.loadRes("prefab/effect/"+e,o,t)},e.getFruit=function(e,t){var n="prefab/fruit/"+e;this.loadRes(n,o,t)},e}())||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./fightTip.ts"],(function(n){"use strict";var e,t,i,o,a,r,l,c,s,u,f,d,p,v;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.AnimationComponent,o=n.ParticleSystemComponent,a=n.isValid,r=n.AnimationClip,l=n.find,c=n.Node,s=n.director},function(n){u=n.defineProperty,f=n.createClass},function(n){d=n.PoolManager},function(n){p=n.resourceUtil},function(n){v=n.FightTip}],execute:function(){var h,g,m;e._RF.push({},"c0e274c/hdPhLTY9VN2npxM","effectManager",void 0);var C=t.ccclass;t.property,n("EffectManager",C("EffectManager")((m=g=function(){function n(){u(this,"_ndParent",null)}var e=n.prototype;return e.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(i).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(o)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(t))},e.resetEffectState=function(n,e){if(a(n)){var t=n.getComponentsInChildren(o);t.length&&t.forEach((function(n){null==n||n.clear(),null==n||n.stop()}));var r=n.getComponentsInChildren(i);r.length&&r.forEach((function(n,t){var i;if(null==n||null===(i=n.defaultClip)||void 0===i?void 0:i.name){var o=null;e&&(o=n.getState(e)),o||(o=n.getState(n.defaultClip.name)),o&&(o.stop(),o.time=0,o.sample())}}))}},e.loadAndPlayEffect=function(n,e,t,i,o,a,r,l,c,s,u,f){var v=this;void 0===n&&(n=!0),void 0===i&&(i=1),void 0===r&&(r=!0),void 0===l&&(l=!0),void 0===c&&(c=1),void 0===s&&(s=!1),void 0===u&&(u=0),(!n||e&&e.parent)&&p.loadEffectRes(t).then((function(t){var p=n?e:v.ndParent,h=d.instance.getNode(t,p);n?(h.setScale(i,i,i),o&&h.setPosition(o),a&&(h.eulerAngles=a)):(h.setWorldScale(i,i,i),o&&h.setWorldPosition(o),a&&h.setWorldRotationFromEuler(a.x,a.y,a.z)),v.playEffect(h,r,l,c,s,u,f)}))},e.playEffect=function(n,e,t,i,o,a,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=1),void 0===o&&(o=!1);var l=0;if(e){var c=this.playAnimation(n,i,null,!1,!1,null,null);l=c>l?c:l}if(t){var s=this.playParticle(n,i,!1,null,null);l=s>l?s:l}l=a&&a>0?a:l,(r||o)&&setTimeout((function(){n.parent&&(r&&r(),o?d.instance.putNode(n):n.destroy())}),1e3*l)},e.playAnimation=function(n,e,t,o,a,l,c){void 0===e&&(e=1),void 0===o&&(o=!1),void 0===a&&(a=!1);var s=0,u=null;n.active||(n.active=!0);var f=n.getComponentsInChildren(i);if(f.length){f.forEach((function(n,i){var a,l=t||(null==n||null===(a=n.defaultClip)||void 0===a?void 0:a.name);if(l&&(u=n.getState(l))){u.time=0,u.speed=e,u.sample();var c=u.duration;s=c>s?c:s,u.wrapMode=o?r.WrapMode.Loop:r.WrapMode.Normal,null==n||n.play(l)}})),s=l&&l>0?l:s;var p=function(){n&&n.parent&&(c&&c(),a&&d.instance.putNode(n))};return(c||a)&&(1===f.length?f[0].once(i.EventType.FINISHED,(function(){p()})):setTimeout((function(){p()}),1e3*s)),s}return console.warn("###"+n.name+"节点下没有动画特效"),0},e.playParticle=function(n,e,t,i,a){void 0===e&&(e=1),void 0===t&&(t=!1);var r=0;n.active||(n.active=!0);var l=n.getComponentsInChildren(o);return l.length?(l.forEach((function(n){n.simulationSpeed=e,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var t=n.duration;r=t>r?t:r})),r=i&&i>0?i:r,(a||t)&&setTimeout((function(){n&&n.parent&&(a&&a(),t&&d.instance.putNode(n))}),1e3*r),r):(console.warn("###"+n.name+"节点下没有粒子特效"),0)},e.showFightTips=function(n,e,t,i){p.getUIPrefabRes("common/fightTip",(function(o,a){if(!o){var r=d.instance.getNode(a,l("Canvas"));r.setPosition(t),r.getComponent(v).show(n,e,i)}}))},f(n,[{key:"ndParent",get:function(){if(!this._ndParent){var n,e=l("effectManager");if(e)this._ndParent=e;else this._ndParent=new c("effectManager"),null==s||null===(n=s.getScene())||void 0===n||n.addChild(this._ndParent)}return this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}(),u(g,"_instance",void 0),h=m))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/settlement.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./util.ts","./audioManager.ts","./constant.ts","./clientEvent.ts","./uiManager.ts","./numScroll.ts"],(function(i){"use strict";var e,n,t,o,l,s,r,a,c,u,d,h,p,m,f,_,T,g,S,E,b,N;return{setters:[function(i){e=i.cclegacy,n=i._decorator,t=i.AnimationComponent,o=i.Node,l=i.Prefab,s=i.SpriteFrame,r=i.SpriteComponent,a=i.find,c=i.ColliderComponent,u=i.Component},function(i){d=i.applyDecoratedDescriptor,h=i.inheritsLoose,p=i.initializerDefineProperty,m=i.assertThisInitialized,f=i.defineProperty},function(i){_=i.PoolManager},function(i){T=i.Util},function(i){g=i.AudioManager},function(i){S=i.constant},function(i){E=i.ClientEvent},function(i){b=i.UIManager},function(i){N=i.NumScroll}],execute:function(){var y,A,C,O,v,M,L,I,w,D,B,z,U,F,P,k,R,V,H,G,W,j,x,Y,q,J,K,Q,X,Z,$,ii,ei,ni,ti;e._RF.push({},"c54afsh9MlE87keVAdYBwTV","settlement",void 0);var oi=n.ccclass,li=n.property;i("Settlement",(y=oi("Settlement"),A=li(t),C=li(o),O=li(o),v=li(l),M=li(o),L=li(o),I=li(o),w=li(l),D=li(l),B=li(s),z=li(s),U=li(r),F=li(t),P=li(t),k=li(t),R=li(t),y((G=d((H=function(i){function e(){for(var e,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return e=i.call.apply(i,[this].concat(t))||this,p(m(e),"aniScore",G,m(e)),p(m(e),"ndScore",W,m(e)),p(m(e),"ndNumParent",j,m(e)),p(m(e),"pfNumScroll",x,m(e)),p(m(e),"ndBtnEndLess",Y,m(e)),p(m(e),"ndBtnLimitTime",q,m(e)),p(m(e),"ndTitle",J,m(e)),p(m(e),"pfEndless",K,m(e)),p(m(e),"pfLimitTime",Q,m(e)),p(m(e),"sfCloseAudio",X,m(e)),p(m(e),"sfOpenAudio",Z,m(e)),p(m(e),"spIcon",$,m(e)),p(m(e),"aniChoose",ii,m(e)),p(m(e),"aniEndless",ei,m(e)),p(m(e),"aniLimitTime",ni,m(e)),p(m(e),"aniSwitch",ti,m(e)),f(m(e),"_ndEndless",null),f(m(e),"_ndLimitTime",null),f(m(e),"_colliderLimitTime",null),f(m(e),"_endlessCollider",null),f(m(e),"_scrollOverTimes",0),f(m(e),"_score",0),f(m(e),"_isCollider",!1),f(m(e),"_isMusicOpen",!1),e}h(e,i);var n=e.prototype;return n.onEnable=function(){E.on(S.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},n.onDisable=function(){E.off(S.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},n.start=function(){},n.show=function(i){this._score=i,this.aniScore.stop(),g.instance.stopAll(),g.instance.playSound(S.AUDIO_SOUND.SETTLEMENT),g.instance.playSound(S.AUDIO_SOUND.SETTLEMENT_SCORE,!0),this.aniSwitch.play(),this.ndBtnEndLess.active=!1,this.ndBtnLimitTime.active=!1,this.ndTitle.active=!1,this.ndScore.setScale(1.5,1.5,1.5),this.ndScore.setPosition(0,0,0),this._showScroll(),this._isMusicOpen=g.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},n._clearFightManagerNode=function(){this._ndEndless.off("onTrigger",this._onTrigger,this),this._ndLimitTime.off("onTrigger",this._onTrigger,this),_.instance.putNode(this._ndEndless),_.instance.putNode(this._ndLimitTime)},n.onBtnEndlessClick=function(){this._clearFightManagerNode(),E.dispatchEvent(S.EVENT_NAME.ON_GAME_START,S.GAME_MODE.ENDLESS),b.instance.hideDialog("settlement/settlement"),g.instance.playSound(S.AUDIO_SOUND.BTN,!1)},n.onBtnLimitTimeClick=function(){this._clearFightManagerNode(),E.dispatchEvent(S.EVENT_NAME.ON_GAME_START,S.GAME_MODE.LIMIT_TIME),b.instance.hideDialog("settlement/settlement"),g.instance.playSound(S.AUDIO_SOUND.BTN,!1)},n._showScroll=function(){var i=this;this._scrollOverTimes=0,this.ndNumParent.children.forEach((function(i){i&&(i.active=!1)}));for(var e=T.numToArray(this._score).reverse(),n=0;n<e.length;n++){var t=void 0;(t=n>=this.ndNumParent.children.length?_.instance.getNode(this.pfNumScroll,this.ndNumParent):this.ndNumParent.children[n]).active=!0;var o=t.getComponent(N),l=e[n];null==o||o.startScroll(l,n,(function(){i._checkScrollOver()}))}},n._checkScrollOver=function(){var i=this;this._scrollOverTimes+=1,this._scrollOverTimes>=String(this._score).length&&(this.aniScore.play(),this.aniScore.once(t.EventType.FINISHED,(function(){var e;i._ndEndless=_.instance.getNode(i.pfEndless,a("fightManager")),i._ndLimitTime=_.instance.getNode(i.pfLimitTime,a("fightManager")),i._ndEndless.setWorldPosition(-.7,-.65,-.7),i._ndLimitTime.setWorldPosition(.7,-.65,-.7),i._ndEndless.on("onTrigger",i._onTrigger,i),i._ndLimitTime.on("onTrigger",i._onTrigger,i),i._endlessCollider=i._ndEndless.getComponent(c),i._colliderLimitTime=i._ndLimitTime.getComponent(c),i._colliderLimitTime.enabled=!0,i._endlessCollider.enabled=!0,i._isCollider=!1;var n=i.aniChoose.getState("chooseSettlementIn");n.time=0,n.sample(),n.stop(),i.aniChoose.play("chooseSettlementIn"),i.aniEndless.play("chooseBtn07Idle"),i.aniLimitTime.play("chooseBtn08Idle"),i.ndBtnEndLess.active=!0,i.ndBtnLimitTime.active=!0,null===(e=i.ndTitle.getComponentInChildren(t))||void 0===e||e.play(),i.ndTitle.active=!0,g.instance.stopSingleSound(S.AUDIO_SOUND.SETTLEMENT_SCORE)})))},n._onTrigger=function(i){var e;if(!this._isCollider){this._isCollider=!0;var n=this._endlessCollider,o="chooseBtn07Click",l=this.aniEndless,s=this.onBtnEndlessClick.bind(this);i.name===this._ndLimitTime.name&&(o="chooseBtn08Click",l=this.aniLimitTime,s=this.onBtnLimitTimeClick.bind(this),n=this._colliderLimitTime),n.enabled&&(this._colliderLimitTime.enabled=!1,this._endlessCollider.enabled=!1,l.play(o),this.aniSwitch.play("btnAnimationOut"),null===(e=this.ndTitle.getComponentInChildren(t))||void 0===e||e.play("settlementNewWinOut"),this.aniChoose.play("chooseSettlementOut"),this.aniChoose.once(t.EventType.FINISHED,(function(){s()})))}},n.onSwitchBtnClick=function(){g.instance.playSound(S.AUDIO_SOUND.BTN,!1),this.aniSwitch.play("btnAnimationClick"),this._isMusicOpen=!this._isMusicOpen,this._isMusicOpen?(this.spIcon.spriteFrame=this.sfOpenAudio,g.instance.openMusic(),g.instance.openSound()):(g.instance.closeMusic(),g.instance.closeSound(),this.spIcon.spriteFrame=this.sfCloseAudio)},n._refreshAudioState=function(){this._isMusicOpen=g.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},e}(u)).prototype,"aniScore",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=d(H.prototype,"ndScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=d(H.prototype,"ndNumParent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=d(H.prototype,"pfNumScroll",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=d(H.prototype,"ndBtnEndLess",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=d(H.prototype,"ndBtnLimitTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=d(H.prototype,"ndTitle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=d(H.prototype,"pfEndless",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=d(H.prototype,"pfLimitTime",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=d(H.prototype,"sfCloseAudio",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=d(H.prototype,"sfOpenAudio",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=d(H.prototype,"spIcon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=d(H.prototype,"aniChoose",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=d(H.prototype,"aniEndless",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=d(H.prototype,"aniLimitTime",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=d(H.prototype,"aniSwitch",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=H))||V));e._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts"],(function(i){"use strict";var t,e,a,n,o,r,s;return{setters:[function(i){t=i.cclegacy,e=i._decorator,a=i.isValid,n=i.find},function(i){o=i.defineProperty,r=i.createClass},function(i){s=i.resourceUtil}],execute:function(){var p,c,h;t._RF.push({},"cb40eCKDPJMiKDyXkXOCmN3","uiManager",void 0);var l=e.ccclass;i("UIManager",l("UIManager")((h=c=function(){function i(){o(this,"_dictSharedPanel",{}),o(this,"_dictLoading",{}),o(this,"_arrPopupDialog",[])}var t=i.prototype;return t.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return a(t)&&t.active&&t.parent},t.showDialog=function(i,t,e){var o=this;if(!this._dictLoading[i]){var r=i.lastIndexOf("/"),p=i.slice(r+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var c=this._dictSharedPanel[i];if(a(c)){c.parent=n("Canvas"),c.active=!0;var h=c.getComponent(p),l=c.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(h&&h.show)h.show.apply(h,t),e&&e(h);else{if(!l||!l.show)throw"查找不到脚本文件"+p;l.show.apply(l,t),e&&e(l)}return}}this._dictLoading[i]=!0,s.createUI(i,(function(a,n){var r=!1;if(o._dictLoading[i]||(r=!0),o._dictLoading[i]=!1,a)console.error(a);else{o._dictSharedPanel[i]=n;var s=n.getComponent(p),c=n.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(s&&s.show)s.show.apply(s,t),e&&e(s);else{if(!c||!c.show)throw"查找不到脚本文件"+p;c.show.apply(c,t),e&&e(c)}r&&o.hideDialog(i)}}))}},t.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var e=this._dictSharedPanel[i];if(e&&a(e)){var n=e.getComponent("animationUI");n?n.close((function(){e.parent=null,t&&"function"==typeof t&&t()})):(e.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},t.pushToPopupSeq=function(i,t,e){var a={panelPath:i,scriptName:t,param:e,isShow:!1};this._arrPopupDialog.push(a),this._checkPopupSeq()},t.insertToPopupSeq=function(i,t,e){var a={panelPath:t,param:e,isShow:!1};this._arrPopupDialog.splice(i,0,a)},t.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},t._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},r(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}(),o(c,"_instance",void 0),p=h))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./storageManager.ts","./resourceUtil.ts","./lodash.ts"],(function(o){"use strict";var s,i,u,t,n,e,a,r,c;return{setters:[function(o){s=o.cclegacy,i=o._decorator,u=o.AudioSource,t=o.AudioClip},function(o){n=o.defineProperty,e=o.createClass},function(o){a=o.StorageManager},function(o){r=o.resourceUtil},function(o){c=o.Lodash}],execute:function(){var d,h,l;s._RF.push({},"de0e8WLqVNNv6s86nwtTHUX","audioManager",void 0);var f=i.ccclass;i.property,o("AudioManager",f("AudioManager")((l=h=function(){function o(){n(this,"_persistRootNode",null),n(this,"_audioSources",[]),n(this,"dictWeaponSoundIndex",{}),n(this,"musicVolume",.8),n(this,"soundVolume",1),n(this,"audios",{}),n(this,"arrSound",[])}var s=o.prototype;return s.init=function(o){this._persistRootNode=o;var s=this.getAudioSetting(!0),i=this.getAudioSetting(!1);this.musicVolume=s?.8:0,this.soundVolume=i?1:0},s._getAudioSource=function(o){for(var s,i=0;i<this._audioSources.length;++i){var t=this._audioSources[i];if(!t.playing){s=t;break}}return s||(s=this._persistRootNode.addComponent(u),this._audioSources.push(s)),s.node.off(u.EventType.ENDED),s.clip=o,s.currentTime=0,s},s.getAudioSetting=function(o){var s;return!(s=o?a.instance.getGlobalData("music"):a.instance.getGlobalData("sound"))||"true"===s},s.playMusic=function(o,s){var i=this,u="audio/music/"+o;r.loadRes(u,t,(function(u,t){var n=i._getAudioSource(t),e={source:n,isMusic:!0};void 0===i.audios[o]&&(i.audios[o]=[]),i.audios[o].push(e),n.volume=i.musicVolume,n.loop=s,n.play()}))},s.playSound=function(o,s){var i=this;if(void 0===s&&(s=!1),this.soundVolume){r.loadRes("audio/sound/"+o,t,(function(t,n){var e=i._getAudioSource(n),a={source:e,isMusic:!1};i.arrSound.push(a),s&&(void 0===i.audios[o]&&(i.audios[o]=[]),i.audios[o].push(a)),e.volume=i.soundVolume,e.loop=s,e.play(),e.node.on(u.EventType.ENDED,(function(){c.remove(i.arrSound,(function(o){return o.source===a.source}))}))}))}},s.stop=function(o){if(this.audios.hasOwnProperty(o)){var s=this.audios[o].pop();s&&s.source.stop()}},s.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.stop()})),this.audios[o]=[]}},s.setMusic=function(o){var s=this;for(var i in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&this.audios[i].isMusic)this.audios[i].forEach((function(o){o.source.volume=s.musicVolume}))}},s.pauseAll=function(){for(var o in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.pause()}))}},s.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.play()}))}},s.openMusic=function(){this.setMusic(.8),a.instance.setGlobalData("music","true")},s.closeMusic=function(){this.setMusic(0),a.instance.setGlobalData("music","false")},s.openSound=function(){this.setSound(1),a.instance.setGlobalData("sound","true")},s.closeSound=function(){this.setSound(0),a.instance.setGlobalData("sound","false")},s.setSound=function(o){var s=this;for(var i in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic)this.audios[i].forEach((function(o){o.source.volume=s.soundVolume}))}for(var u=0;u<this.arrSound.length;u++){this.arrSound[u].source.volume=this.soundVolume}},s.stopSingleSound=function(o){if(this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic){var s=this.audios[o].pop();s&&s.source.stop()}},s.resumeSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].forEach((function(o){o.source.play()}))},s.pauseSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].forEach((function(o){o.source.pause()}))},e(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}(),n(h,"_instance",void 0),d=l))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./util.ts"],(function(t){"use strict";var a,s,e,i,n,r,o;return{setters:[function(t){a=t.cclegacy,s=t._decorator,e=t.sys,i=t.log},function(t){n=t.defineProperty,r=t.createClass},function(t){o=t.Util}],execute:function(){var c,h,u;a._RF.push({},"eee40uYq/5HB479eXMM9y8j","storageManager",void 0);var l=s.ccclass;s.property,t("StorageManager",l("StorageManager")((u=h=function(){function t(){n(this,"jsonData",null),n(this,"path",null),n(this,"KEY_CONFIG","fruitConfig"),n(this,"markSave",!1),n(this,"saveTimer",-1)}var a=t.prototype;return a.start=function(){var t,a=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),e.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:t=e.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=o.decrypt(t));try{var s=JSON.parse(t);this.jsonData=s}catch(t){}}this.saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},a.setConfigDataWithoutSave=function(t,a){var s=this.jsonData.userId;this.jsonData[s]?this.jsonData[s][t]=a:console.error("no account can not save")},a.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this.markSave=!0},a.getConfigData=function(t){var a=this.jsonData.userId;if(this.jsonData[a]){var s=this.jsonData[a][t];return s||""}return i("no account can not load"),""},a.setGlobalData=function(t,a){this.jsonData[t]=a,this.save()},a.getGlobalData=function(t){return this.jsonData[t]},a.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},a.getUserId=function(){return this.jsonData.userId},a.scheduleSave=function(){this.markSave&&this.save()},a.markModified=function(){this.markSave=!0},a.save=function(){var t=JSON.stringify(this.jsonData),a="@"+o.encrypt(t);if(this.markSave=!1,e.isNative){var s={};s[this.KEY_CONFIG]=a,jsb.fileUtils.writeToFile(s,this.path)}else{e.localStorage.setItem(this.KEY_CONFIG,a)}},a.getConfigPath=function(){var t=e.platform,a="";return t===e.OS.WINDOWS?a="src/conf":t===e.OS.LINUX?a="./conf":e.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},r(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}(),n(h,"_instance",void 0),c=u))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,a,o,p,s,u,c,l,f;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.SpriteFrame,n=e.Component},function(e){a=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,p=e.inheritsLoose,s=e.defineProperty,u=e.assertThisInitialized},function(e){c=e.ready,l=e.init,f=e._language}],execute:function(){var h,d,g,y,L,m,z,b,v,S,F;t._RF.push({},"f8dd5Hfq5pKw7hA086uRlf3","LocalizedSprite",void 0);var _=i.ccclass,w=i.property,R=i.executeInEditMode,D=(h=_("LocalizedSpriteItem"),d=w({type:r}),h((L=a((y=function(){o(this,"language",L,this),o(this,"spriteFrame",m,this)}).prototype,"language",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),m=a(y.prototype,"spriteFrame",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g);e("LocalizedSprite",(z=_("LocalizedSprite"),b=w({type:D}),z(v=R((F=a((S=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,s(u(t),"sprite",null),o(u(t),"spriteList",F,u(t)),t}p(t,e);var i=t.prototype;return i.onLoad=function(){c||l("zh"),this.fetchRender()},i.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},i.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===f){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(n)).prototype,"spriteList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=S))||v)||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./csvManager.ts","./wxAdapter.ts","./poolManager.ts","./util.ts","./storageManager.ts","./resourceUtil.ts","./lodash.ts","./audioManager.ts","./constant.ts","./fightTip.ts","./effectManager.ts","./clientEvent.ts","./uiManager.ts","./fightUI.ts","./migrate-canvas.ts","./numItem.ts","./numScroll.ts","./choose.ts","./specialHit.ts","./login.ts","./btnAdapter.ts","./localConfig.ts","./LanguageData.ts","./fruit.ts","./fightManager.ts","./main.ts","./mouseControl.ts","./LocalizedLabel.ts","./playerData.ts","./pause.ts","./bg.ts","./settlement.ts","./LocalizedSprite.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});