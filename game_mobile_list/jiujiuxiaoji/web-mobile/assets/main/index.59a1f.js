System.register("chunks:///_virtual/AdCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts"],(function(t){"use strict";var o,n,r,e,c;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,e=t.Component},function(t){c=t.Tools}],execute:function(){var s;n._RF.push({},"f89car+1jZEc6gj/T8j/L7F","AdCtrl",void 0);var i=r.ccclass;r.property,t("AdCtrl",i("AdCtrl")(s=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var r=n.prototype;return r.onEnable=function(){c.clearUI(this.node)},r.onGo=function(t,o){window.open(o),c.clearUI(this.node)},n}(e))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/AdMgr.ts",["cc","./Enums.ts","./Global.ts","./ResMgr.ts","./WxPlatform.ts"],(function(t){"use strict";var e,a,s,n,o,r,i,c;return{setters:[function(t){e=t.cclegacy,a=t.sys,s=t.director},function(t){n=t.events,o=t.ui},function(t){r=t.Global},function(t){i=t.default},function(t){c=t.WxPlatform}],execute:function(){e._RF.push({},"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr",void 0),t("AdMgr",function(){function t(){}return t.closeAd=function(){switch(a.platform){case a.Platform.WECHAT_GAME:c.ins.hideBanner(),this.bannerOn=!1;break;case a.Platform.BYTEDANCE_MINI_GAME:case a.Platform.ANDROID:}},t.showBanner=function(){switch(a.platform){case a.Platform.WECHAT_GAME:this.bannerOn||c.ins.showBanner();break;case a.Platform.BYTEDANCE_MINI_GAME:case a.Platform.ANDROID:}},t.showInterstial=function(t){switch(void 0===t&&(t=0),a.platform){case a.Platform.WECHAT_GAME:c.ins.showInterstitialAd(t);break;case a.Platform.MOBILE_BROWSER:case a.Platform.DESKTOP_BROWSER:case a.Platform.BYTEDANCE_MINI_GAME:case a.Platform.ANDROID:}},t.showVideo=function(t){switch(void 0===t&&(t=null),a.platform){case a.Platform.MOBILE_BROWSER:case a.Platform.DESKTOP_BROWSER:t&&t();break;case a.Platform.WECHAT_GAME:r.Pause(),c.ins.showRewardVideo((function(e){1==e?(t&&t(),r.Pause(!1),s.emit(n.Toast,"获取奖励成功")):2==e?(r.Pause(!1),r.enableShareAd?(s.emit(n.Toast,"暂无广告，分享可以获得奖励喔"),setTimeout((function(){c.ins.showShare(),setTimeout((function(){t&&t()}),1500)}),500)):(r.Pause(!1),s.emit(n.Toast,"获取奖励失败"))):(r.Pause(!1),s.emit(n.Toast,"获取奖励失败"))}));break;case a.Platform.BYTEDANCE_MINI_GAME:case a.Platform.ANDROID:}},t.showWebIntersital=function(){i.ins.getUI(o.AdView)},t}()).bannerOn=!1,e._RF.pop()}}}));

System.register("chunks:///_virtual/AdView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(i){"use strict";var e,t,n,r,a,o,s,l,u;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty,n=i.inheritsLoose,r=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,s=i.SpriteFrame,l=i.Sprite},function(i){u=i.BaseView}],execute:function(){var c,h,p,d,f,b,y,g,w,m,A,k,v,z,D;a._RF.push({},"51b60/07hJEJp+4DkeUlms3","AdView",void 0);var F=o.ccclass,S=o.property,V=(c=F("adCf"),h=S({type:s}),c((f=e((d=function(){t(this,"adSF",f,this),t(this,"adLink",b,this)}).prototype,"adSF",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(d.prototype,"adLink",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p);i("AdView",(y=F("AdView"),g=S({type:V}),w=S({type:l}),y((k=e((A=function(i){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=i.call.apply(i,[this].concat(a))||this,t(e,"ads",k,r(e)),t(e,"sp",v,r(e)),t(e,"Carousel",z,r(e)),t(e,"cTime",D,r(e)),e.id=0,e.link="",e}n(e,i);var a=e.prototype;return a.onEnable=function(){this.id=Math.floor(this.ads.length*Math.random()),this.updateAD(),this.Carousel&&this.schedule(this.changeAd,this.cTime)},a.onDisbale=function(){this.unschedule(this.changeAd)},a.onGo=function(){window.open(this.link),i.prototype.close.call(this)},a.changeAd=function(){this.id++,this.id>=this.ads.length&&(this.id=0),this.updateAD()},a.updateAD=function(){var i=this.ads[this.id].adSF;this.sp.spriteFrame=i,this.link=this.ads[this.id].adLink},e}(u)).prototype,"ads",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(A.prototype,"sp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"Carousel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=e(A.prototype,"cTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),m=A))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/Astar.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){t("buildGrid",(function(t,i){for(var n=[],s=0;s<t;s++){n[s]=[];for(var o=0,e=n[s];o<i;o++)e[o]=1}return n})),i._RF.push({},"692f84prCZLC4gpruun5j/e","Astar",void 0);var n=Math.sqrt(2);function s(t){for(var i=t,n=[];i.parent;)n.unshift(i),i=i.parent;return n}t("Astar",function(){function t(){}var i=t.prototype;return i.search=function(t,i,n){t.cleanDirty();var o=new e((function(t){return t.f}));for(i.h=this.manhattan(i,n),t.markDirty(i),o.push(i);o.size()>0;){var r=o.pop();if(r===n)return s(r);r.closed=!0;for(var h=t.neighbors(r),c=0,u=h.length;c<u;++c){var a=h[c];if(!a.closed&&!a.isWall()){var d=r.g+a.getCost(r),f=a.visited;(!f||d<a.g)&&(a.visited=!0,a.parent=r,a.h=this.manhattan(a,n),a.g=d,a.f=a.g+a.h,t.markDirty(a),f?o.rescoreElement(a):o.push(a))}}}return[]},i.manhattan=function(t,i){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)},i.diagonal=function(t,i){var s=Math.abs(i.x-t.x),o=Math.abs(i.y-t.y);return 1*(s+o)+(n-2)*Math.min(s,o)},t}()),t("Graph",function(){function t(t,i){void 0===i&&(i=!0),this.nodes=void 0,this.diagonal=void 0,this.grid=void 0,this.dirtyNodes=void 0,this.diagonal=i,this.nodes=[],this.grid=[],this.dirtyNodes=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var s=0,e=t[n];s<e.length;s++){var r=new o(n,s,e[s]);this.grid[n][s]=r,this.nodes.push(r)}}}var i=t.prototype;return i.setWeight=function(t,i){this.getNode(t).weight=i},i.getNode=function(t){return this.grid[t[0]][t[1]]},i.clearNodes=function(){this.nodes.forEach((function(t){t.weight=1})),this.cleanDirty()},i.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)(i=this.dirtyNodes[t]).f=0,i.g=0,i.h=0,i.visited=!1,i.closed=!1,i.parent=null;var i;this.dirtyNodes=[]},i.markDirty=function(t){this.dirtyNodes.push(t)},i.neighbors=function(t){var i=[],n=t.x,s=t.y,o=this.grid;return o[n-1]&&o[n-1][s]&&i.push(o[n-1][s]),o[n+1]&&o[n+1][s]&&i.push(o[n+1][s]),o[n]&&o[n][s-1]&&i.push(o[n][s-1]),o[n]&&o[n][s+1]&&i.push(o[n][s+1]),this.diagonal&&(o[n-1]&&o[n-1][s-1]&&i.push(o[n-1][s-1]),o[n+1]&&o[n+1][s-1]&&i.push(o[n+1][s-1]),o[n-1]&&o[n-1][s+1]&&i.push(o[n-1][s+1]),o[n+1]&&o[n+1][s+1]&&i.push(o[n+1][s+1])),i},i.toString=function(){for(var t=[],i=this.grid,n=i.length,s=0;s<n;s++){for(var o=[],e=i[s],r=e.length,h=0;h<r;h++)o.push(e[h].weight);t.push(o.join(" "))}return t.join("\n")},t}());var o=t("GridNode",function(){function t(t,i,n){this.x=void 0,this.y=void 0,this.weight=void 0,this.f=void 0,this.g=void 0,this.h=void 0,this.visited=void 0,this.closed=void 0,this.parent=void 0,this.x=t,this.y=i,this.f=0,this.g=0,this.h=0,this.weight=n,this.visited=!1,this.closed=!1,this.parent=null}var i=t.prototype;return i.getCost=function(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight},i.isWall=function(){return 0===this.weight},i.toString=function(){return"["+this.x+" "+this.y+"]"},t}());function e(t){this.content=[],this.scoreFunction=t}e.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],i=this.content.pop();return this.content.length>0&&(this.content[0]=i,this.bubbleUp(0)),t},remove:function(t){var i=this.content.indexOf(t),n=this.content.pop();i!==this.content.length-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(i):this.bubbleUp(i))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var i=this.content[t];t>0;){var n=(t+1>>1)-1,s=this.content[n];if(!(this.scoreFunction(i)<this.scoreFunction(s)))break;this.content[n]=i,this.content[t]=s,t=n}},bubbleUp:function(t){for(var i=this.content.length,n=this.content[t],s=this.scoreFunction(n);;){var o=t+1<<1,e=o-1,r=null,h=void 0;if(e<i){var c=this.content[e];(h=this.scoreFunction(c))<s&&(r=e)}if(o<i){var u=this.content[o];this.scoreFunction(u)<(null===r?s:h)&&(r=o)}if(null===r)break;this.content[t]=this.content[r],this.content[r]=n,t=r}}},i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./ResMgr.ts"],(function(t){"use strict";var o,n,i,r,e,u,s,a;return{setters:[function(t){o=t.createClass,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){r=t.cclegacy,e=t._decorator,u=t.AudioSourceComponent},function(t){s=t.Global},function(t){a=t.default}],execute:function(){var p,c;r._RF.push({},"bf129C5rEdIyKQStT72J8k4","AudioMgr",void 0);var d=e.ccclass;e.property,t("AudioMgr",d("AudioMgr")(((c=function(){function t(){this._audioComp=null,this._audioLoopComp=null,this._curLoopAudioName=""}var r=t.prototype;return r.initAudio=function(){this._audioComp=new u,this._audioComp.loop=!0,this._audioLoopComp=new u,this._audioLoopComp.loop=!0,this._audioLoopComp.volume=.3},r.playMusic=function(){var t=n(i().mark((function t(o){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=s.bgm){t.next=2;break}return t.abrupt("return");case 2:if(!this._audioComp.clip){t.next=5;break}return this._audioComp.play(),t.abrupt("return");case 5:return t.next=7,a.ins.getClip(o);case 7:n=t.sent,this._audioComp.volume=.8,this._audioComp.clip=n,this._audioComp.play();case 11:case"end":return t.stop()}}),t,this)})));return function(o){return t.apply(this,arguments)}}(),r.stopMusic=function(){this._audioComp.stop()},r.playSound=function(){var t=n(i().mark((function t(o,n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=1),-1!=s.sound){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,a.ins.getClip(o);case 5:r=t.sent,this._audioComp.playOneShot(r,n);case 7:case"end":return t.stop()}}),t,this)})));return function(o,n){return t.apply(this,arguments)}}(),r.playLoopSound=function(){var t=n(i().mark((function t(o){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=s.sound){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,a.ins.getClip(o);case 4:n=t.sent,this._audioLoopComp.stop(),this._audioLoopComp.clip=n,this._audioLoopComp.play(),this._curLoopAudioName=o;case 9:case"end":return t.stop()}}),t,this)})));return function(o){return t.apply(this,arguments)}}(),r.stopLoopSound=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._audioLoopComp.stop();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isLoopAudioPlaying=function(){return this._audioLoopComp.playing},o(t,[{key:"curLoopAudioName",get:function(){return this._curLoopAudioName}}],[{key:"ins",get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins}}]),t}())._ins=null,p=c))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./Enums.ts","./Global.ts","./AudioMgr.ts","./PoolMgr.ts","./Tools.ts"],(function(e){"use strict";var i,n,t,r,o,s,a,l,u,c,h,d,p,w,f;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Node,l=e.Component},function(e){u=e.AdMgr},function(e){c=e.Props,h=e.Clips},function(e){d=e.Global},function(e){p=e.AudioMgr},function(e){w=e.PoolMgr},function(e){f=e.Tools}],execute:function(){var b,y,g,A,B,V,v,m,z,D,O,I,S,C,M,P,T,N,R,_,E,F,G,L,j,k,x;o._RF.push({},"29938V4SlNABr3n+tOEsozR","BaseView",void 0);var H=s.ccclass,q=s.property;e("BaseView",(b=H("BaseView"),y=q({displayOrder:0,group:c.View}),g=q({type:a,visible:function(){return this.tweenView},displayOrder:0,group:c.View}),A=q({visible:function(){return this.tweenView},displayOrder:0,group:c.View}),B=q({displayOrder:0,group:c.View}),V=q({group:c.Ad,tooltip:"show Banner on Start"}),v=q({visible:function(){return this.showBannerAd},range:[0,5],group:c.Ad}),m=q({visible:function(){return this.showBannerAd},group:c.Ad,tooltip:"hide Banner on Start"}),z=q({visible:function(){return this.showBannerAd},group:c.Ad}),D=q({group:c.Ad,tooltip:"show Intersitial Ad on Start"}),O=q({visible:function(){return this.showIntersitialAd},range:[0,5],group:c.Ad}),I=q({group:c.Ad,tooltip:"show video Ad on Start"}),S=q({visible:function(){return this.showVideoAd},range:[0,5],group:c.Ad}),b((P=i((M=function(e){function i(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,t(i,"tweenView",P,r(i)),t(i,"root",T,r(i)),t(i,"tweenTime",N,r(i)),t(i,"playBtnClip",R,r(i)),t(i,"showBannerAd",_,r(i)),t(i,"bannerDelay",E,r(i)),t(i,"hideBannerOnClose",F,r(i)),t(i,"displayinSmallscreen",G,r(i)),t(i,"showIntersitialAd",L,r(i)),t(i,"intersitialDelay",j,r(i)),t(i,"showVideoAd",k,r(i)),t(i,"videoDelay",x,r(i)),i}n(i,e);var o=i.prototype;return o.onEnable=function(){var e=this;this.playBtnClip&&p.ins.playSound(h.btn),this.tweenView&&(this.root?f.fadeIn(this.root):(this.root=this.node,this.scheduleOnce((function(){f.fadeIn(e.root)})))),this.showAds()},o.onDisable=function(){this.hideBannerOnClose&&this.closeAd()},o.close=function(){var e=this;this.playBtnClip&&p.ins.playSound(h.btn,.5),this.showBannerAd&&this.closeAd(),this.tweenView?(this.root||(this.root=this.node),f.fadeOut(this.root,(function(){w.ins.putNode(e.node)}))):w.ins.putNode(this.node)},o.showAds=function(){var e=this;if(this.showBannerAd){if(!this.displayinSmallscreen&&d.screenRatio<=1.1)return;this.scheduleOnce((function(){e.showBanner()}),this.bannerDelay)}this.showIntersitialAd&&this.scheduleOnce((function(){e.showIntersitial()}),this.intersitialDelay),this.showVideoAd&&this.scheduleOnce((function(){e.showVideo()}),this.bannerDelay)},o.closeAd=function(){u.closeAd()},o.showBanner=function(){u.showBanner()},o.showVideo=function(e){void 0===e&&(e=null),u.showVideo(e)},o.showIntersitial=function(){u.showInterstial(this.bannerDelay)},i}(l)).prototype,"tweenView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=i(M.prototype,"root",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(M.prototype,"tweenTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),R=i(M.prototype,"playBtnClip",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=i(M.prototype,"showBannerAd",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=i(M.prototype,"bannerDelay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=i(M.prototype,"hideBannerOnClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=i(M.prototype,"displayinSmallscreen",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=i(M.prototype,"showIntersitialAd",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=i(M.prototype,"intersitialDelay",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=i(M.prototype,"showVideoAd",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=i(M.prototype,"videoDelay",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=M))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/BuildCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./WxPlatform.ts","./Enums.ts","./GameConfig.ts","./DataMgr.ts","./Tools.ts"],(function(t){"use strict";var e,n,i,r,a,o,u,c,l,s,p,d,f,h,g,b,B,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,l=t.Node,s=t.Label,p=t.director,d=t.Component},function(t){f=t.AdMgr},function(t){h=t.WxPlatform},function(t){g=t.events},function(t){b=t.GameConfig},function(t){B=t.DataMgr},function(t){m=t.Tools}],execute:function(){var v,w,y,M,x,D,I,L,z,C,P,S,V;u._RF.push({},"050275w/kxPq53EGe2d4hVB","BuildCardView",void 0);var T=c.ccclass,G=c.property;t("BuildCardView",(v=T("BuildCardView"),w=G(l),y=G(l),M=G(l),x=G(l),D=G(s),v((z=e((L=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"newBtn",z,r(e)),i(e,"editBtn",C,r(e)),i(e,"playBtn",P,r(e)),i(e,"shareBtn",S,r(e)),i(e,"idLabel",V,r(e)),e.cardIndex=null,e}n(e,t);var u=e.prototype;return u.init=function(){var t=a(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cardIndex=e,-1==e?(this.newBtn.active=!0,this.editBtn.active=!1,this.playBtn.active=!1,this.shareBtn.active=!1,this.idLabel.string="new"):(this.newBtn.active=!1,this.shareBtn.active=!1,this.editBtn.active=!0,this.playBtn.active=!0,this.idLabel.string=B.getId(this.cardIndex));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.goBuild=function(){var t=this;f.showVideo((function(){t.buildNewMap()}))},u.buildNewMap=function(){var t=B.MapData.length;t>B.maxMaps||(B.currentMap=t,B.MapData={id:m.getDateId()},p.emit(g.buildMap))},u.goEdit=function(){B.currentMap=this.cardIndex,p.emit(g.editMap,B.currentMap)},u.goPlay=function(){B.currentMap=this.cardIndex,p.emit(g.playMap,B.currentMap)},u.goShare=function(){var t="map="+JSON.stringify(B.MapData[this.cardIndex]),e=t.length;if(e<=b.maxShareLength-5)h.ins.showShare(t);else{var n="地图长度："+e+"最大长度："+b.maxShareLength;p.emit(g.Toast,n)}},e}(d)).prototype,"newBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"editBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(L.prototype,"playBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(L.prototype,"shareBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(L.prototype,"idLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));u._RF.pop()}}}));

System.register("chunks:///_virtual/BuildView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./DataMgr.ts","./PoolMgr.ts","./ResMgr.ts","./BaseView.ts","./BuildCardView.ts","./GameView.ts","./EditorView.ts"],(function(t){"use strict";var e,n,i,r,o,a,s,c,u,l,p,f,d,h,g,y,w,m,v,M,V;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.Node,l=t.director},function(t){p=t.events,f=t.ui,d=t.topStates},function(t){h=t.Global},function(t){g=t.DataMgr},function(t){y=t.PoolMgr},function(t){w=t.default},function(t){m=t.BaseView},function(t){v=t.BuildCardView},function(t){M=t.GameView},function(t){V=t.EditorView}],execute:function(){var B,b,x,C,D;s._RF.push({},"3abe6A72kJD9ayQP9vZfZ/P","BuildView",void 0);var k=c.ccclass,E=c.property;t("BuildView",(B=k("BuildView"),b=E(u),B((D=e((C=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"cardLayout",D,r(e)),e}n(e,t);var s=e.prototype;return s.onEnable=function(){var t=o(a().mark((function t(){var e,n,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.emit(p.paperOcacity,90),l.on(p.startCustom,this.onClose,this),l.on(p.buildMap,this.goBuild,this),l.on(p.editMap,this.goEdit,this),l.on(p.playMap,this.goPlay,this),l.emit(p.changeTop,d.hideAll),e=g.MapData,n=e.length,i=n>=g.maxMaps?0:-1,r=i;case 10:if(!(r<n)){t.next=18;break}return t.next=13,w.ins.getUI(f.BuildCardView,this.cardLayout);case 13:t.sent.getComponent(v).init(r);case 15:r++,t.next=10;break;case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onDisable=function(){l.off(p.startCustom,this.onClose,this),l.off(p.buildMap,this.goBuild,this),l.off(p.editMap,this.goEdit,this),l.off(p.playMap,this.goPlay,this);for(var t=this.cardLayout.children.length-1;t>=0;t--)y.ins.putNode(this.cardLayout.children[0])},s.goPlay=function(){var e=o(a().mark((function e(n){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prototype.close.call(this),e.next=3,w.ins.getUI(f.GameView);case 3:i=e.sent,r=g.MapData[n],i.getComponent(M).init(1,r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.goBuild=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prototype.close.call(this),e.next=3,w.ins.getUI(f.EditorView);case 3:e.sent.getComponent(V).init();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.goEdit=function(){var t=o(a().mark((function t(e){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.ins.getUI(f.EditorView);case 2:n=t.sent,i=g.MapData[e],n.getComponent(V).editMap(i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.onClose=function(){t.prototype.close.call(this)},s.goBack=function(){t.prototype.close.call(this),y.ins.getNode("HomeView",h.layer[1])},e}(m)).prototype,"cardLayout",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=C))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/CamShot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,a,s,n,r,h,o,c,u,l,m,f,v,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,h=t.Camera,o=t.RenderTexture,c=t.view,u=t.Layers,l=t.ImageAsset,m=t.Texture2D,f=t.SpriteFrame,v=t.sys,d=t.Component}],execute:function(){var _,g,p,w,C,b;n._RF.push({},"87552Srt+JLU6pT/AOmo82E","CamShot",void 0);var y=r.ccclass,S=r.property,x=.5,z=t("captureSize",[Math.round(300),Math.round(360)]);t("CamShot",(_=y("CamShot"),g=S(h),_(((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,a(i,"mainCam",C,s(i)),i.rt=null,i._canvas=null,i._buffer=null,i._size=new Array(2),i._cam=null,i}e(i,t);var n=i.prototype;return n.start=function(){i.ins=this},n.initCam=function(){this._cam=this.node.getComponent(h),this.rt=new o,this._size=[Math.round(c.getVisibleSize().width*x),Math.round(c.getVisibleSize().height*x)],this.rt.reset({width:Math.round(this._size[0]),height:Math.round(this._size[1])}),this._cam.targetTexture=this.rt,this.setHeight(),this._cam.visibility=u.Enum.NONE},n.setHeight=function(){this._cam.orthoHeight=this.mainCam.orthoHeight,this._cam.node.worldPosition=this.mainCam.node.worldPosition,this._size=[Math.round(c.getVisibleSize().width*x),Math.round(c.getVisibleSize().height*x)]},n.copyRenderTex=function(t,i){var e=this;void 0===i&&(i=[0,0]),this._cam.visibility=u.Enum.DEFAULT,this._buffer=null,this.scheduleOnce((function(){var a=z[0],s=z[1],n=.5*(e._size[0]+i[0]-z[0]),r=.5*(e._size[1]+i[1]-z[1]);e._buffer=e.rt.readPixels(n,r,a,s),e._cam.visibility=u.Enum.NONE,e.showImage(t)}))},n.showImage=function(t){var i=new l;i.reset({_data:this._buffer,width:z[0],height:z[1],format:m.PixelFormat.RGBA8888,_compressed:!1});var e=new m;e.image=i;var a=new f;a.texture=e,a.packable=!1,t.spriteFrame=a,t.spriteFrame.flipUVY=!0,!v.isNative||v.os!==v.OS.IOS&&v.os!==v.OS.OSX||(t.spriteFrame.flipUVY=!1)},n.savaAsImage=function(t,i,e){if(v.platform===v.Platform.WECHAT_GAME){this._canvas?this.clearCanvas():(this._canvas=wx.createCanvas(),this._canvas.width=t,this._canvas.height=i);for(var a=this._canvas.getContext("2d"),s=4*t,n=0;n<i;n++){for(var r=i-1-n,h=a.createImageData(t,1),o=r*t*4,c=0;c<s;c++)h.data[c]=e[o+c];a.putImageData(h,0,n)}this._canvas.toTempFilePath({x:0,y:0,width:this._canvas.width,height:this._canvas.height,destWidth:this._canvas.width,destHeight:this._canvas.height,fileType:"png",success:function(t){wx.showToast({title:"截图成功"}),wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){wx.showToast({title:"成功保存到设备相册"})},fail:function(){}})},fail:function(){wx.showToast({title:"截图失败"})}})}},n.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},n.onSaveImageBtnClicked=function(){var t=z[0],i=z[1];this.savaAsImage(t,i,this._buffer)},i}(d)).ins=null,C=i((w=b).prototype,"mainCam",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=w))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/CaptureCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,o,s,u,c,l,p,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Sprite,u=e.Camera,c=e.SpriteFrame,l=e.RenderTexture,p=e.Texture2D,d=e.Rect,h=e.Component}],execute:function(){var f,m,g,y,b,v,C;a._RF.push({},"880d72s//FBPrSPR2Ccmuq1","CaptureCtrl",void 0);var T=o.ccclass,x=o.property;o.menu,e("CaptureCtrl",(f=T("CaptureCtrl"),m=x(s),g=x(u),f((v=t((b=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"sprite",v,n(t)),i(t,"camera",C,n(t)),t._renderTex=null,t}r(t,e);var a=t.prototype;return a.test=function(){var e=this.sprite.spriteFrame,t=new c;t.reset({originalSize:e.originalSize,rect:e.rect,offset:e.offset,isRotate:e.rotated,borderTop:e.insetTop,borderLeft:e.insetLeft,borderBottom:e.insetBottom,borderRight:e.insetRight});var r=this._renderTex=new l;r.reset({width:360,height:640}),this.camera.node.active=!0,this.camera.targetTexture=r;new p;t.texture=r,this.sprite.spriteFrame=t;var i=new d(400,0,512,512),n=this.sprite;e.rect=i,n.updateMaterial(),this.sprite.updateRenderer(),n.markForUpdateRenderData(),n._updateUVs(),console.log(11,e.rect),this.scheduleOnce((function(){}))},a.onDestroy=function(){this._renderTex&&(this._renderTex.destroy(),this._renderTex=null)},t}(h)).prototype,"sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(b.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/CustomView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./ResMgr.ts","./BaseView.ts","./GameView.ts"],(function(t){"use strict";var e,n,i,r,a,o,s,l,u,c,p,f,m,y,h,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.Label,c=t.director},function(t){p=t.events,f=t.ui},function(t){m=t.Global},function(t){y=t.default},function(t){h=t.BaseView},function(t){w=t.GameView}],execute:function(){var b,g,v,V,d;s._RF.push({},"9ae0fiYFrVLyIJtMoq7jD0V","CustomView",void 0);var L=l.ccclass,D=l.property;t("CustomView",(b=L("CustomView"),g=D(u),b((d=e((V=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"playLable",d,r(e)),e.mapData=null,e}n(e,t);var s=e.prototype;return s.play=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playLable.string=null,m.time=9,c.emit(p.startCustom),t.next=5,y.ins.getUI(f.GameView);case 5:t.sent.getComponent(w).init(1,this.mapData),this.closePanel();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.init=function(t){this.mapData=t;var e=t.id;this.playLable.string="开始好友关卡： "+e},s.closePanel=function(){t.prototype.close.call(this)},e}(h)).prototype,"playLable",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=V))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/DataMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Tools.ts"],(function(t){"use strict";var a,n,i,s,r;return{setters:[function(t){a=t.createClass},function(t){n=t.cclegacy},function(t){i=t.Key},function(t){s=t.load,r=t.save}],execute:function(){n._RF.push({},"b9038y6AFJG/pJuS+gxlJXw","DataMgr",void 0);var u=t("DataMgr",function(){function t(){}return t.getId=function(t){return this._data[t].id},a(t,null,[{key:"MapData",get:function(){if(!this._data){var t=s(i.MapData,2);t?this._data=t:(this._data=[],r(i.MapData,JSON.stringify(this._data)))}return this._data},set:function(t){this._data[this.currentMap]=t,r(i.MapData,JSON.stringify(this._data))}}]),t}());u._data=null,u.currentMap=1,u.maxMaps=5,n._RF.pop()}}}));

System.register("chunks:///_virtual/EditorMgr.ts",["cc","./GameConfig.ts","./Tools.ts","./Enums.ts","./GridConfig.ts"],(function(t){"use strict";var i,e,s,o,n,r,h,a,l,c,u,d,f,p,g,m,y,v;return{setters:[function(t){i=t.cclegacy,e=t.Vec2,s=t.Vec3,o=t.Vec4,n=t.Node,r=t.Graphics,h=t.Color,a=t.input,l=t.Input,c=t.instantiate,u=t.director,d=t.Sprite,f=t.UITransform},function(t){p=t.GameConfig},function(t){g=t.Tools},function(t){m=t.events,y=t.default},function(t){v=t.GridConfig}],execute:function(){i._RF.push({},"dce55DUPIZCmqWgfln7e9lU","EditorMgr",void 0);var T=new e,M=new e,E=new s,x=new o;t("EditorMgr",function(){function t(){this.item=null,this.gridmap=[],this.mapData=new Map,this.outPut=null,this.points=[],this.gc=null,this.line=null,this.gizmo=null,this.trans=null,this.touchID=null,this.gridMat=null,this.colliderMap=[],this.lineLength=p.tutorialLineLength/p.timeScale,this.dis=40,this.isEnd=!1,this.isPlayer=!1}var i=t.prototype;return i.init=function(t,i,e,s){this.gizmo=t,this.gridMat=i,this.trans=e,this.outPut=s,this.line=new n("line"),this.line.parent=this.outPut.parent,this.gc=this.line.addComponent(r),this.gc.lineJoin=2,this.gc.lineCap=0,this.gc.strokeColor=h.BLACK,this.gc.lineWidth=14;for(var o=0;o<v.x;o++)this.colliderMap[o]=[]},i.registerEvents=function(){a.on(l.EventType.TOUCH_START,this.onTouchStart,this),a.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),a.on(l.EventType.TOUCH_END,this.onTouchEnd,this),a.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.unRegisterEvents=function(){a.off(l.EventType.TOUCH_START,this.onTouchStart,this),a.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),a.off(l.EventType.TOUCH_END,this.onTouchEnd,this),a.off(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.clear=function(){this.mapData.clear(),this.clearLine();for(var t=0;t<v.x;t++)this.colliderMap[t]=[];this.outPut.destroyAllChildren()},i.setGridSelect=function(t,i){if(!t)return this.gridMat.setProperty("warn",o.ZERO),void this.gridMat.setProperty("select",o.ZERO);var e=Math.ceil(i[0]%2),s=Math.ceil(i[1]%2),n=1==e?Math.floor(.5*v.x+t.x/v.size):Math.round(.5*v.x+t.x/v.size),r=1==s?Math.floor(.5*v.y+t.y/v.size):Math.round(.5*v.y+t.y/v.size);this.gizmo.setPosition((n+.5*(e-v.x))*v.size,(r+.5*(s-v.y))*v.size);var h=Math.floor(i[0]/2),a=Math.floor(i[1]/2);if(x.set(n-h,n+h+1*e,r-a,r+a+1*s),x.x<0||x.y>v.x)return this.gridMat.setProperty("warn",x.multiplyScalar(.1)),void this.gridMat.setProperty("select",o.ZERO);var l=this.checkCollider();if(l)return this.item.isDelete?(this.deleteItem(l),this.gridMat.setProperty("warn",x.set(l[0],l[1],l[2],l[3]).multiplyScalar(.1))):this.item.isRotate?(this.isEnd&&this.rotateItem(l),this.gridMat.setProperty("warn",o.ZERO)):this.gridMat.setProperty("warn",x.multiplyScalar(.1)),void this.gridMat.setProperty("select",x.set(l[0],l[1],l[2],l[3]).multiplyScalar(.1));if((this.item.isBrush||this.isEnd)&&!this.item.isDelete&&!this.item.isRotate){var u=c(this.item.sp.node);this.buildItem(this.gizmo.position,x,u)}this.gridMat.setProperty("select",x.multiplyScalar(.1)),this.gridMat.setProperty("warn",o.ZERO)},i.rotateItem=function(t){var i=t[1]-t[0],e=t[3]-t[2],s=t[4];s&&(E.set(s.scale),i>=e?E.x*=-1:E.y*=-1,s.setScale(E))},i.deleteItem=function(t){x.set(t[0],t[1],t[2],t[3]);for(var i=x.x;i<x.y;i++)for(var e=x.z;e<x.w;e++)this.colliderMap[i][e]=null;var s=t[4];s&&(this.mapData.delete(s),s.destroy())},i.setItem=function(t,i){i.parent=this.outPut,p.setMapItem(t,i),x.set(t[1],t[2],t[3],t[4]),this.mapData.set(i,[x.x,x.y,x.z,x.w]);for(var e=x.x;e<x.y;e++)for(var s=x.z;s<x.w;s++)this.colliderMap[e][s]=[x.x,x.y,x.z,x.w,i]},i.buildItem=function(t,i,e,s){void 0===s&&(s=[1,1]),e.setScale(s[0],s[1]),e.parent=this.outPut;var o=this.isPlayer?p.playerOffset:0;e.setPosition(t.x,t.y+o),this.mapData.set(e,[i.x,i.y,i.z,i.w]);for(var n=i.x;n<i.y;n++)for(var r=i.z;r<i.w;r++)this.colliderMap[n][r]=[i.x,i.y,i.z,i.w,e]},i.checkCollider=function(){for(var t=x.x;t<x.y;t++)for(var i=x.z;i<x.w;i++){var e=this.colliderMap[t][i];if(e)return e}return null},i.onTouchStart=function(t){var i=t.touch.getID();if(null==this.touchID){this.touchID=i,this.isEnd=!1,t.getUILocation(T);var e=this.getUIpos(T);if(this.item.isDraw)return this.dis=this.lineLength,void this.clearLine();this.isPlayer=-1!=this.item.name.indexOf("player");var s=v.safeY*v.size*.5;if(e.y<s&&e.y>75-s){if(this.item.isDraw)return this.dis=this.lineLength,void this.clearLine();this.changeGizmo(),this.setGridSelect(e,this.item.grid)}else u.emit(m.Toast,y.gameText.map.outMap),this.setGridSelect()}},i.onTouchMove=function(t){var i=t.touch;if(i.getID()==this.touchID){t.getUILocation(T);var e=this.getUIpos(T),s=v.safeY*v.size*.5;if(e.y<s&&e.y>75-s){if(this.item.isDraw)return void this.drawLine(i,e);this.setGridSelect(e,this.item.grid)}else this.setGridSelect()}},i.onTouchEnd=function(t){if(t.touch.getID()==this.touchID&&(this.touchID=null,this.isEnd=!0,!this.item.isDraw)){t.getUILocation(T);var i=this.getUIpos(T),e=v.safeY*v.size*.5;i.y<e&&i.y>75-e&&this.setGridSelect(i,this.item.grid),this.gizmo.setPosition(-1e3,-1e3),this.setGridSelect()}},i.drawLine=function(t,i){if(t.getDelta(M),this.dis+=Math.abs(M.x)+Math.abs(M.y),this.dis>this.lineLength){0==this.points.length?this.gc.moveTo(i.x,i.y):(this.gc.lineTo(i.x,i.y),this.gc.stroke());var e=[g.fixedTo(i.x),g.fixedTo(i.y)];this.points.push(e),this.dis=0}},i.getUIpos=function(t){return E.set(t.x,t.y),this.trans.convertToNodeSpaceAR(E,E),E},i.changeGizmo=function(){var t=this.gizmo.getComponent(d);t.color=this.item.sp.color,t.spriteFrame=this.item.sp.spriteFrame,this.gizmo.getComponent(f).setContentSize(this.item.size)},i.clearLine=function(){this.gc.clear(),this.points.length=0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EditorView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Main.ts","./DataMgr.ts","./ResMgr.ts","./BaseView.ts","./FileMgr.ts","./EditorMgr.ts","./MapItem.ts"],(function(t){"use strict";var e,i,n,r,o,a,s,l,c,u,g,h,p,f,d,m,v,M,b,_,T,E,w,y,I,x,C,B,N,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,c=t.Prefab,u=t.Label,g=t.Node,h=t.director,p=t.instantiate,f=t.sys,d=t.Toggle,m=t.Sprite,v=t.UITransform,M=t.Layers,b=t.UIOpacity},function(t){_=t.events,T=t.topStates,E=t.default,w=t.ui},function(t){y=t.Main},function(t){I=t.DataMgr},function(t){x=t.default},function(t){C=t.BaseView},function(t){B=t.FileMgr},function(t){N=t.EditorMgr},function(t){O=t.MapItem}],execute:function(){var S,D,F,z,V,k,L,R,U,P,A,H,j,q,J,W,G,K,Y,Q,X;s._RF.push({},"cc105lphS9M2q4YqwLWMx36","EditorView",void 0);var Z=l.ccclass,$=l.property,tt=l.disallowMultiple,et=l.help;t("EditorView",(S=Z("EditorView"),D=tt(!0),F=et("http://learncocos.com"),z=$({type:c,displayOrder:0,group:"components"}),V=$({type:c,displayOrder:0,group:"components"}),k=$(u),L=$(g),R=$(g),U=$(g),P=$(g),A=$(g),S(H=D(H=F((q=e((j=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"ToggleView",q,r(e)),n(e,"BuildView",J,r(e)),n(e,"fileName",W,r(e)),n(e,"toggleNode",G,r(e)),n(e,"tabBtns",K,r(e)),n(e,"saveBtn",Y,r(e)),n(e,"loadBtn",Q,r(e)),n(e,"clearBtn",X,r(e)),e._EditorMgr=null,e.fileMgr=null,e._fileName=null,e._currentIndex=0,e._buildItems=[[],[],[]],e.items=new Map,e._toggle=null,e}i(e,t);var s=e.prototype;return s.onEnable=function(){h.emit(_.changeTop,T.hideAll),h.emit(_.paperOcacity,160),h.on(_.startCustom,this.onClose,this)},s.onDisable=function(){this._EditorMgr.unRegisterEvents(),h.on(_.startCustom,this.onClose,this)},s.init=function(){this.initScene(),this.initObjects()},s.editMap=function(t){this.init(),this.initLevel(t)},s.goBack=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onClose(),t.next=3,x.ins.getUI(w.BuildView);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onClose=function(){this._EditorMgr.clear(),t.prototype.close.call(this)},s.initScene=function(){var t=o(a().mark((function t(){var e,i,n,r,o,s=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._EditorMgr||(this._EditorMgr=new N,e=this.node.getComponent(v),i=new g("OutputNode"),n=this.node.getChildByName("OutputLayer")||this.node,i.parent=n,(r=new g("gizmo")).layer=M.Enum.UI_2D,r.parent=this.node,r.addComponent(m),r.addComponent(b).opacity=170,o=y.ins.grid.mat,this._EditorMgr.init(r,o,e,i),this.toggleNode=this.toggleNode,this._fileName=this.fileName,this.loadBtn.active=!1,this.saveBtn.on(g.EventType.TOUCH_END,this.saveMap,this),this.clearBtn.on(g.EventType.TOUCH_END,(function(){s._EditorMgr.clear()}),this),this.tabBtns.forEach((function(t,e){t.on(g.EventType.TOUCH_END,(function(){s.changeTab(e)}),s)}))),this._EditorMgr.registerEvents(),this._fileName.string=I.getId(I.currentMap);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.loadFile=function(){var t=o(a().mark((function t(){var e,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fileMgr||(this.fileMgr=new B),t.next=3,this.fileMgr.loadFile();case 3:(e=t.sent)||h.emit(_.Toast,E.gameText.map.loadFail,1),i=JSON.parse(e),this.initLevel(i);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.initLevel=function(t){var e=t.mapData;if(e){var i=e.length;if(i>0){this._EditorMgr.clear();for(var n=0;n<i;n++){var r=e[n],o=r[0],a=this.items.get(o);if(a){var s=p(a.sp.node);this._EditorMgr.setItem(r,s)}}var l=t.points.length;if(l>0)for(n=0;n<l;n++){var c=t.points[n];0==n?this._EditorMgr.gc.moveTo(c[0],c[1]):(this._EditorMgr.gc.lineTo(c[0],c[1]),this._EditorMgr.gc.stroke())}h.emit(_.Toast,E.gameText.map.loadSuccess,1)}else h.emit(_.Toast,E.gameText.map.loadFail,1)}},s.saveMap=function(){var t=this._EditorMgr.mapData,e={},i=this._fileName.string;e.id=i,e.points?e.points.length=0:e.points=[];var n=e.mapData=[];if(t.forEach((function(t,e){var i=[e.name,t[0],t[1],t[2],t[3],e.scale.x,e.scale.y];n.push(i)})),this._EditorMgr.points.length>0&&(e.points=this._EditorMgr.points.concat()),n.length>0){if(I.MapData=e,f.platform==f.Platform.DESKTOP_BROWSER){var r=JSON.stringify(e);this.saveAsFile(r,i)}}else h.emit(_.Toast,E.gameText.map.saveFail)},s.saveAsFile=function(t,e){this.fileMgr||(this.fileMgr=new B),this.fileMgr.saveFile(t,e),h.emit(_.Toast,E.gameText.map.saveFile+e)},s.SwithItem=function(t){var e=this.items.get(t);this._EditorMgr.item=e,h.emit(_.Toast,E.gameText.map.currentItem+t,.3)},s.initObjects=function(){this._buildItems[0].length>0||(this.initToggle(E.gameText.tools.delete),this.initToggle(E.gameText.tools.rotate),this.initToggle(E.gameText.tools.line),this.addToggles(x.ins.buildPrefabs))},s.changeTab=function(t){var e=this;t!=this._currentIndex&&0!=this._buildItems[t].length&&(this._buildItems[this._currentIndex].forEach((function(t){t.active=!1})),this._buildItems[t].forEach((function(t,i){t.active=!0,0==i&&(t.getComponent(d).isChecked=!0,e.SwithItem(t.name))})),this._currentIndex=t)},s.initToggle=function(t,e,i){var n=p(this.ToggleView);n.name=t,n.parent=this.toggleNode;var r=n.getComponent(O);return r.init(t,e,i),this.items.set(t,r),n.on("toggle",this.onToggleClick,this),n},s.addToggles=function(t){var e=this;t.forEach((function(t,i){t.forEach((function(t,n){var r=t,o=r.data.name,a=p(r),s=a.getComponent(m),l=e.initToggle(o,a.getComponent(v).contentSize,s);e._buildItems[i].push(l),a.destroy(),i==e._currentIndex?0==n&&e.scheduleOnce((function(){l.getComponent(d).isChecked=!0,e.SwithItem(l.name)})):l.active=!1}))}))},s.onToggleClick=function(t){this._toggle!=t&&(this._toggle=t,this.SwithItem(t.node.name))},e}(C)).prototype,"ToggleView",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(j.prototype,"BuildView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(j.prototype,"fileName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(j.prototype,"toggleNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(j.prototype,"tabBtns",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(j.prototype,"saveBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"loadBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(j.prototype,"clearBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=j))||H)||H)||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./FSM.ts","./PathFindMgr.ts","./GridConfig.ts","./Tools.ts"],(function(t){"use strict";var i,e,s,o,n,h,a,r,d,p,l,c,g,u,f,y,m;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.Node,n=t.Vec2,h=t.director,a=t.RigidBody2D,r=t.PhysicsSystem2D,d=t.ERaycast2DType},function(t){p=t.events,l=t.collisions},function(t){c=t.GameConfig},function(t){g=t.Global},function(t){u=t.default},function(t){f=t.PathFindMgr},function(t){y=t.GridConfig},function(t){m=t.Tools}],execute:function(){var _,w;e._RF.push({},"24c7f37mUhMEZ1aEU8q8EjR","EnemyAI",void 0);var R=l.DEFAULT,P=s.ccclass,x=(s.property,{Forward:"Forward",Idle:"Idle",Atk:"Atk"});t("default",P("EnemyAI")(((w=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),h=0;h<e;h++)s[h]=arguments[h];return(i=t.call.apply(t,[this].concat(s))||this).speed=10,i.atk=void 0,i.rndTime=.5,i.target=new o,i.roleAngel=0,i.cd=1,i.skip=0,i.rigid=void 0,i.path=[],i.targetPos=[0,0],i.lineRigid=null,i._forward=new n,i._speed=new n,i._moveNext=!1,i.pos1=new n,i.pos2=new n,i}i(e,t);var s=e.prototype;return s.onEnable=function(){h.on(p.gameWin,this.stopAI,this)},s.onDisable=function(){h.off(p.gameWin,this.stopAI,this),this.stopAI()},s.stopAI=function(){this.paused=!0,this.RemoveAllState(),this._speed.x=this._speed.y=0,this.rigid.linearVelocity=n.ZERO,this.path.length=0,this.target=null},s.initFSM=function(){this.addStates(x),this.speed=c.enemySpeed*c.timeScale,this.rigid||(this.rigid=this.node.getComponent(a)),this.target=m.getCloestNode(this.node,g.players),this.path.length=0,this.paused=!1,this.changeState(x.Forward)},s.targetPlayer=function(){this.target||(this.target=m.getCloestNode(this.node,g.players)),this.targetPos=[this.target.position.x,this.target.position.y],m.getDistance(this.node.position,this.targetPos)>2*y.size&&(this.path=f.ins.getPath(this.node.position,this.target.position),this.path.length>0&&(this.targetPos=this.path.shift())),this.rotateRole(this.targetPos)},s.checkPath=function(){this.path.length>0?(this._moveNext&&(this.targetPos=this.path.shift(),this._moveNext=!1),this.rotateRole(this.targetPos)):this.targetPlayer()},s.onForwardEnter=function(){g.start&&(this.rigid.wakeUp(),this.cd=.25+.4*Math.random(),this.checkPath())},s.onForwardUpdate=function(){g.start&&(this.targetPos||this.changeState(x.Forward),m.getDistance(this.node.position,this.targetPos)<8&&(this._moveNext=!0,this.changeState(x.Forward)),this.skip++,this.skip>3&&(this.rotateRole(this.targetPos),this.skip=0),this.run(this.dt,this.speed))},s.run=function(t,i){if(this.pos1.set(this.node.worldPosition.x,this.node.worldPosition.y),n.multiplyScalar(this._speed,this._forward,i*t*60),this.pos2.x=this.pos1.x+this._speed.x*c.pullRange,this.pos2.y=this.pos1.y+this._speed.y*c.pullRange,this.checkRay(this.pos1,this.pos2)){var e=c.pullStrenth*(8*Math.random()-4),s=c.pullStrenth*(1+1.1*Math.random());if(this._speed.set(e,s),this.lineRigid.applyLinearImpulseToCenter(this._speed,!0),this.duration>this.cd)return void this.changeState(x.Atk)}else this.rigid.linearVelocity=this._speed},s.onAtkEnter=function(){g.start&&(this.rigid.wakeUp(),this.rigid.linearVelocity=n.ZERO,this.rotateRole([this.target.position.x,this.target.position.y]),this._speed.x=-(200*Math.random()+100)*this._forward.x,this._speed.y=-(200*Math.random()+100)*this._forward.y,this.rigid.applyForceToCenter(this._speed,!0),this.cd=.08+.08*Math.random())},s.onAtkUpdate=function(){g.start&&this.duration>=this.cd&&(this.target=m.getRandomTarget(g.players),this.rotateRole([this.target.position.x,this.target.position.y]),this._speed.x=150*this._forward.x*(.5+.3*Math.random()),this._speed.y=150*this._forward.y*(.5+.3*Math.random()),this.rigid.applyForceToCenter(this._speed,!0),this.changeState(x.Forward))},s.checkRay=function(t,i){var e=r.instance.raycast(t,i,d.Closest,R);return 0!=e.length&&(this.lineRigid||(this.lineRigid=e[0].collider.node.getComponent(a)),!0)},s.rotateRole=function(t){this._forward.set(t[0]-this.node.position.x,t[1]-this.node.position.y).normalize(),this.roleAngel=Math.atan2(this._forward.x,this._forward.y)/.017453292222222222,this.node.angle=this.roleAngel},e}(u)).STATE=x,_=w))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./PoolMgr.ts","./EnemyAI.ts"],(function(n){"use strict";var t,i,e,s,o,r,c,a,h,u,l,f;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,e=n._decorator,s=n.Animation,o=n.director,r=n.Vec3,c=n.Component},function(n){a=n.events},function(n){h=n.GameConfig},function(n){u=n.Global},function(n){l=n.PoolMgr},function(n){f=n.default}],execute:function(){var m;i._RF.push({},"34751fAhM9CCLg2Ea1rPaYJ","EnemyMgr",void 0);var p=e.ccclass;e.property,n("EnemyMgr",p("EnemyMgr")(m=function(n){function i(){for(var t,i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return(t=n.call.apply(n,[this].concat(e))||this).anm=void 0,t.index=0,t.pos=new r,t}t(i,n);var e=i.prototype;return e.start=function(){this.anm=this.getComponent(s)},e.onEnable=function(){o.on(a.finishDraw,this.initEnemies,this)},e.onDisable=function(){o.off(a.finishDraw,this.initEnemies,this),this.unschedule(this.stopAnm),this.anm.pause()},e.initEnemies=function(){this.anm.play();var n=.1*h.levelEnemies;this.scheduleOnce(this.stopAnm,n),this.schedule(this.spawnEnemy,.1,h.levelEnemies)},e.stopAnm=function(){this.anm.stop()},e.getIndexPos=function(){this.index>3&&(this.index=0);var n=this.node.position,t=this.index%2*60-30+n.x,i=60*Math.floor(this.index/2)-30+n.y;return this.pos.set(t,i),this.index++,this.pos},e.spawnEnemy=function(){l.ins.getNode("BlackChick",u.bricksLayer,this.getIndexPos()).getComponent(f).initFSM()},i}(c))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Tools.ts","./ResMgr.ts"],(function(e){"use strict";var t,r,n,i,s,a,o,u,g,l,y,c,h,m,f,p,E,b,d,v,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createClass,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,g=e._decorator,l=e.Label,y=e.tween,c=e.Component,h=e.director},function(e){m=e.Key,f=e.events,p=e.ui},function(e){E=e.GameConfig},function(e){b=e.load,d=e.Tools,v=e.save},function(e){L=e.default}],execute:function(){var T,_,w,M,N,z,C,D;u._RF.push({},"f2cd7T7zp1DoqBFggKq4q3I","EnergyMgr",void 0);var R=g.ccclass,k=g.property;e("EnergyMgr",(T=R("EnergyMgr"),_=k(l),w=k(l),T(((D=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"energyLabel",z,i(t)),n(t,"timerLabel",C,i(t)),t._e=0,t._time=0,t}r(t,e);var u=t.prototype;return u.start=function(){t.ins=this;var e=Number(b(m.LastTime)),r=d.getDay();if(this.timerLabel.string="",e){var n=Number(b(m.Energy));n<E.startEnergy&&this.startTimer(),r>e&&(n<E.startEnergy&&(n=E.startEnergy),v(m.Energy,n),v(m.LastTime,r)),this.energyNum=n}else v(m.LastTime,r),v(m.Energy,E.startEnergy),this.energyNum=E.startEnergy},u.changeEnergy=function(e){void 0===e&&(e=!1);var r=Number(b(m.Energy));if(e){r+=E.addEnergy;var n=this.getComponent(t);return y(n).to(E.addEnergy/10,{energyNum:r}).start(),v(m.Energy,r),r>=E.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)),!0}return r-E.levelEnergy<0?(this.showEnergy(),!1):(r-=E.levelEnergy,v(m.Energy,r),this.energyLabel.string=""+r,r<E.startEnergy&&this.startTimer(),!0)},u.startTimer=function(){this.timerLabel.string="",this.schedule(this.updateTimer,1)},u.updateTimer=function(){if(this._time++,this._time>E.recoveryEnergyTime){this._time=0;var e=Number(b(m.Energy));return e++,v(m.Energy,e),this.energyLabel.string=""+e,void(e>E.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)))}var t=E.recoveryEnergyTime-this._time,r=Math.floor(t/60),n=t-60*r;this.timerLabel.string=r+":"+n},u.showEnergy=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.emit(f.Toast,"鸡蛋不足"),e.next=3,L.ins.getUI(p.MoneyView);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s(t,[{key:"energyNum",get:function(){return this._e},set:function(e){this._e=e,this.energyLabel.string=Math.floor(this._e)+""}}]),t}(c)).ins=null,z=t((N=D).prototype,"energyLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(N.prototype,"timerLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=N))||M));u._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,n,o,l,s,u,c,p,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e._decorator,o=e.CCString,l=e.SpriteFrame,s=e.Color,u=e.Prefab,c=e.JsonAsset,p=e.AudioClip,h=e.SpriteAtlas,m=e.Material}],execute:function(){var f,w,d,y,g,b,S,C,V,P,T,v,A,M,B,z,L,D,I,k,E,F,G,H,R,x,U,J,W,_,N,O;e("gameText",(function(){return})),a._RF.push({},"39f4cB5mBBD+L0+wGMDYvJe","Enums",void 0);var j=n.ccclass,K=n.property,Y=(e("adConfig",(f=j("adConfig"),w=K({type:o}),d=K({type:o}),y=K({type:o}),g=K({type:o}),f((C=t((S=function(){i(this,"platform",C,this),i(this,"id",V,this),i(this,"bannerId",P,this),i(this,"intersitialId",T,this),i(this,"videoId",v,this),i(this,"customId",A,this)}).prototype,"platform",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),V=t(S.prototype,"id",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=t(S.prototype,"bannerId",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(S.prototype,"intersitialId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(S.prototype,"videoId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(S.prototype,"customId",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=S))||b)),e("shareContent",j("shareContent")((z=t((B=function(){i(this,"shareId",z,this),i(this,"shareLink",L,this),i(this,"shareText",D,this)}).prototype,"shareId",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=t(B.prototype,"shareLink",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=t(B.prototype,"shareText",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"分享标题"}}),M=B))||M));e("penConfig",(I=j("penConfig"),k=K(l),E=K(s),I((H=t((G=function(){i(this,"penName",H,this),i(this,"penSF",R,this),i(this,"penColor",x,this)}).prototype,"penName",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),R=t(G.prototype,"penSF",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(G.prototype,"penColor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),F=G))||F)),e("shareConfig",(U=j("shareConfig"),J=K({type:Y}),U((N=t((_=function(){i(this,"platform",N,this),i(this,"sharePics",O,this)}).prototype,"platform",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),O=t(_.prototype,"sharePics",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=_))||W)),e("collisions",{DEFAULT:1,player:2,trap:4,water:8,brick:16,enemy:32}),e("ui",{HomeBtnView:{name:"HomeBtnView",layer:0,clear:!1},EditorView:{name:"EditorView",layer:0,clear:!0},BuildView:{name:"BuildView",layer:0,clear:!0},GameView:{name:"GameView",layer:3,clear:!1},BuildCardView:{name:"BuildCardView",layer:1,clear:!1},TopView:{name:"TopView",layer:4,clear:!1},ResultView:{name:"ResultView",layer:3,clear:!1},HomeView:{name:"HomeView",layer:0,clear:!1},TouchView:{name:"TouchView",layer:5,clear:!1},StoreView:{name:"StoreView",layer:4,clear:!1},MoneyView:{name:"MoneyView",layer:5,clear:!1},CustomView:{name:"CustomView",layer:5,clear:!0},AdView:{name:"AdView",layer:5,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1}}),e("events",{startCustom:"startCustom",restartGame:"restartGame",gameStart:"gameStart",initTrap:"initTrap",clearMap:"clearMap",changePen:"changePen",closeGame:"closeGame",initLevel:"initLevel",gameWin:"gameWin",startDraw:"startDraw",finishDraw:"finishDraw",showResult:"showResult",buildMap:"buildMap",paperOcacity:"paperOcacity",editMap:"editMap",playMap:"playMap",rollBg:"rollBg",changeTop:"changeTop",catWatch:"catWatch",Toast:"toast",Anm:"anm"}),e("topStates",{showHome:"showHome",showSetting:"showSetting",showEgg:"showEgg",showClock:"showClock",showStore:"showStore",hideStore:"hideStore",showAll:"showAll",hideAll:"hideAll"}),e("anms",{cry:"cry",idle:"idle",hurt:"hurt",happy:"happy"});e("default",function(){function e(){}return r(e,null,[{key:"gameText",get:function(){return this.cn}}]),e}()).cn={map:{saveFile:"保存文件成功，文件名：",currentItem:"当前物件 ",currentLevel:"当前关卡 ",saveFail:"保存失败",loadSuccess:"加载成功",saveSuccess:"保存失败",loadFail:"加载成功",outMap:"超出地图边界"},game:{fail:"是不是油饼！",noTutorial:"本关没有辅助线",win:"大吉大利！今晚吃鸡！"},home:{moreGame:"即将开放"},tools:{brick:"brick",delete:"删除工具",rotate:"旋转工具",line:"画线工具"}};e("Effects",{Star:"StarEffect"}),e("Key",{MapData:"MapData",CurrentPen:"CurrentPen",Sound:"Sound",Bgm:"Bgm",Pens:"Pens",Pause:"Pause",Timer:"Timer",Level:"Level",Shuffle:"Shuffle",Frost:"Frost",Undo:"Undo",Energy:"Energy",Star:"Star",LastTime:"LastTime"}),e("Props",{Scenes:"Scenes",Layers:"Layers",Comps:"Components",ShareConfig:"ShareConfig",Setting:"Setting",View:"View",AdConfig:"AdConfig",Ad:"Advertisement"}),e("Clips",{hurt:"hurt",happy:"happy",bgm:"bgm",photo:"photo",counter:"counter",btn:"btn",touch:"touch",gold:"gold",reward:"reward",merge:"merge",win:"win",lose:"lose"}),e("Assets",{BrickPrefab:{type:u,path:"Preload/Prefabs/Brick"},UiPrefab:{type:u,path:"Preload/Prefabs/UI"},Json:{type:c,path:"Preload/Jsons/"},Sound:{type:p,path:"Preload/Clips/"},Atlas:{type:h,path:"Preload/Atlas/"},Material:{type:m,path:"Preload/Materials/"}});a._RF.pop()}}}));

System.register("chunks:///_virtual/FileMgr.ts",["cc"],(function(e){"use strict";var n,t,o;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.sys}],execute:function(){n._RF.push({},"97508PoUZNAQ6tcvvL+CdJG","FileMgr",void 0);t.ccclass,t.property,e("FileMgr",function(){function e(){}var n=e.prototype;return n.loadFile=function(){return new Promise((function(e,n){var t=document.createElement("input");document.body.appendChild(t),t.type="file",t.accept=".json",t.onchange=function(n){var t=n.target.files;if(0!=t.length){var o=new FileReader;o.onload=function(n){var t=n.target.result;e&&e(t)},o.readAsText(t[0],"UTF-8")}else e&&e(null)},t.click()}))},n.saveFile=function(e,n){if(o.isBrowser){var t=new Blob([e],{type:"application/json"}),c=document.createElement("a");c.download=n,c.innerHTML="Download File",null!=window.webkitURL?c.href=window.webkitURL.createObjectURL(t):(c.href=window.URL.createObjectURL(t),c.style.display="none",document.body.appendChild(c)),c.click()}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FSM.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,s,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy,r=t.Component}],execute:function(){s._RF.push({},"6226fWbarZFzLQ7qc9Js8uH","FSM",void 0);t("default",function(t){function s(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).stateList=[],e._currentState="",e._preState="",e.duration=0,e.dt=0,e.paused=!1,e}e(s,t);var r=s.prototype;return r.addState=function(t){null==this.getState(t)?(this.stateList.push(t),1==this.stateList.length&&(this._currentState=t)):console.warn("FSM: current state ["+t+"] has been added")},r.addStates=function(t){var e=this;Object.keys(t).forEach((function(n){e.addState(t[n])}))},r.removeState=function(t){var e=this.getState(t);null!=e?this.stateList.splice(this.stateList.indexOf(e),1):console.warn("FSM:nthe state ["+t+"] does not exist")},r.getState=function(t){return-1!==this.stateList.indexOf(t)?t:null},r.resetState=function(){this.changeState()},r.changeState=function(t){void 0===t&&(t=this._preState);var e=this.getState(t);null!=e?(null!=this._currentState&&this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._preState=this._currentState,this._currentState=e,this.duration=0,this["on"+this._currentState+"Enter"]&&this["on"+this._currentState+"Enter"](this._currentState,this._preState)):console.log("FSM: current state ["+t+"] is not in state")},r.update=function(t){this.paused||0==t||null!=this._currentState&&(this.dt=t,this.duration+=t,this["on"+this._currentState+"Update"]&&this["on"+this._currentState+"Update"](this._currentState,this._preState))},r.RemoveAllState=function(){null!=this._currentState&&(this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._currentState=null),this.stateList.length=0},n(s,[{key:"currentState",get:function(){return this._currentState}},{key:"preState",get:function(){return this._preState}}]),s}(r));s._RF.pop()}}}));

System.register("chunks:///_virtual/FullscreenCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(t){"use strict";var e,n,o,r,s,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Widget,s=t.Component},function(t){l=t.Global}],execute:function(){var c;n._RF.push({},"a5930qwTIRAN7zDU5sxJM69","FullscreenCtrl",void 0);var i=o.ccclass;o.property,t("FullscreenCtrl",i("FullscreenCtrl")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){if(l.screenRatio>=1.1){var t=this.node.getComponent(r);t&&(t.isAlignTop&&(t.top=0),t.isAlignBottom&&(t.bottom=0))}},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc","./Global.ts","./PathFindMgr.ts","./GridConfig.ts"],(function(e){"use strict";var t,n,i,r;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Global},function(e){i=e.PathFindMgr},function(e){r=e.GridConfig}],execute:function(){t._RF.push({},"94d5ffa3EJAJ6Um3/bYwvGN","GameConfig",void 0);var a=r.x*r.size*.5,l=r.y*r.size*.5,o=e("GameConfig",function(){function e(){}return e.setMapItem=function(e,t,n){void 0===n&&(n=!1);var o=-1!=t.name.indexOf("player"),s=-1!=t.name.indexOf("enemy");if(n&&!o&&!s)for(var f=e[1];f<e[2];f++)for(var h=e[3];h<e[4];h++)i.ins.setNode([f,h]);t.setScale(e[5],e[6]),t.angle=0;var u=o?this.playerOffset:0,c=.5*(e[1]+e[2])*r.size-a,g=.5*(e[3]+e[4])*r.size-l;t.setPosition(c,g+u)},e.getTimer=function(e){var t=6+Math.floor(e/3)+Math.floor(e/5);return t>14&&(t=14),t},e.setStrenth=function(t){this.pullStrenth=1+.4*Math.floor(t/3)+1.4*Math.floor(t/11),e.timeScale>1&&(this.pullStrenth*=1.4*e.timeScale),this.pullStrenth>13*e.timeScale&&(this.pullStrenth=13*e.timeScale),this.pullRange=2+.3*Math.floor(t/4)+.5*Math.floor(t/10),this.pullRange>12&&(this.pullRange=12),this.levelEnemies=1+Math.floor(t/6)+Math.floor(t/15),this.levelEnemies>10&&(this.levelEnemies=10)},e.getRank=function(){var e=Math.floor(n.time/5);return e>3&&(e=3),e},e}());o.maxShareLength=2048,o.pullRange=2,o.pullStrenth=2,o.levelEnemies=2,o.enemySpeed=8,o.penConfigs=void 0,o.lineWidth=18,o.gravity=-500,o.timeScale=1,o.tutorialLineLength=40,o.gameLineLength=18,o.skinList=["cat"],o.addEnergy=20,o.levelEnergy=5,o.recoveryEnergyTime=300,o.startEnergy=25,o.maxLevel=10,o.playerOffset=-23,o.startShuffle=2,o.startFrost=1,o.startUndo=3,t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./Astar.ts","./lineLogic.ts","./GridConfig.ts","./Tools.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts"],(function(t){"use strict";var i,n,e,s,o,h,r,c,a,l,u,g,p,d,f,y,T,v,m,C,P,E,w,D,L,G,I,U,_,M,R,O,k,N,S;return{setters:[function(t){i=t.inheritsLoose,n=t.createClass,e=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,h=t.Vec2,r=t.Vec3,c=t.PhysicsSystem2D,a=t.UITransform,l=t.Node,u=t.RigidBody2D,g=t.ERigidBody2DType,p=t.PhysicsGroup,d=t.Graphics,f=t.Color,y=t.input,T=t.Input,v=t.director,m=t.PolygonCollider2D,C=t.ERaycast2DType,P=t.Component,E=t.Animation},function(t){w=t.events,D=t.Key,L=t.collisions,G=t.ui},function(t){I=t.GameConfig},function(t){U=t.Global},function(t){_=t.buildGrid},function(t){M=t.lineLogic},function(t){R=t.GridConfig},function(t){O=t.Tools},function(t){k=t.PathFindMgr},function(t){N=t.PoolMgr},function(t){S=t.default}],execute:function(){o._RF.push({},"36bbee5djtCuIsr78qHGfho","GameMgr",void 0);var x=new h,A=new h,H=new h,b=new r,V=L.trap+L.player+L.brick+L.water;t("GameMgr",function(t){function o(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).tutorGc=null,i.gc=null,i.touchID=null,i.dis=0,i.line=null,i.trans=null,i.rigid=null,i.polys=[],i.points=[],i.lineLength=I.gameLineLength/I.timeScale,i._inited=!1,i.Physics=void 0,i}i(o,t);var P=o.prototype;return P.init=function(){this._inited||(k.ins.init(_(R.x,R.y)),this.Physics=c.instance,this.trans=U.layer[1].getComponent(a),this.initTutorialLine(),this.initGameLine(),this._inited=!0),this.changePen(U.currentPen),this.regEnvents(),this.resetLine()},P.changePen=function(t){var i=I.penConfigs[t],n=i.penName,e=S.ins.getMat(n);this.gc.material=e,this.gc.strokeColor=i.penColor},P.initGameLine=function(){this.line=new l("lineNodeLayer"),this.lineLength*=U.screenRatio,this.line.parent=U.layer[2],this.rigid=this.line.addComponent(u),this.rigid.type=g.Dynamic,this.rigid.gravityScale=1.8,this.rigid.linearDamping=0,this.rigid.angularDamping=0,this.rigid.group=p.DEFAULT,this.gc=this.line.addComponent(d),this.gc.lineJoin=0,this.gc.lineCap=0,this.gc.lineWidth=I.lineWidth},P.initTutorialLine=function(){var t=new l("tutoriallineNodeLayer");t.parent=U.layer[2],this.tutorGc=t.addComponent(d),this.tutorGc.lineJoin=0,this.tutorGc.lineCap=0,this.tutorGc.strokeColor=f.CYAN,this.tutorGc.lineWidth=I.lineWidth},P.regEnvents=function(){y.on(T.EventType.TOUCH_START,this.onTouchStart,this),y.on(T.EventType.TOUCH_MOVE,this.onTouchMove,this),y.on(T.EventType.TOUCH_END,this.onTouchEnd,this),y.on(T.EventType.TOUCH_CANCEL,this.onTouchEnd,this),v.on(w.changePen,this.changePen,this)},P.unRegEvents=function(){y.off(T.EventType.TOUCH_START,this.onTouchStart,this),y.off(T.EventType.TOUCH_MOVE,this.onTouchMove,this),y.off(T.EventType.TOUCH_END,this.onTouchEnd,this),y.off(T.EventType.TOUCH_CANCEL,this.onTouchEnd,this),v.off(w.changePen,this.changePen,this),this.rigid.sleep()},P.getUIpos=function(t){return b.set(t.x,t.y),this.trans.convertToNodeSpaceAR(b,b),b},P.resetLine=function(){if(this.Physics.gravity=x.set(0,0),U.isDraw=!1,0!=this.points.length||0!=this.polys.length){this.rigid.linearVelocity=h.ZERO,this.rigid.angularVelocity=0,this.rigid.sleep(),this.points.length=0,this.line.setPosition(r.ZERO),this.line.angle=0;var t=this.polys.length;if(t>0)for(var i=0;i<t;i++)if(i<120){var n=this.polys[i];O.clearPoly(n)}else{var e=this.polys.pop();O.clearPoly(e),e.destroy()}this.gc.clear()}},P.onTouchStart=function(t){if(U.start&&!U.drawEnd){var i=t.touch,n=i.getID();if(null!=this.touchID){if(n!=this.touchID)return}else this.touchID=n;if(!U.isDraw){v.emit(w.startDraw,!0),U.isDraw=!0,this.resetLine(),i.getUILocation(x);var e=this.getUIpos(x);this.showTouch(e),this.dis=this.lineLength}}},P.onTouchMove=function(t){if(U.start&&!U.drawEnd){var i=t.touch;if(i.getID()==this.touchID&&(i.getDelta(x),this.dis+=Math.abs(x.x)+Math.abs(x.y),this.dis>=this.lineLength)){i.getUILocation(A);var n=this.getUIpos(A);0==this.points.length?this.checkPoint(A)||(this.gc.moveTo(n.x,n.y),this.storePoint(n)):this.checkRay(A,H)?this.onTouchEnd(t):(this.gc.lineTo(n.x,n.y),this.gc.stroke(),this.storePoint(n))}}},P.storePoint=function(t){H.set(A),M.pushPoints(this.points,[t.x,t.y]),this.dis=0},P.onTouchEnd=function(t){if(U.start&&!U.drawEnd){var i=t.touch;if(i.getID()==this.touchID){this.touchID=null,i.getUILocation(A);var n=this.getUIpos(A);this.showTouch(n),this.drawPhysic()}}},P.drawPhysic=function(){var t=this,i=this.points.length;if(i<=1)return v.emit(w.startDraw,!1),void(U.isDraw=!1);U.drawEnd=!0;for(var n=0,e=0;e<i-1;e++){if(n=0==e?1:e==i-2?2:0,!this.polys[e]){var s=this.line.addComponent(m);s.friction=0,this.polys[e]=s}var o=this.points[e],h=this.points[e+1];M.setPolyBox(this.polys[e],o,h,n)}U.isTutorial&&(U.isTutorial=!1,this.tutorGc.clear()),this.scheduleOnce((function(){t.rigid.wakeUp(),c.instance.gravity=A.set(0,I.gravity*I.timeScale),v.emit(w.finishDraw),v.emit(D.Timer,U.time)}))},P.showTouch=function(){var t=e(s().mark((function t(i){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.ins.getUI(G.TouchView);case 2:n=t.sent,i[0]?n.setPosition(i[0],i[1]):n.setPosition(i),n.getComponent(E).play(),this.scheduleOnce((function(){N.ins.putNode(n)}),1);case 6:case"end":return t.stop()}}),t,this)})));return function(i){return t.apply(this,arguments)}}(),P.checkPoint=function(t){return 0!=this.Physics.testPoint(t).length},P.checkRay=function(t,i){return 0!=this.Physics.raycast(i,t,C.Closest,V).length},n(o,null,[{key:"ins",get:function(){return this._ins||(this._ins=new o),this._ins}}]),o}(P))._ins=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./GameMgr.ts","./LevelMgr.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts","./BaseView.ts","./ResultView.ts"],(function(t){"use strict";var e,i,n,s,r,o,a,l,c,u,h,p,f,y,d,m,g,w,L,b,v,G,R,M,V,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,c=t.Node,u=t.director,h=t.PhysicsSystem2D,p=t.Vec2,f=t.RigidBody2D},function(t){y=t.events,d=t.topStates,m=t.Key,g=t.default,w=t.ui},function(t){L=t.Global},function(t){b=t.GameMgr},function(t){v=t.LevelMgr},function(t){G=t.PathFindMgr},function(t){R=t.PoolMgr},function(t){M=t.default},function(t){V=t.BaseView},function(t){T=t.ResultView}],execute:function(){var k,B,x,D,P,C,I,E,z,Z;a._RF.push({},"1abc79+ZcZMPqcXS4MUpRt1","GameView",void 0);var F=l.ccclass,N=l.property;t("GameView",(k=F("GameView"),B=N(c),x=N(c),D=N(c),k(((Z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"bricksLayer",I,s(e)),n(e,"playersLayer",E,s(e)),n(e,"btnsLayer",z,s(e)),e.pIndex=0,e.source=0,e.lineL=0,e}i(e,t);var a=e.prototype;return a.start=function(){e.ins=this},a.onEnable=function(){L.bricksLayer=this.bricksLayer,L.playersLayer=this.playersLayer,u.emit(y.changeTop,d.showClock),u.on(y.showResult,this.GameResult),u.on(y.restartGame,this.restartGame,this),u.on(y.clearMap,this.clearMap,this),u.on(y.startDraw,this.hideBtns,this),u.on(y.closeGame,this.goBack,this),u.on(y.startCustom,this.onClose,this)},a.GameResult=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.ins.getUI(w.ResultView);case 2:t.sent.getComponent(T).init();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.onDisable=function(){u.off(y.startDraw,this.hideBtns,this),u.off(y.clearMap,this.clearMap,this),u.off(y.showResult,this.GameResult),u.off(y.restartGame,this.restartGame,this),u.off(y.closeGame,this.goBack,this),u.off(y.startCustom,this.onClose,this),u.emit(m.Timer,0),b.ins.resetLine(),b.ins.unRegEvents(),L.isTutorial&&(L.isTutorial=!1,b.ins.tutorGc.clear()),L.start=!1,L.isDraw=!1,this.clearMap()},a.init=function(t,e){this.source=t,1==t&&(L.time=9),h.instance.gravity=p.ZERO,b.ins.init(),G.ins.clear(),v.ins.loadLevel(e)},a.hideBtns=function(t){this.btnsLayer.active=!t},a.restartGame=function(){v.ins.restartGame()},a.skipLevelBtn=function(){var e=this;t.prototype.showVideo.call(this,(function(){e.GameResult()}))},a.lineTipBtn=function(){var e=this;L.isDraw||(this.lineL=L.tutorialPoints.length,0!=this.lineL?t.prototype.showVideo.call(this,(function(){e.showTutorial()})):u.emit(y.Toast,g.gameText.game.noTutorial))},a.showTutorial=function(){L.start=!1,L.isTutorial=!0,b.ins.resetLine(),this.pIndex=0,this.unschedule(this.drawLine),this.schedule(this.drawLine,.06,this.lineL)},a.drawLine=function(){var t=L.tutorialPoints[this.pIndex];0==this.pIndex?(b.ins.tutorGc.moveTo(t[0],t[1]),b.ins.showTouch(t)):(b.ins.tutorGc.lineTo(t[0],t[1]),b.ins.tutorGc.stroke()),this.pIndex++,this.pIndex==this.lineL&&(L.start=!0,b.ins.showTouch(t),this.unschedule(this.drawLine))},a.clearMap=function(){u.emit(y.paperOcacity,55),b.ins.resetLine();for(var t=this.bricksLayer.children.length-1;t>=0;t--){var e=this.bricksLayer.children[0],i=e.getComponent(f);i&&(i.linearVelocity=p.ZERO,i.angularVelocity=0),R.ins.putNode(e)}for(t=this.playersLayer.children.length-1;t>=0;t--){var n=this.playersLayer.children[0],s=n.getComponent(f);s&&(s.linearVelocity=p.ZERO,s.angularVelocity=0),R.ins.putNode(n)}this.btnsLayer.active=!0},a.onClose=function(){t.prototype.close.call(this)},a.goBack=function(){t.prototype.close.call(this),0==this.source?R.ins.getNode("HomeView",L.layer[1]):M.ins.getUI(w.BuildView)},e}(V)).ins=null,I=e((C=Z).prototype,"bricksLayer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"playersLayer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(C.prototype,"btnsLayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=C))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["cc","./Enums.ts"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.director},function(e){r=e.Key}],execute:function(){t._RF.push({},"56d8cv+sSVOaIulMqAKHlgJ","Global",void 0);var s=e("Global",function(){function e(){}return e.Pause=function(t){void 0===t&&(t=!0),n.emit(r.Pause,t),e.start=!t},e}());s.currentPen=0,s.pens=[1,0,0,0,0,0,0,0],s.enableShareAd=!0,s.playersLayer=null,s.bricksLayer=null,s.tutorialPoints=[],s.screenRatio=1,s.Debug=!1,s.runtime=!1,s.start=!1,s.levelEnemies=1,s.isTutorial=!1,s.isDraw=!1,s.drawEnd=!1,s.isMobile=!1,s.high=!1,s.scale=2,s.LoadingRate=0,s.layer=[],s.scene=[],s.players=[],s.isEn=!1,s.maxLevel=20,s.level=1,s.currlevel=1,s.time=0,s.bgm=1,s.sound=1,t._RF.pop()}}}));

System.register("chunks:///_virtual/GridConfig.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"64cd59E+/xID4Y4JqpA1lSj","GridConfig",void 0);var c=i("GridConfig",(function(){}));c.x=10,c.y=22,c.safeY=14,c.size=75,c.actions=[],t._RF.pop()}}}));

System.register("chunks:///_virtual/GridCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){"use strict";var e,r,i,o,n,s,c,a,p,l,u,y,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,c=t._decorator,a=t.Color,p=t.Sprite,l=t.director,u=t.tween,y=t.Component},function(t){h=t.events}],execute:function(){var f,d,m,v,g,w;s._RF.push({},"960eb/0yIBBhKoSH4h5i4Eq","GridCtrl",void 0);var C=c.ccclass,b=c.property,O=new a;t("GridCtrl",(f=C("GridCtrl"),d=b(p),m=b({slide:!0,min:1,max:255}),f((w=e((g=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"sprite",w,o(e)),e.mat=null,e}r(e,t);var s=e.prototype;return s.start=function(){this.mat=this.sprite.customMaterial,l.on(h.paperOcacity,this.tweenOpacity,this),this.tweenOpacity(90)},s.tweenOpacity=function(t,r){if(this.opacity!=t){r||(r=.02*Math.abs(t-this.opacity));var i=this.getComponent(e);u(i).to(r,{opacity:t}).start()}},n(e,[{key:"opacity",get:function(){return this.sprite.color.a},set:function(t){O.set(this.sprite.color),O.a=t,this.sprite.color=O}}]),e}(y)).prototype,"sprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(g.prototype,"opacity",[m],Object.getOwnPropertyDescriptor(g.prototype,"opacity"),g.prototype),v=g))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/HomeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./EnergyMgr.ts","./ResMgr.ts","./BaseView.ts","./GameView.ts"],(function(t){"use strict";var e,n,o,r,i,s,a,c,u,h,m,f,p,l,g;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,s=t.director,a=t.Node},function(t){c=t.events,u=t.topStates,h=t.default,m=t.ui},function(t){f=t.EnergyMgr},function(t){p=t.default},function(t){l=t.BaseView},function(t){g=t.GameView}],execute:function(){var w;r._RF.push({},"1e0adWjukFNxKV1Icu8Lw/A","HomeView",void 0);var y=i.ccclass;i.property,t("HomeView",y("HomeView")(w=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var i=r.prototype;return i.start=function(){s.on(c.gameStart,this.showBtn,this)},i.onEnable=function(){s.on(c.startCustom,this.closeHome,this),s.emit(c.changeTop,u.showAll)},i.onDisable=function(){s.off(c.startCustom,this.closeHome,this),s.off(c.gameStart,this.showBtn,this)},i.showBtn=function(){var t=n(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.off(c.gameStart,this.showBtn,this),t.next=3,p.ins.getUI(m.HomeBtnView,this.node);case 3:e=t.sent,e.getChildByName("buildBtn").on(a.EventType.TOUCH_END,this.goBuild,this),e.getChildByName("moreBtn").on(a.EventType.TOUCH_END,this.moreGame,this),e.getChildByName("startBtn").on(a.EventType.TOUCH_END,this.goGame,this),e.getChildByName("chickBtn").on(a.EventType.TOUCH_END,this.goGame,this);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.goGame=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.ins.changeEnergy(!1)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p.ins.getUI(m.GameView);case 5:e.sent.getComponent(g).init(0),t.prototype.close.call(this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.closeHome=function(){t.prototype.close.call(this)},i.goBuild=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.ins.getUI(m.BuildView);case 2:t.prototype.close.call(this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.moreGame=function(){s.emit(c.Toast,h.gameText.home.moreGame)},r}(l))||w);r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemsCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./Enums.ts","./GameConfig.ts","./Global.ts","./Tools.ts"],(function(t){"use strict";var e,n,i,r,o,l,s,u,a,f,h,c,d,b,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.Node,u=t.Label,a=t.Component},function(t){f=t.AdMgr},function(t){h=t.Key},function(t){c=t.GameConfig},function(t){d=t.Global},function(t){b=t.load,g=t.save}],execute:function(){var p,B,v,m,y,C,L,z,N,S,_;o._RF.push({},"b268fMz94xLgpzhGheHuKAF","ItemsCtrl",void 0);var U=l.ccclass,I=l.property;t("ItemsCtrl",(p=U("ItemsCtrl"),B=I(s),v=I(s),m=I(s),y=I(s),p((z=e((L=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"freezeBg",z,r(e)),i(e,"undoBtn",N,r(e)),i(e,"shuffleBtn",S,r(e)),i(e,"freezeBtn",_,r(e)),e.undoLabel=null,e.shuffleLabel=null,e.frostLabel=null,e}n(e,t);var o=e.prototype;return o.onEnable=function(){var t=Number(b(h.Star));t||(g(h.Star,0),t=0),this._registerBtns(),this._initData()},o._initData=function(){this.shuffleLabel=this.shuffleBtn.getComponentInChildren(u);var t=Number(b(h.Shuffle));t||(t=c.startShuffle,g(h.Shuffle,t)),this.shuffleLabel.string=""+t,this.undoLabel=this.undoBtn.getComponentInChildren(u);var e=Number(b(h.Undo));e||(e=c.startUndo,g(h.Undo,e)),this.undoLabel.string=""+e,this.frostLabel=this.freezeBtn.getComponentInChildren(u);var n=Number(b(h.Frost));n||(n=c.startFrost,g(h.Frost,n)),this.frostLabel.string=""+n},o._registerBtns=function(){var t=this;this.shuffleBtn.on(s.EventType.TOUCH_END,(function(){t.shuffle()}),this),this.undoBtn.on(s.EventType.TOUCH_END,(function(){t.undo()}),this)},o.undo=function(){var t=this;if(d.start){var e=Number(b(h.Undo));!e||e<=0?f.showVideo((function(){e=c.startUndo,g(h.Undo,e),t.undoBtn.getChildByName("videoBtn").active=!1,t.undoLabel.string=""+e})):(e--,g(h.Undo,e),this.undoLabel.string=""+e,e<=0&&(this.undoBtn.getChildByName("videoBtn").active=!0))}},o.shuffle=function(){var t=this;if(d.start){var e=Number(b(h.Shuffle));!e||e<=0?f.showVideo((function(){e=c.startShuffle,g(h.Shuffle,e),t.shuffleBtn.getChildByName("videoBtn").active=!1,t.shuffleLabel.string=""+e})):(e--,g(h.Shuffle,e),this.shuffleLabel.string=""+e,e<=0&&(this.shuffleBtn.getChildByName("videoBtn").active=!0))}},e}(a)).prototype,"freezeBg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"undoBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(L.prototype,"shuffleBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(L.prototype,"freezeBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./Tools.ts","./PoolMgr.ts","./ResMgr.ts"],(function(e){"use strict";var t,n,i,a,s,r,o,l,u,c,f,h,m,p,v;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,a=e.Vec3,s=e.director,r=e.Component},function(e){o=e.events,l=e.topStates,u=e.Key,c=e.default},function(e){f=e.GameConfig},function(e){h=e.Global},function(e){m=e.Tools},function(e){p=e.PoolMgr},function(e){v=e.default}],execute:function(){i._RF.push({},"0a6faMj+o5KkJNm/Burah9d","LevelMgr",void 0);new a;e("LevelMgr",function(e){function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).data=[],t}t(i,e);var a=i.prototype;return a.loadLevel=function(e){h.players=[],e?(this.data=e,this.initLevel(e),f.setStrenth(12)):(e=i.loadLevel(),f.setStrenth(h.level),e&&(this.data=e,this.initLevel(e)))},a.restartGame=function(){this.data&&this.initLevel(this.data)},a.initLevel=function(e){s.emit(o.changeTop,l.hideStore),s.emit(o.clearMap),s.emit(u.Timer,0);var t=e.mapData;if(t){var n=t.length;if(n>0){for(var i=0;i<n;i++){var a=t[i],r=a[0],f=p.ins.getNode(r);this.setItem(a,f)}e.points.length>0?h.tutorialPoints=e.points:h.tutorialPoints.length=0,this.scheduleOnce((function(){h.isDraw=!1,h.drawEnd=!1,h.start=!0,s.emit(o.initTrap,m.getOne())}))}else s.emit(o.Toast,c.gameText.map.loadFail,1)}},i.loadLevel=function(){var e=h.level;return e>h.maxLevel&&(e=h.maxLevel),h.time=f.getTimer(e),s.emit(o.Toast,c.gameText.map.currentLevel+e),v.ins.getJson(""+e)},a.setItem=function(e,t){-1!=t.name.indexOf("player")?(t.parent=h.playersLayer,h.players.push(t)):t.parent=h.bricksLayer,f.setMapItem(e,t,!0)},n(i,null,[{key:"ins",get:function(){return this._ins||(this._ins=new i),this._ins}}]),i}(r))._ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/lineLogic.ts",["cc","./GameConfig.ts","./VecPool.ts","./Tools.ts"],(function(e){"use strict";var s,t,i,n,a;return{setters:[function(e){s=e.cclegacy,t=e.Vec2},function(e){i=e.GameConfig},function(e){n=e.VecPool},function(e){a=e.Tools}],execute:function(){s._RF.push({},"af6f3LFHMhIGIeneX+TuGdZ","lineLogic",void 0);new t,new t,e("lineLogic",function(){function e(){}return e.setPolyBox=function(e,s,l,c){a.clearPoly(e);var o,r,u,f,h=.5*i.lineWidth,p=n.ins.Vec2.set(l[0]-s[0],l[1]-s[1]);switch(t.normalize(p,p),c){case 0:o=n.ins.Vec2.set(p.y,-p.x).multiplyScalar(h).add2f(s[0],s[1]),r=n.ins.Vec2.set(-p.y,p.x).multiplyScalar(h).add2f(s[0],s[1]),u=n.ins.Vec2.set(p.y,-p.x).multiplyScalar(h).add2f(l[0],l[1]),f=n.ins.Vec2.set(-p.y,p.x).multiplyScalar(h).add2f(l[0],l[1]),e.points=[o,r,f,u];break;case 1:o=n.ins.Vec2.set(s[0],s[1]),r=n.ins.Vec2.set(p.y,-p.x).multiplyScalar(h).add2f(l[0],l[1]),u=n.ins.Vec2.set(-p.y,p.x).multiplyScalar(h).add2f(l[0],l[1]),e.points=[o,r,u];break;case 2:o=n.ins.Vec2.set(p.y,-p.x).multiplyScalar(h).add2f(s[0],s[1]),r=n.ins.Vec2.set(-p.y,p.x).multiplyScalar(h).add2f(s[0],s[1]),u=n.ins.Vec2.set(l[0],l[1]),e.points=[o,r,u]}return e.apply(),e},e.normalize=function(e){var s=e[0],t=e[1],i=s*s+t*t;i>0&&(i=1/Math.sqrt(i),e[0]=s*i,e[1]=t*i)},e.pushPoints=function(e,s){var t=e.length;if(t<3)e.push(s);else{var i=e[t-2],n=e[t-1],a=[i[0]-n[0],i[1]-n[1]],l=[n[0]-s[0],n[1]-s[1]];this.normalize(a),this.normalize(l);var c=a[0],o=a[1],r=l[0],u=l[1],f=.1;c>=-f&&c<f?c=f:c<0&&c>-f&&(c=-f),o>=0&&o<f?o=f:o<0&&o>-f&&(o=-f),r>=0&&r<f?r=f:r<0&&r>-f&&(r=-f),u>=0&&u<f?u=f:u<0&&u>-f&&(u=-f);var h=c/r,p=o/u;if(p>0&&h<0)if(Math.abs(c)==f&&Math.abs(r)==f)e[e.length]=s;else e.push(s);else if(h>0&&p<0){if(Math.abs(o)==f&&Math.abs(u)==f)e[e.length]=s;else e.push(s)}else if(h>0&&p>0){var y=h/p;if(y>.96&&y<1.04)e[e.length]=s;else e.push(s)}else e.push(s)}},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Tools.ts"],(function(t){"use strict";var o,e,i,r,n,a,l,s,c,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Sprite,s=t.Component},function(t){c=t.Global},function(t){u=t.Tools}],execute:function(){var d,p,f,h,L;n._RF.push({},"91714+LEbNFq5BWdU9PslLO","LoadCtrl",void 0);var y=a.ccclass,g=a.property;t("LoadCtrl",(d=y("LoadCtrl"),p=g(l),d((L=o((h=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o=t.call.apply(t,[this].concat(n))||this,i(o,"load",L,r(o)),o.isload=!0,o}e(o,t);var n=o.prototype;return n.closeLoad=function(){this.isload=!1,u.clearUI(this.node)},n.update=function(t){this.isload&&(this.load.fillRange=c.LoadingRate,c.LoadingRate>=.99&&this.closeLoad())},o}(s)).prototype,"load",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameConfig.ts","./Global.ts","./Main.ts","./BuildView.ts","./EditorMgr.ts","./EditorView.ts","./FileMgr.ts","./GridConfig.ts","./MapItem.ts","./MapTools.ts","./ToastCtrl.ts","./AdMgr.ts","./WxPlatform.ts","./AdCtrl.ts","./CaptureCtrl.ts","./FullscreenCtrl.ts","./GridCtrl.ts","./ItemsCtrl.ts","./LoadCtrl.ts","./PlayerCtrl.ts","./TrapCtrl.ts","./Enums.ts","./EnemyAI.ts","./EnemyMgr.ts","./Astar.ts","./FSM.ts","./lineLogic.ts","./AudioMgr.ts","./DataMgr.ts","./EnergyMgr.ts","./GameMgr.ts","./LevelMgr.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts","./TimerMgr.ts","./VecPool.ts","./testLine.ts","./CamShot.ts","./Tools.ts","./AdView.ts","./BaseView.ts","./BuildCardView.ts","./CustomView.ts","./GameView.ts","./HomeView.ts","./MoneyView.ts","./ResultView.ts","./StoreView.ts","./TopView.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WxPlatform.ts","./GridCtrl.ts","./Enums.ts","./GameConfig.ts","./Global.ts","./ResMgr.ts","./CamShot.ts","./Tools.ts","./CustomView.ts"],(function(e){"use strict";var t,n,r,i,a,o,s,u,l,c,p,f,g,d,m,h,y,b,v,S,C,w,x,P,E,R,L,O,z,I,A,k,D,T,U,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,l=e.CCInteger,c=e.Node,p=e.sys,f=e.view,g=e.director,d=e.Canvas,m=e.instantiate,h=e.game,y=e.PhysicsSystem2D,b=e.Component},null,function(e){v=e.GridCtrl},function(e){S=e.Props,C=e.adConfig,w=e.shareConfig,x=e.penConfig,P=e.Key,E=e.ui,R=e.events,L=e.topStates,O=e.Assets},function(e){z=e.GameConfig},function(e){I=e.Global},function(e){A=e.default},function(e){k=e.CamShot},function(e){D=e.Tools,T=e.load,U=e.save},function(e){V=e.CustomView}],execute:function(){var G,M,B,W,_,H,N,J,q,F,K,j,Q,X,Y,Z,$,ee,te,ne,re,ie,ae,oe;s._RF.push({},"5851e4Oe/VNRp/6qH6dPqUm","Main",void 0);var se=u.ccclass,ue=u.property;e("Main",(G=se("Main"),M=ue({tooltip:"add Energy Set up",group:S.Setting,displayOrder:0}),B=ue({type:l,tooltip:"max Energy",group:S.Setting,displayOrder:0}),W=ue({type:l,tooltip:"max Level Set up",group:S.Setting,displayOrder:0}),_=ue({type:C,tooltip:"Id for banner",group:S.AdConfig,displayOrder:1}),H=ue({tooltip:"enable share ad when no videos",group:S.AdConfig,displayOrder:1}),N=ue({type:w,tooltip:"Id for Share",group:S.ShareConfig,displayOrder:1}),J=ue({tooltip:"use high performance",group:S.Setting,displayOrder:0}),q=ue({type:x,tooltip:"pen items config",group:S.Setting,displayOrder:1}),F=ue({type:v,group:S.Comps}),K=ue(c),G(((oe=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"addEnergy",X,i(t)),r(t,"maxEnergy",Y,i(t)),r(t,"maxLevel",Z,i(t)),r(t,"Platforms",$,i(t)),r(t,"EnableShareAd",ee,i(t)),r(t,"Shares",te,i(t)),r(t,"highPerformance",ne,i(t)),r(t,"penConfigs",re,i(t)),r(t,"grid",ie,i(t)),r(t,"HomeView",ae,i(t)),t.level=null,t.canvas=null,t.layer=[],t}n(t,e);var s=t.prototype;return s.onLoad=function(){p.platform==p.Platform.DESKTOP_BROWSER&&f.setResolutionPolicy(3),D.setRatio(),this.setting(),t.ins=this},s.start=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadData(),e.next=3,this.loadRes();case 3:this.initUI(),this.initWechat();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadData=function(){z.penConfigs=this.penConfigs,I.maxLevel=this.maxLevel;var e=T(P.Level);e||(e=1,U(P.Level,e)),I.level=e;var t=T(P.Energy);t||(t=z.startEnergy,U(P.Energy,t));var n=T(P.CurrentPen);n?I.currentPen=n:(n=I.currentPen,U(P.CurrentPen,n));var r=T(P.Pens,2);r?I.pens=r:(r=JSON.stringify(I.pens),U(P.Pens,r));var i=T(P.Sound);i?I.sound=i:(i=I.sound,U(P.Sound,i));var a=T(P.Bgm);a?I.bgm=a:(a=I.bgm,U(P.Bgm,a))},s.initUI=function(){var e=g.getScene();this.canvas=e.getComponentInChildren(d).node;for(var t=0;t<=7;t++){var n=this.layer[0]?m(this.layer[0]):D.createUI();n.name="layer"+t,n.parent=this.canvas,I.layer[t]=this.layer[t]=n}A.ins.getUI(E.TopView),A.ins.getUI(E.ToastView),g.emit(R.gameStart),g.emit(R.changeTop,L.showAll),k.ins.initCam()},s.loadRes=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.ins.loadBundle(1,.15);case 2:return e.next=4,A.ins.loadRes(1,O.UiPrefab,.2);case 4:return e.next=6,A.ins.loadRes(1,O.BrickPrefab,.3);case 6:return e.next=8,A.ins.loadRes(1,O.Sound,.2);case 8:return e.next=10,A.ins.loadRes(1,O.Json,.1);case 10:return e.next=12,A.ins.loadRes(1,O.Material,.05);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.setting=function(){this.highPerformance?(h.frameRate=60,z.timeScale=1):(h.frameRate=30,z.enemySpeed*=.45,y.instance.maxSubSteps=3,z.timeScale=1.8),I.enableShareAd=this.EnableShareAd,I.isEn=D.isEn(),I.runtime=!0,z.maxLevel=this.maxEnergy,z.addEnergy=this.addEnergy,z.maxLevel=this.maxLevel},s.initWechat=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadWechatData=function(){var e=a(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.map){e.next=3;break}return e.abrupt("return");case 3:if(!(r=JSON.parse(n))||!r.id){e.next=9;break}return e.next=7,A.ins.getUI(E.CustomView);case 7:e.sent.getComponent(V).init(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(b)).ins=null,X=t((Q=oe).prototype,"addEnergy",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),Y=t(Q.prototype,"maxEnergy",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),Z=t(Q.prototype,"maxLevel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),$=t(Q.prototype,"Platforms",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=t(Q.prototype,"EnableShareAd",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),te=t(Q.prototype,"Shares",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=t(Q.prototype,"highPerformance",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=t(Q.prototype,"penConfigs",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=t(Q.prototype,"grid",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Q.prototype,"HomeView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Q))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/MapItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GridConfig.ts"],(function(t){"use strict";var e,i,s,r,n,o,a,l,p,h,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,a=t.Sprite,l=t.SpriteFrame,p=t.UITransform,h=t.Component},function(t){c=t.default},function(t){u=t.GridConfig}],execute:function(){var f,m,d,g,x,z,y;n._RF.push({},"7d34arbe7xGI4z1mRWRolh7","MapItem",void 0);var M=o.ccclass,b=o.property;t("MapItem",(f=M("MapItem"),m=b(a),d=b(l),f((z=e((x=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,s(e,"sp",z,r(e)),s(e,"sfs",y,r(e)),e.size=null,e.grid=[1,1],e.isBrush=!1,e.isDelete=!1,e.isRotate=!1,e.isDraw=!1,e}return i(e,t),e.prototype.init=function(t,e,i){this.isBrush=-1!=t.indexOf(c.gameText.tools.brick),-1!=t.indexOf(c.gameText.tools.delete)?this.isDelete=!0:-1!=t.indexOf(c.gameText.tools.rotate)?(this.isRotate=!0,this.sp.spriteFrame=this.sfs[0]):-1!=t.indexOf(c.gameText.tools.line)&&(this.isDraw=!0,this.sp.spriteFrame=this.sfs[1]);var s=this.sp.node;s.name=t,i&&(this.sp.spriteFrame=i.spriteFrame,this.sp.color=i.color),e||(e=this.node.getComponent(p).contentSize),this.size=e,s.getComponent(p).setContentSize(e);var r=62/Math.max(e.width,e.height);s.setScale(r,r),this.grid[0]=Math.max(1,Math.round(e.width/u.size)),this.grid[1]=Math.max(1,Math.round(e.height/u.size))},e}(h)).prototype,"sp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(x.prototype,"sfs",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=x))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/MapTools.ts",["cc"],(function(e){"use strict";var n,t,a,o,r,i,c,s,l,C,g,p;return{setters:[function(e){n=e.cclegacy,t=e.view,a=e.Node,o=e.Canvas,r=e.UITransform,i=e.Widget,c=e.Camera,s=e.renderer,l=e.gfx,C=e.Vec3,g=e.DirectionalLight,p=e.Color}],execute:function(){n._RF.push({},"5fad3AMDsJE+KpvMLD8p66b","MapTools",void 0);e("MapTools",function(){function e(){}return e.createCanvas=function(e){var n=t.getDesignResolutionSize(),C=new a("Canvas").addComponent(o);C.getComponent(r).setContentSize(n);var g=C.addComponent(i);g.isAlignVerticalCenter=g.isAlignHorizontalCenter=!0,g.top=g.bottom=g.left=g.right=0,g.alignMode=i.AlignMode.ON_WINDOW_RESIZE;var p=new a("UiCamera"),u=p.addComponent(c);return u.projection=s.scene.CameraProjection.ORTHO,u.clearFlags=l.ClearFlagBit.DEPTH,u.visibility=41943040,u.orthoHeight=576.045455,p.parent=C.node,p.setPosition(0,0,1e3),C.cameraComponent=u,C.alignCanvasWithScreen=!0,e&&(C.node.parent=e),C},e.createLight=function(e){var n=new a("Light");return n.setRotationFromEuler(new C(-45)),n.addComponent(g),e&&(n.parent=e),n},e.createCamera=function(e){var n=new a("Camera");e&&(n.parent=e);var t=n.addComponent(c);return t.clearColor=p.fromHEX(new p,"02141E"),t.clearFlags=l.ClearFlagBit.ALL,t},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./AudioMgr.ts","./EnergyMgr.ts","./BaseView.ts"],(function(e){"use strict";var n,t,o,i,r,s,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator},function(e){i=e.Clips},function(e){r=e.AudioMgr},function(e){s=e.EnergyMgr},function(e){c=e.BaseView}],execute:function(){var u;t._RF.push({},"f5c7042v3NJ57yavqFdzjar","MoneyView",void 0);var a=o.ccclass;o.property,e("MoneyView",a("MoneyView")(u=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.getReward=function(){var n=this;e.prototype.showVideo.call(this,(function(){n.giveReward()}))},o.giveReward=function(){s.ins.changeEnergy(!0),r.ins.playSound(i.reward)},o.closePanel=function(){e.prototype.close.call(this)},t}(c))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/PathFindMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Astar.ts","./Tools.ts"],(function(t){"use strict";var n,r,i,e,s,o,u;return{setters:[function(t){n=t.inheritsLoose,r=t.createClass},function(t){i=t.cclegacy,e=t.Component},function(t){s=t.Graph,o=t.Astar},function(t){u=t.Tools}],execute:function(){i._RF.push({},"be02bjYkepOw6h6Uu3OH7Pu","PathFindMgr",void 0),t("PathFindMgr",function(t){function i(){for(var n,r=arguments.length,i=new Array(r),e=0;e<r;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).graph=void 0,n}n(i,t);var e=i.prototype;return e.init=function(t){this.graph=new s(t)},e.setNode=function(t,n){void 0===n&&(n=0),this.graph.setWeight(t,n)},e.clear=function(){this.graph.clearNodes()},e.getGridPath=function(t,n){var r=new o,i=r.search(this.graph,t,n);return r=null,i},e.getPath=function(t,n){var r=u.getGridPos(t),i=u.getGridPos(n),e=this.graph.getNode(r),s=this.graph.getNode(i),o=this.getGridPath(e,s);return this.stringPull(o)},e.stringPull=function(t){var n=[];return t.forEach((function(t){n.push(u.getLocalPos(t,!1))})),t.length=0,n},r(i,null,[{key:"ins",get:function(){return this._ins||(this._ins=new i),this._ins}}]),i}(e))._ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts"],(function(t){"use strict";var i,e,n,r,o,l,a,s,c,u,h,p,f,d,m,y,C,g,b,T,w,D;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator,s=t.Color,c=t.Collider2D,u=t.Animation,h=t.Sprite,p=t.director,f=t.Contact2DType,d=t.Component},function(t){m=t.events,y=t.anms,C=t.Key,g=t.Clips,b=t.default,T=t.collisions},function(t){w=t.Global},function(t){D=t.AudioMgr}],execute:function(){var v,E,A,B,G,I,P,W,_;l._RF.push({},"367baWhs5dMSYGCrwkcn69l","PlayerCtrl",void 0);var z=a.ccclass,H=a.property,M=new s(247,20,101,255);t("PlayerCtrl",(v=z("PlayerCtrl"),E=H(c),A=H(u),B=H(h),v((P=i((I=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,n(i,"collider",P,r(i)),n(i,"anm",W,r(i)),n(i,"sp",_,r(i)),i.isDead=!1,i}e(i,t);var l=i.prototype;return l.onEnable=function(){this.unschedule(this.fail),this.isDead=!1,this.idle(),p.on(m.gameWin,this.win,this),this.collider.on(f.BEGIN_CONTACT,this.onBeginContact,this)},l.onDisable=function(){p.off(m.gameWin,this.win,this),this.collider.off(f.BEGIN_CONTACT,this.onBeginContact,this)},l.win=function(){this.Color=s.WHITE,this.anm.play(y.happy)},l.hurt=function(){w.start&&(this.Color=M,p.emit(C.Timer,0)),D.ins.playSound(g.hurt),this.anm.play(y.hurt),this.isDead=!0,this.scheduleOnce(this.fail,1)},l.fail=function(){this.Color=s.WHITE,w.start&&(w.start=!1,this.anm.play(y.cry),p.emit(m.Toast,b.gameText.game.fail),this.scheduleOnce((function(){p.emit(C.Timer,0),p.emit(m.restartGame)}),1))},l.idle=function(){this.Color=s.WHITE,this.anm.play(y.idle)},l.onBeginContact=function(t,i,e){this.isDead||i.group!=T.trap&&i.group!=T.water&&i.group!=T.enemy||this.hurt()},o(i,[{key:"Color",set:function(t){this.sp.color=t}}]),i}(d)).prototype,"collider",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(I.prototype,"anm",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(I.prototype,"sp",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));l._RF.pop()}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,i,e,n,r;return{setters:[function(t){o=t.createClass},function(t){i=t.cclegacy,e=t._decorator,n=t.instantiate,r=t.NodePool}],execute:function(){var s,l;i._RF.push({},"f49d1vZlghN5ZCVEwLhutRS","PoolMgr",void 0);var c=e.ccclass;e.property,t("PoolMgr",c("PoolMgr")(((l=function(){function t(){this._dictPool={},this._dictPrefab={}}var i=t.prototype;return i.copyNode=function(t,o){var i=t.name,e=null;if(this._dictPool.hasOwnProperty(i)){var s=this._dictPool[i];e=s.size()>0?s.get():n(t)}else{var l=new r;this._dictPool[i]=l,e=n(t)}return o&&(e.parent=o,e.active=!0),e},i.getNode=function(t,o,i){var e,s,l;if("string"==typeof t?(e=this._dictPrefab[t],s=t):(e=t,s=t.data.name),this._dictPool.hasOwnProperty(s)){var c=this._dictPool[s];if(c.size()>0)l=c.get();else{if(!e)return console.log("Pool invalid prefab name = ",s),null;l=n(e)}}else{if(!e)return console.log("Pool invalid prefab name = ",s),null;var a=new r;this._dictPool[s]=a,l=n(e)}return o&&(l.parent=o,l.active=!0,i&&(l.position=i)),l},i.putNode=function(t,o){if(t){var i=t.name,e=null;this._dictPool.hasOwnProperty(i)?e=this._dictPool[i]:(e=new r,this._dictPool[i]=e),e.put(t)}},i.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},i.setPrefab=function(t,o){this._dictPrefab[t]=o},i.getPrefab=function(t){return this._dictPrefab[t]},o(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,s=l))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./PoolMgr.ts"],(function(e){"use strict";var n,t,r,a,o,s,i,u,c;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e.instantiate,s=e.assetManager},function(e){i=e.Assets},function(e){u=e.Global},function(e){c=e.PoolMgr}],execute:function(){a._RF.push({},"9d193Ozp4FDF4owOBNeNc72","ResMgr",void 0),e("default",function(){function e(){this._abBundleMap={},this._atlasMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this.buildPrefabs=[[],[],[]],this._loadStemp=null,this.loadTime=0,this._totalTime=0}var a=e.prototype;return a.printTimer=function(e,n){void 0===e&&(e=""),void 0===n&&(n=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(e+"，load time===",this.loadTime,"ms"),n&&console.log("Load finish, total time===",this._totalTime,"ms")},a.loadBundle=function(){var e=t(r().mark((function e(n,t){var a,o,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),this._loadStemp||(this._loadStemp=Date.now()),a=u.LoadingRate,o="Bundle"+n,e.abrupt("return",new Promise((function(e,r){s.loadBundle(o,(function(r,o){r?console.error("Bundle"+n+" load error, error==",r):(2!=n&&(i._abBundleMap[n]=o),i.printTimer("Bundle"+n+"__load success"),u.LoadingRate=a+t,e&&e())}))})));case 5:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),a.loadRes=function(){var e=t(r().mark((function e(n,t,a){var o,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=0),o=u.LoadingRate,e.abrupt("return",new Promise((function(e,r){s._abBundleMap[n].loadDir(t.path,t.type,(function(e,n){a>0&&(u.LoadingRate=o+a*e/n)}),(function(r,a){var o;switch(r&&(console.error("Error===",r),e&&e()),t){case i.UiPrefab:for(var l=0;l<a.length;l++){var p=(o=a[l]).data.name;c.ins.setPrefab(p,o),u.Debug&&console.log("prefab name==",p)}break;case i.BrickPrefab:for(var f=0;f<a.length;f++){var d=(o=a[f]).data.name;c.ins.setPrefab(d,o),-1!=d.indexOf("brick")||-1!=d.indexOf("player")?s.buildPrefabs[0].push(o):-1!=d.indexOf("trap")?s.buildPrefabs[1].push(o):s.buildPrefabs[2].push(o),u.Debug&&console.log("prefab name==",d)}break;case i.Sound:for(var m=0;m<a.length;m++)o=a[m],u.Debug&&console.log("clip name==",o.name),s._clipMap[o.name]||(s._clipMap[o.name]=o);break;case i.Material:for(var h=0;h<a.length;h++)o=a[h],console.log("mat name==",o.name),s._matMap[o.name]||(s._matMap[o.name]=o);break;case i.Atlas:for(var b=0;b<a.length;b++)o=a[b],u.Debug&&console.log("atlas name==",o.name),s._atlasMap[o.name]||(s._atlasMap[o.name]=o);break;case i.Json:for(var g=0;g<a.length;g++)o=a[g],u.Debug&&console.log("json name==",o.name),s._jsonAssetMap[o.name]||(s._jsonAssetMap[o.name]=o.json)}s.printTimer("Bundle"+n+"__"+t.path+"loaded success"),e&&e()}))})));case 3:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),a.loadBgm=function(){var e=t(r().mark((function e(){var n,t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",new Promise((function(e,r){t._abBundleMap[5].load("bgm",(function(t,r){t&&(console.error("Error info===",t),e&&e()),n._clipMap[r.name]||(n._clipMap[r.name]=r),e&&e()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.loadPrefab=function(){var e=t(r().mark((function e(n){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t._abBundleMap[n.bundle].load(n.path+n.name,(function(t,r){t&&(console.error("Error info===",t),e&&e()),c.ins.setPrefab(n.name,r),e&&e()}))})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a.preloadRes=function(){var e=t(r().mark((function e(n,t,a){var s,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=0),s=u.LoadingRate,e.abrupt("return",new Promise((function(e,r){for(var l=c.ins.getPrefab(n),p=0;p<t;p++)c.ins.putNode(o(l));a>0&&(u.LoadingRate=s+a),i.printTimer("preload_"+n),e&&e()})));case 3:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),a.getAtlas=function(e){return this._atlasMap[e]},a.getPrefab=function(){var e=t(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.ins.getPrefab(n.name)){e.next=2;break}return e.abrupt("return",c.ins.getNode(n.name,t));case 2:return e.next=4,this.loadPrefab(n);case 4:return e.abrupt("return",c.ins.getNode(n.name,t));case 5:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),a.getJson=function(e){return this._jsonAssetMap[e]},a.getClip=function(e){return this._clipMap[e]},a.getMat=function(e){return this._matMap[e]},a.getUI=function(){var e=t(r().mark((function e(n,t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.clear){e.next=5;break}if(t||!u.layer[n.layer].children[0]){e.next=5;break}if(u.layer[n.layer].children[0].name!=n.name){e.next=4;break}return e.abrupt("return");case 4:c.ins.putNode(u.layer[n.layer].children[0]);case 5:return a=t||u.layer[n.layer],e.next=8,this.getPrefab(n,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),n(e,null,[{key:"ins",get:function(){return this._ins||(this._ins=new e),this._ins}}]),e}())._ins=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/ResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./AudioMgr.ts","./EnergyMgr.ts","./LevelMgr.ts","./CamShot.ts","./Tools.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,r,s,a,l,c,u,h,d,f,p,v,g,y,m,b,w,T,x,L,V,S,C,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,c=e.Sprite,u=e.Node,h=e.Toggle,d=e.director,f=e.view},function(e){p=e.events,v=e.Key,g=e.default,y=e.topStates,m=e.Clips},function(e){b=e.GameConfig},function(e){w=e.Global},function(e){T=e.AudioMgr},function(e){x=e.EnergyMgr},function(e){L=e.LevelMgr},function(e){V=e.CamShot},function(e){S=e.save,C=e.Tools},function(e){M=e.BaseView}],execute:function(){var R,k,A,E,G,z,N,W,B;a._RF.push({},"31971Vlhz9BGLSfsK4jro5E","ResultView",void 0);var D=l.ccclass,H=l.property;e("ResultView",(R=D("ResultView"),k=H(c),A=H(u),E=H(h),R((N=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"sp",N,o(t)),n(t,"videoNode",W,o(t)),n(t,"videoToggle",B,o(t)),t.isWatchAd=!1,t}i(t,e);var a=t.prototype;return a.start=function(){this.videoToggle.node.on(h.EventType.TOGGLE,this.changeVideoState,this)},a.onEnable=function(){d.on(p.startCustom,this.returnHome,this)},a.onDisable=function(){d.off(p.startCustom,this.returnHome,this)},a.init=function(){w.level++,w.level>b.maxLevel&&(w.level=b.maxLevel),S(v.Level,w.level),d.emit(p.Toast,g.gameText.game.win),this.capture(),d.emit(p.changeTop,y.showStore),w.level>2&&Math.random()>.7?this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!0:this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!1},a.next=function(){var t=r(s().mark((function t(){var i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isWatchAd){t.next=5;break}this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!1,e.prototype.showVideo.call(this,(function(){i.giveVideoReward(),i.loadLevel()})),t.next=9;break;case 5:if(x.ins.changeEnergy(!1)){t.next=8;break}return t.abrupt("return");case 8:this.loadLevel();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadLevel=function(){L.ins.loadLevel(),e.prototype.close.call(this)},a.returnHome=function(){d.emit(p.closeGame),e.prototype.close.call(this)},a.giveVideoReward=function(){x.ins.changeEnergy(!0)},a.capture=function(){this.clear(),V.ins.copyRenderTex(this.sp,this.getPlayersOffset()),T.ins.playSound(m.photo),this.scheduleOnce((function(){T.ins.playSound(m.win)}),.8),C.fadeIn(this.sp.node.parent)},a.getPlayersOffset=function(){var e=w.players,t=0,i=0;if(e.length>0){i=Math.round(e[0].position.x),t=Math.round(e[0].position.y)+36;var n=Math.round(.5*(f.getVisibleSize().height-720));t>n&&(t=n),t<-n&&(t=-n),i>50&&(i=50),i<-50&&(i=-50)}return[i,t]},a.clear=function(){var e=this.sp.spriteFrame;if(e){var t=e.texture;if(t){var i=t.image;i&&(i.destroy(),t.image=null),e.texture&&(t=null)}e=null}},a.changeVideoState=function(e){var t=e.isChecked;this.isWatchAd=t,this.videoNode.active=t},t}(M)).prototype,"sp",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(z.prototype,"videoNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"videoToggle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=z))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/StoreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./AudioMgr.ts","./EnergyMgr.ts","./Tools.ts","./BaseView.ts"],(function(e){"use strict";var t,n,i,r,o,s,a,c,l,u,h,p,f,d,g,w,P,v,m,y,_,C,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,c=e.Color,l=e.Node,u=e.Prefab,h=e.director,p=e.instantiate,f=e.Sprite,d=e.tween},function(e){g=e.events,w=e.Key,P=e.Clips},function(e){v=e.GameConfig},function(e){m=e.Global},function(e){y=e.AudioMgr},function(e){_=e.EnergyMgr},function(e){C=e.save},function(e){b=e.BaseView}],execute:function(){var S,E,L,D,T,M,I,R,V;s._RF.push({},"97d21aYrYROzoD0d6hb4wxA","StoreView",void 0);var z=a.ccclass,H=a.property,O=new c(160,200,240,255);e("StoreView",(S=z("StoreView"),E=H(l),L=H(l),D=H(u),S((I=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"row1",I,r(t)),i(t,"row2",R,r(t)),i(t,"penItem",V,r(t)),t.penSPs=[],t.penL=void 0,t.inited=!1,t._red=0,t._self=void 0,t._isDraw=!1,t}n(t,e);var s=t.prototype;return s.onEnable=function(){this.initPens(),h.emit(g.Toast,"你不喜欢彩笔么～")},s.initPens=function(){if(!this.inited){this._self=this.node.getComponent(t),this.inited=!0;var e=this.penL=v.penConfigs.length;if(e>=1)for(var n=0;n<e;n++){var i=p(this.penItem);i.parent=n>3?this.row2:this.row1,this.setPen(i,n)}}this.setPens()},s.setPens=function(){this.penSPs.forEach((function(e,t){t==m.currentPen?e.color=c.YELLOW:0==m.pens[t]?e.color=O:e.color=c.WHITE}))},s.changePen=function(e){0!=m.pens[e]?(m.currentPen=e,this.setPens(),C(w.CurrentPen,e),h.emit(g.changePen,m.currentPen)):h.emit(g.Toast,"这个彩笔还没有喔～")},s.setPen=function(e,t){var n=this;e.on(l.EventType.TOUCH_END,(function(){n.changePen(t)}),this);var i=e.getComponent(f);this.penSPs.push(i);var r=e.getChildByName("penColor").getComponent(f);r.spriteFrame=v.penConfigs[t].penSF,r.color=v.penConfigs[t].penColor},s.getReward=function(){var t=this;this._isDraw||e.prototype.showVideo.call(this,(function(){t.giveReward()}))},s.giveReward=function(){var e=this;this._isDraw=!0;var t=Math.floor(this.penL*Math.random()-.3*this.penL*Math.random()+1);t>this.penL-1&&(t=this.penL-1),t<0&&(t=0);var n=t+4*this.penL;this._red=0,this.penSPs.forEach((function(e){e.color=c.WHITE})),d(this._self).to(3,{red:n}).call((function(){e.getPen(t)})).start()},s.getPen=function(e){var t=this;if(1==m.pens[e])h.emit(g.Toast,"有这个彩笔啦，给你鸡蛋！"),_.ins.changeEnergy(!0);else{h.emit(g.Toast,"获得了新的彩笔！"),m.pens[e]=1;var n=JSON.stringify(m.pens);C(w.Pens,n)}this.scheduleOnce((function(){t.setPens(),t._isDraw=!1}),.65),y.ins.playSound(P.reward)},s.closePanel=function(){this._isDraw||e.prototype.close.call(this)},o(t,[{key:"red",get:function(){return this._red},set:function(e){(e=Math.floor(e%this.penL))!=this._red&&(this.penSPs[this._red].color=c.WHITE,this.penSPs[e].color=c.RED,this._red=e)}}]),t}(b)).prototype,"row1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(M.prototype,"row2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(M.prototype,"penItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=M))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/testLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,c,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,s=e.Graphics,a=e.Component}],execute:function(){var u,l,p,h,f,g;o._RF.push({},"39799KSFGdBfJbFh0j8wvLj","testLine",void 0);var d=c.ccclass,v=c.property,y=c.executeInEditMode;e("testLine",(u=d("testLine"),l=y(!0),p=v(s),u(h=l((g=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(t,"gc",g,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){this.gc.lineWidth=60,this.gc.moveTo(0,30),this.gc.lineTo(0,-30),this.gc.stroke()},o.update=function(e){},t}(a)).prototype,"gc",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h)||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/TimerMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts"],(function(t){"use strict";var i,e,n,s,o,r,c,a,u,h,p,l,m,y,f,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Label,a=t.UIOpacity,u=t.Animation,h=t.director,p=t.Component},function(t){l=t.Key,m=t.Clips,y=t.events},function(t){f=t.Global},function(t){d=t.AudioMgr}],execute:function(){var g,_,v,T,b;o._RF.push({},"48c3aJtLndNDL0yc8+UJpj0","TimerMgr",void 0);var M=r.ccclass,x=r.property;t("TimerMgr",(g=M("TimerMgr"),_=x(c),g((b=i((T=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(i=t.call.apply(t,[this].concat(o))||this)._op=null,i._anm=null,n(i,"text",b,s(i)),i}e(i,t);var o=i.prototype;return o.start=function(){this._op=this.node.getComponent(a),this._anm=this.node.getComponent(u),h.on(l.Timer,this.setTimer,this),h.on(l.Pause,this.pause,this),this._op.opacity=0},o.pause=function(t){0!=this._op.opacity&&(t?this.unschedule(this.timer):this.schedule(this.timer,1))},o.setTimer=function(t){if(this._anm.stop(),0==t){if(0==this._op.opacity)return;this.unschedule(this.timer),this._op.opacity=0}else f.time=t,this._op.opacity=255,this.text.string=t+"",this.schedule(this.timer,1)},o.gameWin=function(){this._op.opacity=0,f.start=!1,this.unschedule(this.timer),this.scheduleOnce((function(){d.ins.playSound(m.happy)}),.2),h.emit(y.paperOcacity,15,0),h.emit(y.gameWin),this.scheduleOnce((function(){h.emit(y.showResult)}),1.5)},o.timer=function(){f.time--,this.text.string=f.time+"",f.time<5&&f.time>0&&(4==f.time&&this._anm.play(),d.ins.playSound(m.counter)),f.time<=0&&(this._anm.stop(),this.node.angle=0,this.gameWin())},i}(p)).prototype,"text",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/ToastCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,c,l,u,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,c=t.UIOpacity,l=t.Tween,u=t.director,p=t.Component},function(t){h=t.events}],execute:function(){var f,y,w,T,b,m,v;r._RF.push({},"bff51GGa4lI24yTmwB2+eLC","ToastCtrl",void 0);var d=s.ccclass,g=s.property;t("ToastCtrl",(f=d("ToastCtrl"),y=g(a),w=g(c),f((m=e((b=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"text",m,n(e)),o(e,"toast",v,n(e)),e._tw=new l,e.time=1,e}i(e,t);var r=e.prototype;return r.onEnable=function(){u.on(h.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},r.onDisable=function(){u.off(h.Toast,this.showToast,this)},r.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},e}(p)).prototype,"text",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(b.prototype,"toast",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc","./Global.ts","./PoolMgr.ts","./ResMgr.ts","./VecPool.ts","./GridConfig.ts"],(function(t){"use strict";var e,n,o,r,i,a,s,c,u,l,f,g,d,h,v,p;return{setters:[function(t){e=t.cclegacy,n=t.sys,o=t.Vec3,r=t.Layers,i=t.view,a=t.Node,s=t.UITransform,c=t.Widget,u=t.Sprite,l=t.screen,f=t.tween,g=t.UIMeshRenderer},function(t){d=t.Global},null,function(t){h=t.default},function(t){v=t.VecPool},function(t){p=t.GridConfig}],execute:function(){t({load:function(t,e){void 0===e&&(e=1);var o=n.localStorage.getItem(t);if(o){switch(e){case 0:break;case 1:o=Number(o);break;case 2:o=JSON.parse(o)}return o}return null},save:function(t,e){"number"==typeof e&&(e=""+e);n.localStorage.setItem(t,e||"")}}),e._RF.push({},"55194GHJUNN+Ig1/aUmx7KT","Tools",void 0);var m=new o(1,1,1),y=new o(0,0,0);t("Tools",function(){function t(){}return t.getDay=function(){return Math.floor(Date.now()/864e5)},t.createUI=function(t,e){void 0===t&&(t="uiNode"),void 0===e&&(e=r.Enum.UI_2D);var n=i.getVisibleSize(),o=new a(t);o.addComponent(s).setContentSize(n);var u=o.addComponent(c);return u.isAlignLeft=u.isAlignTop=u.isAlignTop=u.isAlignBottom=!0,u.right=u.left=u.top=u.bottom=0,o.layer=e,o},t.getDateId=function(){var t=new Date,e=t.getDay().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString();return Math.floor(Number(e)+.1*Math.floor(Math.random()*(5e5*Math.random()+5e4))).toString()},t.isEn=function(){return-1==navigator.language.indexOf("zh")},t.getGridPos=function(t){return[Math.floor(.5*p.x+t.x/p.size),Math.floor(.5*p.y+t.y/p.size)]},t.getLocalPos=function(t,e){void 0===e&&(e=!1);var n=(t.x-.5*p.x+.5)*p.size,o=(t.y-.5*p.y+.5)*p.size;return e&&this.showGizmo(n,o),[n,o]},t.showGizmo=function(t,e){},t.clearUI=function(e,n){if(void 0===n&&(n=!0),n){var o=e.getComponent(u);o&&t.clearSprite(o);var r=e.getComponentsInChildren(u);r.length>0&&r.forEach((function(e){t.clearSprite(e)}))}e.destroy()},t.prototype.MoveTowards=function(t,e,n){var o=e[0]-t.x,r=e[1]-t.y,i=o*o+r*r;if(0==i||n>=0&&i<=n*n)return t.set(e[0],e[1]),!0;var a=Math.sqrt(i);return t.x=+o/a*n,t.y=+r/a*n,!1},t.setRatio=function(){var t=l.windowSize,e=i.getDesignResolutionSize();d.screenRatio=t.height/t.width/(e.height/e.width),d.screenRatio<1&&(d.screenRatio=1),console.log("size==",t,d.screenRatio)},t.fadeIn=function(t,e){void 0===e&&(e=.2),f(t).set({scale:o.ZERO}).to(e,{scale:m}).start()},t.fixedTo=function(t,e){void 0===e&&(e=2);var n=10^e;return t=Math.floor(t*n)/n},t.getRandomTarget=function(t){var e=t.length;return e>0?t[Math.floor(e*Math.random())]:null},t.getCloestNode=function(t,e){var n,o=e.length;if(o>0)for(var r=1e4,i=0;i<o;i++){var a=e[i],s=this.getNodesDis(a,t);s<r&&(r=s,n=a)}else n=null;return n},t.getNodesDis=function(t,e){return this.getDistance(t.position,[e.position.x,e.position.y])},t.getOne=function(){return Math.random()>.5?1:-1},t.getDistance=function(t,e){return Math.abs(e[0]-t.x)+Math.abs(e[1]-t.y)},t.fadeOut=function(t,e){f(t).to(.2,{scale:y},{easing:"elasticOut"}).call((function(){e&&e()})).start()},t.clearSprite=function(t){var e=t.spriteFrame;if(e&&(t.spriteFrame=null,e&&e.refCount>0)){e.decRef();var n=e.texture;this.clearTex(n)}},t.clearTex=function(t){if(t&&t.refCount>0){t.decRef();var e=t.image;e&&e.refCount>0&&e.decRef()}},t.convertUI=function(t,e){if(void 0===e&&(e=!0),e)t.addComponent(g),t.layer=r.Enum.UI_2D,t.setScale(42,42,42);else{t.setScale(.5,.5,.5),t.layer=r.Enum.DEFAULT;var n=t.getComponent(g);n&&n.destroy();h.ins.getPrefab("")}},t.clearPoly=function(t){var e=t.points.length;if(e>0)for(var n=e-1;n>=0;n--)v.ins.Vec2=t.points.shift(),0==n&&(t.points.length=0,t.apply())},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TopView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts","./ResMgr.ts","./Tools.ts"],(function(t){"use strict";var e,i,n,o,s,r,a,c,u,l,g,h,p,b,f,v,d,m,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,c=t.Sprite,u=t.director,l=t.Color,g=t.Component},function(t){h=t.events,p=t.ui,b=t.topStates,f=t.Key},function(t){v=t.Global},function(t){d=t.AudioMgr},function(t){m=t.default},function(t){w=t.save}],execute:function(){var y,S,T,A,z,G,I,R,k,H,V,B,E;s._RF.push({},"3e566SGoxJNKqYtoXI0Bj8V","TopView",void 0);var M=r.ccclass,Y=r.property;t("TopView",(y=M("TopView"),S=Y(a),T=Y(a),A=Y(a),z=Y(c),G=Y(c),y((k=e((R=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"setting",k,o(e)),n(e,"eggs",H,o(e)),n(e,"store",V,o(e)),n(e,"sound",B,o(e)),n(e,"bgm",E,o(e)),e}i(e,t);var s=e.prototype;return s.start=function(){u.on(h.changeTop,this.changeState,this)},s.showStore=function(){m.ins.getUI(p.StoreView)},s.changeState=function(t){switch(t){case b.showAll:this.setting.active=!0,this.eggs.active=!0,this.store.active=!0;break;case b.hideAll:this.setting.active=!1,this.eggs.active=!1,this.store.active=!1;break;case b.showStore:this.setting.active=!1,this.eggs.active=!0,this.store.active=!0;break;case b.hideStore:case b.showClock:this.setting.active=!1,this.eggs.active=!0,this.store.active=!1;break;case b.showHome:this.setting.active=!0,this.eggs.active=!0}},s.showSettings=function(){var t=this.setting.getChildByName("settings");t.active=!t.active,this.sound.color=1==v.sound?l.WHITE:l.GRAY,this.bgm.color=1==v.bgm?l.WHITE:l.GRAY},s.changeBgm=function(){v.bgm*=-1,this.bgm.color=1==v.bgm?l.WHITE:l.GRAY,v.bgm||d.ins.stopMusic(),w(f.Bgm,v.bgm)},s.changeSound=function(){v.sound*=-1,this.sound.color=1==v.sound?l.WHITE:l.GRAY,w(f.Sound,v.sound)},e}(g)).prototype,"setting",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(R.prototype,"eggs",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(R.prototype,"store",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(R.prototype,"sound",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(R.prototype,"bgm",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=R))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/TrapCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts"],(function(t){"use strict";var i,e,r,n,o,a,s,l,c,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.RigidBody2D,l=t.director,c=t.Component},function(t){p=t.events},function(t){u=t.GameConfig}],execute:function(){var d,f,g,h,m;o._RF.push({},"4c536dOed5L8Iz+1JmD2n8b","TrapCtrl",void 0);var y=a.ccclass,v=a.property;t("TrapCtrl",(d=y("TrapCtrl"),f=v({min:0,max:20}),d((m=i((h=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,r(i,"angleSpeed",m,n(i)),i.rigid=null,i}e(i,t);var o=i.prototype;return o.onEnable=function(){if(!this.rigid){var t=this.node.getComponent(s);t&&(this.rigid=t)}l.on(p.initTrap,this.rotateItem,this)},o.onDisable=function(){l.off(p.initTrap,this.rotateItem,this)},o.rotateItem=function(t){void 0===t&&(t=1),this.rigid.wakeUp(),this.rigid.angularVelocity=this.angleSpeed*t*u.timeScale,this.rigid.applyAngularImpulse(1,!0)},i}(c)).prototype,"angleSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),g=h))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/VecPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,o=t.Vec2,i=t.Vec3}],execute:function(){e._RF.push({},"20e53PZGiVPeahc/wMujqlY","VecPool",void 0);t("VecPool",function(){function t(){this._v2pool=[],this._v3pool=[]}return n(t,[{key:"Vec2",get:function(){return this._v2pool.length>0?this._v2pool.shift():new o},set:function(t){t&&(this._v2pool.length<240?this._v2pool.push(t):(t.x=t.y=null,t=null))}},{key:"Vec3",get:function(){return this._v3pool.length>0?this._v3pool.shift():new i},set:function(t){t&&(this._v3pool.length<240?this._v3pool.push(t):(t.x=t.y=t.z=null,t=null))}}],[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(n){"use strict";var t,o,e,i,s;return{setters:[function(n){t=n.createClass,o=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){i=n.cclegacy},function(n){s=n.Main}],execute:function(){i._RF.push({},"53d6cQ5YNFKYL96X+NiCobr","WxPlatform",void 0),n("WxPlatform",function(){function n(){this.wx=window.wx,this.banner=void 0,this.custom=void 0,this.custom1=void 0,this.custom3=void 0,this.rewardVideo2=void 0}var i=n.prototype;return i.init=function(){this.wx.showShareMenu();var n=s.ins.Shares[0].sharePics;n.length>0&&(this.wx.onShareAppMessage((function(){var t=Math.floor(Math.random()*n.length);return{title:n[t].shareText,imageUrlId:n[t].shareId,imageUrl:n[t].shareLink}})),this.wx.onShareTimeline((function(){var t=Math.floor(Math.random()*n.length);return{title:n[t].shareText,imageUrl:n[t].shareLink,query:""}})))},i.getLaunchOption=function(){return this.wx.getLaunchOptionsSync().query},i.getScene=function(){return this.wx.getLaunchOptionsSync().scene},i.showShare=function(n){if(s.ins.Shares[0]){var t=s.ins.Shares[0].sharePics;if(!(t.length<=0))Math.floor(Math.random()*t.length)}},i.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},i.showBanner=function(n){},i.showCustomAd=function(n){},i.showCustomAd1=function(n){},i.showCustomAd3=function(){var n=o(e().mark((function n(t){var o,i,r,a=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 2:o=s.ins.Platforms[0].customId[0],this.wx.getSystemInfoSync(),{},i={top:76,width:375,fixed:0},(r=this.wx.createCustomAd({adUnitId:o,style:i})).onLoad((function(){console.log("原生模板 广告加载成功"),t(1),r.show().then((function(){return console.log("原生模板 广告显示成功")})).catch((function(n){console.log("原生模板 广告显示失败",n),t(0)})),a.custom3=r})),r.onClose((function(n){console.log("关闭原生模板广告",n)})),r.onError((function(n){console.log("原生模板CustomAd 广告加载失败：",n),t(0)}));case 10:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),i.showInterstitialAd=function(n){},i.showRewardVideo=function(n){var t=this,o=this,e=s.ins.Platforms[0].videoId[0];null!=o.rewardVideo2&&o.rewardVideo2.offClose(r);var i=this.wx.createRewardedVideoAd({adUnitId:e});o.rewardVideo2=i,i.load().then((function(){t.wx.showToast({title:"加载中，请稍后",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("激励视频 广告加载成功"),i.show()})),i.onError((function(o){console.log("激励视频 广告显示失败",o),t.wx.showToast({title:"请稍后再试",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),n(2)}));var r=function t(o){o&&o.isEnded?(console.log("res:  ",o),n(1),i.offClose(t)):(console.log("播放中途退出"),n(0))};i.onClose(r)},t(n,null,[{key:"ins",get:function(){return this._ins||(this._ins=new n,this._ins.init()),this._ins}}]),n}())._ins=void 0,i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});