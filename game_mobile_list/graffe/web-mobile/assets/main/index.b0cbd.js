window.__require=function e(t,o,i){function r(c,n){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!n&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var h=o[c]={exports:{}};t[c][0].call(h.exports,function(e){return r(t[c][1][e]||e)},h,h.exports,e,t,o,i)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({block:[function(e,t,o){"use strict";cc._RF.push(t,"a4fae/KOUBAqYlbBtrgdCJh","block");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,i){var r,a=arguments.length,c=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(c=(a<3?r(c):a>3?r(t,o,c):r(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./game"),n=cc._decorator,s=n.ccclass,l=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onCollisionEnter=function(e,t){t.node.destroy(),c.default.inst.addScore()},t.prototype.start=function(){},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./game":"game"}],game:[function(e,t,o){"use strict";cc._RF.push(t,"999dc/b8X9GGZn1HaJKEm7M","game");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,i){var r,a=arguments.length,c=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(c=(a<3?r(c):a>3?r(t,o,c):r(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNode=null,t.deadLine=null,t.blockArea=null,t.blockPrefab=null,t.layerReady=null,t.layerGame=null,t.layerPause=null,t.layerCharcter=null,t.layerMusic=null,t.jsonList=null,t.list=null,t.startTime=0,t.actual_time=0,t.score=0,t.index=1,t.player_startPos=null,t.player_body_startPos=null,t.gameState=0,t.money=3e3,t.charcter_index=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.node.on("touchmove",this.onTouchMove,this),this.gameState=0,o.inst=this,cc.director.getCollisionManager().enabled=!0,this.initGame()},t.prototype.initGame=function(){cc.log(this.charcter_index),this.layerReady.active=!0,this.layerCharcter.active=!1,this.layerMusic.active=!1,this.layerPause.active=!1,this.layerGame.active=!0,this.layerGame.getChildByName("ui").getChildByName("btn_pause").active=!1,this.layerGame.getChildByName("ui").getChildByName("score").active=!1,this.blockArea.active=!1,this.player_startPos=cc.v2(0,-400),this.player_body_startPos=this.playerNode.getChildByName("body").getPosition()},t.prototype.btnCallBack=function(e,t){var o;"start_game"==t&&(this.gameState=1,this.actual_time=0,this.index=1,this.loadJson(),this.layerReady.active=!1,this.layerCharcter.active=!1,this.layerMusic.active=!1,this.layerPause.active=!1,this.layerGame.active=!0,this.layerGame.getChildByName("ui").getChildByName("btn_pause").active=!0,this.layerGame.getChildByName("ui").getChildByName("score").active=!0,this.blockArea.active=!0,(o=this.getComponent(cc.AudioSource)).loop=!1,o.play()),"player_select"==t&&(this.layerCharcter.active=!0,this.layerReady.active=!1,this.layerMusic.active=!1,this.layerPause.active=!1,this.layerGame.active=!1),"music_select"==t&&(this.layerCharcter.active=!1,this.layerReady.active=!1,this.layerMusic.active=!0,this.layerPause.active=!1,this.layerGame.active=!1),"game_pause"==t&&(this.gameState=2,this.layerCharcter.active=!1,this.layerReady.active=!1,this.layerMusic.active=!1,this.layerPause.active=!0,this.layerGame.active=!1,(o=this.getComponent(cc.AudioSource)).pause()),"back_ready"==t&&(this.gameState=0,this.layerReady.active=!0,this.layerCharcter.active=!1,this.layerMusic.active=!1,this.layerPause.active=!1,this.layerGame.active=!0,this.blockArea.removeAllChildren(),this.blockArea.active=!1,this.layerGame.getChildByName("ui").getChildByName("btn_pause").active=!1,this.layerGame.getChildByName("ui").getChildByName("score").active=!1,this.resetGame())},t.prototype.pauseGame=function(){},t.prototype.resetGame=function(){this.playerNode.setPosition(this.player_startPos),this.playerNode.getChildByName("neck").removeAllChildren(),this.playerNode.getChildByName("body").setPosition(this.player_body_startPos),this.getComponent(cc.AudioSource).stop()},t.prototype.gameOver=function(e){if(e<0)return this.getComponent(cc.AudioSource).pause(),!0},t.prototype.neckExtend=function(){var e=cc.instantiate(this.blockPrefab),t=this.playerNode.getChildByName("neck");e.parent=t,e.setPosition(cc.v2(0,-e.height*this.index)),this.index++;var o=this.playerNode.getChildByName("body"),i=o.position;i.y-=e.height,o.setPosition(cc.v2(i.x,i.y))},t.prototype.addScore=function(){this.score+=1,this.node.getChildByName("layerGame").getChildByName("ui").getChildByName("score").getComponent(cc.Label).string="\u5206\u6570\uff1a"+this.score;var e=this.playerNode.getChildByName("comboLabel");e.opacity=0,e.scale=.1;var t=e.getComponent(cc.Label),o=Math.floor(4*Math.random());t.string=o<1?"\u597d\uff01":o>2?"\u592a\u725b\u4e86!":"\u771f\u68d2!",cc.tween(e).to(.2,{scale:1,opacity:255}).to(.2,{opacity:0}).start(),this.neckExtend()},t.prototype.loadJson=function(){this.list=this.jsonList.json.list,this.initBlocks()},t.prototype.onTouchMove=function(e){var t=e.getDelta(),o=this.playerNode.getPosition(),i=this.deadLine.width;o.x+=t.x,o.x<=-i/2&&(o.x=-i/2),o.x>=i/2&&(o.x=i/2),this.playerNode.setPosition(cc.v2(o.x,o.y))},t.prototype.initBlocks=function(){for(var e=this.blockArea.height/2,t=0;t<this.list.length;t++){this.startTime=this.list[0].time;var o=this.list[t].time,i=this.list[t].track,r=cc.instantiate(this.blockPrefab);r.parent=this.blockArea;var a=100*i,c=this.blockArea.height+(o-this.startTime)/1e3*e;r.setPosition(cc.v2(a,c)),r.y>=this.blockArea.height&&(r.active=!1)}},t.prototype.update=function(e){var t=this.blockArea.height/2;if(1==this.gameState){var o=this.startTime-2e3;if(cc.log(o),this.actual_time+=e,1e3*this.actual_time>=o)for(var i=this.blockArea.children,r=i.length-1;r>=0;r--){var a=i[r].position;a.y-=t*e,a.y<=this.blockArea.height&&(i[r].active=!0),i[r].setPosition(cc.v2(a.x,a.y)),this.gameOver(a.y)&&(this.gameState=3)}}},t.inst=null,a([s(cc.Node)],t.prototype,"playerNode",void 0),a([s(cc.Node)],t.prototype,"deadLine",void 0),a([s(cc.Node)],t.prototype,"blockArea",void 0),a([s(cc.Prefab)],t.prototype,"blockPrefab",void 0),a([s(cc.Node)],t.prototype,"layerReady",void 0),a([s(cc.Node)],t.prototype,"layerGame",void 0),a([s(cc.Node)],t.prototype,"layerPause",void 0),a([s(cc.Node)],t.prototype,"layerCharcter",void 0),a([s(cc.Node)],t.prototype,"layerMusic",void 0),a([s(cc.JsonAsset)],t.prototype,"jsonList",void 0),o=a([n],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],playerselect:[function(e,t,o){"use strict";cc._RF.push(t,"84fc6eVQO5DWrDyb4+uFFCR","playerselect");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,i){var r,a=arguments.length,c=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(c=(a<3?r(c):a>3?r(t,o,c):r(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./game"),n=cc._decorator,s=n.ccclass,l=n.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moneyNode=null,t.price=null,t.buttonNode=null,t.form=[{index:0,price:1e3,name:"\u7f8a\u5c0f\u9a7c",ispurchased:!1},{index:1,price:1e3,name:"\u4e4c\u5c0f\u9f9f",ispurchased:!1},{index:2,price:1e3,name:"\u9ed1\u5c0f\u9a74",ispurchased:!1}],t.index=0,t}return r(t,e),t.prototype.onLoad=function(){this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.moneyNode.getChildByName("number").getComponent(cc.Label).string=c.default.inst.money+"",this.index=c.default.inst.charcter_index;var e=this.form[this.index].price;this.price.getChildByName("number").getComponent(cc.Label).string=e+""},t.prototype.onTouchMove=function(e){var t=e.getDelta(),o=this.node.getChildByName("bg").getChildByName("charcter").children;if(o[0].x>=0)for(var i=0;i<o.length;i++)o[i].x=300*i;if(o[o.length-1].x<=0)for(i=o.length-1;i>=0;i--)o[i].x=300*-(o.length-1-i);for(i=0;i<o.length;i++)o[i].x+=t.x},t.prototype.onTouchEnd=function(){for(var e=this.node.getChildByName("bg").width,t=this.node.getChildByName("bg").getChildByName("charcter").children,o=0;o<t.length;o++)if(t[o].x<e/2&&t[o].x>-e/2){t[o].x=0;for(var i=0;i<o;i++)t[i].x=t[o].x-300*(o-i);for(var r=t.length-1;r>o;r--)t[r].x=t[o].x+300*(r-o);var a=this.form[o].name,c=this.form[o].price;this.price.getChildByName("number").getComponent(cc.Label).string=c+"",this.node.getChildByName("bg").getChildByName("charcter_name").getComponent(cc.Label).string=a,this.index=o;var n=this.buttonNode.getChildByName("button_label").getComponent(cc.Label);this.form[this.index].ispurchased?n.string="\u9009\u62e9":n.string="\u8d2d\u4e70"}},t.prototype.buyCharcter=function(){cc.log("\u6d4b\u8bd5");var e=this.buttonNode.getChildByName("button_label").getComponent(cc.Label),t=this.form[this.index].price;this.form[this.index].ispurchased?(c.default.inst.charcter_index=this.index,c.default.inst.initGame()):t<c.default.inst.money&&(this.form[this.index].ispurchased=!0,c.default.inst.money-=t,e.string="\u9009\u62e9")},t.prototype.start=function(){},a([l(cc.Node)],t.prototype,"moneyNode",void 0),a([l(cc.Node)],t.prototype,"price",void 0),a([l(cc.Node)],t.prototype,"buttonNode",void 0),a([s],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./game":"game"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"9b26dERuIVMp6Pj/x/xAdtc","player");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,i){var r,a=arguments.length,c=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(c=(a<3?r(c):a>3?r(t,o,c):r(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},a([s(cc.Label)],t.prototype,"label",void 0),a([s],t.prototype,"text",void 0),a([n],t)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["block","game","player","playerselect"]);